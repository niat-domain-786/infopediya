0 3 d17e22ee4e8dc51912d0566f3df08c78 a:5:{s:8:"dataType";s:8:"resource";s:3:"url";s:60:"https://infopediya.com/wp-content/mmr/5ae72104-1607680429.js";s:8:"mimeType";s:22:"application/javascript";s:4:"blob";s:232276:"LyohIFRoaXMgZmlsZSBpcyBhdXRvLWdlbmVyYXRlZCAqLwohZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZSgiaG92ZXJpbnRlbnQiLFsibW9kdWxlIl0sdCk7ZWxzZSBpZigidW5kZWZpbmVkIiE9dHlwZW9mIGV4cG9ydHMpdChtb2R1bGUpO2Vsc2V7dmFyIG49e2V4cG9ydHM6e319O3QobiksZS5ob3ZlcmludGVudD1uLmV4cG9ydHN9fSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF07Zm9yKHZhciBvIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sbykmJihlW29dPW5bb10pfXJldHVybiBlfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSxuLG8pe2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4geSYmKHk9Y2xlYXJUaW1lb3V0KHkpKSxiPTAscD92b2lkIDA6by5jYWxsKGUsdCl9ZnVuY3Rpb24gcihlKXttPWUuY2xpZW50WCxkPWUuY2xpZW50WX1mdW5jdGlvbiB1KGUsdCl7aWYoeSYmKHk9Y2xlYXJUaW1lb3V0KHkpKSxNYXRoLmFicyhoLW0pK01hdGguYWJzKEUtZCk8eC5zZW5zaXRpdml0eSlyZXR1cm4gYj0xLHA/dm9pZCAwOm4uY2FsbChlLHQpO2g9bSxFPWQseT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dShlLHQpfSx4LmludGVydmFsKX1mdW5jdGlvbiBzKHQpe3JldHVybiBMPSEwLHkmJih5PWNsZWFyVGltZW91dCh5KSksZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHIsITEpLDEhPT1iJiYoaD10LmNsaWVudFgsRT10LmNsaWVudFksZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHIsITEpLHk9c2V0VGltZW91dChmdW5jdGlvbigpe3UoZSx0KX0seC5pbnRlcnZhbCkpLHRoaXN9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gTD0hMSx5JiYoeT1jbGVhclRpbWVvdXQoeSkpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixyLCExKSwxPT09YiYmKHk9c2V0VGltZW91dChmdW5jdGlvbigpe2koZSx0KX0seC50aW1lb3V0KSksdGhpc31mdW5jdGlvbiB2KHQpe0x8fChwPSEwLG4uY2FsbChlLHQpKX1mdW5jdGlvbiBhKHQpeyFMJiZwJiYocD0hMSxvLmNhbGwoZSx0KSl9ZnVuY3Rpb24gZigpe2UuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHYsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsYSwhMSl9ZnVuY3Rpb24gbCgpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHYsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmx1ciIsYSwhMSl9dmFyIG0sZCxoLEUsTD0hMSxwPSExLFQ9e30sYj0wLHk9MCx4PXtzZW5zaXRpdml0eTo3LGludGVydmFsOjEwMCx0aW1lb3V0OjAsaGFuZGxlRm9jdXM6ITF9O3JldHVybiBULm9wdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIG49ZS5oYW5kbGVGb2N1cyE9PXguaGFuZGxlRm9jdXM7cmV0dXJuIHg9dCh7fSx4LGUpLG4mJih4LmhhbmRsZUZvY3VzP2YoKTpsKCkpLFR9LFQucmVtb3ZlPWZ1bmN0aW9uKCl7ZSYmKGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIixzLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IixjLCExKSxsKCkpfSxlJiYoZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLHMsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLGMsITEpKSxUfX0pOzsoZnVuY3Rpb24oZG9jdW1lbnQsd2luZG93LG5hdmlnYXRvcil7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsZnVuY3Rpb24oKXt2YXIgYWRtaW5CYXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dwYWRtaW5iYXInKSx0b3BNZW51SXRlbXMsYWxsTWVudUl0ZW1zLGFkbWluQmFyTG9nb3V0LGFkbWluQmFyU2VhcmNoRm9ybSxzaG9ydGxpbmssc2tpcExpbmssbW9iaWxlRXZlbnQsYWRtaW5CYXJTZWFyY2hJbnB1dCxpO2lmKCFhZG1pbkJhcnx8ISgncXVlcnlTZWxlY3RvckFsbCdpbiBhZG1pbkJhcikpe3JldHVybjt9CnRvcE1lbnVJdGVtcz1hZG1pbkJhci5xdWVyeVNlbGVjdG9yQWxsKCdsaS5tZW51cG9wJyk7YWxsTWVudUl0ZW1zPWFkbWluQmFyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hYi1pdGVtJyk7YWRtaW5CYXJMb2dvdXQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dwLWFkbWluLWJhci1sb2dvdXQnKTthZG1pbkJhclNlYXJjaEZvcm09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkbWluYmFyc2VhcmNoJyk7c2hvcnRsaW5rPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cC1hZG1pbi1iYXItZ2V0LXNob3J0bGluaycpO3NraXBMaW5rPWFkbWluQmFyLnF1ZXJ5U2VsZWN0b3IoJy5zY3JlZW4tcmVhZGVyLXNob3J0Y3V0Jyk7bW9iaWxlRXZlbnQ9L01vYmlsZVwvLitTYWZhcmkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk/J3RvdWNoc3RhcnQnOidjbGljayc7cmVtb3ZlQ2xhc3MoYWRtaW5CYXIsJ25vanMnKTtpZignb250b3VjaHN0YXJ0J2luIHdpbmRvdyl7ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKG1vYmlsZUV2ZW50LGZ1bmN0aW9uKGUpe2lmKCFnZXRDbG9zZXN0KGUudGFyZ2V0LCdsaS5tZW51cG9wJykpe3JlbW92ZUFsbEhvdmVyQ2xhc3ModG9wTWVudUl0ZW1zKTt9fSk7YWRtaW5CYXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsZnVuY3Rpb24gYmluZE1vYmlsZUV2ZW50cygpe2Zvcih2YXIgaT0wO2k8dG9wTWVudUl0ZW1zLmxlbmd0aDtpKyspe3RvcE1lbnVJdGVtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsbW9iaWxlSG92ZXIuYmluZChudWxsLHRvcE1lbnVJdGVtcykpO30KYWRtaW5CYXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsYmluZE1vYmlsZUV2ZW50cyk7fSk7fQphZG1pbkJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2Nyb2xsVG9Ub3ApO2ZvcihpPTA7aTx0b3BNZW51SXRlbXMubGVuZ3RoO2krKyl7d2luZG93LmhvdmVyaW50ZW50KHRvcE1lbnVJdGVtc1tpXSxhZGRDbGFzcy5iaW5kKG51bGwsdG9wTWVudUl0ZW1zW2ldLCdob3ZlcicpLHJlbW92ZUNsYXNzLmJpbmQobnVsbCx0b3BNZW51SXRlbXNbaV0sJ2hvdmVyJykpLm9wdGlvbnMoe3RpbWVvdXQ6MTgwfSk7dG9wTWVudUl0ZW1zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRvZ2dsZUhvdmVySWZFbnRlcik7fQpmb3IoaT0wO2k8YWxsTWVudUl0ZW1zLmxlbmd0aDtpKyspe2FsbE1lbnVJdGVtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJyxyZW1vdmVIb3ZlcklmRXNjYXBlKTt9CmlmKGFkbWluQmFyU2VhcmNoRm9ybSl7YWRtaW5CYXJTZWFyY2hJbnB1dD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRtaW5iYXItc2VhcmNoJyk7YWRtaW5CYXJTZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsZnVuY3Rpb24oKXthZGRDbGFzcyhhZG1pbkJhclNlYXJjaEZvcm0sJ2FkbWluYmFyLWZvY3VzZWQnKTt9KTthZG1pbkJhclNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLGZ1bmN0aW9uKCl7cmVtb3ZlQ2xhc3MoYWRtaW5CYXJTZWFyY2hGb3JtLCdhZG1pbmJhci1mb2N1c2VkJyk7fSk7fQppZihza2lwTGluayl7c2tpcExpbmsuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsZm9jdXNUYXJnZXRBZnRlckVudGVyKTt9CmlmKHNob3J0bGluayl7c2hvcnRsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjbGlja1Nob3J0bGluayk7fQppZih3aW5kb3cubG9jYXRpb24uaGFzaCl7d2luZG93LnNjcm9sbEJ5KDAsLTMyKTt9CmlmKGFkbWluQmFyTG9nb3V0KXthZG1pbkJhckxvZ291dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZW1wdHlTZXNzaW9uU3RvcmFnZSk7fX0pO2Z1bmN0aW9uIHJlbW92ZUhvdmVySWZFc2NhcGUoZXZlbnQpe3ZhciB3cmFwcGVyO2lmKGV2ZW50LndoaWNoIT09Mjcpe3JldHVybjt9CndyYXBwZXI9Z2V0Q2xvc2VzdChldmVudC50YXJnZXQsJy5tZW51cG9wJyk7aWYoIXdyYXBwZXIpe3JldHVybjt9CndyYXBwZXIucXVlcnlTZWxlY3RvcignLm1lbnVwb3AgPiAuYWItaXRlbScpLmZvY3VzKCk7cmVtb3ZlQ2xhc3Mod3JhcHBlciwnaG92ZXInKTt9CmZ1bmN0aW9uIHRvZ2dsZUhvdmVySWZFbnRlcihldmVudCl7dmFyIHdyYXBwZXI7aWYoZXZlbnQud2hpY2ghPT0xMyl7cmV0dXJuO30KaWYoISFnZXRDbG9zZXN0KGV2ZW50LnRhcmdldCwnLmFiLXN1Yi13cmFwcGVyJykpe3JldHVybjt9CndyYXBwZXI9Z2V0Q2xvc2VzdChldmVudC50YXJnZXQsJy5tZW51cG9wJyk7aWYoIXdyYXBwZXIpe3JldHVybjt9CmV2ZW50LnByZXZlbnREZWZhdWx0KCk7aWYoaGFzQ2xhc3Mod3JhcHBlciwnaG92ZXInKSl7cmVtb3ZlQ2xhc3Mod3JhcHBlciwnaG92ZXInKTt9ZWxzZXthZGRDbGFzcyh3cmFwcGVyLCdob3ZlcicpO319CmZ1bmN0aW9uIGZvY3VzVGFyZ2V0QWZ0ZXJFbnRlcihldmVudCl7dmFyIGlkLHVzZXJBZ2VudDtpZihldmVudC53aGljaCE9PTEzKXtyZXR1cm47fQppZD1ldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7dXNlckFnZW50PW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtpZih1c2VyQWdlbnQuaW5kZXhPZignYXBwbGV3ZWJraXQnKT4tMSYmaWQmJmlkLmNoYXJBdCgwKT09PScjJyl7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0YXJnZXQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQucmVwbGFjZSgnIycsJycpKTtpZih0YXJnZXQpe3RhcmdldC5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywnMCcpO3RhcmdldC5mb2N1cygpO319LDEwMCk7fX0KZnVuY3Rpb24gbW9iaWxlSG92ZXIodG9wTWVudUl0ZW1zLGV2ZW50KXt2YXIgd3JhcHBlcjtpZighIWdldENsb3Nlc3QoZXZlbnQudGFyZ2V0LCcuYWItc3ViLXdyYXBwZXInKSl7cmV0dXJuO30KZXZlbnQucHJldmVudERlZmF1bHQoKTt3cmFwcGVyPWdldENsb3Nlc3QoZXZlbnQudGFyZ2V0LCcubWVudXBvcCcpO2lmKCF3cmFwcGVyKXtyZXR1cm47fQppZihoYXNDbGFzcyh3cmFwcGVyLCdob3ZlcicpKXtyZW1vdmVDbGFzcyh3cmFwcGVyLCdob3ZlcicpO31lbHNle3JlbW92ZUFsbEhvdmVyQ2xhc3ModG9wTWVudUl0ZW1zKTthZGRDbGFzcyh3cmFwcGVyLCdob3ZlcicpO319CmZ1bmN0aW9uIGNsaWNrU2hvcnRsaW5rKGV2ZW50KXt2YXIgd3JhcHBlcj1ldmVudC50YXJnZXQucGFyZW50Tm9kZSxpbnB1dDtpZih3cmFwcGVyKXtpbnB1dD13cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5zaG9ydGxpbmstaW5wdXQnKTt9CmlmKCFpbnB1dCl7cmV0dXJuO30KaWYoZXZlbnQucHJldmVudERlZmF1bHQpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fQpldmVudC5yZXR1cm5WYWx1ZT1mYWxzZTthZGRDbGFzcyh3cmFwcGVyLCdzZWxlY3RlZCcpO2lucHV0LmZvY3VzKCk7aW5wdXQuc2VsZWN0KCk7aW5wdXQub25ibHVyPWZ1bmN0aW9uKCl7cmVtb3ZlQ2xhc3Mod3JhcHBlciwnc2VsZWN0ZWQnKTt9O3JldHVybiBmYWxzZTt9CmZ1bmN0aW9uIGVtcHR5U2Vzc2lvblN0b3JhZ2UoKXtpZignc2Vzc2lvblN0b3JhZ2UnaW4gd2luZG93KXt0cnl7Zm9yKHZhciBrZXkgaW4gc2Vzc2lvblN0b3JhZ2Upe2lmKGtleS5pbmRleE9mKCd3cC1hdXRvc2F2ZS0nKT4tMSl7c2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO319fWNhdGNoKGVyKXt9fX0KZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpe3ZhciBjbGFzc05hbWVzO2lmKCFlbGVtZW50KXtyZXR1cm4gZmFsc2U7fQppZihlbGVtZW50LmNsYXNzTGlzdCYmZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMpe3JldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO31lbHNlIGlmKGVsZW1lbnQuY2xhc3NOYW1lKXtjbGFzc05hbWVzPWVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KCcgJyk7cmV0dXJuIGNsYXNzTmFtZXMuaW5kZXhPZihjbGFzc05hbWUpPi0xO30KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpe2lmKCFlbGVtZW50KXtyZXR1cm47fQppZihlbGVtZW50LmNsYXNzTGlzdCYmZWxlbWVudC5jbGFzc0xpc3QuYWRkKXtlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTt9ZWxzZSBpZighaGFzQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpKXtpZihlbGVtZW50LmNsYXNzTmFtZSl7ZWxlbWVudC5jbGFzc05hbWUrPScgJzt9CmVsZW1lbnQuY2xhc3NOYW1lKz1jbGFzc05hbWU7fX0KZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpe3ZhciB0ZXN0TmFtZSxjbGFzc2VzO2lmKCFlbGVtZW50fHwhaGFzQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpKXtyZXR1cm47fQppZihlbGVtZW50LmNsYXNzTGlzdCYmZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKXtlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTt9ZWxzZXt0ZXN0TmFtZT0nICcrY2xhc3NOYW1lKycgJztjbGFzc2VzPScgJytlbGVtZW50LmNsYXNzTmFtZSsnICc7d2hpbGUoY2xhc3Nlcy5pbmRleE9mKHRlc3ROYW1lKT4tMSl7Y2xhc3Nlcz1jbGFzc2VzLnJlcGxhY2UodGVzdE5hbWUsJycpO30KZWxlbWVudC5jbGFzc05hbWU9Y2xhc3Nlcy5yZXBsYWNlKC9eW1xzXSt8W1xzXSskL2csJycpO319CmZ1bmN0aW9uIHJlbW92ZUFsbEhvdmVyQ2xhc3ModG9wTWVudUl0ZW1zKXtpZih0b3BNZW51SXRlbXMmJnRvcE1lbnVJdGVtcy5sZW5ndGgpe2Zvcih2YXIgaT0wO2k8dG9wTWVudUl0ZW1zLmxlbmd0aDtpKyspe3JlbW92ZUNsYXNzKHRvcE1lbnVJdGVtc1tpXSwnaG92ZXInKTt9fX0KZnVuY3Rpb24gc2Nyb2xsVG9Ub3AoZXZlbnQpe2lmKGV2ZW50LnRhcmdldCYmZXZlbnQudGFyZ2V0LmlkIT09J3dwYWRtaW5iYXInJiZldmVudC50YXJnZXQuaWQhPT0nd3AtYWRtaW4tYmFyLXRvcC1zZWNvbmRhcnknKXtyZXR1cm47fQp0cnl7d2luZG93LnNjcm9sbFRvKHt0b3A6LTMyLGxlZnQ6MCxiZWhhdmlvcjonc21vb3RoJ30pO31jYXRjaChlcil7d2luZG93LnNjcm9sbFRvKDAsLTMyKTt9fQpmdW5jdGlvbiBnZXRDbG9zZXN0KGVsLHNlbGVjdG9yKXtpZighd2luZG93LkVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpe3dpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzPXdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3J8fHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3J8fHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3Rvcnx8d2luZG93LkVsZW1lbnQucHJvdG90eXBlLm9NYXRjaGVzU2VsZWN0b3J8fHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGZ1bmN0aW9uKHMpe3ZhciBtYXRjaGVzPSh0aGlzLmRvY3VtZW50fHx0aGlzLm93bmVyRG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwocyksaT1tYXRjaGVzLmxlbmd0aDt3aGlsZSgtLWk+PTAmJm1hdGNoZXMuaXRlbShpKSE9PXRoaXMpe30KcmV0dXJuIGk+LTE7fTt9CmZvcig7ZWwmJmVsIT09ZG9jdW1lbnQ7ZWw9ZWwucGFyZW50Tm9kZSl7aWYoZWwubWF0Y2hlcyhzZWxlY3Rvcikpe3JldHVybiBlbDt9fQpyZXR1cm4gbnVsbDt9fSkoZG9jdW1lbnQsd2luZG93LG5hdmlnYXRvcik7OwovKiEKICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2My41LjEKICogaHR0cHM6Ly9qcXVlcnkuY29tLwogKgogKiBJbmNsdWRlcyBTaXp6bGUuanMKICogaHR0cHM6Ly9zaXp6bGVqcy5jb20vCiAqCiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCiAqIGh0dHBzOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIERhdGU6IDIwMjAtMDUtMDRUMjI6NDlaCiAqLwooZnVuY3Rpb24oZ2xvYmFsLGZhY3RvcnkpeyJ1c2Ugc3RyaWN0IjtpZih0eXBlb2YgbW9kdWxlPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUuZXhwb3J0cz09PSJvYmplY3QiKXttb2R1bGUuZXhwb3J0cz1nbG9iYWwuZG9jdW1lbnQ/ZmFjdG9yeShnbG9iYWwsdHJ1ZSk6ZnVuY3Rpb24odyl7aWYoIXcuZG9jdW1lbnQpe3Rocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO30KcmV0dXJuIGZhY3Rvcnkodyk7fTt9ZWxzZXtmYWN0b3J5KGdsb2JhbCk7fX0pKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6dGhpcyxmdW5jdGlvbih3aW5kb3csbm9HbG9iYWwpeyJ1c2Ugc3RyaWN0Ijt2YXIgYXJyPVtdO3ZhciBnZXRQcm90bz1PYmplY3QuZ2V0UHJvdG90eXBlT2Y7dmFyIHNsaWNlPWFyci5zbGljZTt2YXIgZmxhdD1hcnIuZmxhdD9mdW5jdGlvbihhcnJheSl7cmV0dXJuIGFyci5mbGF0LmNhbGwoYXJyYXkpO306ZnVuY3Rpb24oYXJyYXkpe3JldHVybiBhcnIuY29uY2F0LmFwcGx5KFtdLGFycmF5KTt9O3ZhciBwdXNoPWFyci5wdXNoO3ZhciBpbmRleE9mPWFyci5pbmRleE9mO3ZhciBjbGFzczJ0eXBlPXt9O3ZhciB0b1N0cmluZz1jbGFzczJ0eXBlLnRvU3RyaW5nO3ZhciBoYXNPd249Y2xhc3MydHlwZS5oYXNPd25Qcm9wZXJ0eTt2YXIgZm5Ub1N0cmluZz1oYXNPd24udG9TdHJpbmc7dmFyIE9iamVjdEZ1bmN0aW9uU3RyaW5nPWZuVG9TdHJpbmcuY2FsbChPYmplY3QpO3ZhciBzdXBwb3J0PXt9O3ZhciBpc0Z1bmN0aW9uPWZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iaj09PSJmdW5jdGlvbiImJnR5cGVvZiBvYmoubm9kZVR5cGUhPT0ibnVtYmVyIjt9O3ZhciBpc1dpbmRvdz1mdW5jdGlvbiBpc1dpbmRvdyhvYmope3JldHVybiBvYmohPW51bGwmJm9iaj09PW9iai53aW5kb3c7fTt2YXIgZG9jdW1lbnQ9d2luZG93LmRvY3VtZW50O3ZhciBwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzPXt0eXBlOnRydWUsc3JjOnRydWUsbm9uY2U6dHJ1ZSxub01vZHVsZTp0cnVlfTtmdW5jdGlvbiBET01FdmFsKGNvZGUsbm9kZSxkb2Mpe2RvYz1kb2N8fGRvY3VtZW50O3ZhciBpLHZhbCxzY3JpcHQ9ZG9jLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO3NjcmlwdC50ZXh0PWNvZGU7aWYobm9kZSl7Zm9yKGkgaW4gcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyl7dmFsPW5vZGVbaV18fG5vZGUuZ2V0QXR0cmlidXRlJiZub2RlLmdldEF0dHJpYnV0ZShpKTtpZih2YWwpe3NjcmlwdC5zZXRBdHRyaWJ1dGUoaSx2YWwpO319fQpkb2MuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTt9CmZ1bmN0aW9uIHRvVHlwZShvYmope2lmKG9iaj09bnVsbCl7cmV0dXJuIG9iaisiIjt9CnJldHVybiB0eXBlb2Ygb2JqPT09Im9iamVjdCJ8fHR5cGVvZiBvYmo9PT0iZnVuY3Rpb24iP2NsYXNzMnR5cGVbdG9TdHJpbmcuY2FsbChvYmopXXx8Im9iamVjdCI6dHlwZW9mIG9iajt9CnZhcgp2ZXJzaW9uPSIzLjUuMSIsalF1ZXJ5PWZ1bmN0aW9uKHNlbGVjdG9yLGNvbnRleHQpe3JldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoc2VsZWN0b3IsY29udGV4dCk7fTtqUXVlcnkuZm49alF1ZXJ5LnByb3RvdHlwZT17anF1ZXJ5OnZlcnNpb24sY29uc3RydWN0b3I6alF1ZXJ5LGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gc2xpY2UuY2FsbCh0aGlzKTt9LGdldDpmdW5jdGlvbihudW0pe2lmKG51bT09bnVsbCl7cmV0dXJuIHNsaWNlLmNhbGwodGhpcyk7fQpyZXR1cm4gbnVtPDA/dGhpc1tudW0rdGhpcy5sZW5ndGhdOnRoaXNbbnVtXTt9LHB1c2hTdGFjazpmdW5jdGlvbihlbGVtcyl7dmFyIHJldD1qUXVlcnkubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGVsZW1zKTtyZXQucHJldk9iamVjdD10aGlzO3JldHVybiByZXQ7fSxlYWNoOmZ1bmN0aW9uKGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmVhY2godGhpcyxjYWxsYmFjayk7fSxtYXA6ZnVuY3Rpb24oY2FsbGJhY2spe3JldHVybiB0aGlzLnB1c2hTdGFjayhqUXVlcnkubWFwKHRoaXMsZnVuY3Rpb24oZWxlbSxpKXtyZXR1cm4gY2FsbGJhY2suY2FsbChlbGVtLGksZWxlbSk7fSkpO30sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soc2xpY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKTt9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCk7fSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpO30sZXZlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhqUXVlcnkuZ3JlcCh0aGlzLGZ1bmN0aW9uKF9lbGVtLGkpe3JldHVybihpKzEpJTI7fSkpO30sb2RkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeS5ncmVwKHRoaXMsZnVuY3Rpb24oX2VsZW0saSl7cmV0dXJuIGklMjt9KSk7fSxlcTpmdW5jdGlvbihpKXt2YXIgbGVuPXRoaXMubGVuZ3RoLGo9K2krKGk8MD9sZW46MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGo+PTAmJmo8bGVuP1t0aGlzW2pdXTpbXSk7fSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCk7fSxwdXNoOnB1c2gsc29ydDphcnIuc29ydCxzcGxpY2U6YXJyLnNwbGljZX07alF1ZXJ5LmV4dGVuZD1qUXVlcnkuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIG9wdGlvbnMsbmFtZSxzcmMsY29weSxjb3B5SXNBcnJheSxjbG9uZSx0YXJnZXQ9YXJndW1lbnRzWzBdfHx7fSxpPTEsbGVuZ3RoPWFyZ3VtZW50cy5sZW5ndGgsZGVlcD1mYWxzZTtpZih0eXBlb2YgdGFyZ2V0PT09ImJvb2xlYW4iKXtkZWVwPXRhcmdldDt0YXJnZXQ9YXJndW1lbnRzW2ldfHx7fTtpKys7fQppZih0eXBlb2YgdGFyZ2V0IT09Im9iamVjdCImJiFpc0Z1bmN0aW9uKHRhcmdldCkpe3RhcmdldD17fTt9CmlmKGk9PT1sZW5ndGgpe3RhcmdldD10aGlzO2ktLTt9CmZvcig7aTxsZW5ndGg7aSsrKXtpZigob3B0aW9ucz1hcmd1bWVudHNbaV0pIT1udWxsKXtmb3IobmFtZSBpbiBvcHRpb25zKXtjb3B5PW9wdGlvbnNbbmFtZV07aWYobmFtZT09PSJfX3Byb3RvX18ifHx0YXJnZXQ9PT1jb3B5KXtjb250aW51ZTt9CmlmKGRlZXAmJmNvcHkmJihqUXVlcnkuaXNQbGFpbk9iamVjdChjb3B5KXx8KGNvcHlJc0FycmF5PUFycmF5LmlzQXJyYXkoY29weSkpKSl7c3JjPXRhcmdldFtuYW1lXTtpZihjb3B5SXNBcnJheSYmIUFycmF5LmlzQXJyYXkoc3JjKSl7Y2xvbmU9W107fWVsc2UgaWYoIWNvcHlJc0FycmF5JiYhalF1ZXJ5LmlzUGxhaW5PYmplY3Qoc3JjKSl7Y2xvbmU9e307fWVsc2V7Y2xvbmU9c3JjO30KY29weUlzQXJyYXk9ZmFsc2U7dGFyZ2V0W25hbWVdPWpRdWVyeS5leHRlbmQoZGVlcCxjbG9uZSxjb3B5KTt9ZWxzZSBpZihjb3B5IT09dW5kZWZpbmVkKXt0YXJnZXRbbmFtZV09Y29weTt9fX19CnJldHVybiB0YXJnZXQ7fTtqUXVlcnkuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyh2ZXJzaW9uK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6dHJ1ZSxlcnJvcjpmdW5jdGlvbihtc2cpe3Rocm93IG5ldyBFcnJvcihtc2cpO30sbm9vcDpmdW5jdGlvbigpe30saXNQbGFpbk9iamVjdDpmdW5jdGlvbihvYmope3ZhciBwcm90byxDdG9yO2lmKCFvYmp8fHRvU3RyaW5nLmNhbGwob2JqKSE9PSJbb2JqZWN0IE9iamVjdF0iKXtyZXR1cm4gZmFsc2U7fQpwcm90bz1nZXRQcm90byhvYmopO2lmKCFwcm90byl7cmV0dXJuIHRydWU7fQpDdG9yPWhhc093bi5jYWxsKHByb3RvLCJjb25zdHJ1Y3RvciIpJiZwcm90by5jb25zdHJ1Y3RvcjtyZXR1cm4gdHlwZW9mIEN0b3I9PT0iZnVuY3Rpb24iJiZmblRvU3RyaW5nLmNhbGwoQ3Rvcik9PT1PYmplY3RGdW5jdGlvblN0cmluZzt9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24ob2JqKXt2YXIgbmFtZTtmb3IobmFtZSBpbiBvYmope3JldHVybiBmYWxzZTt9CnJldHVybiB0cnVlO30sZ2xvYmFsRXZhbDpmdW5jdGlvbihjb2RlLG9wdGlvbnMsZG9jKXtET01FdmFsKGNvZGUse25vbmNlOm9wdGlvbnMmJm9wdGlvbnMubm9uY2V9LGRvYyk7fSxlYWNoOmZ1bmN0aW9uKG9iaixjYWxsYmFjayl7dmFyIGxlbmd0aCxpPTA7aWYoaXNBcnJheUxpa2Uob2JqKSl7bGVuZ3RoPW9iai5sZW5ndGg7Zm9yKDtpPGxlbmd0aDtpKyspe2lmKGNhbGxiYWNrLmNhbGwob2JqW2ldLGksb2JqW2ldKT09PWZhbHNlKXticmVhazt9fX1lbHNle2ZvcihpIGluIG9iail7aWYoY2FsbGJhY2suY2FsbChvYmpbaV0saSxvYmpbaV0pPT09ZmFsc2Upe2JyZWFrO319fQpyZXR1cm4gb2JqO30sbWFrZUFycmF5OmZ1bmN0aW9uKGFycixyZXN1bHRzKXt2YXIgcmV0PXJlc3VsdHN8fFtdO2lmKGFyciE9bnVsbCl7aWYoaXNBcnJheUxpa2UoT2JqZWN0KGFycikpKXtqUXVlcnkubWVyZ2UocmV0LHR5cGVvZiBhcnI9PT0ic3RyaW5nIj9bYXJyXTphcnIpO31lbHNle3B1c2guY2FsbChyZXQsYXJyKTt9fQpyZXR1cm4gcmV0O30saW5BcnJheTpmdW5jdGlvbihlbGVtLGFycixpKXtyZXR1cm4gYXJyPT1udWxsPy0xOmluZGV4T2YuY2FsbChhcnIsZWxlbSxpKTt9LG1lcmdlOmZ1bmN0aW9uKGZpcnN0LHNlY29uZCl7dmFyIGxlbj0rc2Vjb25kLmxlbmd0aCxqPTAsaT1maXJzdC5sZW5ndGg7Zm9yKDtqPGxlbjtqKyspe2ZpcnN0W2krK109c2Vjb25kW2pdO30KZmlyc3QubGVuZ3RoPWk7cmV0dXJuIGZpcnN0O30sZ3JlcDpmdW5jdGlvbihlbGVtcyxjYWxsYmFjayxpbnZlcnQpe3ZhciBjYWxsYmFja0ludmVyc2UsbWF0Y2hlcz1bXSxpPTAsbGVuZ3RoPWVsZW1zLmxlbmd0aCxjYWxsYmFja0V4cGVjdD0haW52ZXJ0O2Zvcig7aTxsZW5ndGg7aSsrKXtjYWxsYmFja0ludmVyc2U9IWNhbGxiYWNrKGVsZW1zW2ldLGkpO2lmKGNhbGxiYWNrSW52ZXJzZSE9PWNhbGxiYWNrRXhwZWN0KXttYXRjaGVzLnB1c2goZWxlbXNbaV0pO319CnJldHVybiBtYXRjaGVzO30sbWFwOmZ1bmN0aW9uKGVsZW1zLGNhbGxiYWNrLGFyZyl7dmFyIGxlbmd0aCx2YWx1ZSxpPTAscmV0PVtdO2lmKGlzQXJyYXlMaWtlKGVsZW1zKSl7bGVuZ3RoPWVsZW1zLmxlbmd0aDtmb3IoO2k8bGVuZ3RoO2krKyl7dmFsdWU9Y2FsbGJhY2soZWxlbXNbaV0saSxhcmcpO2lmKHZhbHVlIT1udWxsKXtyZXQucHVzaCh2YWx1ZSk7fX19ZWxzZXtmb3IoaSBpbiBlbGVtcyl7dmFsdWU9Y2FsbGJhY2soZWxlbXNbaV0saSxhcmcpO2lmKHZhbHVlIT1udWxsKXtyZXQucHVzaCh2YWx1ZSk7fX19CnJldHVybiBmbGF0KHJldCk7fSxndWlkOjEsc3VwcG9ydDpzdXBwb3J0fSk7aWYodHlwZW9mIFN5bWJvbD09PSJmdW5jdGlvbiIpe2pRdWVyeS5mbltTeW1ib2wuaXRlcmF0b3JdPWFycltTeW1ib2wuaXRlcmF0b3JdO30KalF1ZXJ5LmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKF9pLG5hbWUpe2NsYXNzMnR5cGVbIltvYmplY3QgIituYW1lKyJdIl09bmFtZS50b0xvd2VyQ2FzZSgpO30pO2Z1bmN0aW9uIGlzQXJyYXlMaWtlKG9iail7dmFyIGxlbmd0aD0hIW9iaiYmImxlbmd0aCJpbiBvYmomJm9iai5sZW5ndGgsdHlwZT10b1R5cGUob2JqKTtpZihpc0Z1bmN0aW9uKG9iail8fGlzV2luZG93KG9iaikpe3JldHVybiBmYWxzZTt9CnJldHVybiB0eXBlPT09ImFycmF5Inx8bGVuZ3RoPT09MHx8dHlwZW9mIGxlbmd0aD09PSJudW1iZXIiJiZsZW5ndGg+MCYmKGxlbmd0aC0xKWluIG9iajt9CnZhciBTaXp6bGU9Ci8qIQogKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4zLjUKICogaHR0cHM6Ly9zaXp6bGVqcy5jb20vCiAqCiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCiAqIGh0dHBzOi8vanMuZm91bmRhdGlvbi8KICoKICogRGF0ZTogMjAyMC0wMy0xNAogKi8KKGZ1bmN0aW9uKHdpbmRvdyl7dmFyIGksc3VwcG9ydCxFeHByLGdldFRleHQsaXNYTUwsdG9rZW5pemUsY29tcGlsZSxzZWxlY3Qsb3V0ZXJtb3N0Q29udGV4dCxzb3J0SW5wdXQsaGFzRHVwbGljYXRlLHNldERvY3VtZW50LGRvY3VtZW50LGRvY0VsZW0sZG9jdW1lbnRJc0hUTUwscmJ1Z2d5UVNBLHJidWdneU1hdGNoZXMsbWF0Y2hlcyxjb250YWlucyxleHBhbmRvPSJzaXp6bGUiKzEqbmV3IERhdGUoKSxwcmVmZXJyZWREb2M9d2luZG93LmRvY3VtZW50LGRpcnJ1bnM9MCxkb25lPTAsY2xhc3NDYWNoZT1jcmVhdGVDYWNoZSgpLHRva2VuQ2FjaGU9Y3JlYXRlQ2FjaGUoKSxjb21waWxlckNhY2hlPWNyZWF0ZUNhY2hlKCksbm9ubmF0aXZlU2VsZWN0b3JDYWNoZT1jcmVhdGVDYWNoZSgpLHNvcnRPcmRlcj1mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtoYXNEdXBsaWNhdGU9dHJ1ZTt9CnJldHVybiAwO30saGFzT3duPSh7fSkuaGFzT3duUHJvcGVydHksYXJyPVtdLHBvcD1hcnIucG9wLHB1c2hOYXRpdmU9YXJyLnB1c2gscHVzaD1hcnIucHVzaCxzbGljZT1hcnIuc2xpY2UsaW5kZXhPZj1mdW5jdGlvbihsaXN0LGVsZW0pe3ZhciBpPTAsbGVuPWxpc3QubGVuZ3RoO2Zvcig7aTxsZW47aSsrKXtpZihsaXN0W2ldPT09ZWxlbSl7cmV0dXJuIGk7fX0KcmV0dXJuLTE7fSxib29sZWFucz0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufCIrImlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLHdoaXRlc3BhY2U9IltcXHgyMFxcdFxcclxcblxcZl0iLGlkZW50aWZpZXI9Iig/OlxcXFxbXFxkYS1mQS1GXXsxLDZ9Iit3aGl0ZXNwYWNlKyI/fFxcXFxbXlxcclxcblxcZl18W1xcdy1dfFteXDAtXFx4N2ZdKSsiLGF0dHJpYnV0ZXM9IlxcWyIrd2hpdGVzcGFjZSsiKigiK2lkZW50aWZpZXIrIikoPzoiK3doaXRlc3BhY2UrIiooWypeJHwhfl0/PSkiK3doaXRlc3BhY2UrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitpZGVudGlmaWVyKyIpKXwpIisKd2hpdGVzcGFjZSsiKlxcXSIscHNldWRvcz0iOigiK2lkZW50aWZpZXIrIikoPzpcXCgoIisiKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwiKyIoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK2F0dHJpYnV0ZXMrIikqKXwiKyIuKiIrIilcXCl8KSIscndoaXRlc3BhY2U9bmV3IFJlZ0V4cCh3aGl0ZXNwYWNlKyIrIiwiZyIpLHJ0cmltPW5ldyBSZWdFeHAoIl4iK3doaXRlc3BhY2UrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrCndoaXRlc3BhY2UrIiskIiwiZyIpLHJjb21tYT1uZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIqLCIrd2hpdGVzcGFjZSsiKiIpLHJjb21iaW5hdG9ycz1uZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIqKFs+K35dfCIrd2hpdGVzcGFjZSsiKSIrd2hpdGVzcGFjZSsiKiIpLHJkZXNjZW5kPW5ldyBSZWdFeHAod2hpdGVzcGFjZSsifD4iKSxycHNldWRvPW5ldyBSZWdFeHAocHNldWRvcykscmlkZW50aWZpZXI9bmV3IFJlZ0V4cCgiXiIraWRlbnRpZmllcisiJCIpLG1hdGNoRXhwcj17IklEIjpuZXcgUmVnRXhwKCJeIygiK2lkZW50aWZpZXIrIikiKSwiQ0xBU1MiOm5ldyBSZWdFeHAoIl5cXC4oIitpZGVudGlmaWVyKyIpIiksIlRBRyI6bmV3IFJlZ0V4cCgiXigiK2lkZW50aWZpZXIrInxbKl0pIiksIkFUVFIiOm5ldyBSZWdFeHAoIl4iK2F0dHJpYnV0ZXMpLCJQU0VVRE8iOm5ldyBSZWdFeHAoIl4iK3BzZXVkb3MpLCJDSElMRCI6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIisKd2hpdGVzcGFjZSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrd2hpdGVzcGFjZSsiKig/OihbKy1dfCkiKwp3aGl0ZXNwYWNlKyIqKFxcZCspfCkpIit3aGl0ZXNwYWNlKyIqXFwpfCkiLCJpIiksImJvb2wiOm5ldyBSZWdFeHAoIl4oPzoiK2Jvb2xlYW5zKyIpJCIsImkiKSwibmVlZHNDb250ZXh0IjpuZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK3doaXRlc3BhY2UrIiooKD86LVxcZCk/XFxkKikiK3doaXRlc3BhY2UrIipcXCl8KSg/PVteLV18JCkiLCJpIil9LHJodG1sPS9IVE1MJC9pLHJpbnB1dHM9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxyaGVhZGVyPS9eaFxkJC9pLHJuYXRpdmU9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLHJxdWlja0V4cHI9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxyc2libGluZz0vWyt+XS8scnVuZXNjYXBlPW5ldyBSZWdFeHAoIlxcXFxbXFxkYS1mQS1GXXsxLDZ9Iit3aGl0ZXNwYWNlKyI/fFxcXFwoW15cXHJcXG5cXGZdKSIsImciKSxmdW5lc2NhcGU9ZnVuY3Rpb24oZXNjYXBlLG5vbkhleCl7dmFyIGhpZ2g9IjB4Iitlc2NhcGUuc2xpY2UoMSktMHgxMDAwMDtyZXR1cm4gbm9uSGV4P25vbkhleDpoaWdoPDA/U3RyaW5nLmZyb21DaGFyQ29kZShoaWdoKzB4MTAwMDApOlN0cmluZy5mcm9tQ2hhckNvZGUoaGlnaD4+MTB8MHhEODAwLGhpZ2gmMHgzRkZ8MHhEQzAwKTt9LHJjc3Nlc2NhcGU9LyhbXDAtXHgxZlx4N2ZdfF4tP1xkKXxeLSR8W15cMC1ceDFmXHg3Zi1cdUZGRkZcdy1dL2csZmNzc2VzY2FwZT1mdW5jdGlvbihjaCxhc0NvZGVQb2ludCl7aWYoYXNDb2RlUG9pbnQpe2lmKGNoPT09IlwwIil7cmV0dXJuIlx1RkZGRCI7fQpyZXR1cm4gY2guc2xpY2UoMCwtMSkrIlxcIisKY2guY2hhckNvZGVBdChjaC5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjt9CnJldHVybiJcXCIrY2g7fSx1bmxvYWRIYW5kbGVyPWZ1bmN0aW9uKCl7c2V0RG9jdW1lbnQoKTt9LGluRGlzYWJsZWRGaWVsZHNldD1hZGRDb21iaW5hdG9yKGZ1bmN0aW9uKGVsZW0pe3JldHVybiBlbGVtLmRpc2FibGVkPT09dHJ1ZSYmZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImZpZWxkc2V0Ijt9LHtkaXI6InBhcmVudE5vZGUiLG5leHQ6ImxlZ2VuZCJ9KTt0cnl7cHVzaC5hcHBseSgoYXJyPXNsaWNlLmNhbGwocHJlZmVycmVkRG9jLmNoaWxkTm9kZXMpKSxwcmVmZXJyZWREb2MuY2hpbGROb2Rlcyk7YXJyW3ByZWZlcnJlZERvYy5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGU7fWNhdGNoKGUpe3B1c2g9e2FwcGx5OmFyci5sZW5ndGg/ZnVuY3Rpb24odGFyZ2V0LGVscyl7cHVzaE5hdGl2ZS5hcHBseSh0YXJnZXQsc2xpY2UuY2FsbChlbHMpKTt9OmZ1bmN0aW9uKHRhcmdldCxlbHMpe3ZhciBqPXRhcmdldC5sZW5ndGgsaT0wO3doaWxlKCh0YXJnZXRbaisrXT1lbHNbaSsrXSkpe30KdGFyZ2V0Lmxlbmd0aD1qLTE7fX07fQpmdW5jdGlvbiBTaXp6bGUoc2VsZWN0b3IsY29udGV4dCxyZXN1bHRzLHNlZWQpe3ZhciBtLGksZWxlbSxuaWQsbWF0Y2gsZ3JvdXBzLG5ld1NlbGVjdG9yLG5ld0NvbnRleHQ9Y29udGV4dCYmY29udGV4dC5vd25lckRvY3VtZW50LG5vZGVUeXBlPWNvbnRleHQ/Y29udGV4dC5ub2RlVHlwZTo5O3Jlc3VsdHM9cmVzdWx0c3x8W107aWYodHlwZW9mIHNlbGVjdG9yIT09InN0cmluZyJ8fCFzZWxlY3Rvcnx8bm9kZVR5cGUhPT0xJiZub2RlVHlwZSE9PTkmJm5vZGVUeXBlIT09MTEpe3JldHVybiByZXN1bHRzO30KaWYoIXNlZWQpe3NldERvY3VtZW50KGNvbnRleHQpO2NvbnRleHQ9Y29udGV4dHx8ZG9jdW1lbnQ7aWYoZG9jdW1lbnRJc0hUTUwpe2lmKG5vZGVUeXBlIT09MTEmJihtYXRjaD1ycXVpY2tFeHByLmV4ZWMoc2VsZWN0b3IpKSl7aWYoKG09bWF0Y2hbMV0pKXtpZihub2RlVHlwZT09PTkpe2lmKChlbGVtPWNvbnRleHQuZ2V0RWxlbWVudEJ5SWQobSkpKXtpZihlbGVtLmlkPT09bSl7cmVzdWx0cy5wdXNoKGVsZW0pO3JldHVybiByZXN1bHRzO319ZWxzZXtyZXR1cm4gcmVzdWx0czt9fWVsc2V7aWYobmV3Q29udGV4dCYmKGVsZW09bmV3Q29udGV4dC5nZXRFbGVtZW50QnlJZChtKSkmJmNvbnRhaW5zKGNvbnRleHQsZWxlbSkmJmVsZW0uaWQ9PT1tKXtyZXN1bHRzLnB1c2goZWxlbSk7cmV0dXJuIHJlc3VsdHM7fX19ZWxzZSBpZihtYXRjaFsyXSl7cHVzaC5hcHBseShyZXN1bHRzLGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpKTtyZXR1cm4gcmVzdWx0czt9ZWxzZSBpZigobT1tYXRjaFszXSkmJnN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXtwdXNoLmFwcGx5KHJlc3VsdHMsY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG0pKTtyZXR1cm4gcmVzdWx0czt9fQppZihzdXBwb3J0LnFzYSYmIW5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGVbc2VsZWN0b3IrIiAiXSYmKCFyYnVnZ3lRU0F8fCFyYnVnZ3lRU0EudGVzdChzZWxlY3RvcikpJiYobm9kZVR5cGUhPT0xfHxjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ib2JqZWN0Iikpe25ld1NlbGVjdG9yPXNlbGVjdG9yO25ld0NvbnRleHQ9Y29udGV4dDtpZihub2RlVHlwZT09PTEmJihyZGVzY2VuZC50ZXN0KHNlbGVjdG9yKXx8cmNvbWJpbmF0b3JzLnRlc3Qoc2VsZWN0b3IpKSl7bmV3Q29udGV4dD1yc2libGluZy50ZXN0KHNlbGVjdG9yKSYmdGVzdENvbnRleHQoY29udGV4dC5wYXJlbnROb2RlKXx8Y29udGV4dDtpZihuZXdDb250ZXh0IT09Y29udGV4dHx8IXN1cHBvcnQuc2NvcGUpe2lmKChuaWQ9Y29udGV4dC5nZXRBdHRyaWJ1dGUoImlkIikpKXtuaWQ9bmlkLnJlcGxhY2UocmNzc2VzY2FwZSxmY3NzZXNjYXBlKTt9ZWxzZXtjb250ZXh0LnNldEF0dHJpYnV0ZSgiaWQiLChuaWQ9ZXhwYW5kbykpO319Cmdyb3Vwcz10b2tlbml6ZShzZWxlY3Rvcik7aT1ncm91cHMubGVuZ3RoO3doaWxlKGktLSl7Z3JvdXBzW2ldPShuaWQ/IiMiK25pZDoiOnNjb3BlIikrIiAiKwp0b1NlbGVjdG9yKGdyb3Vwc1tpXSk7fQpuZXdTZWxlY3Rvcj1ncm91cHMuam9pbigiLCIpO30KdHJ5e3B1c2guYXBwbHkocmVzdWx0cyxuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwobmV3U2VsZWN0b3IpKTtyZXR1cm4gcmVzdWx0czt9Y2F0Y2gocXNhRXJyb3Ipe25vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUoc2VsZWN0b3IsdHJ1ZSk7fWZpbmFsbHl7aWYobmlkPT09ZXhwYW5kbyl7Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoImlkIik7fX19fX0KcmV0dXJuIHNlbGVjdChzZWxlY3Rvci5yZXBsYWNlKHJ0cmltLCIkMSIpLGNvbnRleHQscmVzdWx0cyxzZWVkKTt9CmZ1bmN0aW9uIGNyZWF0ZUNhY2hlKCl7dmFyIGtleXM9W107ZnVuY3Rpb24gY2FjaGUoa2V5LHZhbHVlKXtpZihrZXlzLnB1c2goa2V5KyIgIik+RXhwci5jYWNoZUxlbmd0aCl7ZGVsZXRlIGNhY2hlW2tleXMuc2hpZnQoKV07fQpyZXR1cm4oY2FjaGVba2V5KyIgIl09dmFsdWUpO30KcmV0dXJuIGNhY2hlO30KZnVuY3Rpb24gbWFya0Z1bmN0aW9uKGZuKXtmbltleHBhbmRvXT10cnVlO3JldHVybiBmbjt9CmZ1bmN0aW9uIGFzc2VydChmbil7dmFyIGVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhZm4oZWwpO31jYXRjaChlKXtyZXR1cm4gZmFsc2U7fWZpbmFsbHl7aWYoZWwucGFyZW50Tm9kZSl7ZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7fQplbD1udWxsO319CmZ1bmN0aW9uIGFkZEhhbmRsZShhdHRycyxoYW5kbGVyKXt2YXIgYXJyPWF0dHJzLnNwbGl0KCJ8IiksaT1hcnIubGVuZ3RoO3doaWxlKGktLSl7RXhwci5hdHRySGFuZGxlW2FycltpXV09aGFuZGxlcjt9fQpmdW5jdGlvbiBzaWJsaW5nQ2hlY2soYSxiKXt2YXIgY3VyPWImJmEsZGlmZj1jdXImJmEubm9kZVR5cGU9PT0xJiZiLm5vZGVUeXBlPT09MSYmYS5zb3VyY2VJbmRleC1iLnNvdXJjZUluZGV4O2lmKGRpZmYpe3JldHVybiBkaWZmO30KaWYoY3VyKXt3aGlsZSgoY3VyPWN1ci5uZXh0U2libGluZykpe2lmKGN1cj09PWIpe3JldHVybi0xO319fQpyZXR1cm4gYT8xOi0xO30KZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8odHlwZSl7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBuYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gbmFtZT09PSJpbnB1dCImJmVsZW0udHlwZT09PXR5cGU7fTt9CmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyh0eXBlKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7dmFyIG5hbWU9ZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihuYW1lPT09ImlucHV0Inx8bmFtZT09PSJidXR0b24iKSYmZWxlbS50eXBlPT09dHlwZTt9O30KZnVuY3Rpb24gY3JlYXRlRGlzYWJsZWRQc2V1ZG8oZGlzYWJsZWQpe3JldHVybiBmdW5jdGlvbihlbGVtKXtpZigiZm9ybSJpbiBlbGVtKXtpZihlbGVtLnBhcmVudE5vZGUmJmVsZW0uZGlzYWJsZWQ9PT1mYWxzZSl7aWYoImxhYmVsImluIGVsZW0pe2lmKCJsYWJlbCJpbiBlbGVtLnBhcmVudE5vZGUpe3JldHVybiBlbGVtLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT1kaXNhYmxlZDt9ZWxzZXtyZXR1cm4gZWxlbS5kaXNhYmxlZD09PWRpc2FibGVkO319CnJldHVybiBlbGVtLmlzRGlzYWJsZWQ9PT1kaXNhYmxlZHx8ZWxlbS5pc0Rpc2FibGVkIT09IWRpc2FibGVkJiZpbkRpc2FibGVkRmllbGRzZXQoZWxlbSk9PT1kaXNhYmxlZDt9CnJldHVybiBlbGVtLmRpc2FibGVkPT09ZGlzYWJsZWQ7fWVsc2UgaWYoImxhYmVsImluIGVsZW0pe3JldHVybiBlbGVtLmRpc2FibGVkPT09ZGlzYWJsZWQ7fQpyZXR1cm4gZmFsc2U7fTt9CmZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZm4pe3JldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oYXJndW1lbnQpe2FyZ3VtZW50PSthcmd1bWVudDtyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHNlZWQsbWF0Y2hlcyl7dmFyIGosbWF0Y2hJbmRleGVzPWZuKFtdLHNlZWQubGVuZ3RoLGFyZ3VtZW50KSxpPW1hdGNoSW5kZXhlcy5sZW5ndGg7d2hpbGUoaS0tKXtpZihzZWVkWyhqPW1hdGNoSW5kZXhlc1tpXSldKXtzZWVkW2pdPSEobWF0Y2hlc1tqXT1zZWVkW2pdKTt9fX0pO30pO30KZnVuY3Rpb24gdGVzdENvbnRleHQoY29udGV4dCl7cmV0dXJuIGNvbnRleHQmJnR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09InVuZGVmaW5lZCImJmNvbnRleHQ7fQpzdXBwb3J0PVNpenpsZS5zdXBwb3J0PXt9O2lzWE1MPVNpenpsZS5pc1hNTD1mdW5jdGlvbihlbGVtKXt2YXIgbmFtZXNwYWNlPWVsZW0ubmFtZXNwYWNlVVJJLGRvY0VsZW09KGVsZW0ub3duZXJEb2N1bWVudHx8ZWxlbSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiFyaHRtbC50ZXN0KG5hbWVzcGFjZXx8ZG9jRWxlbSYmZG9jRWxlbS5ub2RlTmFtZXx8IkhUTUwiKTt9O3NldERvY3VtZW50PVNpenpsZS5zZXREb2N1bWVudD1mdW5jdGlvbihub2RlKXt2YXIgaGFzQ29tcGFyZSxzdWJXaW5kb3csZG9jPW5vZGU/bm9kZS5vd25lckRvY3VtZW50fHxub2RlOnByZWZlcnJlZERvYztpZihkb2M9PWRvY3VtZW50fHxkb2Mubm9kZVR5cGUhPT05fHwhZG9jLmRvY3VtZW50RWxlbWVudCl7cmV0dXJuIGRvY3VtZW50O30KZG9jdW1lbnQ9ZG9jO2RvY0VsZW09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2RvY3VtZW50SXNIVE1MPSFpc1hNTChkb2N1bWVudCk7aWYocHJlZmVycmVkRG9jIT1kb2N1bWVudCYmKHN1YldpbmRvdz1kb2N1bWVudC5kZWZhdWx0VmlldykmJnN1YldpbmRvdy50b3AhPT1zdWJXaW5kb3cpe2lmKHN1YldpbmRvdy5hZGRFdmVudExpc3RlbmVyKXtzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIix1bmxvYWRIYW5kbGVyLGZhbHNlKTt9ZWxzZSBpZihzdWJXaW5kb3cuYXR0YWNoRXZlbnQpe3N1YldpbmRvdy5hdHRhY2hFdmVudCgib251bmxvYWQiLHVubG9hZEhhbmRsZXIpO319CnN1cHBvcnQuc2NvcGU9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cmV0dXJuIHR5cGVvZiBlbC5xdWVyeVNlbGVjdG9yQWxsIT09InVuZGVmaW5lZCImJiFlbC5xdWVyeVNlbGVjdG9yQWxsKCI6c2NvcGUgZmllbGRzZXQgZGl2IikubGVuZ3RoO30pO3N1cHBvcnQuYXR0cmlidXRlcz1hc3NlcnQoZnVuY3Rpb24oZWwpe2VsLmNsYXNzTmFtZT0iaSI7cmV0dXJuIWVsLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIik7fSk7c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZT1hc3NlcnQoZnVuY3Rpb24oZWwpe2VsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoIiIpKTtyZXR1cm4hZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGg7fSk7c3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPXJuYXRpdmUudGVzdChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKTtzdXBwb3J0LmdldEJ5SWQ9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5pZD1leHBhbmRvO3JldHVybiFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZXx8IWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGV4cGFuZG8pLmxlbmd0aDt9KTtpZihzdXBwb3J0LmdldEJ5SWQpe0V4cHIuZmlsdGVyWyJJRCJdPWZ1bmN0aW9uKGlkKXt2YXIgYXR0cklkPWlkLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSk7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3JldHVybiBlbGVtLmdldEF0dHJpYnV0ZSgiaWQiKT09PWF0dHJJZDt9O307RXhwci5maW5kWyJJRCJdPWZ1bmN0aW9uKGlkLGNvbnRleHQpe2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkIT09InVuZGVmaW5lZCImJmRvY3VtZW50SXNIVE1MKXt2YXIgZWxlbT1jb250ZXh0LmdldEVsZW1lbnRCeUlkKGlkKTtyZXR1cm4gZWxlbT9bZWxlbV06W107fX07fWVsc2V7RXhwci5maWx0ZXJbIklEIl09ZnVuY3Rpb24oaWQpe3ZhciBhdHRySWQ9aWQucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKTtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7dmFyIG5vZGU9dHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSE9PSJ1bmRlZmluZWQiJiZlbGVtLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIG5vZGUmJm5vZGUudmFsdWU9PT1hdHRySWQ7fTt9O0V4cHIuZmluZFsiSUQiXT1mdW5jdGlvbihpZCxjb250ZXh0KXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCE9PSJ1bmRlZmluZWQiJiZkb2N1bWVudElzSFRNTCl7dmFyIG5vZGUsaSxlbGVtcyxlbGVtPWNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoaWQpO2lmKGVsZW0pe25vZGU9ZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO2lmKG5vZGUmJm5vZGUudmFsdWU9PT1pZCl7cmV0dXJuW2VsZW1dO30KZWxlbXM9Y29udGV4dC5nZXRFbGVtZW50c0J5TmFtZShpZCk7aT0wO3doaWxlKChlbGVtPWVsZW1zW2krK10pKXtub2RlPWVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihub2RlJiZub2RlLnZhbHVlPT09aWQpe3JldHVybltlbGVtXTt9fX0KcmV0dXJuW107fX07fQpFeHByLmZpbmRbIlRBRyJdPXN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24odGFnLGNvbnRleHQpe2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09InVuZGVmaW5lZCIpe3JldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyk7fWVsc2UgaWYoc3VwcG9ydC5xc2Epe3JldHVybiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwodGFnKTt9fTpmdW5jdGlvbih0YWcsY29udGV4dCl7dmFyIGVsZW0sdG1wPVtdLGk9MCxyZXN1bHRzPWNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnKTtpZih0YWc9PT0iKiIpe3doaWxlKChlbGVtPXJlc3VsdHNbaSsrXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xKXt0bXAucHVzaChlbGVtKTt9fQpyZXR1cm4gdG1wO30KcmV0dXJuIHJlc3VsdHM7fTtFeHByLmZpbmRbIkNMQVNTIl09c3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihjbGFzc05hbWUsY29udGV4dCl7aWYodHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSE9PSJ1bmRlZmluZWQiJiZkb2N1bWVudElzSFRNTCl7cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpO319O3JidWdneU1hdGNoZXM9W107cmJ1Z2d5UVNBPVtdO2lmKChzdXBwb3J0LnFzYT1ybmF0aXZlLnRlc3QoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCkpKXthc3NlcnQoZnVuY3Rpb24oZWwpe3ZhciBpbnB1dDtkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5pbm5lckhUTUw9IjxhIGlkPSciK2V4cGFuZG8rIic+PC9hPiIrIjxzZWxlY3QgaWQ9JyIrZXhwYW5kbysiLVxyXFwnIG1zYWxsb3djYXB0dXJlPScnPiIrIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjtpZihlbC5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlsqXiRdPSIrd2hpdGVzcGFjZSsiKig/OicnfFwiXCIpIik7fQppZighZWwucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlxcWyIrd2hpdGVzcGFjZSsiKig/OnZhbHVlfCIrYm9vbGVhbnMrIikiKTt9CmlmKCFlbC5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrZXhwYW5kbysiLV0iKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCJ+PSIpO30KaW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCIiKTtlbC5hcHBlbmRDaGlsZChpbnB1dCk7aWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPScnXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlxcWyIrd2hpdGVzcGFjZSsiKm5hbWUiK3doaXRlc3BhY2UrIio9IisKd2hpdGVzcGFjZSsiKig/OicnfFwiXCIpIik7fQppZighZWwucXVlcnlTZWxlY3RvckFsbCgiOmNoZWNrZWQiKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCI6Y2hlY2tlZCIpO30KaWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoImEjIitleHBhbmRvKyIrKiIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIi4jLitbK35dIik7fQplbC5xdWVyeVNlbGVjdG9yQWxsKCJcXFxmIik7cmJ1Z2d5UVNBLnB1c2goIltcXHJcXG5cXGZdIik7fSk7YXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+IisiPHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PiI7dmFyIGlucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7aW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIik7ZWwuYXBwZW5kQ2hpbGQoaW5wdXQpLnNldEF0dHJpYnV0ZSgibmFtZSIsIkQiKTtpZihlbC5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIm5hbWUiK3doaXRlc3BhY2UrIipbKl4kfCF+XT89Iik7fQppZihlbC5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCE9PTIpe3JidWdneVFTQS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpO30KZG9jRWxlbS5hcHBlbmRDaGlsZChlbCkuZGlzYWJsZWQ9dHJ1ZTtpZihlbC5xdWVyeVNlbGVjdG9yQWxsKCI6ZGlzYWJsZWQiKS5sZW5ndGghPT0yKXtyYnVnZ3lRU0EucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKTt9CmVsLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKTtyYnVnZ3lRU0EucHVzaCgiLC4qOiIpO30pO30KaWYoKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yPXJuYXRpdmUudGVzdCgobWF0Y2hlcz1kb2NFbGVtLm1hdGNoZXN8fGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3Rvcnx8ZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yfHxkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSkpKXthc3NlcnQoZnVuY3Rpb24oZWwpe3N1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2g9bWF0Y2hlcy5jYWxsKGVsLCIqIik7bWF0Y2hlcy5jYWxsKGVsLCJbcyE9JyddOngiKTtyYnVnZ3lNYXRjaGVzLnB1c2goIiE9Iixwc2V1ZG9zKTt9KTt9CnJidWdneVFTQT1yYnVnZ3lRU0EubGVuZ3RoJiZuZXcgUmVnRXhwKHJidWdneVFTQS5qb2luKCJ8IikpO3JidWdneU1hdGNoZXM9cmJ1Z2d5TWF0Y2hlcy5sZW5ndGgmJm5ldyBSZWdFeHAocmJ1Z2d5TWF0Y2hlcy5qb2luKCJ8IikpO2hhc0NvbXBhcmU9cm5hdGl2ZS50ZXN0KGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24pO2NvbnRhaW5zPWhhc0NvbXBhcmV8fHJuYXRpdmUudGVzdChkb2NFbGVtLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBhZG93bj1hLm5vZGVUeXBlPT09OT9hLmRvY3VtZW50RWxlbWVudDphLGJ1cD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1idXB8fCEhKGJ1cCYmYnVwLm5vZGVUeXBlPT09MSYmKGFkb3duLmNvbnRhaW5zP2Fkb3duLmNvbnRhaW5zKGJ1cCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihidXApJjE2KSk7fTpmdW5jdGlvbihhLGIpe2lmKGIpe3doaWxlKChiPWIucGFyZW50Tm9kZSkpe2lmKGI9PT1hKXtyZXR1cm4gdHJ1ZTt9fX0KcmV0dXJuIGZhbHNlO307c29ydE9yZGVyPWhhc0NvbXBhcmU/ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPXRydWU7cmV0dXJuIDA7fQp2YXIgY29tcGFyZT0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtpZihjb21wYXJlKXtyZXR1cm4gY29tcGFyZTt9CmNvbXBhcmU9KGEub3duZXJEb2N1bWVudHx8YSk9PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MTtpZihjb21wYXJlJjF8fCghc3VwcG9ydC5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1jb21wYXJlKSl7aWYoYT09ZG9jdW1lbnR8fGEub3duZXJEb2N1bWVudD09cHJlZmVycmVkRG9jJiZjb250YWlucyhwcmVmZXJyZWREb2MsYSkpe3JldHVybi0xO30KaWYoYj09ZG9jdW1lbnR8fGIub3duZXJEb2N1bWVudD09cHJlZmVycmVkRG9jJiZjb250YWlucyhwcmVmZXJyZWREb2MsYikpe3JldHVybiAxO30KcmV0dXJuIHNvcnRJbnB1dD8oaW5kZXhPZihzb3J0SW5wdXQsYSktaW5kZXhPZihzb3J0SW5wdXQsYikpOjA7fQpyZXR1cm4gY29tcGFyZSY0Py0xOjE7fTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXtoYXNEdXBsaWNhdGU9dHJ1ZTtyZXR1cm4gMDt9CnZhciBjdXIsaT0wLGF1cD1hLnBhcmVudE5vZGUsYnVwPWIucGFyZW50Tm9kZSxhcD1bYV0sYnA9W2JdO2lmKCFhdXB8fCFidXApe3JldHVybiBhPT1kb2N1bWVudD8tMTpiPT1kb2N1bWVudD8xOmF1cD8tMTpidXA/MTpzb3J0SW5wdXQ/KGluZGV4T2Yoc29ydElucHV0LGEpLWluZGV4T2Yoc29ydElucHV0LGIpKTowO31lbHNlIGlmKGF1cD09PWJ1cCl7cmV0dXJuIHNpYmxpbmdDaGVjayhhLGIpO30KY3VyPWE7d2hpbGUoKGN1cj1jdXIucGFyZW50Tm9kZSkpe2FwLnVuc2hpZnQoY3VyKTt9CmN1cj1iO3doaWxlKChjdXI9Y3VyLnBhcmVudE5vZGUpKXticC51bnNoaWZ0KGN1cik7fQp3aGlsZShhcFtpXT09PWJwW2ldKXtpKys7fQpyZXR1cm4gaT9zaWJsaW5nQ2hlY2soYXBbaV0sYnBbaV0pOmFwW2ldPT1wcmVmZXJyZWREb2M/LTE6YnBbaV09PXByZWZlcnJlZERvYz8xOjA7fTtyZXR1cm4gZG9jdW1lbnQ7fTtTaXp6bGUubWF0Y2hlcz1mdW5jdGlvbihleHByLGVsZW1lbnRzKXtyZXR1cm4gU2l6emxlKGV4cHIsbnVsbCxudWxsLGVsZW1lbnRzKTt9O1NpenpsZS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oZWxlbSxleHByKXtzZXREb2N1bWVudChlbGVtKTtpZihzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciYmZG9jdW1lbnRJc0hUTUwmJiFub25uYXRpdmVTZWxlY3RvckNhY2hlW2V4cHIrIiAiXSYmKCFyYnVnZ3lNYXRjaGVzfHwhcmJ1Z2d5TWF0Y2hlcy50ZXN0KGV4cHIpKSYmKCFyYnVnZ3lRU0F8fCFyYnVnZ3lRU0EudGVzdChleHByKSkpe3RyeXt2YXIgcmV0PW1hdGNoZXMuY2FsbChlbGVtLGV4cHIpO2lmKHJldHx8c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaHx8ZWxlbS5kb2N1bWVudCYmZWxlbS5kb2N1bWVudC5ub2RlVHlwZSE9PTExKXtyZXR1cm4gcmV0O319Y2F0Y2goZSl7bm9ubmF0aXZlU2VsZWN0b3JDYWNoZShleHByLHRydWUpO319CnJldHVybiBTaXp6bGUoZXhwcixkb2N1bWVudCxudWxsLFtlbGVtXSkubGVuZ3RoPjA7fTtTaXp6bGUuY29udGFpbnM9ZnVuY3Rpb24oY29udGV4dCxlbGVtKXtpZigoY29udGV4dC5vd25lckRvY3VtZW50fHxjb250ZXh0KSE9ZG9jdW1lbnQpe3NldERvY3VtZW50KGNvbnRleHQpO30KcmV0dXJuIGNvbnRhaW5zKGNvbnRleHQsZWxlbSk7fTtTaXp6bGUuYXR0cj1mdW5jdGlvbihlbGVtLG5hbWUpe2lmKChlbGVtLm93bmVyRG9jdW1lbnR8fGVsZW0pIT1kb2N1bWVudCl7c2V0RG9jdW1lbnQoZWxlbSk7fQp2YXIgZm49RXhwci5hdHRySGFuZGxlW25hbWUudG9Mb3dlckNhc2UoKV0sdmFsPWZuJiZoYXNPd24uY2FsbChFeHByLmF0dHJIYW5kbGUsbmFtZS50b0xvd2VyQ2FzZSgpKT9mbihlbGVtLG5hbWUsIWRvY3VtZW50SXNIVE1MKTp1bmRlZmluZWQ7cmV0dXJuIHZhbCE9PXVuZGVmaW5lZD92YWw6c3VwcG9ydC5hdHRyaWJ1dGVzfHwhZG9jdW1lbnRJc0hUTUw/ZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSk6KHZhbD1lbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpJiZ2YWwuc3BlY2lmaWVkP3ZhbC52YWx1ZTpudWxsO307U2l6emxlLmVzY2FwZT1mdW5jdGlvbihzZWwpe3JldHVybihzZWwrIiIpLnJlcGxhY2UocmNzc2VzY2FwZSxmY3NzZXNjYXBlKTt9O1NpenpsZS5lcnJvcj1mdW5jdGlvbihtc2cpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIittc2cpO307U2l6emxlLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24ocmVzdWx0cyl7dmFyIGVsZW0sZHVwbGljYXRlcz1bXSxqPTAsaT0wO2hhc0R1cGxpY2F0ZT0hc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzO3NvcnRJbnB1dD0hc3VwcG9ydC5zb3J0U3RhYmxlJiZyZXN1bHRzLnNsaWNlKDApO3Jlc3VsdHMuc29ydChzb3J0T3JkZXIpO2lmKGhhc0R1cGxpY2F0ZSl7d2hpbGUoKGVsZW09cmVzdWx0c1tpKytdKSl7aWYoZWxlbT09PXJlc3VsdHNbaV0pe2o9ZHVwbGljYXRlcy5wdXNoKGkpO319CndoaWxlKGotLSl7cmVzdWx0cy5zcGxpY2UoZHVwbGljYXRlc1tqXSwxKTt9fQpzb3J0SW5wdXQ9bnVsbDtyZXR1cm4gcmVzdWx0czt9O2dldFRleHQ9U2l6emxlLmdldFRleHQ9ZnVuY3Rpb24oZWxlbSl7dmFyIG5vZGUscmV0PSIiLGk9MCxub2RlVHlwZT1lbGVtLm5vZGVUeXBlO2lmKCFub2RlVHlwZSl7d2hpbGUoKG5vZGU9ZWxlbVtpKytdKSl7cmV0Kz1nZXRUZXh0KG5vZGUpO319ZWxzZSBpZihub2RlVHlwZT09PTF8fG5vZGVUeXBlPT09OXx8bm9kZVR5cGU9PT0xMSl7aWYodHlwZW9mIGVsZW0udGV4dENvbnRlbnQ9PT0ic3RyaW5nIil7cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7fWVsc2V7Zm9yKGVsZW09ZWxlbS5maXJzdENoaWxkO2VsZW07ZWxlbT1lbGVtLm5leHRTaWJsaW5nKXtyZXQrPWdldFRleHQoZWxlbSk7fX19ZWxzZSBpZihub2RlVHlwZT09PTN8fG5vZGVUeXBlPT09NCl7cmV0dXJuIGVsZW0ubm9kZVZhbHVlO30KcmV0dXJuIHJldDt9O0V4cHI9U2l6emxlLnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOm1hcmtGdW5jdGlvbixtYXRjaDptYXRjaEV4cHIsYXR0ckhhbmRsZTp7fSxmaW5kOnt9LHJlbGF0aXZlOnsiPiI6e2RpcjoicGFyZW50Tm9kZSIsZmlyc3Q6dHJ1ZX0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDp0cnVlfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7IkFUVFIiOmZ1bmN0aW9uKG1hdGNoKXttYXRjaFsxXT1tYXRjaFsxXS5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO21hdGNoWzNdPShtYXRjaFszXXx8bWF0Y2hbNF18fG1hdGNoWzVdfHwiIikucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKTtpZihtYXRjaFsyXT09PSJ+PSIpe21hdGNoWzNdPSIgIittYXRjaFszXSsiICI7fQpyZXR1cm4gbWF0Y2guc2xpY2UoMCw0KTt9LCJDSElMRCI6ZnVuY3Rpb24obWF0Y2gpe21hdGNoWzFdPW1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7aWYobWF0Y2hbMV0uc2xpY2UoMCwzKT09PSJudGgiKXtpZighbWF0Y2hbM10pe1NpenpsZS5lcnJvcihtYXRjaFswXSk7fQptYXRjaFs0XT0rKG1hdGNoWzRdP21hdGNoWzVdKyhtYXRjaFs2XXx8MSk6MioobWF0Y2hbM109PT0iZXZlbiJ8fG1hdGNoWzNdPT09Im9kZCIpKTttYXRjaFs1XT0rKChtYXRjaFs3XSttYXRjaFs4XSl8fG1hdGNoWzNdPT09Im9kZCIpO31lbHNlIGlmKG1hdGNoWzNdKXtTaXp6bGUuZXJyb3IobWF0Y2hbMF0pO30KcmV0dXJuIG1hdGNoO30sIlBTRVVETyI6ZnVuY3Rpb24obWF0Y2gpe3ZhciBleGNlc3MsdW5xdW90ZWQ9IW1hdGNoWzZdJiZtYXRjaFsyXTtpZihtYXRjaEV4cHJbIkNISUxEIl0udGVzdChtYXRjaFswXSkpe3JldHVybiBudWxsO30KaWYobWF0Y2hbM10pe21hdGNoWzJdPW1hdGNoWzRdfHxtYXRjaFs1XXx8IiI7fWVsc2UgaWYodW5xdW90ZWQmJnJwc2V1ZG8udGVzdCh1bnF1b3RlZCkmJihleGNlc3M9dG9rZW5pemUodW5xdW90ZWQsdHJ1ZSkpJiYoZXhjZXNzPXVucXVvdGVkLmluZGV4T2YoIikiLHVucXVvdGVkLmxlbmd0aC1leGNlc3MpLXVucXVvdGVkLmxlbmd0aCkpe21hdGNoWzBdPW1hdGNoWzBdLnNsaWNlKDAsZXhjZXNzKTttYXRjaFsyXT11bnF1b3RlZC5zbGljZSgwLGV4Y2Vzcyk7fQpyZXR1cm4gbWF0Y2guc2xpY2UoMCwzKTt9fSxmaWx0ZXI6eyJUQUciOmZ1bmN0aW9uKG5vZGVOYW1lU2VsZWN0b3Ipe3ZhciBub2RlTmFtZT1ub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSkudG9Mb3dlckNhc2UoKTtyZXR1cm4gbm9kZU5hbWVTZWxlY3Rvcj09PSIqIj9mdW5jdGlvbigpe3JldHVybiB0cnVlO306ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW0ubm9kZU5hbWUmJmVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PW5vZGVOYW1lO307fSwiQ0xBU1MiOmZ1bmN0aW9uKGNsYXNzTmFtZSl7dmFyIHBhdHRlcm49Y2xhc3NDYWNoZVtjbGFzc05hbWUrIiAiXTtyZXR1cm4gcGF0dGVybnx8KHBhdHRlcm49bmV3IFJlZ0V4cCgiKF58Iit3aGl0ZXNwYWNlKyIpIitjbGFzc05hbWUrIigiK3doaXRlc3BhY2UrInwkKSIpKSYmY2xhc3NDYWNoZShjbGFzc05hbWUsZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHBhdHRlcm4udGVzdCh0eXBlb2YgZWxlbS5jbGFzc05hbWU9PT0ic3RyaW5nIiYmZWxlbS5jbGFzc05hbWV8fHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSE9PSJ1bmRlZmluZWQiJiZlbGVtLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpO30pO30sIkFUVFIiOmZ1bmN0aW9uKG5hbWUsb3BlcmF0b3IsY2hlY2spe3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgcmVzdWx0PVNpenpsZS5hdHRyKGVsZW0sbmFtZSk7aWYocmVzdWx0PT1udWxsKXtyZXR1cm4gb3BlcmF0b3I9PT0iIT0iO30KaWYoIW9wZXJhdG9yKXtyZXR1cm4gdHJ1ZTt9CnJlc3VsdCs9IiI7cmV0dXJuIG9wZXJhdG9yPT09Ij0iP3Jlc3VsdD09PWNoZWNrOm9wZXJhdG9yPT09IiE9Ij9yZXN1bHQhPT1jaGVjazpvcGVyYXRvcj09PSJePSI/Y2hlY2smJnJlc3VsdC5pbmRleE9mKGNoZWNrKT09PTA6b3BlcmF0b3I9PT0iKj0iP2NoZWNrJiZyZXN1bHQuaW5kZXhPZihjaGVjayk+LTE6b3BlcmF0b3I9PT0iJD0iP2NoZWNrJiZyZXN1bHQuc2xpY2UoLWNoZWNrLmxlbmd0aCk9PT1jaGVjazpvcGVyYXRvcj09PSJ+PSI/KCIgIityZXN1bHQucmVwbGFjZShyd2hpdGVzcGFjZSwiICIpKyIgIikuaW5kZXhPZihjaGVjayk+LTE6b3BlcmF0b3I9PT0ifD0iP3Jlc3VsdD09PWNoZWNrfHxyZXN1bHQuc2xpY2UoMCxjaGVjay5sZW5ndGgrMSk9PT1jaGVjaysiLSI6ZmFsc2U7fTt9LCJDSElMRCI6ZnVuY3Rpb24odHlwZSx3aGF0LF9hcmd1bWVudCxmaXJzdCxsYXN0KXt2YXIgc2ltcGxlPXR5cGUuc2xpY2UoMCwzKSE9PSJudGgiLGZvcndhcmQ9dHlwZS5zbGljZSgtNCkhPT0ibGFzdCIsb2ZUeXBlPXdoYXQ9PT0ib2YtdHlwZSI7cmV0dXJuIGZpcnN0PT09MSYmbGFzdD09PTA/ZnVuY3Rpb24oZWxlbSl7cmV0dXJuISFlbGVtLnBhcmVudE5vZGU7fTpmdW5jdGlvbihlbGVtLF9jb250ZXh0LHhtbCl7dmFyIGNhY2hlLHVuaXF1ZUNhY2hlLG91dGVyQ2FjaGUsbm9kZSxub2RlSW5kZXgsc3RhcnQsZGlyPXNpbXBsZSE9PWZvcndhcmQ/Im5leHRTaWJsaW5nIjoicHJldmlvdXNTaWJsaW5nIixwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlLG5hbWU9b2ZUeXBlJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksdXNlQ2FjaGU9IXhtbCYmIW9mVHlwZSxkaWZmPWZhbHNlO2lmKHBhcmVudCl7aWYoc2ltcGxlKXt3aGlsZShkaXIpe25vZGU9ZWxlbTt3aGlsZSgobm9kZT1ub2RlW2Rpcl0pKXtpZihvZlR5cGU/bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bmFtZTpub2RlLm5vZGVUeXBlPT09MSl7cmV0dXJuIGZhbHNlO319CnN0YXJ0PWRpcj10eXBlPT09Im9ubHkiJiYhc3RhcnQmJiJuZXh0U2libGluZyI7fQpyZXR1cm4gdHJ1ZTt9CnN0YXJ0PVtmb3J3YXJkP3BhcmVudC5maXJzdENoaWxkOnBhcmVudC5sYXN0Q2hpbGRdO2lmKGZvcndhcmQmJnVzZUNhY2hlKXtub2RlPXBhcmVudDtvdXRlckNhY2hlPW5vZGVbZXhwYW5kb118fChub2RlW2V4cGFuZG9dPXt9KTt1bmlxdWVDYWNoZT1vdXRlckNhY2hlW25vZGUudW5pcXVlSURdfHwob3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXT17fSk7Y2FjaGU9dW5pcXVlQ2FjaGVbdHlwZV18fFtdO25vZGVJbmRleD1jYWNoZVswXT09PWRpcnJ1bnMmJmNhY2hlWzFdO2RpZmY9bm9kZUluZGV4JiZjYWNoZVsyXTtub2RlPW5vZGVJbmRleCYmcGFyZW50LmNoaWxkTm9kZXNbbm9kZUluZGV4XTt3aGlsZSgobm9kZT0rK25vZGVJbmRleCYmbm9kZSYmbm9kZVtkaXJdfHwoZGlmZj1ub2RlSW5kZXg9MCl8fHN0YXJ0LnBvcCgpKSl7aWYobm9kZS5ub2RlVHlwZT09PTEmJisrZGlmZiYmbm9kZT09PWVsZW0pe3VuaXF1ZUNhY2hlW3R5cGVdPVtkaXJydW5zLG5vZGVJbmRleCxkaWZmXTticmVhazt9fX1lbHNle2lmKHVzZUNhY2hlKXtub2RlPWVsZW07b3V0ZXJDYWNoZT1ub2RlW2V4cGFuZG9dfHwobm9kZVtleHBhbmRvXT17fSk7dW5pcXVlQ2FjaGU9b3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXXx8KG91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF09e30pO2NhY2hlPXVuaXF1ZUNhY2hlW3R5cGVdfHxbXTtub2RlSW5kZXg9Y2FjaGVbMF09PT1kaXJydW5zJiZjYWNoZVsxXTtkaWZmPW5vZGVJbmRleDt9CmlmKGRpZmY9PT1mYWxzZSl7d2hpbGUoKG5vZGU9Kytub2RlSW5kZXgmJm5vZGUmJm5vZGVbZGlyXXx8KGRpZmY9bm9kZUluZGV4PTApfHxzdGFydC5wb3AoKSkpe2lmKChvZlR5cGU/bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bmFtZTpub2RlLm5vZGVUeXBlPT09MSkmJisrZGlmZil7aWYodXNlQ2FjaGUpe291dGVyQ2FjaGU9bm9kZVtleHBhbmRvXXx8KG5vZGVbZXhwYW5kb109e30pO3VuaXF1ZUNhY2hlPW91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF18fChvdXRlckNhY2hlW25vZGUudW5pcXVlSURdPXt9KTt1bmlxdWVDYWNoZVt0eXBlXT1bZGlycnVucyxkaWZmXTt9CmlmKG5vZGU9PT1lbGVtKXticmVhazt9fX19fQpkaWZmLT1sYXN0O3JldHVybiBkaWZmPT09Zmlyc3R8fChkaWZmJWZpcnN0PT09MCYmZGlmZi9maXJzdD49MCk7fX07fSwiUFNFVURPIjpmdW5jdGlvbihwc2V1ZG8sYXJndW1lbnQpe3ZhciBhcmdzLGZuPUV4cHIucHNldWRvc1twc2V1ZG9dfHxFeHByLnNldEZpbHRlcnNbcHNldWRvLnRvTG93ZXJDYXNlKCldfHxTaXp6bGUuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitwc2V1ZG8pO2lmKGZuW2V4cGFuZG9dKXtyZXR1cm4gZm4oYXJndW1lbnQpO30KaWYoZm4ubGVuZ3RoPjEpe2FyZ3M9W3BzZXVkbyxwc2V1ZG8sIiIsYXJndW1lbnRdO3JldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkocHNldWRvLnRvTG93ZXJDYXNlKCkpP21hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLG1hdGNoZXMpe3ZhciBpZHgsbWF0Y2hlZD1mbihzZWVkLGFyZ3VtZW50KSxpPW1hdGNoZWQubGVuZ3RoO3doaWxlKGktLSl7aWR4PWluZGV4T2Yoc2VlZCxtYXRjaGVkW2ldKTtzZWVkW2lkeF09IShtYXRjaGVzW2lkeF09bWF0Y2hlZFtpXSk7fX0pOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBmbihlbGVtLDAsYXJncyk7fTt9CnJldHVybiBmbjt9fSxwc2V1ZG9zOnsibm90IjptYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBpbnB1dD1bXSxyZXN1bHRzPVtdLG1hdGNoZXI9Y29tcGlsZShzZWxlY3Rvci5yZXBsYWNlKHJ0cmltLCIkMSIpKTtyZXR1cm4gbWF0Y2hlcltleHBhbmRvXT9tYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VlZCxtYXRjaGVzLF9jb250ZXh0LHhtbCl7dmFyIGVsZW0sdW5tYXRjaGVkPW1hdGNoZXIoc2VlZCxudWxsLHhtbCxbXSksaT1zZWVkLmxlbmd0aDt3aGlsZShpLS0pe2lmKChlbGVtPXVubWF0Y2hlZFtpXSkpe3NlZWRbaV09IShtYXRjaGVzW2ldPWVsZW0pO319fSk6ZnVuY3Rpb24oZWxlbSxfY29udGV4dCx4bWwpe2lucHV0WzBdPWVsZW07bWF0Y2hlcihpbnB1dCxudWxsLHhtbCxyZXN1bHRzKTtpbnB1dFswXT1udWxsO3JldHVybiFyZXN1bHRzLnBvcCgpO307fSksImhhcyI6bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7cmV0dXJuIFNpenpsZShzZWxlY3RvcixlbGVtKS5sZW5ndGg+MDt9O30pLCJjb250YWlucyI6bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHRleHQpe3RleHQ9dGV4dC5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4oZWxlbS50ZXh0Q29udGVudHx8Z2V0VGV4dChlbGVtKSkuaW5kZXhPZih0ZXh0KT4tMTt9O30pLCJsYW5nIjptYXJrRnVuY3Rpb24oZnVuY3Rpb24obGFuZyl7aWYoIXJpZGVudGlmaWVyLnRlc3QobGFuZ3x8IiIpKXtTaXp6bGUuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrbGFuZyk7fQpsYW5nPWxhbmcucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKS50b0xvd2VyQ2FzZSgpO3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgZWxlbUxhbmc7ZG97aWYoKGVsZW1MYW5nPWRvY3VtZW50SXNIVE1MP2VsZW0ubGFuZzplbGVtLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8ZWxlbS5nZXRBdHRyaWJ1dGUoImxhbmciKSkpe2VsZW1MYW5nPWVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGVsZW1MYW5nPT09bGFuZ3x8ZWxlbUxhbmcuaW5kZXhPZihsYW5nKyItIik9PT0wO319d2hpbGUoKGVsZW09ZWxlbS5wYXJlbnROb2RlKSYmZWxlbS5ub2RlVHlwZT09PTEpO3JldHVybiBmYWxzZTt9O30pLCJ0YXJnZXQiOmZ1bmN0aW9uKGVsZW0pe3ZhciBoYXNoPXdpbmRvdy5sb2NhdGlvbiYmd2luZG93LmxvY2F0aW9uLmhhc2g7cmV0dXJuIGhhc2gmJmhhc2guc2xpY2UoMSk9PT1lbGVtLmlkO30sInJvb3QiOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBlbGVtPT09ZG9jRWxlbTt9LCJmb2N1cyI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW09PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50JiYoIWRvY3VtZW50Lmhhc0ZvY3VzfHxkb2N1bWVudC5oYXNGb2N1cygpKSYmISEoZWxlbS50eXBlfHxlbGVtLmhyZWZ8fH5lbGVtLnRhYkluZGV4KTt9LCJlbmFibGVkIjpjcmVhdGVEaXNhYmxlZFBzZXVkbyhmYWxzZSksImRpc2FibGVkIjpjcmVhdGVEaXNhYmxlZFBzZXVkbyh0cnVlKSwiY2hlY2tlZCI6ZnVuY3Rpb24oZWxlbSl7dmFyIG5vZGVOYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4obm9kZU5hbWU9PT0iaW5wdXQiJiYhIWVsZW0uY2hlY2tlZCl8fChub2RlTmFtZT09PSJvcHRpb24iJiYhIWVsZW0uc2VsZWN0ZWQpO30sInNlbGVjdGVkIjpmdW5jdGlvbihlbGVtKXtpZihlbGVtLnBhcmVudE5vZGUpe2VsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O30KcmV0dXJuIGVsZW0uc2VsZWN0ZWQ9PT10cnVlO30sImVtcHR5IjpmdW5jdGlvbihlbGVtKXtmb3IoZWxlbT1lbGVtLmZpcnN0Q2hpbGQ7ZWxlbTtlbGVtPWVsZW0ubmV4dFNpYmxpbmcpe2lmKGVsZW0ubm9kZVR5cGU8Nil7cmV0dXJuIGZhbHNlO319CnJldHVybiB0cnVlO30sInBhcmVudCI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIUV4cHIucHNldWRvc1siZW1wdHkiXShlbGVtKTt9LCJoZWFkZXIiOmZ1bmN0aW9uKGVsZW0pe3JldHVybiByaGVhZGVyLnRlc3QoZWxlbS5ub2RlTmFtZSk7fSwiaW5wdXQiOmZ1bmN0aW9uKGVsZW0pe3JldHVybiByaW5wdXRzLnRlc3QoZWxlbS5ub2RlTmFtZSk7fSwiYnV0dG9uIjpmdW5jdGlvbihlbGVtKXt2YXIgbmFtZT1lbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIG5hbWU9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT0iYnV0dG9uInx8bmFtZT09PSJidXR0b24iO30sInRleHQiOmZ1bmN0aW9uKGVsZW0pe3ZhciBhdHRyO3JldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT0idGV4dCImJigoYXR0cj1lbGVtLmdldEF0dHJpYnV0ZSgidHlwZSIpKT09bnVsbHx8YXR0ci50b0xvd2VyQ2FzZSgpPT09InRleHQiKTt9LCJmaXJzdCI6Y3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpe3JldHVyblswXTt9KSwibGFzdCI6Y3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbihfbWF0Y2hJbmRleGVzLGxlbmd0aCl7cmV0dXJuW2xlbmd0aC0xXTt9KSwiZXEiOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oX21hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3JldHVyblthcmd1bWVudDwwP2FyZ3VtZW50K2xlbmd0aDphcmd1bWVudF07fSksImV2ZW4iOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24obWF0Y2hJbmRleGVzLGxlbmd0aCl7dmFyIGk9MDtmb3IoO2k8bGVuZ3RoO2krPTIpe21hdGNoSW5kZXhlcy5wdXNoKGkpO30KcmV0dXJuIG1hdGNoSW5kZXhlczt9KSwib2RkIjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgpe3ZhciBpPTE7Zm9yKDtpPGxlbmd0aDtpKz0yKXttYXRjaEluZGV4ZXMucHVzaChpKTt9CnJldHVybiBtYXRjaEluZGV4ZXM7fSksImx0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3ZhciBpPWFyZ3VtZW50PDA/YXJndW1lbnQrbGVuZ3RoOmFyZ3VtZW50Pmxlbmd0aD9sZW5ndGg6YXJndW1lbnQ7Zm9yKDstLWk+PTA7KXttYXRjaEluZGV4ZXMucHVzaChpKTt9CnJldHVybiBtYXRjaEluZGV4ZXM7fSksImd0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3ZhciBpPWFyZ3VtZW50PDA/YXJndW1lbnQrbGVuZ3RoOmFyZ3VtZW50O2Zvcig7KytpPGxlbmd0aDspe21hdGNoSW5kZXhlcy5wdXNoKGkpO30KcmV0dXJuIG1hdGNoSW5kZXhlczt9KX19O0V4cHIucHNldWRvc1sibnRoIl09RXhwci5wc2V1ZG9zWyJlcSJdO2ZvcihpIGlue3JhZGlvOnRydWUsY2hlY2tib3g6dHJ1ZSxmaWxlOnRydWUscGFzc3dvcmQ6dHJ1ZSxpbWFnZTp0cnVlfSl7RXhwci5wc2V1ZG9zW2ldPWNyZWF0ZUlucHV0UHNldWRvKGkpO30KZm9yKGkgaW57c3VibWl0OnRydWUscmVzZXQ6dHJ1ZX0pe0V4cHIucHNldWRvc1tpXT1jcmVhdGVCdXR0b25Qc2V1ZG8oaSk7fQpmdW5jdGlvbiBzZXRGaWx0ZXJzKCl7fQpzZXRGaWx0ZXJzLnByb3RvdHlwZT1FeHByLmZpbHRlcnM9RXhwci5wc2V1ZG9zO0V4cHIuc2V0RmlsdGVycz1uZXcgc2V0RmlsdGVycygpO3Rva2VuaXplPVNpenpsZS50b2tlbml6ZT1mdW5jdGlvbihzZWxlY3RvcixwYXJzZU9ubHkpe3ZhciBtYXRjaGVkLG1hdGNoLHRva2Vucyx0eXBlLHNvRmFyLGdyb3VwcyxwcmVGaWx0ZXJzLGNhY2hlZD10b2tlbkNhY2hlW3NlbGVjdG9yKyIgIl07aWYoY2FjaGVkKXtyZXR1cm4gcGFyc2VPbmx5PzA6Y2FjaGVkLnNsaWNlKDApO30Kc29GYXI9c2VsZWN0b3I7Z3JvdXBzPVtdO3ByZUZpbHRlcnM9RXhwci5wcmVGaWx0ZXI7d2hpbGUoc29GYXIpe2lmKCFtYXRjaGVkfHwobWF0Y2g9cmNvbW1hLmV4ZWMoc29GYXIpKSl7aWYobWF0Y2gpe3NvRmFyPXNvRmFyLnNsaWNlKG1hdGNoWzBdLmxlbmd0aCl8fHNvRmFyO30KZ3JvdXBzLnB1c2goKHRva2Vucz1bXSkpO30KbWF0Y2hlZD1mYWxzZTtpZigobWF0Y2g9cmNvbWJpbmF0b3JzLmV4ZWMoc29GYXIpKSl7bWF0Y2hlZD1tYXRjaC5zaGlmdCgpO3Rva2Vucy5wdXNoKHt2YWx1ZTptYXRjaGVkLHR5cGU6bWF0Y2hbMF0ucmVwbGFjZShydHJpbSwiICIpfSk7c29GYXI9c29GYXIuc2xpY2UobWF0Y2hlZC5sZW5ndGgpO30KZm9yKHR5cGUgaW4gRXhwci5maWx0ZXIpe2lmKChtYXRjaD1tYXRjaEV4cHJbdHlwZV0uZXhlYyhzb0ZhcikpJiYoIXByZUZpbHRlcnNbdHlwZV18fChtYXRjaD1wcmVGaWx0ZXJzW3R5cGVdKG1hdGNoKSkpKXttYXRjaGVkPW1hdGNoLnNoaWZ0KCk7dG9rZW5zLnB1c2goe3ZhbHVlOm1hdGNoZWQsdHlwZTp0eXBlLG1hdGNoZXM6bWF0Y2h9KTtzb0Zhcj1zb0Zhci5zbGljZShtYXRjaGVkLmxlbmd0aCk7fX0KaWYoIW1hdGNoZWQpe2JyZWFrO319CnJldHVybiBwYXJzZU9ubHk/c29GYXIubGVuZ3RoOnNvRmFyP1NpenpsZS5lcnJvcihzZWxlY3Rvcik6dG9rZW5DYWNoZShzZWxlY3Rvcixncm91cHMpLnNsaWNlKDApO307ZnVuY3Rpb24gdG9TZWxlY3Rvcih0b2tlbnMpe3ZhciBpPTAsbGVuPXRva2Vucy5sZW5ndGgsc2VsZWN0b3I9IiI7Zm9yKDtpPGxlbjtpKyspe3NlbGVjdG9yKz10b2tlbnNbaV0udmFsdWU7fQpyZXR1cm4gc2VsZWN0b3I7fQpmdW5jdGlvbiBhZGRDb21iaW5hdG9yKG1hdGNoZXIsY29tYmluYXRvcixiYXNlKXt2YXIgZGlyPWNvbWJpbmF0b3IuZGlyLHNraXA9Y29tYmluYXRvci5uZXh0LGtleT1za2lwfHxkaXIsY2hlY2tOb25FbGVtZW50cz1iYXNlJiZrZXk9PT0icGFyZW50Tm9kZSIsZG9uZU5hbWU9ZG9uZSsrO3JldHVybiBjb21iaW5hdG9yLmZpcnN0P2Z1bmN0aW9uKGVsZW0sY29udGV4dCx4bWwpe3doaWxlKChlbGVtPWVsZW1bZGlyXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xfHxjaGVja05vbkVsZW1lbnRzKXtyZXR1cm4gbWF0Y2hlcihlbGVtLGNvbnRleHQseG1sKTt9fQpyZXR1cm4gZmFsc2U7fTpmdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXt2YXIgb2xkQ2FjaGUsdW5pcXVlQ2FjaGUsb3V0ZXJDYWNoZSxuZXdDYWNoZT1bZGlycnVucyxkb25lTmFtZV07aWYoeG1sKXt3aGlsZSgoZWxlbT1lbGVtW2Rpcl0pKXtpZihlbGVtLm5vZGVUeXBlPT09MXx8Y2hlY2tOb25FbGVtZW50cyl7aWYobWF0Y2hlcihlbGVtLGNvbnRleHQseG1sKSl7cmV0dXJuIHRydWU7fX19fWVsc2V7d2hpbGUoKGVsZW09ZWxlbVtkaXJdKSl7aWYoZWxlbS5ub2RlVHlwZT09PTF8fGNoZWNrTm9uRWxlbWVudHMpe291dGVyQ2FjaGU9ZWxlbVtleHBhbmRvXXx8KGVsZW1bZXhwYW5kb109e30pO3VuaXF1ZUNhY2hlPW91dGVyQ2FjaGVbZWxlbS51bmlxdWVJRF18fChvdXRlckNhY2hlW2VsZW0udW5pcXVlSURdPXt9KTtpZihza2lwJiZza2lwPT09ZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtlbGVtPWVsZW1bZGlyXXx8ZWxlbTt9ZWxzZSBpZigob2xkQ2FjaGU9dW5pcXVlQ2FjaGVba2V5XSkmJm9sZENhY2hlWzBdPT09ZGlycnVucyYmb2xkQ2FjaGVbMV09PT1kb25lTmFtZSl7cmV0dXJuKG5ld0NhY2hlWzJdPW9sZENhY2hlWzJdKTt9ZWxzZXt1bmlxdWVDYWNoZVtrZXldPW5ld0NhY2hlO2lmKChuZXdDYWNoZVsyXT1tYXRjaGVyKGVsZW0sY29udGV4dCx4bWwpKSl7cmV0dXJuIHRydWU7fX19fX0KcmV0dXJuIGZhbHNlO307fQpmdW5jdGlvbiBlbGVtZW50TWF0Y2hlcihtYXRjaGVycyl7cmV0dXJuIG1hdGNoZXJzLmxlbmd0aD4xP2Z1bmN0aW9uKGVsZW0sY29udGV4dCx4bWwpe3ZhciBpPW1hdGNoZXJzLmxlbmd0aDt3aGlsZShpLS0pe2lmKCFtYXRjaGVyc1tpXShlbGVtLGNvbnRleHQseG1sKSl7cmV0dXJuIGZhbHNlO319CnJldHVybiB0cnVlO306bWF0Y2hlcnNbMF07fQpmdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKHNlbGVjdG9yLGNvbnRleHRzLHJlc3VsdHMpe3ZhciBpPTAsbGVuPWNvbnRleHRzLmxlbmd0aDtmb3IoO2k8bGVuO2krKyl7U2l6emxlKHNlbGVjdG9yLGNvbnRleHRzW2ldLHJlc3VsdHMpO30KcmV0dXJuIHJlc3VsdHM7fQpmdW5jdGlvbiBjb25kZW5zZSh1bm1hdGNoZWQsbWFwLGZpbHRlcixjb250ZXh0LHhtbCl7dmFyIGVsZW0sbmV3VW5tYXRjaGVkPVtdLGk9MCxsZW49dW5tYXRjaGVkLmxlbmd0aCxtYXBwZWQ9bWFwIT1udWxsO2Zvcig7aTxsZW47aSsrKXtpZigoZWxlbT11bm1hdGNoZWRbaV0pKXtpZighZmlsdGVyfHxmaWx0ZXIoZWxlbSxjb250ZXh0LHhtbCkpe25ld1VubWF0Y2hlZC5wdXNoKGVsZW0pO2lmKG1hcHBlZCl7bWFwLnB1c2goaSk7fX19fQpyZXR1cm4gbmV3VW5tYXRjaGVkO30KZnVuY3Rpb24gc2V0TWF0Y2hlcihwcmVGaWx0ZXIsc2VsZWN0b3IsbWF0Y2hlcixwb3N0RmlsdGVyLHBvc3RGaW5kZXIscG9zdFNlbGVjdG9yKXtpZihwb3N0RmlsdGVyJiYhcG9zdEZpbHRlcltleHBhbmRvXSl7cG9zdEZpbHRlcj1zZXRNYXRjaGVyKHBvc3RGaWx0ZXIpO30KaWYocG9zdEZpbmRlciYmIXBvc3RGaW5kZXJbZXhwYW5kb10pe3Bvc3RGaW5kZXI9c2V0TWF0Y2hlcihwb3N0RmluZGVyLHBvc3RTZWxlY3Rvcik7fQpyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHNlZWQscmVzdWx0cyxjb250ZXh0LHhtbCl7dmFyIHRlbXAsaSxlbGVtLHByZU1hcD1bXSxwb3N0TWFwPVtdLHByZWV4aXN0aW5nPXJlc3VsdHMubGVuZ3RoLGVsZW1zPXNlZWR8fG11bHRpcGxlQ29udGV4dHMoc2VsZWN0b3J8fCIqIixjb250ZXh0Lm5vZGVUeXBlP1tjb250ZXh0XTpjb250ZXh0LFtdKSxtYXRjaGVySW49cHJlRmlsdGVyJiYoc2VlZHx8IXNlbGVjdG9yKT9jb25kZW5zZShlbGVtcyxwcmVNYXAscHJlRmlsdGVyLGNvbnRleHQseG1sKTplbGVtcyxtYXRjaGVyT3V0PW1hdGNoZXI/cG9zdEZpbmRlcnx8KHNlZWQ/cHJlRmlsdGVyOnByZWV4aXN0aW5nfHxwb3N0RmlsdGVyKT9bXTpyZXN1bHRzOm1hdGNoZXJJbjtpZihtYXRjaGVyKXttYXRjaGVyKG1hdGNoZXJJbixtYXRjaGVyT3V0LGNvbnRleHQseG1sKTt9CmlmKHBvc3RGaWx0ZXIpe3RlbXA9Y29uZGVuc2UobWF0Y2hlck91dCxwb3N0TWFwKTtwb3N0RmlsdGVyKHRlbXAsW10sY29udGV4dCx4bWwpO2k9dGVtcC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoZWxlbT10ZW1wW2ldKSl7bWF0Y2hlck91dFtwb3N0TWFwW2ldXT0hKG1hdGNoZXJJbltwb3N0TWFwW2ldXT1lbGVtKTt9fX0KaWYoc2VlZCl7aWYocG9zdEZpbmRlcnx8cHJlRmlsdGVyKXtpZihwb3N0RmluZGVyKXt0ZW1wPVtdO2k9bWF0Y2hlck91dC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoZWxlbT1tYXRjaGVyT3V0W2ldKSl7dGVtcC5wdXNoKChtYXRjaGVySW5baV09ZWxlbSkpO319CnBvc3RGaW5kZXIobnVsbCwobWF0Y2hlck91dD1bXSksdGVtcCx4bWwpO30KaT1tYXRjaGVyT3V0Lmxlbmd0aDt3aGlsZShpLS0pe2lmKChlbGVtPW1hdGNoZXJPdXRbaV0pJiYodGVtcD1wb3N0RmluZGVyP2luZGV4T2Yoc2VlZCxlbGVtKTpwcmVNYXBbaV0pPi0xKXtzZWVkW3RlbXBdPSEocmVzdWx0c1t0ZW1wXT1lbGVtKTt9fX19ZWxzZXttYXRjaGVyT3V0PWNvbmRlbnNlKG1hdGNoZXJPdXQ9PT1yZXN1bHRzP21hdGNoZXJPdXQuc3BsaWNlKHByZWV4aXN0aW5nLG1hdGNoZXJPdXQubGVuZ3RoKTptYXRjaGVyT3V0KTtpZihwb3N0RmluZGVyKXtwb3N0RmluZGVyKG51bGwscmVzdWx0cyxtYXRjaGVyT3V0LHhtbCk7fWVsc2V7cHVzaC5hcHBseShyZXN1bHRzLG1hdGNoZXJPdXQpO319fSk7fQpmdW5jdGlvbiBtYXRjaGVyRnJvbVRva2Vucyh0b2tlbnMpe3ZhciBjaGVja0NvbnRleHQsbWF0Y2hlcixqLGxlbj10b2tlbnMubGVuZ3RoLGxlYWRpbmdSZWxhdGl2ZT1FeHByLnJlbGF0aXZlW3Rva2Vuc1swXS50eXBlXSxpbXBsaWNpdFJlbGF0aXZlPWxlYWRpbmdSZWxhdGl2ZXx8RXhwci5yZWxhdGl2ZVsiICJdLGk9bGVhZGluZ1JlbGF0aXZlPzE6MCxtYXRjaENvbnRleHQ9YWRkQ29tYmluYXRvcihmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbT09PWNoZWNrQ29udGV4dDt9LGltcGxpY2l0UmVsYXRpdmUsdHJ1ZSksbWF0Y2hBbnlDb250ZXh0PWFkZENvbWJpbmF0b3IoZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGluZGV4T2YoY2hlY2tDb250ZXh0LGVsZW0pPi0xO30saW1wbGljaXRSZWxhdGl2ZSx0cnVlKSxtYXRjaGVycz1bZnVuY3Rpb24oZWxlbSxjb250ZXh0LHhtbCl7dmFyIHJldD0oIWxlYWRpbmdSZWxhdGl2ZSYmKHhtbHx8Y29udGV4dCE9PW91dGVybW9zdENvbnRleHQpKXx8KChjaGVja0NvbnRleHQ9Y29udGV4dCkubm9kZVR5cGU/bWF0Y2hDb250ZXh0KGVsZW0sY29udGV4dCx4bWwpOm1hdGNoQW55Q29udGV4dChlbGVtLGNvbnRleHQseG1sKSk7Y2hlY2tDb250ZXh0PW51bGw7cmV0dXJuIHJldDt9XTtmb3IoO2k8bGVuO2krKyl7aWYoKG1hdGNoZXI9RXhwci5yZWxhdGl2ZVt0b2tlbnNbaV0udHlwZV0pKXttYXRjaGVycz1bYWRkQ29tYmluYXRvcihlbGVtZW50TWF0Y2hlcihtYXRjaGVycyksbWF0Y2hlcildO31lbHNle21hdGNoZXI9RXhwci5maWx0ZXJbdG9rZW5zW2ldLnR5cGVdLmFwcGx5KG51bGwsdG9rZW5zW2ldLm1hdGNoZXMpO2lmKG1hdGNoZXJbZXhwYW5kb10pe2o9KytpO2Zvcig7ajxsZW47aisrKXtpZihFeHByLnJlbGF0aXZlW3Rva2Vuc1tqXS50eXBlXSl7YnJlYWs7fX0KcmV0dXJuIHNldE1hdGNoZXIoaT4xJiZlbGVtZW50TWF0Y2hlcihtYXRjaGVycyksaT4xJiZ0b1NlbGVjdG9yKHRva2Vucy5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZTp0b2tlbnNbaS0yXS50eXBlPT09IiAiPyIqIjoiIn0pKS5yZXBsYWNlKHJ0cmltLCIkMSIpLG1hdGNoZXIsaTxqJiZtYXRjaGVyRnJvbVRva2Vucyh0b2tlbnMuc2xpY2UoaSxqKSksajxsZW4mJm1hdGNoZXJGcm9tVG9rZW5zKCh0b2tlbnM9dG9rZW5zLnNsaWNlKGopKSksajxsZW4mJnRvU2VsZWN0b3IodG9rZW5zKSk7fQptYXRjaGVycy5wdXNoKG1hdGNoZXIpO319CnJldHVybiBlbGVtZW50TWF0Y2hlcihtYXRjaGVycyk7fQpmdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoZWxlbWVudE1hdGNoZXJzLHNldE1hdGNoZXJzKXt2YXIgYnlTZXQ9c2V0TWF0Y2hlcnMubGVuZ3RoPjAsYnlFbGVtZW50PWVsZW1lbnRNYXRjaGVycy5sZW5ndGg+MCxzdXBlck1hdGNoZXI9ZnVuY3Rpb24oc2VlZCxjb250ZXh0LHhtbCxyZXN1bHRzLG91dGVybW9zdCl7dmFyIGVsZW0saixtYXRjaGVyLG1hdGNoZWRDb3VudD0wLGk9IjAiLHVubWF0Y2hlZD1zZWVkJiZbXSxzZXRNYXRjaGVkPVtdLGNvbnRleHRCYWNrdXA9b3V0ZXJtb3N0Q29udGV4dCxlbGVtcz1zZWVkfHxieUVsZW1lbnQmJkV4cHIuZmluZFsiVEFHIl0oIioiLG91dGVybW9zdCksZGlycnVuc1VuaXF1ZT0oZGlycnVucys9Y29udGV4dEJhY2t1cD09bnVsbD8xOk1hdGgucmFuZG9tKCl8fDAuMSksbGVuPWVsZW1zLmxlbmd0aDtpZihvdXRlcm1vc3Qpe291dGVybW9zdENvbnRleHQ9Y29udGV4dD09ZG9jdW1lbnR8fGNvbnRleHR8fG91dGVybW9zdDt9CmZvcig7aSE9PWxlbiYmKGVsZW09ZWxlbXNbaV0pIT1udWxsO2krKyl7aWYoYnlFbGVtZW50JiZlbGVtKXtqPTA7aWYoIWNvbnRleHQmJmVsZW0ub3duZXJEb2N1bWVudCE9ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pO3htbD0hZG9jdW1lbnRJc0hUTUw7fQp3aGlsZSgobWF0Y2hlcj1lbGVtZW50TWF0Y2hlcnNbaisrXSkpe2lmKG1hdGNoZXIoZWxlbSxjb250ZXh0fHxkb2N1bWVudCx4bWwpKXtyZXN1bHRzLnB1c2goZWxlbSk7YnJlYWs7fX0KaWYob3V0ZXJtb3N0KXtkaXJydW5zPWRpcnJ1bnNVbmlxdWU7fX0KaWYoYnlTZXQpe2lmKChlbGVtPSFtYXRjaGVyJiZlbGVtKSl7bWF0Y2hlZENvdW50LS07fQppZihzZWVkKXt1bm1hdGNoZWQucHVzaChlbGVtKTt9fX0KbWF0Y2hlZENvdW50Kz1pO2lmKGJ5U2V0JiZpIT09bWF0Y2hlZENvdW50KXtqPTA7d2hpbGUoKG1hdGNoZXI9c2V0TWF0Y2hlcnNbaisrXSkpe21hdGNoZXIodW5tYXRjaGVkLHNldE1hdGNoZWQsY29udGV4dCx4bWwpO30KaWYoc2VlZCl7aWYobWF0Y2hlZENvdW50PjApe3doaWxlKGktLSl7aWYoISh1bm1hdGNoZWRbaV18fHNldE1hdGNoZWRbaV0pKXtzZXRNYXRjaGVkW2ldPXBvcC5jYWxsKHJlc3VsdHMpO319fQpzZXRNYXRjaGVkPWNvbmRlbnNlKHNldE1hdGNoZWQpO30KcHVzaC5hcHBseShyZXN1bHRzLHNldE1hdGNoZWQpO2lmKG91dGVybW9zdCYmIXNlZWQmJnNldE1hdGNoZWQubGVuZ3RoPjAmJihtYXRjaGVkQ291bnQrc2V0TWF0Y2hlcnMubGVuZ3RoKT4xKXtTaXp6bGUudW5pcXVlU29ydChyZXN1bHRzKTt9fQppZihvdXRlcm1vc3Qpe2RpcnJ1bnM9ZGlycnVuc1VuaXF1ZTtvdXRlcm1vc3RDb250ZXh0PWNvbnRleHRCYWNrdXA7fQpyZXR1cm4gdW5tYXRjaGVkO307cmV0dXJuIGJ5U2V0P21hcmtGdW5jdGlvbihzdXBlck1hdGNoZXIpOnN1cGVyTWF0Y2hlcjt9CmNvbXBpbGU9U2l6emxlLmNvbXBpbGU9ZnVuY3Rpb24oc2VsZWN0b3IsbWF0Y2gpe3ZhciBpLHNldE1hdGNoZXJzPVtdLGVsZW1lbnRNYXRjaGVycz1bXSxjYWNoZWQ9Y29tcGlsZXJDYWNoZVtzZWxlY3RvcisiICJdO2lmKCFjYWNoZWQpe2lmKCFtYXRjaCl7bWF0Y2g9dG9rZW5pemUoc2VsZWN0b3IpO30KaT1tYXRjaC5sZW5ndGg7d2hpbGUoaS0tKXtjYWNoZWQ9bWF0Y2hlckZyb21Ub2tlbnMobWF0Y2hbaV0pO2lmKGNhY2hlZFtleHBhbmRvXSl7c2V0TWF0Y2hlcnMucHVzaChjYWNoZWQpO31lbHNle2VsZW1lbnRNYXRjaGVycy5wdXNoKGNhY2hlZCk7fX0KY2FjaGVkPWNvbXBpbGVyQ2FjaGUoc2VsZWN0b3IsbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKGVsZW1lbnRNYXRjaGVycyxzZXRNYXRjaGVycykpO2NhY2hlZC5zZWxlY3Rvcj1zZWxlY3Rvcjt9CnJldHVybiBjYWNoZWQ7fTtzZWxlY3Q9U2l6emxlLnNlbGVjdD1mdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0LHJlc3VsdHMsc2VlZCl7dmFyIGksdG9rZW5zLHRva2VuLHR5cGUsZmluZCxjb21waWxlZD10eXBlb2Ygc2VsZWN0b3I9PT0iZnVuY3Rpb24iJiZzZWxlY3RvcixtYXRjaD0hc2VlZCYmdG9rZW5pemUoKHNlbGVjdG9yPWNvbXBpbGVkLnNlbGVjdG9yfHxzZWxlY3RvcikpO3Jlc3VsdHM9cmVzdWx0c3x8W107aWYobWF0Y2gubGVuZ3RoPT09MSl7dG9rZW5zPW1hdGNoWzBdPW1hdGNoWzBdLnNsaWNlKDApO2lmKHRva2Vucy5sZW5ndGg+MiYmKHRva2VuPXRva2Vuc1swXSkudHlwZT09PSJJRCImJmNvbnRleHQubm9kZVR5cGU9PT05JiZkb2N1bWVudElzSFRNTCYmRXhwci5yZWxhdGl2ZVt0b2tlbnNbMV0udHlwZV0pe2NvbnRleHQ9KEV4cHIuZmluZFsiSUQiXSh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSksY29udGV4dCl8fFtdKVswXTtpZighY29udGV4dCl7cmV0dXJuIHJlc3VsdHM7fWVsc2UgaWYoY29tcGlsZWQpe2NvbnRleHQ9Y29udGV4dC5wYXJlbnROb2RlO30Kc2VsZWN0b3I9c2VsZWN0b3Iuc2xpY2UodG9rZW5zLnNoaWZ0KCkudmFsdWUubGVuZ3RoKTt9Cmk9bWF0Y2hFeHByWyJuZWVkc0NvbnRleHQiXS50ZXN0KHNlbGVjdG9yKT8wOnRva2Vucy5sZW5ndGg7d2hpbGUoaS0tKXt0b2tlbj10b2tlbnNbaV07aWYoRXhwci5yZWxhdGl2ZVsodHlwZT10b2tlbi50eXBlKV0pe2JyZWFrO30KaWYoKGZpbmQ9RXhwci5maW5kW3R5cGVdKSl7aWYoKHNlZWQ9ZmluZCh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSkscnNpYmxpbmcudGVzdCh0b2tlbnNbMF0udHlwZSkmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpKSl7dG9rZW5zLnNwbGljZShpLDEpO3NlbGVjdG9yPXNlZWQubGVuZ3RoJiZ0b1NlbGVjdG9yKHRva2Vucyk7aWYoIXNlbGVjdG9yKXtwdXNoLmFwcGx5KHJlc3VsdHMsc2VlZCk7cmV0dXJuIHJlc3VsdHM7fQpicmVhazt9fX19Cihjb21waWxlZHx8Y29tcGlsZShzZWxlY3RvcixtYXRjaCkpKHNlZWQsY29udGV4dCwhZG9jdW1lbnRJc0hUTUwscmVzdWx0cywhY29udGV4dHx8cnNpYmxpbmcudGVzdChzZWxlY3RvcikmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpO3JldHVybiByZXN1bHRzO307c3VwcG9ydC5zb3J0U3RhYmxlPWV4cGFuZG8uc3BsaXQoIiIpLnNvcnQoc29ydE9yZGVyKS5qb2luKCIiKT09PWV4cGFuZG87c3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzPSEhaGFzRHVwbGljYXRlO3NldERvY3VtZW50KCk7c3VwcG9ydC5zb3J0RGV0YWNoZWQ9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtyZXR1cm4gZWwuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKSkmMTt9KTtpZighYXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iO3JldHVybiBlbC5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09IiMiO30pKXthZGRIYW5kbGUoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGVsZW0sbmFtZSxpc1hNTCl7aWYoIWlzWE1MKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSxuYW1lLnRvTG93ZXJDYXNlKCk9PT0idHlwZSI/MToyKTt9fSk7fQppZighc3VwcG9ydC5hdHRyaWJ1dGVzfHwhYXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxpbnB1dC8+IjtlbC5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKTtyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT0iIjt9KSl7YWRkSGFuZGxlKCJ2YWx1ZSIsZnVuY3Rpb24oZWxlbSxfbmFtZSxpc1hNTCl7aWYoIWlzWE1MJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiKXtyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7fX0pO30KaWYoIWFzc2VydChmdW5jdGlvbihlbCl7cmV0dXJuIGVsLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKT09bnVsbDt9KSl7YWRkSGFuZGxlKGJvb2xlYW5zLGZ1bmN0aW9uKGVsZW0sbmFtZSxpc1hNTCl7dmFyIHZhbDtpZighaXNYTUwpe3JldHVybiBlbGVtW25hbWVdPT09dHJ1ZT9uYW1lLnRvTG93ZXJDYXNlKCk6KHZhbD1lbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpJiZ2YWwuc3BlY2lmaWVkP3ZhbC52YWx1ZTpudWxsO319KTt9CnJldHVybiBTaXp6bGU7fSkod2luZG93KTtqUXVlcnkuZmluZD1TaXp6bGU7alF1ZXJ5LmV4cHI9U2l6emxlLnNlbGVjdG9ycztqUXVlcnkuZXhwclsiOiJdPWpRdWVyeS5leHByLnBzZXVkb3M7alF1ZXJ5LnVuaXF1ZVNvcnQ9alF1ZXJ5LnVuaXF1ZT1TaXp6bGUudW5pcXVlU29ydDtqUXVlcnkudGV4dD1TaXp6bGUuZ2V0VGV4dDtqUXVlcnkuaXNYTUxEb2M9U2l6emxlLmlzWE1MO2pRdWVyeS5jb250YWlucz1TaXp6bGUuY29udGFpbnM7alF1ZXJ5LmVzY2FwZVNlbGVjdG9yPVNpenpsZS5lc2NhcGU7dmFyIGRpcj1mdW5jdGlvbihlbGVtLGRpcix1bnRpbCl7dmFyIG1hdGNoZWQ9W10sdHJ1bmNhdGU9dW50aWwhPT11bmRlZmluZWQ7d2hpbGUoKGVsZW09ZWxlbVtkaXJdKSYmZWxlbS5ub2RlVHlwZSE9PTkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xKXtpZih0cnVuY2F0ZSYmalF1ZXJ5KGVsZW0pLmlzKHVudGlsKSl7YnJlYWs7fQptYXRjaGVkLnB1c2goZWxlbSk7fX0KcmV0dXJuIG1hdGNoZWQ7fTt2YXIgc2libGluZ3M9ZnVuY3Rpb24obixlbGVtKXt2YXIgbWF0Y2hlZD1bXTtmb3IoO247bj1uLm5leHRTaWJsaW5nKXtpZihuLm5vZGVUeXBlPT09MSYmbiE9PWVsZW0pe21hdGNoZWQucHVzaChuKTt9fQpyZXR1cm4gbWF0Y2hlZDt9O3ZhciBybmVlZHNDb250ZXh0PWpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBub2RlTmFtZShlbGVtLG5hbWUpe3JldHVybiBlbGVtLm5vZGVOYW1lJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1uYW1lLnRvTG93ZXJDYXNlKCk7fTt2YXIgcnNpbmdsZVRhZz0oL148KFthLXpdW15cL1wwPjpceDIwXHRcclxuXGZdKilbXHgyMFx0XHJcblxmXSpcLz8+KD86PFwvXDE+fCkkL2kpO2Z1bmN0aW9uIHdpbm5vdyhlbGVtZW50cyxxdWFsaWZpZXIsbm90KXtpZihpc0Z1bmN0aW9uKHF1YWxpZmllcikpe3JldHVybiBqUXVlcnkuZ3JlcChlbGVtZW50cyxmdW5jdGlvbihlbGVtLGkpe3JldHVybiEhcXVhbGlmaWVyLmNhbGwoZWxlbSxpLGVsZW0pIT09bm90O30pO30KaWYocXVhbGlmaWVyLm5vZGVUeXBlKXtyZXR1cm4galF1ZXJ5LmdyZXAoZWxlbWVudHMsZnVuY3Rpb24oZWxlbSl7cmV0dXJuKGVsZW09PT1xdWFsaWZpZXIpIT09bm90O30pO30KaWYodHlwZW9mIHF1YWxpZmllciE9PSJzdHJpbmciKXtyZXR1cm4galF1ZXJ5LmdyZXAoZWxlbWVudHMsZnVuY3Rpb24oZWxlbSl7cmV0dXJuKGluZGV4T2YuY2FsbChxdWFsaWZpZXIsZWxlbSk+LTEpIT09bm90O30pO30KcmV0dXJuIGpRdWVyeS5maWx0ZXIocXVhbGlmaWVyLGVsZW1lbnRzLG5vdCk7fQpqUXVlcnkuZmlsdGVyPWZ1bmN0aW9uKGV4cHIsZWxlbXMsbm90KXt2YXIgZWxlbT1lbGVtc1swXTtpZihub3Qpe2V4cHI9Ijpub3QoIitleHByKyIpIjt9CmlmKGVsZW1zLmxlbmd0aD09PTEmJmVsZW0ubm9kZVR5cGU9PT0xKXtyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGVsZW0sZXhwcik/W2VsZW1dOltdO30KcmV0dXJuIGpRdWVyeS5maW5kLm1hdGNoZXMoZXhwcixqUXVlcnkuZ3JlcChlbGVtcyxmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5ub2RlVHlwZT09PTE7fSkpO307alF1ZXJ5LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihzZWxlY3Rvcil7dmFyIGkscmV0LGxlbj10aGlzLmxlbmd0aCxzZWxmPXRoaXM7aWYodHlwZW9mIHNlbGVjdG9yIT09InN0cmluZyIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhqUXVlcnkoc2VsZWN0b3IpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihpPTA7aTxsZW47aSsrKXtpZihqUXVlcnkuY29udGFpbnMoc2VsZltpXSx0aGlzKSl7cmV0dXJuIHRydWU7fX19KSk7fQpyZXQ9dGhpcy5wdXNoU3RhY2soW10pO2ZvcihpPTA7aTxsZW47aSsrKXtqUXVlcnkuZmluZChzZWxlY3RvcixzZWxmW2ldLHJldCk7fQpyZXR1cm4gbGVuPjE/alF1ZXJ5LnVuaXF1ZVNvcnQocmV0KTpyZXQ7fSxmaWx0ZXI6ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiB0aGlzLnB1c2hTdGFjayh3aW5ub3codGhpcyxzZWxlY3Rvcnx8W10sZmFsc2UpKTt9LG5vdDpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHdpbm5vdyh0aGlzLHNlbGVjdG9yfHxbXSx0cnVlKSk7fSxpczpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuISF3aW5ub3codGhpcyx0eXBlb2Ygc2VsZWN0b3I9PT0ic3RyaW5nIiYmcm5lZWRzQ29udGV4dC50ZXN0KHNlbGVjdG9yKT9qUXVlcnkoc2VsZWN0b3IpOnNlbGVjdG9yfHxbXSxmYWxzZSkubGVuZ3RoO319KTt2YXIgcm9vdGpRdWVyeSxycXVpY2tFeHByPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC8saW5pdD1qUXVlcnkuZm4uaW5pdD1mdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0LHJvb3Qpe3ZhciBtYXRjaCxlbGVtO2lmKCFzZWxlY3Rvcil7cmV0dXJuIHRoaXM7fQpyb290PXJvb3R8fHJvb3RqUXVlcnk7aWYodHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe2lmKHNlbGVjdG9yWzBdPT09IjwiJiZzZWxlY3RvcltzZWxlY3Rvci5sZW5ndGgtMV09PT0iPiImJnNlbGVjdG9yLmxlbmd0aD49Myl7bWF0Y2g9W251bGwsc2VsZWN0b3IsbnVsbF07fWVsc2V7bWF0Y2g9cnF1aWNrRXhwci5leGVjKHNlbGVjdG9yKTt9CmlmKG1hdGNoJiYobWF0Y2hbMV18fCFjb250ZXh0KSl7aWYobWF0Y2hbMV0pe2NvbnRleHQ9Y29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeT9jb250ZXh0WzBdOmNvbnRleHQ7alF1ZXJ5Lm1lcmdlKHRoaXMsalF1ZXJ5LnBhcnNlSFRNTChtYXRjaFsxXSxjb250ZXh0JiZjb250ZXh0Lm5vZGVUeXBlP2NvbnRleHQub3duZXJEb2N1bWVudHx8Y29udGV4dDpkb2N1bWVudCx0cnVlKSk7aWYocnNpbmdsZVRhZy50ZXN0KG1hdGNoWzFdKSYmalF1ZXJ5LmlzUGxhaW5PYmplY3QoY29udGV4dCkpe2ZvcihtYXRjaCBpbiBjb250ZXh0KXtpZihpc0Z1bmN0aW9uKHRoaXNbbWF0Y2hdKSl7dGhpc1ttYXRjaF0oY29udGV4dFttYXRjaF0pO31lbHNle3RoaXMuYXR0cihtYXRjaCxjb250ZXh0W21hdGNoXSk7fX19CnJldHVybiB0aGlzO31lbHNle2VsZW09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWF0Y2hbMl0pO2lmKGVsZW0pe3RoaXNbMF09ZWxlbTt0aGlzLmxlbmd0aD0xO30KcmV0dXJuIHRoaXM7fX1lbHNlIGlmKCFjb250ZXh0fHxjb250ZXh0LmpxdWVyeSl7cmV0dXJuKGNvbnRleHR8fHJvb3QpLmZpbmQoc2VsZWN0b3IpO31lbHNle3JldHVybiB0aGlzLmNvbnN0cnVjdG9yKGNvbnRleHQpLmZpbmQoc2VsZWN0b3IpO319ZWxzZSBpZihzZWxlY3Rvci5ub2RlVHlwZSl7dGhpc1swXT1zZWxlY3Rvcjt0aGlzLmxlbmd0aD0xO3JldHVybiB0aGlzO31lbHNlIGlmKGlzRnVuY3Rpb24oc2VsZWN0b3IpKXtyZXR1cm4gcm9vdC5yZWFkeSE9PXVuZGVmaW5lZD9yb290LnJlYWR5KHNlbGVjdG9yKTpzZWxlY3RvcihqUXVlcnkpO30KcmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoc2VsZWN0b3IsdGhpcyk7fTtpbml0LnByb3RvdHlwZT1qUXVlcnkuZm47cm9vdGpRdWVyeT1qUXVlcnkoZG9jdW1lbnQpO3ZhciBycGFyZW50c3ByZXY9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sZ3VhcmFudGVlZFVuaXF1ZT17Y2hpbGRyZW46dHJ1ZSxjb250ZW50czp0cnVlLG5leHQ6dHJ1ZSxwcmV2OnRydWV9O2pRdWVyeS5mbi5leHRlbmQoe2hhczpmdW5jdGlvbih0YXJnZXQpe3ZhciB0YXJnZXRzPWpRdWVyeSh0YXJnZXQsdGhpcyksbD10YXJnZXRzLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgaT0wO2Zvcig7aTxsO2krKyl7aWYoalF1ZXJ5LmNvbnRhaW5zKHRoaXMsdGFyZ2V0c1tpXSkpe3JldHVybiB0cnVlO319fSk7fSxjbG9zZXN0OmZ1bmN0aW9uKHNlbGVjdG9ycyxjb250ZXh0KXt2YXIgY3VyLGk9MCxsPXRoaXMubGVuZ3RoLG1hdGNoZWQ9W10sdGFyZ2V0cz10eXBlb2Ygc2VsZWN0b3JzIT09InN0cmluZyImJmpRdWVyeShzZWxlY3RvcnMpO2lmKCFybmVlZHNDb250ZXh0LnRlc3Qoc2VsZWN0b3JzKSl7Zm9yKDtpPGw7aSsrKXtmb3IoY3VyPXRoaXNbaV07Y3VyJiZjdXIhPT1jb250ZXh0O2N1cj1jdXIucGFyZW50Tm9kZSl7aWYoY3VyLm5vZGVUeXBlPDExJiYodGFyZ2V0cz90YXJnZXRzLmluZGV4KGN1cik+LTE6Y3VyLm5vZGVUeXBlPT09MSYmalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1cixzZWxlY3RvcnMpKSl7bWF0Y2hlZC5wdXNoKGN1cik7YnJlYWs7fX19fQpyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWF0Y2hlZC5sZW5ndGg+MT9qUXVlcnkudW5pcXVlU29ydChtYXRjaGVkKTptYXRjaGVkKTt9LGluZGV4OmZ1bmN0aW9uKGVsZW0pe2lmKCFlbGVtKXtyZXR1cm4odGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlKT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMTt9CmlmKHR5cGVvZiBlbGVtPT09InN0cmluZyIpe3JldHVybiBpbmRleE9mLmNhbGwoalF1ZXJ5KGVsZW0pLHRoaXNbMF0pO30KcmV0dXJuIGluZGV4T2YuY2FsbCh0aGlzLGVsZW0uanF1ZXJ5P2VsZW1bMF06ZWxlbSk7fSxhZGQ6ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeS51bmlxdWVTb3J0KGpRdWVyeS5tZXJnZSh0aGlzLmdldCgpLGpRdWVyeShzZWxlY3Rvcixjb250ZXh0KSkpKTt9LGFkZEJhY2s6ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiB0aGlzLmFkZChzZWxlY3Rvcj09bnVsbD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3RvcikpO319KTtmdW5jdGlvbiBzaWJsaW5nKGN1cixkaXIpe3doaWxlKChjdXI9Y3VyW2Rpcl0pJiZjdXIubm9kZVR5cGUhPT0xKXt9CnJldHVybiBjdXI7fQpqUXVlcnkuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGVsZW0pe3ZhciBwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlO3JldHVybiBwYXJlbnQmJnBhcmVudC5ub2RlVHlwZSE9PTExP3BhcmVudDpudWxsO30scGFyZW50czpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZGlyKGVsZW0sInBhcmVudE5vZGUiKTt9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlbGVtLF9pLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sInBhcmVudE5vZGUiLHVudGlsKTt9LG5leHQ6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmcoZWxlbSwibmV4dFNpYmxpbmciKTt9LHByZXY6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmcoZWxlbSwicHJldmlvdXNTaWJsaW5nIik7fSxuZXh0QWxsOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkaXIoZWxlbSwibmV4dFNpYmxpbmciKTt9LHByZXZBbGw6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGRpcihlbGVtLCJwcmV2aW91c1NpYmxpbmciKTt9LG5leHRVbnRpbDpmdW5jdGlvbihlbGVtLF9pLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sIm5leHRTaWJsaW5nIix1bnRpbCk7fSxwcmV2VW50aWw6ZnVuY3Rpb24oZWxlbSxfaSx1bnRpbCl7cmV0dXJuIGRpcihlbGVtLCJwcmV2aW91c1NpYmxpbmciLHVudGlsKTt9LHNpYmxpbmdzOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5ncygoZWxlbS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlbGVtKTt9LGNoaWxkcmVuOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5ncyhlbGVtLmZpcnN0Q2hpbGQpO30sY29udGVudHM6ZnVuY3Rpb24oZWxlbSl7aWYoZWxlbS5jb250ZW50RG9jdW1lbnQhPW51bGwmJmdldFByb3RvKGVsZW0uY29udGVudERvY3VtZW50KSl7cmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50O30KaWYobm9kZU5hbWUoZWxlbSwidGVtcGxhdGUiKSl7ZWxlbT1lbGVtLmNvbnRlbnR8fGVsZW07fQpyZXR1cm4galF1ZXJ5Lm1lcmdlKFtdLGVsZW0uY2hpbGROb2Rlcyk7fX0sZnVuY3Rpb24obmFtZSxmbil7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHVudGlsLHNlbGVjdG9yKXt2YXIgbWF0Y2hlZD1qUXVlcnkubWFwKHRoaXMsZm4sdW50aWwpO2lmKG5hbWUuc2xpY2UoLTUpIT09IlVudGlsIil7c2VsZWN0b3I9dW50aWw7fQppZihzZWxlY3RvciYmdHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe21hdGNoZWQ9alF1ZXJ5LmZpbHRlcihzZWxlY3RvcixtYXRjaGVkKTt9CmlmKHRoaXMubGVuZ3RoPjEpe2lmKCFndWFyYW50ZWVkVW5pcXVlW25hbWVdKXtqUXVlcnkudW5pcXVlU29ydChtYXRjaGVkKTt9CmlmKHJwYXJlbnRzcHJldi50ZXN0KG5hbWUpKXttYXRjaGVkLnJldmVyc2UoKTt9fQpyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWF0Y2hlZCk7fTt9KTt2YXIgcm5vdGh0bWx3aGl0ZT0oL1teXHgyMFx0XHJcblxmXSsvZyk7ZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyhvcHRpb25zKXt2YXIgb2JqZWN0PXt9O2pRdWVyeS5lYWNoKG9wdGlvbnMubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFtdLGZ1bmN0aW9uKF8sZmxhZyl7b2JqZWN0W2ZsYWddPXRydWU7fSk7cmV0dXJuIG9iamVjdDt9CmpRdWVyeS5DYWxsYmFja3M9ZnVuY3Rpb24ob3B0aW9ucyl7b3B0aW9ucz10eXBlb2Ygb3B0aW9ucz09PSJzdHJpbmciP2NyZWF0ZU9wdGlvbnMob3B0aW9ucyk6alF1ZXJ5LmV4dGVuZCh7fSxvcHRpb25zKTt2YXIKZmlyaW5nLG1lbW9yeSxmaXJlZCxsb2NrZWQsbGlzdD1bXSxxdWV1ZT1bXSxmaXJpbmdJbmRleD0tMSxmaXJlPWZ1bmN0aW9uKCl7bG9ja2VkPWxvY2tlZHx8b3B0aW9ucy5vbmNlO2ZpcmVkPWZpcmluZz10cnVlO2Zvcig7cXVldWUubGVuZ3RoO2ZpcmluZ0luZGV4PS0xKXttZW1vcnk9cXVldWUuc2hpZnQoKTt3aGlsZSgrK2ZpcmluZ0luZGV4PGxpc3QubGVuZ3RoKXtpZihsaXN0W2ZpcmluZ0luZGV4XS5hcHBseShtZW1vcnlbMF0sbWVtb3J5WzFdKT09PWZhbHNlJiZvcHRpb25zLnN0b3BPbkZhbHNlKXtmaXJpbmdJbmRleD1saXN0Lmxlbmd0aDttZW1vcnk9ZmFsc2U7fX19CmlmKCFvcHRpb25zLm1lbW9yeSl7bWVtb3J5PWZhbHNlO30KZmlyaW5nPWZhbHNlO2lmKGxvY2tlZCl7aWYobWVtb3J5KXtsaXN0PVtdO31lbHNle2xpc3Q9IiI7fX19LHNlbGY9e2FkZDpmdW5jdGlvbigpe2lmKGxpc3Qpe2lmKG1lbW9yeSYmIWZpcmluZyl7ZmlyaW5nSW5kZXg9bGlzdC5sZW5ndGgtMTtxdWV1ZS5wdXNoKG1lbW9yeSk7fQooZnVuY3Rpb24gYWRkKGFyZ3Mpe2pRdWVyeS5lYWNoKGFyZ3MsZnVuY3Rpb24oXyxhcmcpe2lmKGlzRnVuY3Rpb24oYXJnKSl7aWYoIW9wdGlvbnMudW5pcXVlfHwhc2VsZi5oYXMoYXJnKSl7bGlzdC5wdXNoKGFyZyk7fX1lbHNlIGlmKGFyZyYmYXJnLmxlbmd0aCYmdG9UeXBlKGFyZykhPT0ic3RyaW5nIil7YWRkKGFyZyk7fX0pO30pKGFyZ3VtZW50cyk7aWYobWVtb3J5JiYhZmlyaW5nKXtmaXJlKCk7fX0KcmV0dXJuIHRoaXM7fSxyZW1vdmU6ZnVuY3Rpb24oKXtqUXVlcnkuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oXyxhcmcpe3ZhciBpbmRleDt3aGlsZSgoaW5kZXg9alF1ZXJ5LmluQXJyYXkoYXJnLGxpc3QsaW5kZXgpKT4tMSl7bGlzdC5zcGxpY2UoaW5kZXgsMSk7aWYoaW5kZXg8PWZpcmluZ0luZGV4KXtmaXJpbmdJbmRleC0tO319fSk7cmV0dXJuIHRoaXM7fSxoYXM6ZnVuY3Rpb24oZm4pe3JldHVybiBmbj9qUXVlcnkuaW5BcnJheShmbixsaXN0KT4tMTpsaXN0Lmxlbmd0aD4wO30sZW1wdHk6ZnVuY3Rpb24oKXtpZihsaXN0KXtsaXN0PVtdO30KcmV0dXJuIHRoaXM7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7bG9ja2VkPXF1ZXVlPVtdO2xpc3Q9bWVtb3J5PSIiO3JldHVybiB0aGlzO30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbGlzdDt9LGxvY2s6ZnVuY3Rpb24oKXtsb2NrZWQ9cXVldWU9W107aWYoIW1lbW9yeSYmIWZpcmluZyl7bGlzdD1tZW1vcnk9IiI7fQpyZXR1cm4gdGhpczt9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiEhbG9ja2VkO30sZmlyZVdpdGg6ZnVuY3Rpb24oY29udGV4dCxhcmdzKXtpZighbG9ja2VkKXthcmdzPWFyZ3N8fFtdO2FyZ3M9W2NvbnRleHQsYXJncy5zbGljZT9hcmdzLnNsaWNlKCk6YXJnc107cXVldWUucHVzaChhcmdzKTtpZighZmlyaW5nKXtmaXJlKCk7fX0KcmV0dXJuIHRoaXM7fSxmaXJlOmZ1bmN0aW9uKCl7c2VsZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7fSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZmlyZWQ7fX07cmV0dXJuIHNlbGY7fTtmdW5jdGlvbiBJZGVudGl0eSh2KXtyZXR1cm4gdjt9CmZ1bmN0aW9uIFRocm93ZXIoZXgpe3Rocm93IGV4O30KZnVuY3Rpb24gYWRvcHRWYWx1ZSh2YWx1ZSxyZXNvbHZlLHJlamVjdCxub1ZhbHVlKXt2YXIgbWV0aG9kO3RyeXtpZih2YWx1ZSYmaXNGdW5jdGlvbigobWV0aG9kPXZhbHVlLnByb21pc2UpKSl7bWV0aG9kLmNhbGwodmFsdWUpLmRvbmUocmVzb2x2ZSkuZmFpbChyZWplY3QpO31lbHNlIGlmKHZhbHVlJiZpc0Z1bmN0aW9uKChtZXRob2Q9dmFsdWUudGhlbikpKXttZXRob2QuY2FsbCh2YWx1ZSxyZXNvbHZlLHJlamVjdCk7fWVsc2V7cmVzb2x2ZS5hcHBseSh1bmRlZmluZWQsW3ZhbHVlXS5zbGljZShub1ZhbHVlKSk7fX1jYXRjaCh2YWx1ZSl7cmVqZWN0LmFwcGx5KHVuZGVmaW5lZCxbdmFsdWVdKTt9fQpqUXVlcnkuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihmdW5jKXt2YXIgdHVwbGVzPVtbIm5vdGlmeSIsInByb2dyZXNzIixqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSxqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSwyXSxbInJlc29sdmUiLCJkb25lIixqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksMCwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksalF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxzdGF0ZT0icGVuZGluZyIscHJvbWlzZT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gc3RhdGU7fSxhbHdheXM6ZnVuY3Rpb24oKXtkZWZlcnJlZC5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpO3JldHVybiB0aGlzO30sImNhdGNoIjpmdW5jdGlvbihmbil7cmV0dXJuIHByb21pc2UudGhlbihudWxsLGZuKTt9LHBpcGU6ZnVuY3Rpb24oKXt2YXIgZm5zPWFyZ3VtZW50cztyZXR1cm4galF1ZXJ5LkRlZmVycmVkKGZ1bmN0aW9uKG5ld0RlZmVyKXtqUXVlcnkuZWFjaCh0dXBsZXMsZnVuY3Rpb24oX2ksdHVwbGUpe3ZhciBmbj1pc0Z1bmN0aW9uKGZuc1t0dXBsZVs0XV0pJiZmbnNbdHVwbGVbNF1dO2RlZmVycmVkW3R1cGxlWzFdXShmdW5jdGlvbigpe3ZhciByZXR1cm5lZD1mbiYmZm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHJldHVybmVkJiZpc0Z1bmN0aW9uKHJldHVybmVkLnByb21pc2UpKXtyZXR1cm5lZC5wcm9taXNlKCkucHJvZ3Jlc3MobmV3RGVmZXIubm90aWZ5KS5kb25lKG5ld0RlZmVyLnJlc29sdmUpLmZhaWwobmV3RGVmZXIucmVqZWN0KTt9ZWxzZXtuZXdEZWZlclt0dXBsZVswXSsiV2l0aCJdKHRoaXMsZm4/W3JldHVybmVkXTphcmd1bWVudHMpO319KTt9KTtmbnM9bnVsbDt9KS5wcm9taXNlKCk7fSx0aGVuOmZ1bmN0aW9uKG9uRnVsZmlsbGVkLG9uUmVqZWN0ZWQsb25Qcm9ncmVzcyl7dmFyIG1heERlcHRoPTA7ZnVuY3Rpb24gcmVzb2x2ZShkZXB0aCxkZWZlcnJlZCxoYW5kbGVyLHNwZWNpYWwpe3JldHVybiBmdW5jdGlvbigpe3ZhciB0aGF0PXRoaXMsYXJncz1hcmd1bWVudHMsbWlnaHRUaHJvdz1mdW5jdGlvbigpe3ZhciByZXR1cm5lZCx0aGVuO2lmKGRlcHRoPG1heERlcHRoKXtyZXR1cm47fQpyZXR1cm5lZD1oYW5kbGVyLmFwcGx5KHRoYXQsYXJncyk7aWYocmV0dXJuZWQ9PT1kZWZlcnJlZC5wcm9taXNlKCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO30KdGhlbj1yZXR1cm5lZCYmKHR5cGVvZiByZXR1cm5lZD09PSJvYmplY3QifHx0eXBlb2YgcmV0dXJuZWQ9PT0iZnVuY3Rpb24iKSYmcmV0dXJuZWQudGhlbjtpZihpc0Z1bmN0aW9uKHRoZW4pKXtpZihzcGVjaWFsKXt0aGVuLmNhbGwocmV0dXJuZWQscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxzcGVjaWFsKSxyZXNvbHZlKG1heERlcHRoLGRlZmVycmVkLFRocm93ZXIsc3BlY2lhbCkpO31lbHNle21heERlcHRoKys7dGhlbi5jYWxsKHJldHVybmVkLHJlc29sdmUobWF4RGVwdGgsZGVmZXJyZWQsSWRlbnRpdHksc3BlY2lhbCkscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxUaHJvd2VyLHNwZWNpYWwpLHJlc29sdmUobWF4RGVwdGgsZGVmZXJyZWQsSWRlbnRpdHksZGVmZXJyZWQubm90aWZ5V2l0aCkpO319ZWxzZXtpZihoYW5kbGVyIT09SWRlbnRpdHkpe3RoYXQ9dW5kZWZpbmVkO2FyZ3M9W3JldHVybmVkXTt9CihzcGVjaWFsfHxkZWZlcnJlZC5yZXNvbHZlV2l0aCkodGhhdCxhcmdzKTt9fSxwcm9jZXNzPXNwZWNpYWw/bWlnaHRUaHJvdzpmdW5jdGlvbigpe3RyeXttaWdodFRocm93KCk7fWNhdGNoKGUpe2lmKGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKXtqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHByb2Nlc3Muc3RhY2tUcmFjZSk7fQppZihkZXB0aCsxPj1tYXhEZXB0aCl7aWYoaGFuZGxlciE9PVRocm93ZXIpe3RoYXQ9dW5kZWZpbmVkO2FyZ3M9W2VdO30KZGVmZXJyZWQucmVqZWN0V2l0aCh0aGF0LGFyZ3MpO319fTtpZihkZXB0aCl7cHJvY2VzcygpO31lbHNle2lmKGpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2spe3Byb2Nlc3Muc3RhY2tUcmFjZT1qUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCk7fQp3aW5kb3cuc2V0VGltZW91dChwcm9jZXNzKTt9fTt9CnJldHVybiBqUXVlcnkuRGVmZXJyZWQoZnVuY3Rpb24obmV3RGVmZXIpe3R1cGxlc1swXVszXS5hZGQocmVzb2x2ZSgwLG5ld0RlZmVyLGlzRnVuY3Rpb24ob25Qcm9ncmVzcyk/b25Qcm9ncmVzczpJZGVudGl0eSxuZXdEZWZlci5ub3RpZnlXaXRoKSk7dHVwbGVzWzFdWzNdLmFkZChyZXNvbHZlKDAsbmV3RGVmZXIsaXNGdW5jdGlvbihvbkZ1bGZpbGxlZCk/b25GdWxmaWxsZWQ6SWRlbnRpdHkpKTt0dXBsZXNbMl1bM10uYWRkKHJlc29sdmUoMCxuZXdEZWZlcixpc0Z1bmN0aW9uKG9uUmVqZWN0ZWQpP29uUmVqZWN0ZWQ6VGhyb3dlcikpO30pLnByb21pc2UoKTt9LHByb21pc2U6ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqIT1udWxsP2pRdWVyeS5leHRlbmQob2JqLHByb21pc2UpOnByb21pc2U7fX0sZGVmZXJyZWQ9e307alF1ZXJ5LmVhY2godHVwbGVzLGZ1bmN0aW9uKGksdHVwbGUpe3ZhciBsaXN0PXR1cGxlWzJdLHN0YXRlU3RyaW5nPXR1cGxlWzVdO3Byb21pc2VbdHVwbGVbMV1dPWxpc3QuYWRkO2lmKHN0YXRlU3RyaW5nKXtsaXN0LmFkZChmdW5jdGlvbigpe3N0YXRlPXN0YXRlU3RyaW5nO30sdHVwbGVzWzMtaV1bMl0uZGlzYWJsZSx0dXBsZXNbMy1pXVszXS5kaXNhYmxlLHR1cGxlc1swXVsyXS5sb2NrLHR1cGxlc1swXVszXS5sb2NrKTt9Cmxpc3QuYWRkKHR1cGxlWzNdLmZpcmUpO2RlZmVycmVkW3R1cGxlWzBdXT1mdW5jdGlvbigpe2RlZmVycmVkW3R1cGxlWzBdKyJXaXRoIl0odGhpcz09PWRlZmVycmVkP3VuZGVmaW5lZDp0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7fTtkZWZlcnJlZFt0dXBsZVswXSsiV2l0aCJdPWxpc3QuZmlyZVdpdGg7fSk7cHJvbWlzZS5wcm9taXNlKGRlZmVycmVkKTtpZihmdW5jKXtmdW5jLmNhbGwoZGVmZXJyZWQsZGVmZXJyZWQpO30KcmV0dXJuIGRlZmVycmVkO30sd2hlbjpmdW5jdGlvbihzaW5nbGVWYWx1ZSl7dmFyCnJlbWFpbmluZz1hcmd1bWVudHMubGVuZ3RoLGk9cmVtYWluaW5nLHJlc29sdmVDb250ZXh0cz1BcnJheShpKSxyZXNvbHZlVmFsdWVzPXNsaWNlLmNhbGwoYXJndW1lbnRzKSxtYXN0ZXI9alF1ZXJ5LkRlZmVycmVkKCksdXBkYXRlRnVuYz1mdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24odmFsdWUpe3Jlc29sdmVDb250ZXh0c1tpXT10aGlzO3Jlc29sdmVWYWx1ZXNbaV09YXJndW1lbnRzLmxlbmd0aD4xP3NsaWNlLmNhbGwoYXJndW1lbnRzKTp2YWx1ZTtpZighKC0tcmVtYWluaW5nKSl7bWFzdGVyLnJlc29sdmVXaXRoKHJlc29sdmVDb250ZXh0cyxyZXNvbHZlVmFsdWVzKTt9fTt9O2lmKHJlbWFpbmluZzw9MSl7YWRvcHRWYWx1ZShzaW5nbGVWYWx1ZSxtYXN0ZXIuZG9uZSh1cGRhdGVGdW5jKGkpKS5yZXNvbHZlLG1hc3Rlci5yZWplY3QsIXJlbWFpbmluZyk7aWYobWFzdGVyLnN0YXRlKCk9PT0icGVuZGluZyJ8fGlzRnVuY3Rpb24ocmVzb2x2ZVZhbHVlc1tpXSYmcmVzb2x2ZVZhbHVlc1tpXS50aGVuKSl7cmV0dXJuIG1hc3Rlci50aGVuKCk7fX0Kd2hpbGUoaS0tKXthZG9wdFZhbHVlKHJlc29sdmVWYWx1ZXNbaV0sdXBkYXRlRnVuYyhpKSxtYXN0ZXIucmVqZWN0KTt9CnJldHVybiBtYXN0ZXIucHJvbWlzZSgpO319KTt2YXIgcmVycm9yTmFtZXM9L14oRXZhbHxJbnRlcm5hbHxSYW5nZXxSZWZlcmVuY2V8U3ludGF4fFR5cGV8VVJJKUVycm9yJC87alF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2s9ZnVuY3Rpb24oZXJyb3Isc3RhY2spe2lmKHdpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS53YXJuJiZlcnJvciYmcmVycm9yTmFtZXMudGVzdChlcnJvci5uYW1lKSl7d2luZG93LmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIitlcnJvci5tZXNzYWdlLGVycm9yLnN0YWNrLHN0YWNrKTt9fTtqUXVlcnkucmVhZHlFeGNlcHRpb249ZnVuY3Rpb24oZXJyb3Ipe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZXJyb3I7fSk7fTt2YXIgcmVhZHlMaXN0PWpRdWVyeS5EZWZlcnJlZCgpO2pRdWVyeS5mbi5yZWFkeT1mdW5jdGlvbihmbil7cmVhZHlMaXN0LnRoZW4oZm4pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXtqUXVlcnkucmVhZHlFeGNlcHRpb24oZXJyb3IpO30pO3JldHVybiB0aGlzO307alF1ZXJ5LmV4dGVuZCh7aXNSZWFkeTpmYWxzZSxyZWFkeVdhaXQ6MSxyZWFkeTpmdW5jdGlvbih3YWl0KXtpZih3YWl0PT09dHJ1ZT8tLWpRdWVyeS5yZWFkeVdhaXQ6alF1ZXJ5LmlzUmVhZHkpe3JldHVybjt9CmpRdWVyeS5pc1JlYWR5PXRydWU7aWYod2FpdCE9PXRydWUmJi0talF1ZXJ5LnJlYWR5V2FpdD4wKXtyZXR1cm47fQpyZWFkeUxpc3QucmVzb2x2ZVdpdGgoZG9jdW1lbnQsW2pRdWVyeV0pO319KTtqUXVlcnkucmVhZHkudGhlbj1yZWFkeUxpc3QudGhlbjtmdW5jdGlvbiBjb21wbGV0ZWQoKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixjb21wbGV0ZWQpO3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixjb21wbGV0ZWQpO2pRdWVyeS5yZWFkeSgpO30KaWYoZG9jdW1lbnQucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSJ8fChkb2N1bWVudC5yZWFkeVN0YXRlIT09ImxvYWRpbmciJiYhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKSl7d2luZG93LnNldFRpbWVvdXQoalF1ZXJ5LnJlYWR5KTt9ZWxzZXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixjb21wbGV0ZWQpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixjb21wbGV0ZWQpO30KdmFyIGFjY2Vzcz1mdW5jdGlvbihlbGVtcyxmbixrZXksdmFsdWUsY2hhaW5hYmxlLGVtcHR5R2V0LHJhdyl7dmFyIGk9MCxsZW49ZWxlbXMubGVuZ3RoLGJ1bGs9a2V5PT1udWxsO2lmKHRvVHlwZShrZXkpPT09Im9iamVjdCIpe2NoYWluYWJsZT10cnVlO2ZvcihpIGluIGtleSl7YWNjZXNzKGVsZW1zLGZuLGksa2V5W2ldLHRydWUsZW1wdHlHZXQscmF3KTt9fWVsc2UgaWYodmFsdWUhPT11bmRlZmluZWQpe2NoYWluYWJsZT10cnVlO2lmKCFpc0Z1bmN0aW9uKHZhbHVlKSl7cmF3PXRydWU7fQppZihidWxrKXtpZihyYXcpe2ZuLmNhbGwoZWxlbXMsdmFsdWUpO2ZuPW51bGw7fWVsc2V7YnVsaz1mbjtmbj1mdW5jdGlvbihlbGVtLF9rZXksdmFsdWUpe3JldHVybiBidWxrLmNhbGwoalF1ZXJ5KGVsZW0pLHZhbHVlKTt9O319CmlmKGZuKXtmb3IoO2k8bGVuO2krKyl7Zm4oZWxlbXNbaV0sa2V5LHJhdz92YWx1ZTp2YWx1ZS5jYWxsKGVsZW1zW2ldLGksZm4oZWxlbXNbaV0sa2V5KSkpO319fQppZihjaGFpbmFibGUpe3JldHVybiBlbGVtczt9CmlmKGJ1bGspe3JldHVybiBmbi5jYWxsKGVsZW1zKTt9CnJldHVybiBsZW4/Zm4oZWxlbXNbMF0sa2V5KTplbXB0eUdldDt9O3ZhciBybXNQcmVmaXg9L14tbXMtLyxyZGFzaEFscGhhPS8tKFthLXpdKS9nO2Z1bmN0aW9uIGZjYW1lbENhc2UoX2FsbCxsZXR0ZXIpe3JldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTt9CmZ1bmN0aW9uIGNhbWVsQ2FzZShzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZShybXNQcmVmaXgsIm1zLSIpLnJlcGxhY2UocmRhc2hBbHBoYSxmY2FtZWxDYXNlKTt9CnZhciBhY2NlcHREYXRhPWZ1bmN0aW9uKG93bmVyKXtyZXR1cm4gb3duZXIubm9kZVR5cGU9PT0xfHxvd25lci5ub2RlVHlwZT09PTl8fCEoK293bmVyLm5vZGVUeXBlKTt9O2Z1bmN0aW9uIERhdGEoKXt0aGlzLmV4cGFuZG89alF1ZXJ5LmV4cGFuZG8rRGF0YS51aWQrKzt9CkRhdGEudWlkPTE7RGF0YS5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKG93bmVyKXt2YXIgdmFsdWU9b3duZXJbdGhpcy5leHBhbmRvXTtpZighdmFsdWUpe3ZhbHVlPXt9O2lmKGFjY2VwdERhdGEob3duZXIpKXtpZihvd25lci5ub2RlVHlwZSl7b3duZXJbdGhpcy5leHBhbmRvXT12YWx1ZTt9ZWxzZXtPYmplY3QuZGVmaW5lUHJvcGVydHkob3duZXIsdGhpcy5leHBhbmRvLHt2YWx1ZTp2YWx1ZSxjb25maWd1cmFibGU6dHJ1ZX0pO319fQpyZXR1cm4gdmFsdWU7fSxzZXQ6ZnVuY3Rpb24ob3duZXIsZGF0YSx2YWx1ZSl7dmFyIHByb3AsY2FjaGU9dGhpcy5jYWNoZShvd25lcik7aWYodHlwZW9mIGRhdGE9PT0ic3RyaW5nIil7Y2FjaGVbY2FtZWxDYXNlKGRhdGEpXT12YWx1ZTt9ZWxzZXtmb3IocHJvcCBpbiBkYXRhKXtjYWNoZVtjYW1lbENhc2UocHJvcCldPWRhdGFbcHJvcF07fX0KcmV0dXJuIGNhY2hlO30sZ2V0OmZ1bmN0aW9uKG93bmVyLGtleSl7cmV0dXJuIGtleT09PXVuZGVmaW5lZD90aGlzLmNhY2hlKG93bmVyKTpvd25lclt0aGlzLmV4cGFuZG9dJiZvd25lclt0aGlzLmV4cGFuZG9dW2NhbWVsQ2FzZShrZXkpXTt9LGFjY2VzczpmdW5jdGlvbihvd25lcixrZXksdmFsdWUpe2lmKGtleT09PXVuZGVmaW5lZHx8KChrZXkmJnR5cGVvZiBrZXk9PT0ic3RyaW5nIikmJnZhbHVlPT09dW5kZWZpbmVkKSl7cmV0dXJuIHRoaXMuZ2V0KG93bmVyLGtleSk7fQp0aGlzLnNldChvd25lcixrZXksdmFsdWUpO3JldHVybiB2YWx1ZSE9PXVuZGVmaW5lZD92YWx1ZTprZXk7fSxyZW1vdmU6ZnVuY3Rpb24ob3duZXIsa2V5KXt2YXIgaSxjYWNoZT1vd25lclt0aGlzLmV4cGFuZG9dO2lmKGNhY2hlPT09dW5kZWZpbmVkKXtyZXR1cm47fQppZihrZXkhPT11bmRlZmluZWQpe2lmKEFycmF5LmlzQXJyYXkoa2V5KSl7a2V5PWtleS5tYXAoY2FtZWxDYXNlKTt9ZWxzZXtrZXk9Y2FtZWxDYXNlKGtleSk7a2V5PWtleSBpbiBjYWNoZT9ba2V5XTooa2V5Lm1hdGNoKHJub3RodG1sd2hpdGUpfHxbXSk7fQppPWtleS5sZW5ndGg7d2hpbGUoaS0tKXtkZWxldGUgY2FjaGVba2V5W2ldXTt9fQppZihrZXk9PT11bmRlZmluZWR8fGpRdWVyeS5pc0VtcHR5T2JqZWN0KGNhY2hlKSl7aWYob3duZXIubm9kZVR5cGUpe293bmVyW3RoaXMuZXhwYW5kb109dW5kZWZpbmVkO31lbHNle2RlbGV0ZSBvd25lclt0aGlzLmV4cGFuZG9dO319fSxoYXNEYXRhOmZ1bmN0aW9uKG93bmVyKXt2YXIgY2FjaGU9b3duZXJbdGhpcy5leHBhbmRvXTtyZXR1cm4gY2FjaGUhPT11bmRlZmluZWQmJiFqUXVlcnkuaXNFbXB0eU9iamVjdChjYWNoZSk7fX07dmFyIGRhdGFQcml2PW5ldyBEYXRhKCk7dmFyIGRhdGFVc2VyPW5ldyBEYXRhKCk7dmFyIHJicmFjZT0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLHJtdWx0aURhc2g9L1tBLVpdL2c7ZnVuY3Rpb24gZ2V0RGF0YShkYXRhKXtpZihkYXRhPT09InRydWUiKXtyZXR1cm4gdHJ1ZTt9CmlmKGRhdGE9PT0iZmFsc2UiKXtyZXR1cm4gZmFsc2U7fQppZihkYXRhPT09Im51bGwiKXtyZXR1cm4gbnVsbDt9CmlmKGRhdGE9PT0rZGF0YSsiIil7cmV0dXJuK2RhdGE7fQppZihyYnJhY2UudGVzdChkYXRhKSl7cmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7fQpyZXR1cm4gZGF0YTt9CmZ1bmN0aW9uIGRhdGFBdHRyKGVsZW0sa2V5LGRhdGEpe3ZhciBuYW1lO2lmKGRhdGE9PT11bmRlZmluZWQmJmVsZW0ubm9kZVR5cGU9PT0xKXtuYW1lPSJkYXRhLSIra2V5LnJlcGxhY2Uocm11bHRpRGFzaCwiLSQmIikudG9Mb3dlckNhc2UoKTtkYXRhPWVsZW0uZ2V0QXR0cmlidXRlKG5hbWUpO2lmKHR5cGVvZiBkYXRhPT09InN0cmluZyIpe3RyeXtkYXRhPWdldERhdGEoZGF0YSk7fWNhdGNoKGUpe30KZGF0YVVzZXIuc2V0KGVsZW0sa2V5LGRhdGEpO31lbHNle2RhdGE9dW5kZWZpbmVkO319CnJldHVybiBkYXRhO30KalF1ZXJ5LmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZGF0YVVzZXIuaGFzRGF0YShlbGVtKXx8ZGF0YVByaXYuaGFzRGF0YShlbGVtKTt9LGRhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lLGRhdGEpe3JldHVybiBkYXRhVXNlci5hY2Nlc3MoZWxlbSxuYW1lLGRhdGEpO30scmVtb3ZlRGF0YTpmdW5jdGlvbihlbGVtLG5hbWUpe2RhdGFVc2VyLnJlbW92ZShlbGVtLG5hbWUpO30sX2RhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lLGRhdGEpe3JldHVybiBkYXRhUHJpdi5hY2Nlc3MoZWxlbSxuYW1lLGRhdGEpO30sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZWxlbSxuYW1lKXtkYXRhUHJpdi5yZW1vdmUoZWxlbSxuYW1lKTt9fSk7alF1ZXJ5LmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihrZXksdmFsdWUpe3ZhciBpLG5hbWUsZGF0YSxlbGVtPXRoaXNbMF0sYXR0cnM9ZWxlbSYmZWxlbS5hdHRyaWJ1dGVzO2lmKGtleT09PXVuZGVmaW5lZCl7aWYodGhpcy5sZW5ndGgpe2RhdGE9ZGF0YVVzZXIuZ2V0KGVsZW0pO2lmKGVsZW0ubm9kZVR5cGU9PT0xJiYhZGF0YVByaXYuZ2V0KGVsZW0sImhhc0RhdGFBdHRycyIpKXtpPWF0dHJzLmxlbmd0aDt3aGlsZShpLS0pe2lmKGF0dHJzW2ldKXtuYW1lPWF0dHJzW2ldLm5hbWU7aWYobmFtZS5pbmRleE9mKCJkYXRhLSIpPT09MCl7bmFtZT1jYW1lbENhc2UobmFtZS5zbGljZSg1KSk7ZGF0YUF0dHIoZWxlbSxuYW1lLGRhdGFbbmFtZV0pO319fQpkYXRhUHJpdi5zZXQoZWxlbSwiaGFzRGF0YUF0dHJzIix0cnVlKTt9fQpyZXR1cm4gZGF0YTt9CmlmKHR5cGVvZiBrZXk9PT0ib2JqZWN0Iil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RhdGFVc2VyLnNldCh0aGlzLGtleSk7fSk7fQpyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24odmFsdWUpe3ZhciBkYXRhO2lmKGVsZW0mJnZhbHVlPT09dW5kZWZpbmVkKXtkYXRhPWRhdGFVc2VyLmdldChlbGVtLGtleSk7aWYoZGF0YSE9PXVuZGVmaW5lZCl7cmV0dXJuIGRhdGE7fQpkYXRhPWRhdGFBdHRyKGVsZW0sa2V5KTtpZihkYXRhIT09dW5kZWZpbmVkKXtyZXR1cm4gZGF0YTt9CnJldHVybjt9CnRoaXMuZWFjaChmdW5jdGlvbigpe2RhdGFVc2VyLnNldCh0aGlzLGtleSx2YWx1ZSk7fSk7fSxudWxsLHZhbHVlLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLHRydWUpO30scmVtb3ZlRGF0YTpmdW5jdGlvbihrZXkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkYXRhVXNlci5yZW1vdmUodGhpcyxrZXkpO30pO319KTtqUXVlcnkuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlbGVtLHR5cGUsZGF0YSl7dmFyIHF1ZXVlO2lmKGVsZW0pe3R5cGU9KHR5cGV8fCJmeCIpKyJxdWV1ZSI7cXVldWU9ZGF0YVByaXYuZ2V0KGVsZW0sdHlwZSk7aWYoZGF0YSl7aWYoIXF1ZXVlfHxBcnJheS5pc0FycmF5KGRhdGEpKXtxdWV1ZT1kYXRhUHJpdi5hY2Nlc3MoZWxlbSx0eXBlLGpRdWVyeS5tYWtlQXJyYXkoZGF0YSkpO31lbHNle3F1ZXVlLnB1c2goZGF0YSk7fX0KcmV0dXJuIHF1ZXVlfHxbXTt9fSxkZXF1ZXVlOmZ1bmN0aW9uKGVsZW0sdHlwZSl7dHlwZT10eXBlfHwiZngiO3ZhciBxdWV1ZT1qUXVlcnkucXVldWUoZWxlbSx0eXBlKSxzdGFydExlbmd0aD1xdWV1ZS5sZW5ndGgsZm49cXVldWUuc2hpZnQoKSxob29rcz1qUXVlcnkuX3F1ZXVlSG9va3MoZWxlbSx0eXBlKSxuZXh0PWZ1bmN0aW9uKCl7alF1ZXJ5LmRlcXVldWUoZWxlbSx0eXBlKTt9O2lmKGZuPT09ImlucHJvZ3Jlc3MiKXtmbj1xdWV1ZS5zaGlmdCgpO3N0YXJ0TGVuZ3RoLS07fQppZihmbil7aWYodHlwZT09PSJmeCIpe3F1ZXVlLnVuc2hpZnQoImlucHJvZ3Jlc3MiKTt9CmRlbGV0ZSBob29rcy5zdG9wO2ZuLmNhbGwoZWxlbSxuZXh0LGhvb2tzKTt9CmlmKCFzdGFydExlbmd0aCYmaG9va3Mpe2hvb2tzLmVtcHR5LmZpcmUoKTt9fSxfcXVldWVIb29rczpmdW5jdGlvbihlbGVtLHR5cGUpe3ZhciBrZXk9dHlwZSsicXVldWVIb29rcyI7cmV0dXJuIGRhdGFQcml2LmdldChlbGVtLGtleSl8fGRhdGFQcml2LmFjY2VzcyhlbGVtLGtleSx7ZW1wdHk6alF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtkYXRhUHJpdi5yZW1vdmUoZWxlbSxbdHlwZSsicXVldWUiLGtleV0pO30pfSk7fX0pO2pRdWVyeS5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKHR5cGUsZGF0YSl7dmFyIHNldHRlcj0yO2lmKHR5cGVvZiB0eXBlIT09InN0cmluZyIpe2RhdGE9dHlwZTt0eXBlPSJmeCI7c2V0dGVyLS07fQppZihhcmd1bWVudHMubGVuZ3RoPHNldHRlcil7cmV0dXJuIGpRdWVyeS5xdWV1ZSh0aGlzWzBdLHR5cGUpO30KcmV0dXJuIGRhdGE9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcXVldWU9alF1ZXJ5LnF1ZXVlKHRoaXMsdHlwZSxkYXRhKTtqUXVlcnkuX3F1ZXVlSG9va3ModGhpcyx0eXBlKTtpZih0eXBlPT09ImZ4IiYmcXVldWVbMF0hPT0iaW5wcm9ncmVzcyIpe2pRdWVyeS5kZXF1ZXVlKHRoaXMsdHlwZSk7fX0pO30sZGVxdWV1ZTpmdW5jdGlvbih0eXBlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmRlcXVldWUodGhpcyx0eXBlKTt9KTt9LGNsZWFyUXVldWU6ZnVuY3Rpb24odHlwZSl7cmV0dXJuIHRoaXMucXVldWUodHlwZXx8ImZ4IixbXSk7fSxwcm9taXNlOmZ1bmN0aW9uKHR5cGUsb2JqKXt2YXIgdG1wLGNvdW50PTEsZGVmZXI9alF1ZXJ5LkRlZmVycmVkKCksZWxlbWVudHM9dGhpcyxpPXRoaXMubGVuZ3RoLHJlc29sdmU9ZnVuY3Rpb24oKXtpZighKC0tY291bnQpKXtkZWZlci5yZXNvbHZlV2l0aChlbGVtZW50cyxbZWxlbWVudHNdKTt9fTtpZih0eXBlb2YgdHlwZSE9PSJzdHJpbmciKXtvYmo9dHlwZTt0eXBlPXVuZGVmaW5lZDt9CnR5cGU9dHlwZXx8ImZ4Ijt3aGlsZShpLS0pe3RtcD1kYXRhUHJpdi5nZXQoZWxlbWVudHNbaV0sdHlwZSsicXVldWVIb29rcyIpO2lmKHRtcCYmdG1wLmVtcHR5KXtjb3VudCsrO3RtcC5lbXB0eS5hZGQocmVzb2x2ZSk7fX0KcmVzb2x2ZSgpO3JldHVybiBkZWZlci5wcm9taXNlKG9iaik7fX0pO3ZhciBwbnVtPSgvWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvKS5zb3VyY2U7dmFyIHJjc3NOdW09bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3BudW0rIikoW2EteiVdKikkIiwiaSIpO3ZhciBjc3NFeHBhbmQ9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXTt2YXIgZG9jdW1lbnRFbGVtZW50PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDt2YXIgaXNBdHRhY2hlZD1mdW5jdGlvbihlbGVtKXtyZXR1cm4galF1ZXJ5LmNvbnRhaW5zKGVsZW0ub3duZXJEb2N1bWVudCxlbGVtKTt9LGNvbXBvc2VkPXtjb21wb3NlZDp0cnVlfTtpZihkb2N1bWVudEVsZW1lbnQuZ2V0Um9vdE5vZGUpe2lzQXR0YWNoZWQ9ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGpRdWVyeS5jb250YWlucyhlbGVtLm93bmVyRG9jdW1lbnQsZWxlbSl8fGVsZW0uZ2V0Um9vdE5vZGUoY29tcG9zZWQpPT09ZWxlbS5vd25lckRvY3VtZW50O307fQp2YXIgaXNIaWRkZW5XaXRoaW5UcmVlPWZ1bmN0aW9uKGVsZW0sZWwpe2VsZW09ZWx8fGVsZW07cmV0dXJuIGVsZW0uc3R5bGUuZGlzcGxheT09PSJub25lInx8ZWxlbS5zdHlsZS5kaXNwbGF5PT09IiImJmlzQXR0YWNoZWQoZWxlbSkmJmpRdWVyeS5jc3MoZWxlbSwiZGlzcGxheSIpPT09Im5vbmUiO307ZnVuY3Rpb24gYWRqdXN0Q1NTKGVsZW0scHJvcCx2YWx1ZVBhcnRzLHR3ZWVuKXt2YXIgYWRqdXN0ZWQsc2NhbGUsbWF4SXRlcmF0aW9ucz0yMCxjdXJyZW50VmFsdWU9dHdlZW4/ZnVuY3Rpb24oKXtyZXR1cm4gdHdlZW4uY3VyKCk7fTpmdW5jdGlvbigpe3JldHVybiBqUXVlcnkuY3NzKGVsZW0scHJvcCwiIik7fSxpbml0aWFsPWN1cnJlbnRWYWx1ZSgpLHVuaXQ9dmFsdWVQYXJ0cyYmdmFsdWVQYXJ0c1szXXx8KGpRdWVyeS5jc3NOdW1iZXJbcHJvcF0/IiI6InB4IiksaW5pdGlhbEluVW5pdD1lbGVtLm5vZGVUeXBlJiYoalF1ZXJ5LmNzc051bWJlcltwcm9wXXx8dW5pdCE9PSJweCImJitpbml0aWFsKSYmcmNzc051bS5leGVjKGpRdWVyeS5jc3MoZWxlbSxwcm9wKSk7aWYoaW5pdGlhbEluVW5pdCYmaW5pdGlhbEluVW5pdFszXSE9PXVuaXQpe2luaXRpYWw9aW5pdGlhbC8yO3VuaXQ9dW5pdHx8aW5pdGlhbEluVW5pdFszXTtpbml0aWFsSW5Vbml0PStpbml0aWFsfHwxO3doaWxlKG1heEl0ZXJhdGlvbnMtLSl7alF1ZXJ5LnN0eWxlKGVsZW0scHJvcCxpbml0aWFsSW5Vbml0K3VuaXQpO2lmKCgxLXNjYWxlKSooMS0oc2NhbGU9Y3VycmVudFZhbHVlKCkvaW5pdGlhbHx8MC41KSk8PTApe21heEl0ZXJhdGlvbnM9MDt9CmluaXRpYWxJblVuaXQ9aW5pdGlhbEluVW5pdC9zY2FsZTt9CmluaXRpYWxJblVuaXQ9aW5pdGlhbEluVW5pdCoyO2pRdWVyeS5zdHlsZShlbGVtLHByb3AsaW5pdGlhbEluVW5pdCt1bml0KTt2YWx1ZVBhcnRzPXZhbHVlUGFydHN8fFtdO30KaWYodmFsdWVQYXJ0cyl7aW5pdGlhbEluVW5pdD0raW5pdGlhbEluVW5pdHx8K2luaXRpYWx8fDA7YWRqdXN0ZWQ9dmFsdWVQYXJ0c1sxXT9pbml0aWFsSW5Vbml0Kyh2YWx1ZVBhcnRzWzFdKzEpKnZhbHVlUGFydHNbMl06K3ZhbHVlUGFydHNbMl07aWYodHdlZW4pe3R3ZWVuLnVuaXQ9dW5pdDt0d2Vlbi5zdGFydD1pbml0aWFsSW5Vbml0O3R3ZWVuLmVuZD1hZGp1c3RlZDt9fQpyZXR1cm4gYWRqdXN0ZWQ7fQp2YXIgZGVmYXVsdERpc3BsYXlNYXA9e307ZnVuY3Rpb24gZ2V0RGVmYXVsdERpc3BsYXkoZWxlbSl7dmFyIHRlbXAsZG9jPWVsZW0ub3duZXJEb2N1bWVudCxub2RlTmFtZT1lbGVtLm5vZGVOYW1lLGRpc3BsYXk9ZGVmYXVsdERpc3BsYXlNYXBbbm9kZU5hbWVdO2lmKGRpc3BsYXkpe3JldHVybiBkaXNwbGF5O30KdGVtcD1kb2MuYm9keS5hcHBlbmRDaGlsZChkb2MuY3JlYXRlRWxlbWVudChub2RlTmFtZSkpO2Rpc3BsYXk9alF1ZXJ5LmNzcyh0ZW1wLCJkaXNwbGF5Iik7dGVtcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRlbXApO2lmKGRpc3BsYXk9PT0ibm9uZSIpe2Rpc3BsYXk9ImJsb2NrIjt9CmRlZmF1bHREaXNwbGF5TWFwW25vZGVOYW1lXT1kaXNwbGF5O3JldHVybiBkaXNwbGF5O30KZnVuY3Rpb24gc2hvd0hpZGUoZWxlbWVudHMsc2hvdyl7dmFyIGRpc3BsYXksZWxlbSx2YWx1ZXM9W10saW5kZXg9MCxsZW5ndGg9ZWxlbWVudHMubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2VsZW09ZWxlbWVudHNbaW5kZXhdO2lmKCFlbGVtLnN0eWxlKXtjb250aW51ZTt9CmRpc3BsYXk9ZWxlbS5zdHlsZS5kaXNwbGF5O2lmKHNob3cpe2lmKGRpc3BsYXk9PT0ibm9uZSIpe3ZhbHVlc1tpbmRleF09ZGF0YVByaXYuZ2V0KGVsZW0sImRpc3BsYXkiKXx8bnVsbDtpZighdmFsdWVzW2luZGV4XSl7ZWxlbS5zdHlsZS5kaXNwbGF5PSIiO319CmlmKGVsZW0uc3R5bGUuZGlzcGxheT09PSIiJiZpc0hpZGRlbldpdGhpblRyZWUoZWxlbSkpe3ZhbHVlc1tpbmRleF09Z2V0RGVmYXVsdERpc3BsYXkoZWxlbSk7fX1lbHNle2lmKGRpc3BsYXkhPT0ibm9uZSIpe3ZhbHVlc1tpbmRleF09Im5vbmUiO2RhdGFQcml2LnNldChlbGVtLCJkaXNwbGF5IixkaXNwbGF5KTt9fX0KZm9yKGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2lmKHZhbHVlc1tpbmRleF0hPW51bGwpe2VsZW1lbnRzW2luZGV4XS5zdHlsZS5kaXNwbGF5PXZhbHVlc1tpbmRleF07fX0KcmV0dXJuIGVsZW1lbnRzO30KalF1ZXJ5LmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbigpe3JldHVybiBzaG93SGlkZSh0aGlzLHRydWUpO30saGlkZTpmdW5jdGlvbigpe3JldHVybiBzaG93SGlkZSh0aGlzKTt9LHRvZ2dsZTpmdW5jdGlvbihzdGF0ZSl7aWYodHlwZW9mIHN0YXRlPT09ImJvb2xlYW4iKXtyZXR1cm4gc3RhdGU/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoaXNIaWRkZW5XaXRoaW5UcmVlKHRoaXMpKXtqUXVlcnkodGhpcykuc2hvdygpO31lbHNle2pRdWVyeSh0aGlzKS5oaWRlKCk7fX0pO319KTt2YXIgcmNoZWNrYWJsZVR5cGU9KC9eKD86Y2hlY2tib3h8cmFkaW8pJC9pKTt2YXIgcnRhZ05hbWU9KC88KFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKS9pKTt2YXIgcnNjcmlwdFR5cGU9KC9eJHxebW9kdWxlJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSk7KGZ1bmN0aW9uKCl7dmFyIGZyYWdtZW50PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxkaXY9ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGlucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7aW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKTtpbnB1dC5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIik7aW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwidCIpO2Rpdi5hcHBlbmRDaGlsZChpbnB1dCk7c3VwcG9ydC5jaGVja0Nsb25lPWRpdi5jbG9uZU5vZGUodHJ1ZSkuY2xvbmVOb2RlKHRydWUpLmxhc3RDaGlsZC5jaGVja2VkO2Rpdi5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iO3N1cHBvcnQubm9DbG9uZUNoZWNrZWQ9ISFkaXYuY2xvbmVOb2RlKHRydWUpLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7ZGl2LmlubmVySFRNTD0iPG9wdGlvbj48L29wdGlvbj4iO3N1cHBvcnQub3B0aW9uPSEhZGl2Lmxhc3RDaGlsZDt9KSgpO3ZhciB3cmFwTWFwPXt0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07d3JhcE1hcC50Ym9keT13cmFwTWFwLnRmb290PXdyYXBNYXAuY29sZ3JvdXA9d3JhcE1hcC5jYXB0aW9uPXdyYXBNYXAudGhlYWQ7d3JhcE1hcC50aD13cmFwTWFwLnRkO2lmKCFzdXBwb3J0Lm9wdGlvbil7d3JhcE1hcC5vcHRncm91cD13cmFwTWFwLm9wdGlvbj1bMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdO30KZnVuY3Rpb24gZ2V0QWxsKGNvbnRleHQsdGFnKXt2YXIgcmV0O2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09InVuZGVmaW5lZCIpe3JldD1jb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ3x8IioiKTt9ZWxzZSBpZih0eXBlb2YgY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsIT09InVuZGVmaW5lZCIpe3JldD1jb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwodGFnfHwiKiIpO31lbHNle3JldD1bXTt9CmlmKHRhZz09PXVuZGVmaW5lZHx8dGFnJiZub2RlTmFtZShjb250ZXh0LHRhZykpe3JldHVybiBqUXVlcnkubWVyZ2UoW2NvbnRleHRdLHJldCk7fQpyZXR1cm4gcmV0O30KZnVuY3Rpb24gc2V0R2xvYmFsRXZhbChlbGVtcyxyZWZFbGVtZW50cyl7dmFyIGk9MCxsPWVsZW1zLmxlbmd0aDtmb3IoO2k8bDtpKyspe2RhdGFQcml2LnNldChlbGVtc1tpXSwiZ2xvYmFsRXZhbCIsIXJlZkVsZW1lbnRzfHxkYXRhUHJpdi5nZXQocmVmRWxlbWVudHNbaV0sImdsb2JhbEV2YWwiKSk7fX0KdmFyIHJodG1sPS88fCYjP1x3KzsvO2Z1bmN0aW9uIGJ1aWxkRnJhZ21lbnQoZWxlbXMsY29udGV4dCxzY3JpcHRzLHNlbGVjdGlvbixpZ25vcmVkKXt2YXIgZWxlbSx0bXAsdGFnLHdyYXAsYXR0YWNoZWQsaixmcmFnbWVudD1jb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxub2Rlcz1bXSxpPTAsbD1lbGVtcy5sZW5ndGg7Zm9yKDtpPGw7aSsrKXtlbGVtPWVsZW1zW2ldO2lmKGVsZW18fGVsZW09PT0wKXtpZih0b1R5cGUoZWxlbSk9PT0ib2JqZWN0Iil7alF1ZXJ5Lm1lcmdlKG5vZGVzLGVsZW0ubm9kZVR5cGU/W2VsZW1dOmVsZW0pO31lbHNlIGlmKCFyaHRtbC50ZXN0KGVsZW0pKXtub2Rlcy5wdXNoKGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoZWxlbSkpO31lbHNle3RtcD10bXB8fGZyYWdtZW50LmFwcGVuZENoaWxkKGNvbnRleHQuY3JlYXRlRWxlbWVudCgiZGl2IikpO3RhZz0ocnRhZ05hbWUuZXhlYyhlbGVtKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKTt3cmFwPXdyYXBNYXBbdGFnXXx8d3JhcE1hcC5fZGVmYXVsdDt0bXAuaW5uZXJIVE1MPXdyYXBbMV0ralF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoZWxlbSkrd3JhcFsyXTtqPXdyYXBbMF07d2hpbGUoai0tKXt0bXA9dG1wLmxhc3RDaGlsZDt9CmpRdWVyeS5tZXJnZShub2Rlcyx0bXAuY2hpbGROb2Rlcyk7dG1wPWZyYWdtZW50LmZpcnN0Q2hpbGQ7dG1wLnRleHRDb250ZW50PSIiO319fQpmcmFnbWVudC50ZXh0Q29udGVudD0iIjtpPTA7d2hpbGUoKGVsZW09bm9kZXNbaSsrXSkpe2lmKHNlbGVjdGlvbiYmalF1ZXJ5LmluQXJyYXkoZWxlbSxzZWxlY3Rpb24pPi0xKXtpZihpZ25vcmVkKXtpZ25vcmVkLnB1c2goZWxlbSk7fQpjb250aW51ZTt9CmF0dGFjaGVkPWlzQXR0YWNoZWQoZWxlbSk7dG1wPWdldEFsbChmcmFnbWVudC5hcHBlbmRDaGlsZChlbGVtKSwic2NyaXB0Iik7aWYoYXR0YWNoZWQpe3NldEdsb2JhbEV2YWwodG1wKTt9CmlmKHNjcmlwdHMpe2o9MDt3aGlsZSgoZWxlbT10bXBbaisrXSkpe2lmKHJzY3JpcHRUeXBlLnRlc3QoZWxlbS50eXBlfHwiIikpe3NjcmlwdHMucHVzaChlbGVtKTt9fX19CnJldHVybiBmcmFnbWVudDt9CnZhcgpya2V5RXZlbnQ9L15rZXkvLHJtb3VzZUV2ZW50PS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxydHlwZW5hbWVzcGFjZT0vXihbXi5dKikoPzpcLiguKyl8KS87ZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpe3JldHVybiB0cnVlO30KZnVuY3Rpb24gcmV0dXJuRmFsc2UoKXtyZXR1cm4gZmFsc2U7fQpmdW5jdGlvbiBleHBlY3RTeW5jKGVsZW0sdHlwZSl7cmV0dXJuKGVsZW09PT1zYWZlQWN0aXZlRWxlbWVudCgpKT09PSh0eXBlPT09ImZvY3VzIik7fQpmdW5jdGlvbiBzYWZlQWN0aXZlRWxlbWVudCgpe3RyeXtyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDt9Y2F0Y2goZXJyKXt9fQpmdW5jdGlvbiBvbihlbGVtLHR5cGVzLHNlbGVjdG9yLGRhdGEsZm4sb25lKXt2YXIgb3JpZ0ZuLHR5cGU7aWYodHlwZW9mIHR5cGVzPT09Im9iamVjdCIpe2lmKHR5cGVvZiBzZWxlY3RvciE9PSJzdHJpbmciKXtkYXRhPWRhdGF8fHNlbGVjdG9yO3NlbGVjdG9yPXVuZGVmaW5lZDt9CmZvcih0eXBlIGluIHR5cGVzKXtvbihlbGVtLHR5cGUsc2VsZWN0b3IsZGF0YSx0eXBlc1t0eXBlXSxvbmUpO30KcmV0dXJuIGVsZW07fQppZihkYXRhPT1udWxsJiZmbj09bnVsbCl7Zm49c2VsZWN0b3I7ZGF0YT1zZWxlY3Rvcj11bmRlZmluZWQ7fWVsc2UgaWYoZm49PW51bGwpe2lmKHR5cGVvZiBzZWxlY3Rvcj09PSJzdHJpbmciKXtmbj1kYXRhO2RhdGE9dW5kZWZpbmVkO31lbHNle2ZuPWRhdGE7ZGF0YT1zZWxlY3RvcjtzZWxlY3Rvcj11bmRlZmluZWQ7fX0KaWYoZm49PT1mYWxzZSl7Zm49cmV0dXJuRmFsc2U7fWVsc2UgaWYoIWZuKXtyZXR1cm4gZWxlbTt9CmlmKG9uZT09PTEpe29yaWdGbj1mbjtmbj1mdW5jdGlvbihldmVudCl7alF1ZXJ5KCkub2ZmKGV2ZW50KTtyZXR1cm4gb3JpZ0ZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O2ZuLmd1aWQ9b3JpZ0ZuLmd1aWR8fChvcmlnRm4uZ3VpZD1qUXVlcnkuZ3VpZCsrKTt9CnJldHVybiBlbGVtLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkuZXZlbnQuYWRkKHRoaXMsdHlwZXMsZm4sZGF0YSxzZWxlY3Rvcik7fSk7fQpqUXVlcnkuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oZWxlbSx0eXBlcyxoYW5kbGVyLGRhdGEsc2VsZWN0b3Ipe3ZhciBoYW5kbGVPYmpJbixldmVudEhhbmRsZSx0bXAsZXZlbnRzLHQsaGFuZGxlT2JqLHNwZWNpYWwsaGFuZGxlcnMsdHlwZSxuYW1lc3BhY2VzLG9yaWdUeXBlLGVsZW1EYXRhPWRhdGFQcml2LmdldChlbGVtKTtpZighYWNjZXB0RGF0YShlbGVtKSl7cmV0dXJuO30KaWYoaGFuZGxlci5oYW5kbGVyKXtoYW5kbGVPYmpJbj1oYW5kbGVyO2hhbmRsZXI9aGFuZGxlT2JqSW4uaGFuZGxlcjtzZWxlY3Rvcj1oYW5kbGVPYmpJbi5zZWxlY3Rvcjt9CmlmKHNlbGVjdG9yKXtqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoZG9jdW1lbnRFbGVtZW50LHNlbGVjdG9yKTt9CmlmKCFoYW5kbGVyLmd1aWQpe2hhbmRsZXIuZ3VpZD1qUXVlcnkuZ3VpZCsrO30KaWYoIShldmVudHM9ZWxlbURhdGEuZXZlbnRzKSl7ZXZlbnRzPWVsZW1EYXRhLmV2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpO30KaWYoIShldmVudEhhbmRsZT1lbGVtRGF0YS5oYW5kbGUpKXtldmVudEhhbmRsZT1lbGVtRGF0YS5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBqUXVlcnkhPT0idW5kZWZpbmVkIiYmalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCE9PWUudHlwZT9qUXVlcnkuZXZlbnQuZGlzcGF0Y2guYXBwbHkoZWxlbSxhcmd1bWVudHMpOnVuZGVmaW5lZDt9O30KdHlwZXM9KHR5cGVzfHwiIikubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFsiIl07dD10eXBlcy5sZW5ndGg7d2hpbGUodC0tKXt0bXA9cnR5cGVuYW1lc3BhY2UuZXhlYyh0eXBlc1t0XSl8fFtdO3R5cGU9b3JpZ1R5cGU9dG1wWzFdO25hbWVzcGFjZXM9KHRtcFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpO2lmKCF0eXBlKXtjb250aW51ZTt9CnNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbdHlwZV18fHt9O3R5cGU9KHNlbGVjdG9yP3NwZWNpYWwuZGVsZWdhdGVUeXBlOnNwZWNpYWwuYmluZFR5cGUpfHx0eXBlO3NwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbdHlwZV18fHt9O2hhbmRsZU9iaj1qUXVlcnkuZXh0ZW5kKHt0eXBlOnR5cGUsb3JpZ1R5cGU6b3JpZ1R5cGUsZGF0YTpkYXRhLGhhbmRsZXI6aGFuZGxlcixndWlkOmhhbmRsZXIuZ3VpZCxzZWxlY3RvcjpzZWxlY3RvcixuZWVkc0NvbnRleHQ6c2VsZWN0b3ImJmpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KHNlbGVjdG9yKSxuYW1lc3BhY2U6bmFtZXNwYWNlcy5qb2luKCIuIil9LGhhbmRsZU9iakluKTtpZighKGhhbmRsZXJzPWV2ZW50c1t0eXBlXSkpe2hhbmRsZXJzPWV2ZW50c1t0eXBlXT1bXTtoYW5kbGVycy5kZWxlZ2F0ZUNvdW50PTA7aWYoIXNwZWNpYWwuc2V0dXB8fHNwZWNpYWwuc2V0dXAuY2FsbChlbGVtLGRhdGEsbmFtZXNwYWNlcyxldmVudEhhbmRsZSk9PT1mYWxzZSl7aWYoZWxlbS5hZGRFdmVudExpc3RlbmVyKXtlbGVtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSxldmVudEhhbmRsZSk7fX19CmlmKHNwZWNpYWwuYWRkKXtzcGVjaWFsLmFkZC5jYWxsKGVsZW0saGFuZGxlT2JqKTtpZighaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCl7aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZD1oYW5kbGVyLmd1aWQ7fX0KaWYoc2VsZWN0b3Ipe2hhbmRsZXJzLnNwbGljZShoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssMCxoYW5kbGVPYmopO31lbHNle2hhbmRsZXJzLnB1c2goaGFuZGxlT2JqKTt9CmpRdWVyeS5ldmVudC5nbG9iYWxbdHlwZV09dHJ1ZTt9fSxyZW1vdmU6ZnVuY3Rpb24oZWxlbSx0eXBlcyxoYW5kbGVyLHNlbGVjdG9yLG1hcHBlZFR5cGVzKXt2YXIgaixvcmlnQ291bnQsdG1wLGV2ZW50cyx0LGhhbmRsZU9iaixzcGVjaWFsLGhhbmRsZXJzLHR5cGUsbmFtZXNwYWNlcyxvcmlnVHlwZSxlbGVtRGF0YT1kYXRhUHJpdi5oYXNEYXRhKGVsZW0pJiZkYXRhUHJpdi5nZXQoZWxlbSk7aWYoIWVsZW1EYXRhfHwhKGV2ZW50cz1lbGVtRGF0YS5ldmVudHMpKXtyZXR1cm47fQp0eXBlcz0odHlwZXN8fCIiKS5tYXRjaChybm90aHRtbHdoaXRlKXx8WyIiXTt0PXR5cGVzLmxlbmd0aDt3aGlsZSh0LS0pe3RtcD1ydHlwZW5hbWVzcGFjZS5leGVjKHR5cGVzW3RdKXx8W107dHlwZT1vcmlnVHlwZT10bXBbMV07bmFtZXNwYWNlcz0odG1wWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCk7aWYoIXR5cGUpe2Zvcih0eXBlIGluIGV2ZW50cyl7alF1ZXJ5LmV2ZW50LnJlbW92ZShlbGVtLHR5cGUrdHlwZXNbdF0saGFuZGxlcixzZWxlY3Rvcix0cnVlKTt9CmNvbnRpbnVlO30Kc3BlY2lhbD1qUXVlcnkuZXZlbnQuc3BlY2lhbFt0eXBlXXx8e307dHlwZT0oc2VsZWN0b3I/c3BlY2lhbC5kZWxlZ2F0ZVR5cGU6c3BlY2lhbC5iaW5kVHlwZSl8fHR5cGU7aGFuZGxlcnM9ZXZlbnRzW3R5cGVdfHxbXTt0bXA9dG1wWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIituYW1lc3BhY2VzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpO29yaWdDb3VudD1qPWhhbmRsZXJzLmxlbmd0aDt3aGlsZShqLS0pe2hhbmRsZU9iaj1oYW5kbGVyc1tqXTtpZigobWFwcGVkVHlwZXN8fG9yaWdUeXBlPT09aGFuZGxlT2JqLm9yaWdUeXBlKSYmKCFoYW5kbGVyfHxoYW5kbGVyLmd1aWQ9PT1oYW5kbGVPYmouZ3VpZCkmJighdG1wfHx0bXAudGVzdChoYW5kbGVPYmoubmFtZXNwYWNlKSkmJighc2VsZWN0b3J8fHNlbGVjdG9yPT09aGFuZGxlT2JqLnNlbGVjdG9yfHxzZWxlY3Rvcj09PSIqKiImJmhhbmRsZU9iai5zZWxlY3Rvcikpe2hhbmRsZXJzLnNwbGljZShqLDEpO2lmKGhhbmRsZU9iai5zZWxlY3Rvcil7aGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tO30KaWYoc3BlY2lhbC5yZW1vdmUpe3NwZWNpYWwucmVtb3ZlLmNhbGwoZWxlbSxoYW5kbGVPYmopO319fQppZihvcmlnQ291bnQmJiFoYW5kbGVycy5sZW5ndGgpe2lmKCFzcGVjaWFsLnRlYXJkb3dufHxzcGVjaWFsLnRlYXJkb3duLmNhbGwoZWxlbSxuYW1lc3BhY2VzLGVsZW1EYXRhLmhhbmRsZSk9PT1mYWxzZSl7alF1ZXJ5LnJlbW92ZUV2ZW50KGVsZW0sdHlwZSxlbGVtRGF0YS5oYW5kbGUpO30KZGVsZXRlIGV2ZW50c1t0eXBlXTt9fQppZihqUXVlcnkuaXNFbXB0eU9iamVjdChldmVudHMpKXtkYXRhUHJpdi5yZW1vdmUoZWxlbSwiaGFuZGxlIGV2ZW50cyIpO319LGRpc3BhdGNoOmZ1bmN0aW9uKG5hdGl2ZUV2ZW50KXt2YXIgaSxqLHJldCxtYXRjaGVkLGhhbmRsZU9iaixoYW5kbGVyUXVldWUsYXJncz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksZXZlbnQ9alF1ZXJ5LmV2ZW50LmZpeChuYXRpdmVFdmVudCksaGFuZGxlcnM9KGRhdGFQcml2LmdldCh0aGlzLCJldmVudHMiKXx8T2JqZWN0LmNyZWF0ZShudWxsKSlbZXZlbnQudHlwZV18fFtdLHNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbZXZlbnQudHlwZV18fHt9O2FyZ3NbMF09ZXZlbnQ7Zm9yKGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXthcmdzW2ldPWFyZ3VtZW50c1tpXTt9CmV2ZW50LmRlbGVnYXRlVGFyZ2V0PXRoaXM7aWYoc3BlY2lhbC5wcmVEaXNwYXRjaCYmc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsZXZlbnQpPT09ZmFsc2Upe3JldHVybjt9CmhhbmRsZXJRdWV1ZT1qUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGV2ZW50LGhhbmRsZXJzKTtpPTA7d2hpbGUoKG1hdGNoZWQ9aGFuZGxlclF1ZXVlW2krK10pJiYhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZXZlbnQuY3VycmVudFRhcmdldD1tYXRjaGVkLmVsZW07aj0wO3doaWxlKChoYW5kbGVPYmo9bWF0Y2hlZC5oYW5kbGVyc1tqKytdKSYmIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2lmKCFldmVudC5ybmFtZXNwYWNlfHxoYW5kbGVPYmoubmFtZXNwYWNlPT09ZmFsc2V8fGV2ZW50LnJuYW1lc3BhY2UudGVzdChoYW5kbGVPYmoubmFtZXNwYWNlKSl7ZXZlbnQuaGFuZGxlT2JqPWhhbmRsZU9iajtldmVudC5kYXRhPWhhbmRsZU9iai5kYXRhO3JldD0oKGpRdWVyeS5ldmVudC5zcGVjaWFsW2hhbmRsZU9iai5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGhhbmRsZU9iai5oYW5kbGVyKS5hcHBseShtYXRjaGVkLmVsZW0sYXJncyk7aWYocmV0IT09dW5kZWZpbmVkKXtpZigoZXZlbnQucmVzdWx0PXJldCk9PT1mYWxzZSl7ZXZlbnQucHJldmVudERlZmF1bHQoKTtldmVudC5zdG9wUHJvcGFnYXRpb24oKTt9fX19fQppZihzcGVjaWFsLnBvc3REaXNwYXRjaCl7c3BlY2lhbC5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGV2ZW50KTt9CnJldHVybiBldmVudC5yZXN1bHQ7fSxoYW5kbGVyczpmdW5jdGlvbihldmVudCxoYW5kbGVycyl7dmFyIGksaGFuZGxlT2JqLHNlbCxtYXRjaGVkSGFuZGxlcnMsbWF0Y2hlZFNlbGVjdG9ycyxoYW5kbGVyUXVldWU9W10sZGVsZWdhdGVDb3VudD1oYW5kbGVycy5kZWxlZ2F0ZUNvdW50LGN1cj1ldmVudC50YXJnZXQ7aWYoZGVsZWdhdGVDb3VudCYmY3VyLm5vZGVUeXBlJiYhKGV2ZW50LnR5cGU9PT0iY2xpY2siJiZldmVudC5idXR0b24+PTEpKXtmb3IoO2N1ciE9PXRoaXM7Y3VyPWN1ci5wYXJlbnROb2RlfHx0aGlzKXtpZihjdXIubm9kZVR5cGU9PT0xJiYhKGV2ZW50LnR5cGU9PT0iY2xpY2siJiZjdXIuZGlzYWJsZWQ9PT10cnVlKSl7bWF0Y2hlZEhhbmRsZXJzPVtdO21hdGNoZWRTZWxlY3RvcnM9e307Zm9yKGk9MDtpPGRlbGVnYXRlQ291bnQ7aSsrKXtoYW5kbGVPYmo9aGFuZGxlcnNbaV07c2VsPWhhbmRsZU9iai5zZWxlY3RvcisiICI7aWYobWF0Y2hlZFNlbGVjdG9yc1tzZWxdPT09dW5kZWZpbmVkKXttYXRjaGVkU2VsZWN0b3JzW3NlbF09aGFuZGxlT2JqLm5lZWRzQ29udGV4dD9qUXVlcnkoc2VsLHRoaXMpLmluZGV4KGN1cik+LTE6alF1ZXJ5LmZpbmQoc2VsLHRoaXMsbnVsbCxbY3VyXSkubGVuZ3RoO30KaWYobWF0Y2hlZFNlbGVjdG9yc1tzZWxdKXttYXRjaGVkSGFuZGxlcnMucHVzaChoYW5kbGVPYmopO319CmlmKG1hdGNoZWRIYW5kbGVycy5sZW5ndGgpe2hhbmRsZXJRdWV1ZS5wdXNoKHtlbGVtOmN1cixoYW5kbGVyczptYXRjaGVkSGFuZGxlcnN9KTt9fX19CmN1cj10aGlzO2lmKGRlbGVnYXRlQ291bnQ8aGFuZGxlcnMubGVuZ3RoKXtoYW5kbGVyUXVldWUucHVzaCh7ZWxlbTpjdXIsaGFuZGxlcnM6aGFuZGxlcnMuc2xpY2UoZGVsZWdhdGVDb3VudCl9KTt9CnJldHVybiBoYW5kbGVyUXVldWU7fSxhZGRQcm9wOmZ1bmN0aW9uKG5hbWUsaG9vayl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGpRdWVyeS5FdmVudC5wcm90b3R5cGUsbmFtZSx7ZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLGdldDppc0Z1bmN0aW9uKGhvb2spP2Z1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXtyZXR1cm4gaG9vayh0aGlzLm9yaWdpbmFsRXZlbnQpO319OmZ1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXtyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W25hbWVdO319LHNldDpmdW5jdGlvbih2YWx1ZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsbmFtZSx7ZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWUsdmFsdWU6dmFsdWV9KTt9fSk7fSxmaXg6ZnVuY3Rpb24ob3JpZ2luYWxFdmVudCl7cmV0dXJuIG9yaWdpbmFsRXZlbnRbalF1ZXJ5LmV4cGFuZG9dP29yaWdpbmFsRXZlbnQ6bmV3IGpRdWVyeS5FdmVudChvcmlnaW5hbEV2ZW50KTt9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOnRydWV9LGNsaWNrOntzZXR1cDpmdW5jdGlvbihkYXRhKXt2YXIgZWw9dGhpc3x8ZGF0YTtpZihyY2hlY2thYmxlVHlwZS50ZXN0KGVsLnR5cGUpJiZlbC5jbGljayYmbm9kZU5hbWUoZWwsImlucHV0Iikpe2xldmVyYWdlTmF0aXZlKGVsLCJjbGljayIscmV0dXJuVHJ1ZSk7fQpyZXR1cm4gZmFsc2U7fSx0cmlnZ2VyOmZ1bmN0aW9uKGRhdGEpe3ZhciBlbD10aGlzfHxkYXRhO2lmKHJjaGVja2FibGVUeXBlLnRlc3QoZWwudHlwZSkmJmVsLmNsaWNrJiZub2RlTmFtZShlbCwiaW5wdXQiKSl7bGV2ZXJhZ2VOYXRpdmUoZWwsImNsaWNrIik7fQpyZXR1cm4gdHJ1ZTt9LF9kZWZhdWx0OmZ1bmN0aW9uKGV2ZW50KXt2YXIgdGFyZ2V0PWV2ZW50LnRhcmdldDtyZXR1cm4gcmNoZWNrYWJsZVR5cGUudGVzdCh0YXJnZXQudHlwZSkmJnRhcmdldC5jbGljayYmbm9kZU5hbWUodGFyZ2V0LCJpbnB1dCIpJiZkYXRhUHJpdi5nZXQodGFyZ2V0LCJjbGljayIpfHxub2RlTmFtZSh0YXJnZXQsImEiKTt9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihldmVudCl7aWYoZXZlbnQucmVzdWx0IT09dW5kZWZpbmVkJiZldmVudC5vcmlnaW5hbEV2ZW50KXtldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWV2ZW50LnJlc3VsdDt9fX19fTtmdW5jdGlvbiBsZXZlcmFnZU5hdGl2ZShlbCx0eXBlLGV4cGVjdFN5bmMpe2lmKCFleHBlY3RTeW5jKXtpZihkYXRhUHJpdi5nZXQoZWwsdHlwZSk9PT11bmRlZmluZWQpe2pRdWVyeS5ldmVudC5hZGQoZWwsdHlwZSxyZXR1cm5UcnVlKTt9CnJldHVybjt9CmRhdGFQcml2LnNldChlbCx0eXBlLGZhbHNlKTtqUXVlcnkuZXZlbnQuYWRkKGVsLHR5cGUse25hbWVzcGFjZTpmYWxzZSxoYW5kbGVyOmZ1bmN0aW9uKGV2ZW50KXt2YXIgbm90QXN5bmMscmVzdWx0LHNhdmVkPWRhdGFQcml2LmdldCh0aGlzLHR5cGUpO2lmKChldmVudC5pc1RyaWdnZXImMSkmJnRoaXNbdHlwZV0pe2lmKCFzYXZlZC5sZW5ndGgpe3NhdmVkPXNsaWNlLmNhbGwoYXJndW1lbnRzKTtkYXRhUHJpdi5zZXQodGhpcyx0eXBlLHNhdmVkKTtub3RBc3luYz1leHBlY3RTeW5jKHRoaXMsdHlwZSk7dGhpc1t0eXBlXSgpO3Jlc3VsdD1kYXRhUHJpdi5nZXQodGhpcyx0eXBlKTtpZihzYXZlZCE9PXJlc3VsdHx8bm90QXN5bmMpe2RhdGFQcml2LnNldCh0aGlzLHR5cGUsZmFsc2UpO31lbHNle3Jlc3VsdD17fTt9CmlmKHNhdmVkIT09cmVzdWx0KXtldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtldmVudC5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiByZXN1bHQudmFsdWU7fX1lbHNlIGlmKChqUXVlcnkuZXZlbnQuc3BlY2lhbFt0eXBlXXx8e30pLmRlbGVnYXRlVHlwZSl7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fX1lbHNlIGlmKHNhdmVkLmxlbmd0aCl7ZGF0YVByaXYuc2V0KHRoaXMsdHlwZSx7dmFsdWU6alF1ZXJ5LmV2ZW50LnRyaWdnZXIoalF1ZXJ5LmV4dGVuZChzYXZlZFswXSxqUXVlcnkuRXZlbnQucHJvdG90eXBlKSxzYXZlZC5zbGljZSgxKSx0aGlzKX0pO2V2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO319fSk7fQpqUXVlcnkucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZWxlbSx0eXBlLGhhbmRsZSl7aWYoZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKXtlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxoYW5kbGUpO319O2pRdWVyeS5FdmVudD1mdW5jdGlvbihzcmMscHJvcHMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCkpe3JldHVybiBuZXcgalF1ZXJ5LkV2ZW50KHNyYyxwcm9wcyk7fQppZihzcmMmJnNyYy50eXBlKXt0aGlzLm9yaWdpbmFsRXZlbnQ9c3JjO3RoaXMudHlwZT1zcmMudHlwZTt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1zcmMuZGVmYXVsdFByZXZlbnRlZHx8c3JjLmRlZmF1bHRQcmV2ZW50ZWQ9PT11bmRlZmluZWQmJnNyYy5yZXR1cm5WYWx1ZT09PWZhbHNlP3JldHVyblRydWU6cmV0dXJuRmFsc2U7dGhpcy50YXJnZXQ9KHNyYy50YXJnZXQmJnNyYy50YXJnZXQubm9kZVR5cGU9PT0zKT9zcmMudGFyZ2V0LnBhcmVudE5vZGU6c3JjLnRhcmdldDt0aGlzLmN1cnJlbnRUYXJnZXQ9c3JjLmN1cnJlbnRUYXJnZXQ7dGhpcy5yZWxhdGVkVGFyZ2V0PXNyYy5yZWxhdGVkVGFyZ2V0O31lbHNle3RoaXMudHlwZT1zcmM7fQppZihwcm9wcyl7alF1ZXJ5LmV4dGVuZCh0aGlzLHByb3BzKTt9CnRoaXMudGltZVN0YW1wPXNyYyYmc3JjLnRpbWVTdGFtcHx8RGF0ZS5ub3coKTt0aGlzW2pRdWVyeS5leHBhbmRvXT10cnVlO307alF1ZXJ5LkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6alF1ZXJ5LkV2ZW50LGlzRGVmYXVsdFByZXZlbnRlZDpyZXR1cm5GYWxzZSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpyZXR1cm5GYWxzZSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpyZXR1cm5GYWxzZSxpc1NpbXVsYXRlZDpmYWxzZSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1yZXR1cm5UcnVlO2lmKGUmJiF0aGlzLmlzU2ltdWxhdGVkKXtlLnByZXZlbnREZWZhdWx0KCk7fX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9cmV0dXJuVHJ1ZTtpZihlJiYhdGhpcy5pc1NpbXVsYXRlZCl7ZS5zdG9wUHJvcGFnYXRpb24oKTt9fSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1yZXR1cm5UcnVlO2lmKGUmJiF0aGlzLmlzU2ltdWxhdGVkKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO30KdGhpcy5zdG9wUHJvcGFnYXRpb24oKTt9fTtqUXVlcnkuZWFjaCh7YWx0S2V5OnRydWUsYnViYmxlczp0cnVlLGNhbmNlbGFibGU6dHJ1ZSxjaGFuZ2VkVG91Y2hlczp0cnVlLGN0cmxLZXk6dHJ1ZSxkZXRhaWw6dHJ1ZSxldmVudFBoYXNlOnRydWUsbWV0YUtleTp0cnVlLHBhZ2VYOnRydWUscGFnZVk6dHJ1ZSxzaGlmdEtleTp0cnVlLHZpZXc6dHJ1ZSwiY2hhciI6dHJ1ZSxjb2RlOnRydWUsY2hhckNvZGU6dHJ1ZSxrZXk6dHJ1ZSxrZXlDb2RlOnRydWUsYnV0dG9uOnRydWUsYnV0dG9uczp0cnVlLGNsaWVudFg6dHJ1ZSxjbGllbnRZOnRydWUsb2Zmc2V0WDp0cnVlLG9mZnNldFk6dHJ1ZSxwb2ludGVySWQ6dHJ1ZSxwb2ludGVyVHlwZTp0cnVlLHNjcmVlblg6dHJ1ZSxzY3JlZW5ZOnRydWUsdGFyZ2V0VG91Y2hlczp0cnVlLHRvRWxlbWVudDp0cnVlLHRvdWNoZXM6dHJ1ZSx3aGljaDpmdW5jdGlvbihldmVudCl7dmFyIGJ1dHRvbj1ldmVudC5idXR0b247aWYoZXZlbnQud2hpY2g9PW51bGwmJnJrZXlFdmVudC50ZXN0KGV2ZW50LnR5cGUpKXtyZXR1cm4gZXZlbnQuY2hhckNvZGUhPW51bGw/ZXZlbnQuY2hhckNvZGU6ZXZlbnQua2V5Q29kZTt9CmlmKCFldmVudC53aGljaCYmYnV0dG9uIT09dW5kZWZpbmVkJiZybW91c2VFdmVudC50ZXN0KGV2ZW50LnR5cGUpKXtpZihidXR0b24mMSl7cmV0dXJuIDE7fQppZihidXR0b24mMil7cmV0dXJuIDM7fQppZihidXR0b24mNCl7cmV0dXJuIDI7fQpyZXR1cm4gMDt9CnJldHVybiBldmVudC53aGljaDt9fSxqUXVlcnkuZXZlbnQuYWRkUHJvcCk7alF1ZXJ5LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKHR5cGUsZGVsZWdhdGVUeXBlKXtqUXVlcnkuZXZlbnQuc3BlY2lhbFt0eXBlXT17c2V0dXA6ZnVuY3Rpb24oKXtsZXZlcmFnZU5hdGl2ZSh0aGlzLHR5cGUsZXhwZWN0U3luYyk7cmV0dXJuIGZhbHNlO30sdHJpZ2dlcjpmdW5jdGlvbigpe2xldmVyYWdlTmF0aXZlKHRoaXMsdHlwZSk7cmV0dXJuIHRydWU7fSxkZWxlZ2F0ZVR5cGU6ZGVsZWdhdGVUeXBlfTt9KTtqUXVlcnkuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24ob3JpZyxmaXgpe2pRdWVyeS5ldmVudC5zcGVjaWFsW29yaWddPXtkZWxlZ2F0ZVR5cGU6Zml4LGJpbmRUeXBlOmZpeCxoYW5kbGU6ZnVuY3Rpb24oZXZlbnQpe3ZhciByZXQsdGFyZ2V0PXRoaXMscmVsYXRlZD1ldmVudC5yZWxhdGVkVGFyZ2V0LGhhbmRsZU9iaj1ldmVudC5oYW5kbGVPYmo7aWYoIXJlbGF0ZWR8fChyZWxhdGVkIT09dGFyZ2V0JiYhalF1ZXJ5LmNvbnRhaW5zKHRhcmdldCxyZWxhdGVkKSkpe2V2ZW50LnR5cGU9aGFuZGxlT2JqLm9yaWdUeXBlO3JldD1oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZXZlbnQudHlwZT1maXg7fQpyZXR1cm4gcmV0O319O30pO2pRdWVyeS5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKHR5cGVzLHNlbGVjdG9yLGRhdGEsZm4pe3JldHVybiBvbih0aGlzLHR5cGVzLHNlbGVjdG9yLGRhdGEsZm4pO30sb25lOmZ1bmN0aW9uKHR5cGVzLHNlbGVjdG9yLGRhdGEsZm4pe3JldHVybiBvbih0aGlzLHR5cGVzLHNlbGVjdG9yLGRhdGEsZm4sMSk7fSxvZmY6ZnVuY3Rpb24odHlwZXMsc2VsZWN0b3IsZm4pe3ZhciBoYW5kbGVPYmosdHlwZTtpZih0eXBlcyYmdHlwZXMucHJldmVudERlZmF1bHQmJnR5cGVzLmhhbmRsZU9iail7aGFuZGxlT2JqPXR5cGVzLmhhbmRsZU9iajtqUXVlcnkodHlwZXMuZGVsZWdhdGVUYXJnZXQpLm9mZihoYW5kbGVPYmoubmFtZXNwYWNlP2hhbmRsZU9iai5vcmlnVHlwZSsiLiIraGFuZGxlT2JqLm5hbWVzcGFjZTpoYW5kbGVPYmoub3JpZ1R5cGUsaGFuZGxlT2JqLnNlbGVjdG9yLGhhbmRsZU9iai5oYW5kbGVyKTtyZXR1cm4gdGhpczt9CmlmKHR5cGVvZiB0eXBlcz09PSJvYmplY3QiKXtmb3IodHlwZSBpbiB0eXBlcyl7dGhpcy5vZmYodHlwZSxzZWxlY3Rvcix0eXBlc1t0eXBlXSk7fQpyZXR1cm4gdGhpczt9CmlmKHNlbGVjdG9yPT09ZmFsc2V8fHR5cGVvZiBzZWxlY3Rvcj09PSJmdW5jdGlvbiIpe2ZuPXNlbGVjdG9yO3NlbGVjdG9yPXVuZGVmaW5lZDt9CmlmKGZuPT09ZmFsc2Upe2ZuPXJldHVybkZhbHNlO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2pRdWVyeS5ldmVudC5yZW1vdmUodGhpcyx0eXBlcyxmbixzZWxlY3Rvcik7fSk7fX0pO3Zhcgpybm9Jbm5lcmh0bWw9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2kscmNoZWNrZWQ9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2kscmNsZWFuU2NyaXB0PS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoZWxlbSxjb250ZW50KXtpZihub2RlTmFtZShlbGVtLCJ0YWJsZSIpJiZub2RlTmFtZShjb250ZW50Lm5vZGVUeXBlIT09MTE/Y29udGVudDpjb250ZW50LmZpcnN0Q2hpbGQsInRyIikpe3JldHVybiBqUXVlcnkoZWxlbSkuY2hpbGRyZW4oInRib2R5IilbMF18fGVsZW07fQpyZXR1cm4gZWxlbTt9CmZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoZWxlbSl7ZWxlbS50eXBlPShlbGVtLmdldEF0dHJpYnV0ZSgidHlwZSIpIT09bnVsbCkrIi8iK2VsZW0udHlwZTtyZXR1cm4gZWxlbTt9CmZ1bmN0aW9uIHJlc3RvcmVTY3JpcHQoZWxlbSl7aWYoKGVsZW0udHlwZXx8IiIpLnNsaWNlKDAsNSk9PT0idHJ1ZS8iKXtlbGVtLnR5cGU9ZWxlbS50eXBlLnNsaWNlKDUpO31lbHNle2VsZW0ucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIik7fQpyZXR1cm4gZWxlbTt9CmZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KHNyYyxkZXN0KXt2YXIgaSxsLHR5cGUscGRhdGFPbGQsdWRhdGFPbGQsdWRhdGFDdXIsZXZlbnRzO2lmKGRlc3Qubm9kZVR5cGUhPT0xKXtyZXR1cm47fQppZihkYXRhUHJpdi5oYXNEYXRhKHNyYykpe3BkYXRhT2xkPWRhdGFQcml2LmdldChzcmMpO2V2ZW50cz1wZGF0YU9sZC5ldmVudHM7aWYoZXZlbnRzKXtkYXRhUHJpdi5yZW1vdmUoZGVzdCwiaGFuZGxlIGV2ZW50cyIpO2Zvcih0eXBlIGluIGV2ZW50cyl7Zm9yKGk9MCxsPWV2ZW50c1t0eXBlXS5sZW5ndGg7aTxsO2krKyl7alF1ZXJ5LmV2ZW50LmFkZChkZXN0LHR5cGUsZXZlbnRzW3R5cGVdW2ldKTt9fX19CmlmKGRhdGFVc2VyLmhhc0RhdGEoc3JjKSl7dWRhdGFPbGQ9ZGF0YVVzZXIuYWNjZXNzKHNyYyk7dWRhdGFDdXI9alF1ZXJ5LmV4dGVuZCh7fSx1ZGF0YU9sZCk7ZGF0YVVzZXIuc2V0KGRlc3QsdWRhdGFDdXIpO319CmZ1bmN0aW9uIGZpeElucHV0KHNyYyxkZXN0KXt2YXIgbm9kZU5hbWU9ZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG5vZGVOYW1lPT09ImlucHV0IiYmcmNoZWNrYWJsZVR5cGUudGVzdChzcmMudHlwZSkpe2Rlc3QuY2hlY2tlZD1zcmMuY2hlY2tlZDt9ZWxzZSBpZihub2RlTmFtZT09PSJpbnB1dCJ8fG5vZGVOYW1lPT09InRleHRhcmVhIil7ZGVzdC5kZWZhdWx0VmFsdWU9c3JjLmRlZmF1bHRWYWx1ZTt9fQpmdW5jdGlvbiBkb21NYW5pcChjb2xsZWN0aW9uLGFyZ3MsY2FsbGJhY2ssaWdub3JlZCl7YXJncz1mbGF0KGFyZ3MpO3ZhciBmcmFnbWVudCxmaXJzdCxzY3JpcHRzLGhhc1NjcmlwdHMsbm9kZSxkb2MsaT0wLGw9Y29sbGVjdGlvbi5sZW5ndGgsaU5vQ2xvbmU9bC0xLHZhbHVlPWFyZ3NbMF0sdmFsdWVJc0Z1bmN0aW9uPWlzRnVuY3Rpb24odmFsdWUpO2lmKHZhbHVlSXNGdW5jdGlvbnx8KGw+MSYmdHlwZW9mIHZhbHVlPT09InN0cmluZyImJiFzdXBwb3J0LmNoZWNrQ2xvbmUmJnJjaGVja2VkLnRlc3QodmFsdWUpKSl7cmV0dXJuIGNvbGxlY3Rpb24uZWFjaChmdW5jdGlvbihpbmRleCl7dmFyIHNlbGY9Y29sbGVjdGlvbi5lcShpbmRleCk7aWYodmFsdWVJc0Z1bmN0aW9uKXthcmdzWzBdPXZhbHVlLmNhbGwodGhpcyxpbmRleCxzZWxmLmh0bWwoKSk7fQpkb21NYW5pcChzZWxmLGFyZ3MsY2FsbGJhY2ssaWdub3JlZCk7fSk7fQppZihsKXtmcmFnbWVudD1idWlsZEZyYWdtZW50KGFyZ3MsY29sbGVjdGlvblswXS5vd25lckRvY3VtZW50LGZhbHNlLGNvbGxlY3Rpb24saWdub3JlZCk7Zmlyc3Q9ZnJhZ21lbnQuZmlyc3RDaGlsZDtpZihmcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aD09PTEpe2ZyYWdtZW50PWZpcnN0O30KaWYoZmlyc3R8fGlnbm9yZWQpe3NjcmlwdHM9alF1ZXJ5Lm1hcChnZXRBbGwoZnJhZ21lbnQsInNjcmlwdCIpLGRpc2FibGVTY3JpcHQpO2hhc1NjcmlwdHM9c2NyaXB0cy5sZW5ndGg7Zm9yKDtpPGw7aSsrKXtub2RlPWZyYWdtZW50O2lmKGkhPT1pTm9DbG9uZSl7bm9kZT1qUXVlcnkuY2xvbmUobm9kZSx0cnVlLHRydWUpO2lmKGhhc1NjcmlwdHMpe2pRdWVyeS5tZXJnZShzY3JpcHRzLGdldEFsbChub2RlLCJzY3JpcHQiKSk7fX0KY2FsbGJhY2suY2FsbChjb2xsZWN0aW9uW2ldLG5vZGUsaSk7fQppZihoYXNTY3JpcHRzKXtkb2M9c2NyaXB0c1tzY3JpcHRzLmxlbmd0aC0xXS5vd25lckRvY3VtZW50O2pRdWVyeS5tYXAoc2NyaXB0cyxyZXN0b3JlU2NyaXB0KTtmb3IoaT0wO2k8aGFzU2NyaXB0cztpKyspe25vZGU9c2NyaXB0c1tpXTtpZihyc2NyaXB0VHlwZS50ZXN0KG5vZGUudHlwZXx8IiIpJiYhZGF0YVByaXYuYWNjZXNzKG5vZGUsImdsb2JhbEV2YWwiKSYmalF1ZXJ5LmNvbnRhaW5zKGRvYyxub2RlKSl7aWYobm9kZS5zcmMmJihub2RlLnR5cGV8fCIiKS50b0xvd2VyQ2FzZSgpIT09Im1vZHVsZSIpe2lmKGpRdWVyeS5fZXZhbFVybCYmIW5vZGUubm9Nb2R1bGUpe2pRdWVyeS5fZXZhbFVybChub2RlLnNyYyx7bm9uY2U6bm9kZS5ub25jZXx8bm9kZS5nZXRBdHRyaWJ1dGUoIm5vbmNlIil9LGRvYyk7fX1lbHNle0RPTUV2YWwobm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKHJjbGVhblNjcmlwdCwiIiksbm9kZSxkb2MpO319fX19fQpyZXR1cm4gY29sbGVjdGlvbjt9CmZ1bmN0aW9uIHJlbW92ZShlbGVtLHNlbGVjdG9yLGtlZXBEYXRhKXt2YXIgbm9kZSxub2Rlcz1zZWxlY3Rvcj9qUXVlcnkuZmlsdGVyKHNlbGVjdG9yLGVsZW0pOmVsZW0saT0wO2Zvcig7KG5vZGU9bm9kZXNbaV0pIT1udWxsO2krKyl7aWYoIWtlZXBEYXRhJiZub2RlLm5vZGVUeXBlPT09MSl7alF1ZXJ5LmNsZWFuRGF0YShnZXRBbGwobm9kZSkpO30KaWYobm9kZS5wYXJlbnROb2RlKXtpZihrZWVwRGF0YSYmaXNBdHRhY2hlZChub2RlKSl7c2V0R2xvYmFsRXZhbChnZXRBbGwobm9kZSwic2NyaXB0IikpO30Kbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO319CnJldHVybiBlbGVtO30KalF1ZXJ5LmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihodG1sKXtyZXR1cm4gaHRtbDt9LGNsb25lOmZ1bmN0aW9uKGVsZW0sZGF0YUFuZEV2ZW50cyxkZWVwRGF0YUFuZEV2ZW50cyl7dmFyIGksbCxzcmNFbGVtZW50cyxkZXN0RWxlbWVudHMsY2xvbmU9ZWxlbS5jbG9uZU5vZGUodHJ1ZSksaW5QYWdlPWlzQXR0YWNoZWQoZWxlbSk7aWYoIXN1cHBvcnQubm9DbG9uZUNoZWNrZWQmJihlbGVtLm5vZGVUeXBlPT09MXx8ZWxlbS5ub2RlVHlwZT09PTExKSYmIWpRdWVyeS5pc1hNTERvYyhlbGVtKSl7ZGVzdEVsZW1lbnRzPWdldEFsbChjbG9uZSk7c3JjRWxlbWVudHM9Z2V0QWxsKGVsZW0pO2ZvcihpPTAsbD1zcmNFbGVtZW50cy5sZW5ndGg7aTxsO2krKyl7Zml4SW5wdXQoc3JjRWxlbWVudHNbaV0sZGVzdEVsZW1lbnRzW2ldKTt9fQppZihkYXRhQW5kRXZlbnRzKXtpZihkZWVwRGF0YUFuZEV2ZW50cyl7c3JjRWxlbWVudHM9c3JjRWxlbWVudHN8fGdldEFsbChlbGVtKTtkZXN0RWxlbWVudHM9ZGVzdEVsZW1lbnRzfHxnZXRBbGwoY2xvbmUpO2ZvcihpPTAsbD1zcmNFbGVtZW50cy5sZW5ndGg7aTxsO2krKyl7Y2xvbmVDb3B5RXZlbnQoc3JjRWxlbWVudHNbaV0sZGVzdEVsZW1lbnRzW2ldKTt9fWVsc2V7Y2xvbmVDb3B5RXZlbnQoZWxlbSxjbG9uZSk7fX0KZGVzdEVsZW1lbnRzPWdldEFsbChjbG9uZSwic2NyaXB0Iik7aWYoZGVzdEVsZW1lbnRzLmxlbmd0aD4wKXtzZXRHbG9iYWxFdmFsKGRlc3RFbGVtZW50cywhaW5QYWdlJiZnZXRBbGwoZWxlbSwic2NyaXB0IikpO30KcmV0dXJuIGNsb25lO30sY2xlYW5EYXRhOmZ1bmN0aW9uKGVsZW1zKXt2YXIgZGF0YSxlbGVtLHR5cGUsc3BlY2lhbD1qUXVlcnkuZXZlbnQuc3BlY2lhbCxpPTA7Zm9yKDsoZWxlbT1lbGVtc1tpXSkhPT11bmRlZmluZWQ7aSsrKXtpZihhY2NlcHREYXRhKGVsZW0pKXtpZigoZGF0YT1lbGVtW2RhdGFQcml2LmV4cGFuZG9dKSl7aWYoZGF0YS5ldmVudHMpe2Zvcih0eXBlIGluIGRhdGEuZXZlbnRzKXtpZihzcGVjaWFsW3R5cGVdKXtqUXVlcnkuZXZlbnQucmVtb3ZlKGVsZW0sdHlwZSk7fWVsc2V7alF1ZXJ5LnJlbW92ZUV2ZW50KGVsZW0sdHlwZSxkYXRhLmhhbmRsZSk7fX19CmVsZW1bZGF0YVByaXYuZXhwYW5kb109dW5kZWZpbmVkO30KaWYoZWxlbVtkYXRhVXNlci5leHBhbmRvXSl7ZWxlbVtkYXRhVXNlci5leHBhbmRvXT11bmRlZmluZWQ7fX19fX0pO2pRdWVyeS5mbi5leHRlbmQoe2RldGFjaDpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHJlbW92ZSh0aGlzLHNlbGVjdG9yLHRydWUpO30scmVtb3ZlOmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gcmVtb3ZlKHRoaXMsc2VsZWN0b3IpO30sdGV4dDpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWU9PT11bmRlZmluZWQ/alF1ZXJ5LnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzLm5vZGVUeXBlPT09MXx8dGhpcy5ub2RlVHlwZT09PTExfHx0aGlzLm5vZGVUeXBlPT09OSl7dGhpcy50ZXh0Q29udGVudD12YWx1ZTt9fSk7fSxudWxsLHZhbHVlLGFyZ3VtZW50cy5sZW5ndGgpO30sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIGRvbU1hbmlwKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGVsZW0pe2lmKHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTF8fHRoaXMubm9kZVR5cGU9PT05KXt2YXIgdGFyZ2V0PW1hbmlwdWxhdGlvblRhcmdldCh0aGlzLGVsZW0pO3RhcmdldC5hcHBlbmRDaGlsZChlbGVtKTt9fSk7fSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIGRvbU1hbmlwKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGVsZW0pe2lmKHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTF8fHRoaXMubm9kZVR5cGU9PT05KXt2YXIgdGFyZ2V0PW1hbmlwdWxhdGlvblRhcmdldCh0aGlzLGVsZW0pO3RhcmdldC5pbnNlcnRCZWZvcmUoZWxlbSx0YXJnZXQuZmlyc3RDaGlsZCk7fX0pO30sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIGRvbU1hbmlwKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGVsZW0pe2lmKHRoaXMucGFyZW50Tm9kZSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtLHRoaXMpO319KTt9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGRvbU1hbmlwKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGVsZW0pe2lmKHRoaXMucGFyZW50Tm9kZSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtLHRoaXMubmV4dFNpYmxpbmcpO319KTt9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGVsZW0saT0wO2Zvcig7KGVsZW09dGhpc1tpXSkhPW51bGw7aSsrKXtpZihlbGVtLm5vZGVUeXBlPT09MSl7alF1ZXJ5LmNsZWFuRGF0YShnZXRBbGwoZWxlbSxmYWxzZSkpO2VsZW0udGV4dENvbnRlbnQ9IiI7fX0KcmV0dXJuIHRoaXM7fSxjbG9uZTpmdW5jdGlvbihkYXRhQW5kRXZlbnRzLGRlZXBEYXRhQW5kRXZlbnRzKXtkYXRhQW5kRXZlbnRzPWRhdGFBbmRFdmVudHM9PW51bGw/ZmFsc2U6ZGF0YUFuZEV2ZW50cztkZWVwRGF0YUFuZEV2ZW50cz1kZWVwRGF0YUFuZEV2ZW50cz09bnVsbD9kYXRhQW5kRXZlbnRzOmRlZXBEYXRhQW5kRXZlbnRzO3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBqUXVlcnkuY2xvbmUodGhpcyxkYXRhQW5kRXZlbnRzLGRlZXBEYXRhQW5kRXZlbnRzKTt9KTt9LGh0bWw6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBhY2Nlc3ModGhpcyxmdW5jdGlvbih2YWx1ZSl7dmFyIGVsZW09dGhpc1swXXx8e30saT0wLGw9dGhpcy5sZW5ndGg7aWYodmFsdWU9PT11bmRlZmluZWQmJmVsZW0ubm9kZVR5cGU9PT0xKXtyZXR1cm4gZWxlbS5pbm5lckhUTUw7fQppZih0eXBlb2YgdmFsdWU9PT0ic3RyaW5nIiYmIXJub0lubmVyaHRtbC50ZXN0KHZhbHVlKSYmIXdyYXBNYXBbKHJ0YWdOYW1lLmV4ZWModmFsdWUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7dmFsdWU9alF1ZXJ5Lmh0bWxQcmVmaWx0ZXIodmFsdWUpO3RyeXtmb3IoO2k8bDtpKyspe2VsZW09dGhpc1tpXXx8e307aWYoZWxlbS5ub2RlVHlwZT09PTEpe2pRdWVyeS5jbGVhbkRhdGEoZ2V0QWxsKGVsZW0sZmFsc2UpKTtlbGVtLmlubmVySFRNTD12YWx1ZTt9fQplbGVtPTA7fWNhdGNoKGUpe319CmlmKGVsZW0pe3RoaXMuZW1wdHkoKS5hcHBlbmQodmFsdWUpO319LG51bGwsdmFsdWUsYXJndW1lbnRzLmxlbmd0aCk7fSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBpZ25vcmVkPVtdO3JldHVybiBkb21NYW5pcCh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlbGVtKXt2YXIgcGFyZW50PXRoaXMucGFyZW50Tm9kZTtpZihqUXVlcnkuaW5BcnJheSh0aGlzLGlnbm9yZWQpPDApe2pRdWVyeS5jbGVhbkRhdGEoZ2V0QWxsKHRoaXMpKTtpZihwYXJlbnQpe3BhcmVudC5yZXBsYWNlQ2hpbGQoZWxlbSx0aGlzKTt9fX0saWdub3JlZCk7fX0pO2pRdWVyeS5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24obmFtZSxvcmlnaW5hbCl7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgZWxlbXMscmV0PVtdLGluc2VydD1qUXVlcnkoc2VsZWN0b3IpLGxhc3Q9aW5zZXJ0Lmxlbmd0aC0xLGk9MDtmb3IoO2k8PWxhc3Q7aSsrKXtlbGVtcz1pPT09bGFzdD90aGlzOnRoaXMuY2xvbmUodHJ1ZSk7alF1ZXJ5KGluc2VydFtpXSlbb3JpZ2luYWxdKGVsZW1zKTtwdXNoLmFwcGx5KHJldCxlbGVtcy5nZXQoKSk7fQpyZXR1cm4gdGhpcy5wdXNoU3RhY2socmV0KTt9O30pO3ZhciBybnVtbm9ucHg9bmV3IFJlZ0V4cCgiXigiK3BudW0rIikoPyFweClbYS16JV0rJCIsImkiKTt2YXIgZ2V0U3R5bGVzPWZ1bmN0aW9uKGVsZW0pe3ZhciB2aWV3PWVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztpZighdmlld3x8IXZpZXcub3BlbmVyKXt2aWV3PXdpbmRvdzt9CnJldHVybiB2aWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbSk7fTt2YXIgc3dhcD1mdW5jdGlvbihlbGVtLG9wdGlvbnMsY2FsbGJhY2spe3ZhciByZXQsbmFtZSxvbGQ9e307Zm9yKG5hbWUgaW4gb3B0aW9ucyl7b2xkW25hbWVdPWVsZW0uc3R5bGVbbmFtZV07ZWxlbS5zdHlsZVtuYW1lXT1vcHRpb25zW25hbWVdO30KcmV0PWNhbGxiYWNrLmNhbGwoZWxlbSk7Zm9yKG5hbWUgaW4gb3B0aW9ucyl7ZWxlbS5zdHlsZVtuYW1lXT1vbGRbbmFtZV07fQpyZXR1cm4gcmV0O307dmFyIHJib3hTdHlsZT1uZXcgUmVnRXhwKGNzc0V4cGFuZC5qb2luKCJ8IiksImkiKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBjb21wdXRlU3R5bGVUZXN0cygpe2lmKCFkaXYpe3JldHVybjt9CmNvbnRhaW5lci5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4O3dpZHRoOjYwcHg7IisibWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowIjtkaXYuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcmZsb3c6c2Nyb2xsOyIrIm1hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7Iisid2lkdGg6NjAlO3RvcDoxJSI7ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcikuYXBwZW5kQ2hpbGQoZGl2KTt2YXIgZGl2U3R5bGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZGl2KTtwaXhlbFBvc2l0aW9uVmFsPWRpdlN0eWxlLnRvcCE9PSIxJSI7cmVsaWFibGVNYXJnaW5MZWZ0VmFsPXJvdW5kUGl4ZWxNZWFzdXJlcyhkaXZTdHlsZS5tYXJnaW5MZWZ0KT09PTEyO2Rpdi5zdHlsZS5yaWdodD0iNjAlIjtwaXhlbEJveFN0eWxlc1ZhbD1yb3VuZFBpeGVsTWVhc3VyZXMoZGl2U3R5bGUucmlnaHQpPT09MzY7Ym94U2l6aW5nUmVsaWFibGVWYWw9cm91bmRQaXhlbE1lYXN1cmVzKGRpdlN0eWxlLndpZHRoKT09PTM2O2Rpdi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO3Njcm9sbGJveFNpemVWYWw9cm91bmRQaXhlbE1lYXN1cmVzKGRpdi5vZmZzZXRXaWR0aC8zKT09PTEyO2RvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZChjb250YWluZXIpO2Rpdj1udWxsO30KZnVuY3Rpb24gcm91bmRQaXhlbE1lYXN1cmVzKG1lYXN1cmUpe3JldHVybiBNYXRoLnJvdW5kKHBhcnNlRmxvYXQobWVhc3VyZSkpO30KdmFyIHBpeGVsUG9zaXRpb25WYWwsYm94U2l6aW5nUmVsaWFibGVWYWwsc2Nyb2xsYm94U2l6ZVZhbCxwaXhlbEJveFN0eWxlc1ZhbCxyZWxpYWJsZVRyRGltZW5zaW9uc1ZhbCxyZWxpYWJsZU1hcmdpbkxlZnRWYWwsY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGRpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZighZGl2LnN0eWxlKXtyZXR1cm47fQpkaXYuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IjtkaXYuY2xvbmVOb2RlKHRydWUpLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiO3N1cHBvcnQuY2xlYXJDbG9uZVN0eWxlPWRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD09PSJjb250ZW50LWJveCI7alF1ZXJ5LmV4dGVuZChzdXBwb3J0LHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO30scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbEJveFN0eWxlc1ZhbDt9LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbFBvc2l0aW9uVmFsO30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7Y29tcHV0ZVN0eWxlVGVzdHMoKTtyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsO30sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIHNjcm9sbGJveFNpemVWYWw7fSxyZWxpYWJsZVRyRGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0YWJsZSx0cix0ckNoaWxkLHRyU3R5bGU7aWYocmVsaWFibGVUckRpbWVuc2lvbnNWYWw9PW51bGwpe3RhYmxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7dHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTt0ckNoaWxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RhYmxlLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHgiO3RyLnN0eWxlLmhlaWdodD0iMXB4Ijt0ckNoaWxkLnN0eWxlLmhlaWdodD0iOXB4Ijtkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGFibGUpLmFwcGVuZENoaWxkKHRyKS5hcHBlbmRDaGlsZCh0ckNoaWxkKTt0clN0eWxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRyKTtyZWxpYWJsZVRyRGltZW5zaW9uc1ZhbD1wYXJzZUludCh0clN0eWxlLmhlaWdodCk+Mztkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGFibGUpO30KcmV0dXJuIHJlbGlhYmxlVHJEaW1lbnNpb25zVmFsO319KTt9KSgpO2Z1bmN0aW9uIGN1ckNTUyhlbGVtLG5hbWUsY29tcHV0ZWQpe3ZhciB3aWR0aCxtaW5XaWR0aCxtYXhXaWR0aCxyZXQsc3R5bGU9ZWxlbS5zdHlsZTtjb21wdXRlZD1jb21wdXRlZHx8Z2V0U3R5bGVzKGVsZW0pO2lmKGNvbXB1dGVkKXtyZXQ9Y29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKXx8Y29tcHV0ZWRbbmFtZV07aWYocmV0PT09IiImJiFpc0F0dGFjaGVkKGVsZW0pKXtyZXQ9alF1ZXJ5LnN0eWxlKGVsZW0sbmFtZSk7fQppZighc3VwcG9ydC5waXhlbEJveFN0eWxlcygpJiZybnVtbm9ucHgudGVzdChyZXQpJiZyYm94U3R5bGUudGVzdChuYW1lKSl7d2lkdGg9c3R5bGUud2lkdGg7bWluV2lkdGg9c3R5bGUubWluV2lkdGg7bWF4V2lkdGg9c3R5bGUubWF4V2lkdGg7c3R5bGUubWluV2lkdGg9c3R5bGUubWF4V2lkdGg9c3R5bGUud2lkdGg9cmV0O3JldD1jb21wdXRlZC53aWR0aDtzdHlsZS53aWR0aD13aWR0aDtzdHlsZS5taW5XaWR0aD1taW5XaWR0aDtzdHlsZS5tYXhXaWR0aD1tYXhXaWR0aDt9fQpyZXR1cm4gcmV0IT09dW5kZWZpbmVkP3JldCsiIjpyZXQ7fQpmdW5jdGlvbiBhZGRHZXRIb29rSWYoY29uZGl0aW9uRm4saG9va0ZuKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7aWYoY29uZGl0aW9uRm4oKSl7ZGVsZXRlIHRoaXMuZ2V0O3JldHVybjt9CnJldHVybih0aGlzLmdldD1ob29rRm4pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9fTt9CnZhciBjc3NQcmVmaXhlcz1bIldlYmtpdCIsIk1veiIsIm1zIl0sZW1wdHlTdHlsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSx2ZW5kb3JQcm9wcz17fTtmdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZShuYW1lKXt2YXIgY2FwTmFtZT1uYW1lWzBdLnRvVXBwZXJDYXNlKCkrbmFtZS5zbGljZSgxKSxpPWNzc1ByZWZpeGVzLmxlbmd0aDt3aGlsZShpLS0pe25hbWU9Y3NzUHJlZml4ZXNbaV0rY2FwTmFtZTtpZihuYW1lIGluIGVtcHR5U3R5bGUpe3JldHVybiBuYW1lO319fQpmdW5jdGlvbiBmaW5hbFByb3BOYW1lKG5hbWUpe3ZhciBmaW5hbD1qUXVlcnkuY3NzUHJvcHNbbmFtZV18fHZlbmRvclByb3BzW25hbWVdO2lmKGZpbmFsKXtyZXR1cm4gZmluYWw7fQppZihuYW1lIGluIGVtcHR5U3R5bGUpe3JldHVybiBuYW1lO30KcmV0dXJuIHZlbmRvclByb3BzW25hbWVdPXZlbmRvclByb3BOYW1lKG5hbWUpfHxuYW1lO30KdmFyCnJkaXNwbGF5c3dhcD0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8scmN1c3RvbVByb3A9L14tLS8sY3NzU2hvdz17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sY3NzTm9ybWFsVHJhbnNmb3JtPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifTtmdW5jdGlvbiBzZXRQb3NpdGl2ZU51bWJlcihfZWxlbSx2YWx1ZSxzdWJ0cmFjdCl7dmFyIG1hdGNoZXM9cmNzc051bS5leGVjKHZhbHVlKTtyZXR1cm4gbWF0Y2hlcz9NYXRoLm1heCgwLG1hdGNoZXNbMl0tKHN1YnRyYWN0fHwwKSkrKG1hdGNoZXNbM118fCJweCIpOnZhbHVlO30KZnVuY3Rpb24gYm94TW9kZWxBZGp1c3RtZW50KGVsZW0sZGltZW5zaW9uLGJveCxpc0JvcmRlckJveCxzdHlsZXMsY29tcHV0ZWRWYWwpe3ZhciBpPWRpbWVuc2lvbj09PSJ3aWR0aCI/MTowLGV4dHJhPTAsZGVsdGE9MDtpZihib3g9PT0oaXNCb3JkZXJCb3g/ImJvcmRlciI6ImNvbnRlbnQiKSl7cmV0dXJuIDA7fQpmb3IoO2k8NDtpKz0yKXtpZihib3g9PT0ibWFyZ2luIil7ZGVsdGErPWpRdWVyeS5jc3MoZWxlbSxib3grY3NzRXhwYW5kW2ldLHRydWUsc3R5bGVzKTt9CmlmKCFpc0JvcmRlckJveCl7ZGVsdGErPWpRdWVyeS5jc3MoZWxlbSwicGFkZGluZyIrY3NzRXhwYW5kW2ldLHRydWUsc3R5bGVzKTtpZihib3ghPT0icGFkZGluZyIpe2RlbHRhKz1qUXVlcnkuY3NzKGVsZW0sImJvcmRlciIrY3NzRXhwYW5kW2ldKyJXaWR0aCIsdHJ1ZSxzdHlsZXMpO31lbHNle2V4dHJhKz1qUXVlcnkuY3NzKGVsZW0sImJvcmRlciIrY3NzRXhwYW5kW2ldKyJXaWR0aCIsdHJ1ZSxzdHlsZXMpO319ZWxzZXtpZihib3g9PT0iY29udGVudCIpe2RlbHRhLT1qUXVlcnkuY3NzKGVsZW0sInBhZGRpbmciK2Nzc0V4cGFuZFtpXSx0cnVlLHN0eWxlcyk7fQppZihib3ghPT0ibWFyZ2luIil7ZGVsdGEtPWpRdWVyeS5jc3MoZWxlbSwiYm9yZGVyIitjc3NFeHBhbmRbaV0rIldpZHRoIix0cnVlLHN0eWxlcyk7fX19CmlmKCFpc0JvcmRlckJveCYmY29tcHV0ZWRWYWw+PTApe2RlbHRhKz1NYXRoLm1heCgwLE1hdGguY2VpbChlbGVtWyJvZmZzZXQiK2RpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpK2RpbWVuc2lvbi5zbGljZSgxKV0tCmNvbXB1dGVkVmFsLQpkZWx0YS0KZXh0cmEtCjAuNSkpfHwwO30KcmV0dXJuIGRlbHRhO30KZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodChlbGVtLGRpbWVuc2lvbixleHRyYSl7dmFyIHN0eWxlcz1nZXRTdHlsZXMoZWxlbSksYm94U2l6aW5nTmVlZGVkPSFzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCl8fGV4dHJhLGlzQm9yZGVyQm94PWJveFNpemluZ05lZWRlZCYmalF1ZXJ5LmNzcyhlbGVtLCJib3hTaXppbmciLGZhbHNlLHN0eWxlcyk9PT0iYm9yZGVyLWJveCIsdmFsdWVJc0JvcmRlckJveD1pc0JvcmRlckJveCx2YWw9Y3VyQ1NTKGVsZW0sZGltZW5zaW9uLHN0eWxlcyksb2Zmc2V0UHJvcD0ib2Zmc2V0IitkaW1lbnNpb25bMF0udG9VcHBlckNhc2UoKStkaW1lbnNpb24uc2xpY2UoMSk7aWYocm51bW5vbnB4LnRlc3QodmFsKSl7aWYoIWV4dHJhKXtyZXR1cm4gdmFsO30KdmFsPSJhdXRvIjt9CmlmKCghc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpJiZpc0JvcmRlckJveHx8IXN1cHBvcnQucmVsaWFibGVUckRpbWVuc2lvbnMoKSYmbm9kZU5hbWUoZWxlbSwidHIiKXx8dmFsPT09ImF1dG8ifHwhcGFyc2VGbG9hdCh2YWwpJiZqUXVlcnkuY3NzKGVsZW0sImRpc3BsYXkiLGZhbHNlLHN0eWxlcyk9PT0iaW5saW5lIikmJmVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpe2lzQm9yZGVyQm94PWpRdWVyeS5jc3MoZWxlbSwiYm94U2l6aW5nIixmYWxzZSxzdHlsZXMpPT09ImJvcmRlci1ib3giO3ZhbHVlSXNCb3JkZXJCb3g9b2Zmc2V0UHJvcCBpbiBlbGVtO2lmKHZhbHVlSXNCb3JkZXJCb3gpe3ZhbD1lbGVtW29mZnNldFByb3BdO319CnZhbD1wYXJzZUZsb2F0KHZhbCl8fDA7cmV0dXJuKHZhbCsKYm94TW9kZWxBZGp1c3RtZW50KGVsZW0sZGltZW5zaW9uLGV4dHJhfHwoaXNCb3JkZXJCb3g/ImJvcmRlciI6ImNvbnRlbnQiKSx2YWx1ZUlzQm9yZGVyQm94LHN0eWxlcyx2YWwpKSsicHgiO30KalF1ZXJ5LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlbGVtLGNvbXB1dGVkKXtpZihjb21wdXRlZCl7dmFyIHJldD1jdXJDU1MoZWxlbSwib3BhY2l0eSIpO3JldHVybiByZXQ9PT0iIj8iMSI6cmV0O319fX0sY3NzTnVtYmVyOnsiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiOnRydWUsImNvbHVtbkNvdW50Ijp0cnVlLCJmaWxsT3BhY2l0eSI6dHJ1ZSwiZmxleEdyb3ciOnRydWUsImZsZXhTaHJpbmsiOnRydWUsImZvbnRXZWlnaHQiOnRydWUsImdyaWRBcmVhIjp0cnVlLCJncmlkQ29sdW1uIjp0cnVlLCJncmlkQ29sdW1uRW5kIjp0cnVlLCJncmlkQ29sdW1uU3RhcnQiOnRydWUsImdyaWRSb3ciOnRydWUsImdyaWRSb3dFbmQiOnRydWUsImdyaWRSb3dTdGFydCI6dHJ1ZSwibGluZUhlaWdodCI6dHJ1ZSwib3BhY2l0eSI6dHJ1ZSwib3JkZXIiOnRydWUsIm9ycGhhbnMiOnRydWUsIndpZG93cyI6dHJ1ZSwiekluZGV4Ijp0cnVlLCJ6b29tIjp0cnVlfSxjc3NQcm9wczp7fSxzdHlsZTpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUsZXh0cmEpe2lmKCFlbGVtfHxlbGVtLm5vZGVUeXBlPT09M3x8ZWxlbS5ub2RlVHlwZT09PTh8fCFlbGVtLnN0eWxlKXtyZXR1cm47fQp2YXIgcmV0LHR5cGUsaG9va3Msb3JpZ05hbWU9Y2FtZWxDYXNlKG5hbWUpLGlzQ3VzdG9tUHJvcD1yY3VzdG9tUHJvcC50ZXN0KG5hbWUpLHN0eWxlPWVsZW0uc3R5bGU7aWYoIWlzQ3VzdG9tUHJvcCl7bmFtZT1maW5hbFByb3BOYW1lKG9yaWdOYW1lKTt9Cmhvb2tzPWpRdWVyeS5jc3NIb29rc1tuYW1lXXx8alF1ZXJ5LmNzc0hvb2tzW29yaWdOYW1lXTtpZih2YWx1ZSE9PXVuZGVmaW5lZCl7dHlwZT10eXBlb2YgdmFsdWU7aWYodHlwZT09PSJzdHJpbmciJiYocmV0PXJjc3NOdW0uZXhlYyh2YWx1ZSkpJiZyZXRbMV0pe3ZhbHVlPWFkanVzdENTUyhlbGVtLG5hbWUscmV0KTt0eXBlPSJudW1iZXIiO30KaWYodmFsdWU9PW51bGx8fHZhbHVlIT09dmFsdWUpe3JldHVybjt9CmlmKHR5cGU9PT0ibnVtYmVyIiYmIWlzQ3VzdG9tUHJvcCl7dmFsdWUrPXJldCYmcmV0WzNdfHwoalF1ZXJ5LmNzc051bWJlcltvcmlnTmFtZV0/IiI6InB4Iik7fQppZighc3VwcG9ydC5jbGVhckNsb25lU3R5bGUmJnZhbHVlPT09IiImJm5hbWUuaW5kZXhPZigiYmFja2dyb3VuZCIpPT09MCl7c3R5bGVbbmFtZV09ImluaGVyaXQiO30KaWYoIWhvb2tzfHwhKCJzZXQiaW4gaG9va3MpfHwodmFsdWU9aG9va3Muc2V0KGVsZW0sdmFsdWUsZXh0cmEpKSE9PXVuZGVmaW5lZCl7aWYoaXNDdXN0b21Qcm9wKXtzdHlsZS5zZXRQcm9wZXJ0eShuYW1lLHZhbHVlKTt9ZWxzZXtzdHlsZVtuYW1lXT12YWx1ZTt9fX1lbHNle2lmKGhvb2tzJiYiZ2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLmdldChlbGVtLGZhbHNlLGV4dHJhKSkhPT11bmRlZmluZWQpe3JldHVybiByZXQ7fQpyZXR1cm4gc3R5bGVbbmFtZV07fX0sY3NzOmZ1bmN0aW9uKGVsZW0sbmFtZSxleHRyYSxzdHlsZXMpe3ZhciB2YWwsbnVtLGhvb2tzLG9yaWdOYW1lPWNhbWVsQ2FzZShuYW1lKSxpc0N1c3RvbVByb3A9cmN1c3RvbVByb3AudGVzdChuYW1lKTtpZighaXNDdXN0b21Qcm9wKXtuYW1lPWZpbmFsUHJvcE5hbWUob3JpZ05hbWUpO30KaG9va3M9alF1ZXJ5LmNzc0hvb2tzW25hbWVdfHxqUXVlcnkuY3NzSG9va3Nbb3JpZ05hbWVdO2lmKGhvb2tzJiYiZ2V0ImluIGhvb2tzKXt2YWw9aG9va3MuZ2V0KGVsZW0sdHJ1ZSxleHRyYSk7fQppZih2YWw9PT11bmRlZmluZWQpe3ZhbD1jdXJDU1MoZWxlbSxuYW1lLHN0eWxlcyk7fQppZih2YWw9PT0ibm9ybWFsIiYmbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0pe3ZhbD1jc3NOb3JtYWxUcmFuc2Zvcm1bbmFtZV07fQppZihleHRyYT09PSIifHxleHRyYSl7bnVtPXBhcnNlRmxvYXQodmFsKTtyZXR1cm4gZXh0cmE9PT10cnVlfHxpc0Zpbml0ZShudW0pP251bXx8MDp2YWw7fQpyZXR1cm4gdmFsO319KTtqUXVlcnkuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oX2ksZGltZW5zaW9uKXtqUXVlcnkuY3NzSG9va3NbZGltZW5zaW9uXT17Z2V0OmZ1bmN0aW9uKGVsZW0sY29tcHV0ZWQsZXh0cmEpe2lmKGNvbXB1dGVkKXtyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoalF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5IikpJiYoIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGh8fCFlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKT9zd2FwKGVsZW0sY3NzU2hvdyxmdW5jdGlvbigpe3JldHVybiBnZXRXaWR0aE9ySGVpZ2h0KGVsZW0sZGltZW5zaW9uLGV4dHJhKTt9KTpnZXRXaWR0aE9ySGVpZ2h0KGVsZW0sZGltZW5zaW9uLGV4dHJhKTt9fSxzZXQ6ZnVuY3Rpb24oZWxlbSx2YWx1ZSxleHRyYSl7dmFyIG1hdGNoZXMsc3R5bGVzPWdldFN0eWxlcyhlbGVtKSxzY3JvbGxib3hTaXplQnVnZ3k9IXN1cHBvcnQuc2Nyb2xsYm94U2l6ZSgpJiZzdHlsZXMucG9zaXRpb249PT0iYWJzb2x1dGUiLGJveFNpemluZ05lZWRlZD1zY3JvbGxib3hTaXplQnVnZ3l8fGV4dHJhLGlzQm9yZGVyQm94PWJveFNpemluZ05lZWRlZCYmalF1ZXJ5LmNzcyhlbGVtLCJib3hTaXppbmciLGZhbHNlLHN0eWxlcyk9PT0iYm9yZGVyLWJveCIsc3VidHJhY3Q9ZXh0cmE/Ym94TW9kZWxBZGp1c3RtZW50KGVsZW0sZGltZW5zaW9uLGV4dHJhLGlzQm9yZGVyQm94LHN0eWxlcyk6MDtpZihpc0JvcmRlckJveCYmc2Nyb2xsYm94U2l6ZUJ1Z2d5KXtzdWJ0cmFjdC09TWF0aC5jZWlsKGVsZW1bIm9mZnNldCIrZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkrZGltZW5zaW9uLnNsaWNlKDEpXS0KcGFyc2VGbG9hdChzdHlsZXNbZGltZW5zaW9uXSktCmJveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbiwiYm9yZGVyIixmYWxzZSxzdHlsZXMpLQowLjUpO30KaWYoc3VidHJhY3QmJihtYXRjaGVzPXJjc3NOdW0uZXhlYyh2YWx1ZSkpJiYobWF0Y2hlc1szXXx8InB4IikhPT0icHgiKXtlbGVtLnN0eWxlW2RpbWVuc2lvbl09dmFsdWU7dmFsdWU9alF1ZXJ5LmNzcyhlbGVtLGRpbWVuc2lvbik7fQpyZXR1cm4gc2V0UG9zaXRpdmVOdW1iZXIoZWxlbSx2YWx1ZSxzdWJ0cmFjdCk7fX07fSk7alF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQ9YWRkR2V0SG9va0lmKHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGVsZW0sY29tcHV0ZWQpe2lmKGNvbXB1dGVkKXtyZXR1cm4ocGFyc2VGbG9hdChjdXJDU1MoZWxlbSwibWFyZ2luTGVmdCIpKXx8ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LQpzd2FwKGVsZW0se21hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O30pKSsicHgiO319KTtqUXVlcnkuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKHByZWZpeCxzdWZmaXgpe2pRdWVyeS5jc3NIb29rc1twcmVmaXgrc3VmZml4XT17ZXhwYW5kOmZ1bmN0aW9uKHZhbHVlKXt2YXIgaT0wLGV4cGFuZGVkPXt9LHBhcnRzPXR5cGVvZiB2YWx1ZT09PSJzdHJpbmciP3ZhbHVlLnNwbGl0KCIgIik6W3ZhbHVlXTtmb3IoO2k8NDtpKyspe2V4cGFuZGVkW3ByZWZpeCtjc3NFeHBhbmRbaV0rc3VmZml4XT1wYXJ0c1tpXXx8cGFydHNbaS0yXXx8cGFydHNbMF07fQpyZXR1cm4gZXhwYW5kZWQ7fX07aWYocHJlZml4IT09Im1hcmdpbiIpe2pRdWVyeS5jc3NIb29rc1twcmVmaXgrc3VmZml4XS5zZXQ9c2V0UG9zaXRpdmVOdW1iZXI7fX0pO2pRdWVyeS5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihuYW1lLHZhbHVlKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSxuYW1lLHZhbHVlKXt2YXIgc3R5bGVzLGxlbixtYXA9e30saT0wO2lmKEFycmF5LmlzQXJyYXkobmFtZSkpe3N0eWxlcz1nZXRTdHlsZXMoZWxlbSk7bGVuPW5hbWUubGVuZ3RoO2Zvcig7aTxsZW47aSsrKXttYXBbbmFtZVtpXV09alF1ZXJ5LmNzcyhlbGVtLG5hbWVbaV0sZmFsc2Usc3R5bGVzKTt9CnJldHVybiBtYXA7fQpyZXR1cm4gdmFsdWUhPT11bmRlZmluZWQ/alF1ZXJ5LnN0eWxlKGVsZW0sbmFtZSx2YWx1ZSk6alF1ZXJ5LmNzcyhlbGVtLG5hbWUpO30sbmFtZSx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoPjEpO319KTtmdW5jdGlvbiBUd2VlbihlbGVtLG9wdGlvbnMscHJvcCxlbmQsZWFzaW5nKXtyZXR1cm4gbmV3IFR3ZWVuLnByb3RvdHlwZS5pbml0KGVsZW0sb3B0aW9ucyxwcm9wLGVuZCxlYXNpbmcpO30KalF1ZXJ5LlR3ZWVuPVR3ZWVuO1R3ZWVuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VHdlZW4saW5pdDpmdW5jdGlvbihlbGVtLG9wdGlvbnMscHJvcCxlbmQsZWFzaW5nLHVuaXQpe3RoaXMuZWxlbT1lbGVtO3RoaXMucHJvcD1wcm9wO3RoaXMuZWFzaW5nPWVhc2luZ3x8alF1ZXJ5LmVhc2luZy5fZGVmYXVsdDt0aGlzLm9wdGlvbnM9b3B0aW9uczt0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCk7dGhpcy5lbmQ9ZW5kO3RoaXMudW5pdD11bml0fHwoalF1ZXJ5LmNzc051bWJlcltwcm9wXT8iIjoicHgiKTt9LGN1cjpmdW5jdGlvbigpe3ZhciBob29rcz1Ud2Vlbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gaG9va3MmJmhvb2tzLmdldD9ob29rcy5nZXQodGhpcyk6VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKTt9LHJ1bjpmdW5jdGlvbihwZXJjZW50KXt2YXIgZWFzZWQsaG9va3M9VHdlZW4ucHJvcEhvb2tzW3RoaXMucHJvcF07aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uKXt0aGlzLnBvcz1lYXNlZD1qUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXShwZXJjZW50LHRoaXMub3B0aW9ucy5kdXJhdGlvbipwZXJjZW50LDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pO31lbHNle3RoaXMucG9zPWVhc2VkPXBlcmNlbnQ7fQp0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqZWFzZWQrdGhpcy5zdGFydDtpZih0aGlzLm9wdGlvbnMuc3RlcCl7dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyk7fQppZihob29rcyYmaG9va3Muc2V0KXtob29rcy5zZXQodGhpcyk7fWVsc2V7VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKTt9CnJldHVybiB0aGlzO319O1R3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1Ud2Vlbi5wcm90b3R5cGU7VHdlZW4ucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKHR3ZWVuKXt2YXIgcmVzdWx0O2lmKHR3ZWVuLmVsZW0ubm9kZVR5cGUhPT0xfHx0d2Vlbi5lbGVtW3R3ZWVuLnByb3BdIT1udWxsJiZ0d2Vlbi5lbGVtLnN0eWxlW3R3ZWVuLnByb3BdPT1udWxsKXtyZXR1cm4gdHdlZW4uZWxlbVt0d2Vlbi5wcm9wXTt9CnJlc3VsdD1qUXVlcnkuY3NzKHR3ZWVuLmVsZW0sdHdlZW4ucHJvcCwiIik7cmV0dXJuIXJlc3VsdHx8cmVzdWx0PT09ImF1dG8iPzA6cmVzdWx0O30sc2V0OmZ1bmN0aW9uKHR3ZWVuKXtpZihqUXVlcnkuZnguc3RlcFt0d2Vlbi5wcm9wXSl7alF1ZXJ5LmZ4LnN0ZXBbdHdlZW4ucHJvcF0odHdlZW4pO31lbHNlIGlmKHR3ZWVuLmVsZW0ubm9kZVR5cGU9PT0xJiYoalF1ZXJ5LmNzc0hvb2tzW3R3ZWVuLnByb3BdfHx0d2Vlbi5lbGVtLnN0eWxlW2ZpbmFsUHJvcE5hbWUodHdlZW4ucHJvcCldIT1udWxsKSl7alF1ZXJ5LnN0eWxlKHR3ZWVuLmVsZW0sdHdlZW4ucHJvcCx0d2Vlbi5ub3crdHdlZW4udW5pdCk7fWVsc2V7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3c7fX19fTtUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wPVR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24odHdlZW4pe2lmKHR3ZWVuLmVsZW0ubm9kZVR5cGUmJnR3ZWVuLmVsZW0ucGFyZW50Tm9kZSl7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3c7fX19O2pRdWVyeS5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihwKXtyZXR1cm4gcDt9LHN3aW5nOmZ1bmN0aW9uKHApe3JldHVybiAwLjUtTWF0aC5jb3MocCpNYXRoLlBJKS8yO30sX2RlZmF1bHQ6InN3aW5nIn07alF1ZXJ5LmZ4PVR3ZWVuLnByb3RvdHlwZS5pbml0O2pRdWVyeS5meC5zdGVwPXt9O3ZhcgpmeE5vdyxpblByb2dyZXNzLHJmeHR5cGVzPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxycnVuPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gc2NoZWR1bGUoKXtpZihpblByb2dyZXNzKXtpZihkb2N1bWVudC5oaWRkZW49PT1mYWxzZSYmd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSl7d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzY2hlZHVsZSk7fWVsc2V7d2luZG93LnNldFRpbWVvdXQoc2NoZWR1bGUsalF1ZXJ5LmZ4LmludGVydmFsKTt9CmpRdWVyeS5meC50aWNrKCk7fX0KZnVuY3Rpb24gY3JlYXRlRnhOb3coKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2Z4Tm93PXVuZGVmaW5lZDt9KTtyZXR1cm4oZnhOb3c9RGF0ZS5ub3coKSk7fQpmdW5jdGlvbiBnZW5GeCh0eXBlLGluY2x1ZGVXaWR0aCl7dmFyIHdoaWNoLGk9MCxhdHRycz17aGVpZ2h0OnR5cGV9O2luY2x1ZGVXaWR0aD1pbmNsdWRlV2lkdGg/MTowO2Zvcig7aTw0O2krPTItaW5jbHVkZVdpZHRoKXt3aGljaD1jc3NFeHBhbmRbaV07YXR0cnNbIm1hcmdpbiIrd2hpY2hdPWF0dHJzWyJwYWRkaW5nIit3aGljaF09dHlwZTt9CmlmKGluY2x1ZGVXaWR0aCl7YXR0cnMub3BhY2l0eT1hdHRycy53aWR0aD10eXBlO30KcmV0dXJuIGF0dHJzO30KZnVuY3Rpb24gY3JlYXRlVHdlZW4odmFsdWUscHJvcCxhbmltYXRpb24pe3ZhciB0d2Vlbixjb2xsZWN0aW9uPShBbmltYXRpb24udHdlZW5lcnNbcHJvcF18fFtdKS5jb25jYXQoQW5pbWF0aW9uLnR3ZWVuZXJzWyIqIl0pLGluZGV4PTAsbGVuZ3RoPWNvbGxlY3Rpb24ubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2lmKCh0d2Vlbj1jb2xsZWN0aW9uW2luZGV4XS5jYWxsKGFuaW1hdGlvbixwcm9wLHZhbHVlKSkpe3JldHVybiB0d2Vlbjt9fX0KZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlcihlbGVtLHByb3BzLG9wdHMpe3ZhciBwcm9wLHZhbHVlLHRvZ2dsZSxob29rcyxvbGRmaXJlLHByb3BUd2VlbixyZXN0b3JlRGlzcGxheSxkaXNwbGF5LGlzQm94PSJ3aWR0aCJpbiBwcm9wc3x8ImhlaWdodCJpbiBwcm9wcyxhbmltPXRoaXMsb3JpZz17fSxzdHlsZT1lbGVtLnN0eWxlLGhpZGRlbj1lbGVtLm5vZGVUeXBlJiZpc0hpZGRlbldpdGhpblRyZWUoZWxlbSksZGF0YVNob3c9ZGF0YVByaXYuZ2V0KGVsZW0sImZ4c2hvdyIpO2lmKCFvcHRzLnF1ZXVlKXtob29rcz1qUXVlcnkuX3F1ZXVlSG9va3MoZWxlbSwiZngiKTtpZihob29rcy51bnF1ZXVlZD09bnVsbCl7aG9va3MudW5xdWV1ZWQ9MDtvbGRmaXJlPWhvb2tzLmVtcHR5LmZpcmU7aG9va3MuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2lmKCFob29rcy51bnF1ZXVlZCl7b2xkZmlyZSgpO319O30KaG9va3MudW5xdWV1ZWQrKzthbmltLmFsd2F5cyhmdW5jdGlvbigpe2FuaW0uYWx3YXlzKGZ1bmN0aW9uKCl7aG9va3MudW5xdWV1ZWQtLTtpZighalF1ZXJ5LnF1ZXVlKGVsZW0sImZ4IikubGVuZ3RoKXtob29rcy5lbXB0eS5maXJlKCk7fX0pO30pO30KZm9yKHByb3AgaW4gcHJvcHMpe3ZhbHVlPXByb3BzW3Byb3BdO2lmKHJmeHR5cGVzLnRlc3QodmFsdWUpKXtkZWxldGUgcHJvcHNbcHJvcF07dG9nZ2xlPXRvZ2dsZXx8dmFsdWU9PT0idG9nZ2xlIjtpZih2YWx1ZT09PShoaWRkZW4/ImhpZGUiOiJzaG93Iikpe2lmKHZhbHVlPT09InNob3ciJiZkYXRhU2hvdyYmZGF0YVNob3dbcHJvcF0hPT11bmRlZmluZWQpe2hpZGRlbj10cnVlO31lbHNle2NvbnRpbnVlO319Cm9yaWdbcHJvcF09ZGF0YVNob3cmJmRhdGFTaG93W3Byb3BdfHxqUXVlcnkuc3R5bGUoZWxlbSxwcm9wKTt9fQpwcm9wVHdlZW49IWpRdWVyeS5pc0VtcHR5T2JqZWN0KHByb3BzKTtpZighcHJvcFR3ZWVuJiZqUXVlcnkuaXNFbXB0eU9iamVjdChvcmlnKSl7cmV0dXJuO30KaWYoaXNCb3gmJmVsZW0ubm9kZVR5cGU9PT0xKXtvcHRzLm92ZXJmbG93PVtzdHlsZS5vdmVyZmxvdyxzdHlsZS5vdmVyZmxvd1gsc3R5bGUub3ZlcmZsb3dZXTtyZXN0b3JlRGlzcGxheT1kYXRhU2hvdyYmZGF0YVNob3cuZGlzcGxheTtpZihyZXN0b3JlRGlzcGxheT09bnVsbCl7cmVzdG9yZURpc3BsYXk9ZGF0YVByaXYuZ2V0KGVsZW0sImRpc3BsYXkiKTt9CmRpc3BsYXk9alF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5Iik7aWYoZGlzcGxheT09PSJub25lIil7aWYocmVzdG9yZURpc3BsYXkpe2Rpc3BsYXk9cmVzdG9yZURpc3BsYXk7fWVsc2V7c2hvd0hpZGUoW2VsZW1dLHRydWUpO3Jlc3RvcmVEaXNwbGF5PWVsZW0uc3R5bGUuZGlzcGxheXx8cmVzdG9yZURpc3BsYXk7ZGlzcGxheT1qUXVlcnkuY3NzKGVsZW0sImRpc3BsYXkiKTtzaG93SGlkZShbZWxlbV0pO319CmlmKGRpc3BsYXk9PT0iaW5saW5lInx8ZGlzcGxheT09PSJpbmxpbmUtYmxvY2siJiZyZXN0b3JlRGlzcGxheSE9bnVsbCl7aWYoalF1ZXJ5LmNzcyhlbGVtLCJmbG9hdCIpPT09Im5vbmUiKXtpZighcHJvcFR3ZWVuKXthbmltLmRvbmUoZnVuY3Rpb24oKXtzdHlsZS5kaXNwbGF5PXJlc3RvcmVEaXNwbGF5O30pO2lmKHJlc3RvcmVEaXNwbGF5PT1udWxsKXtkaXNwbGF5PXN0eWxlLmRpc3BsYXk7cmVzdG9yZURpc3BsYXk9ZGlzcGxheT09PSJub25lIj8iIjpkaXNwbGF5O319CnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayI7fX19CmlmKG9wdHMub3ZlcmZsb3cpe3N0eWxlLm92ZXJmbG93PSJoaWRkZW4iO2FuaW0uYWx3YXlzKGZ1bmN0aW9uKCl7c3R5bGUub3ZlcmZsb3c9b3B0cy5vdmVyZmxvd1swXTtzdHlsZS5vdmVyZmxvd1g9b3B0cy5vdmVyZmxvd1sxXTtzdHlsZS5vdmVyZmxvd1k9b3B0cy5vdmVyZmxvd1syXTt9KTt9CnByb3BUd2Vlbj1mYWxzZTtmb3IocHJvcCBpbiBvcmlnKXtpZighcHJvcFR3ZWVuKXtpZihkYXRhU2hvdyl7aWYoImhpZGRlbiJpbiBkYXRhU2hvdyl7aGlkZGVuPWRhdGFTaG93LmhpZGRlbjt9fWVsc2V7ZGF0YVNob3c9ZGF0YVByaXYuYWNjZXNzKGVsZW0sImZ4c2hvdyIse2Rpc3BsYXk6cmVzdG9yZURpc3BsYXl9KTt9CmlmKHRvZ2dsZSl7ZGF0YVNob3cuaGlkZGVuPSFoaWRkZW47fQppZihoaWRkZW4pe3Nob3dIaWRlKFtlbGVtXSx0cnVlKTt9CmFuaW0uZG9uZShmdW5jdGlvbigpe2lmKCFoaWRkZW4pe3Nob3dIaWRlKFtlbGVtXSk7fQpkYXRhUHJpdi5yZW1vdmUoZWxlbSwiZnhzaG93Iik7Zm9yKHByb3AgaW4gb3JpZyl7alF1ZXJ5LnN0eWxlKGVsZW0scHJvcCxvcmlnW3Byb3BdKTt9fSk7fQpwcm9wVHdlZW49Y3JlYXRlVHdlZW4oaGlkZGVuP2RhdGFTaG93W3Byb3BdOjAscHJvcCxhbmltKTtpZighKHByb3AgaW4gZGF0YVNob3cpKXtkYXRhU2hvd1twcm9wXT1wcm9wVHdlZW4uc3RhcnQ7aWYoaGlkZGVuKXtwcm9wVHdlZW4uZW5kPXByb3BUd2Vlbi5zdGFydDtwcm9wVHdlZW4uc3RhcnQ9MDt9fX19CmZ1bmN0aW9uIHByb3BGaWx0ZXIocHJvcHMsc3BlY2lhbEVhc2luZyl7dmFyIGluZGV4LG5hbWUsZWFzaW5nLHZhbHVlLGhvb2tzO2ZvcihpbmRleCBpbiBwcm9wcyl7bmFtZT1jYW1lbENhc2UoaW5kZXgpO2Vhc2luZz1zcGVjaWFsRWFzaW5nW25hbWVdO3ZhbHVlPXByb3BzW2luZGV4XTtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7ZWFzaW5nPXZhbHVlWzFdO3ZhbHVlPXByb3BzW2luZGV4XT12YWx1ZVswXTt9CmlmKGluZGV4IT09bmFtZSl7cHJvcHNbbmFtZV09dmFsdWU7ZGVsZXRlIHByb3BzW2luZGV4XTt9Cmhvb2tzPWpRdWVyeS5jc3NIb29rc1tuYW1lXTtpZihob29rcyYmImV4cGFuZCJpbiBob29rcyl7dmFsdWU9aG9va3MuZXhwYW5kKHZhbHVlKTtkZWxldGUgcHJvcHNbbmFtZV07Zm9yKGluZGV4IGluIHZhbHVlKXtpZighKGluZGV4IGluIHByb3BzKSl7cHJvcHNbaW5kZXhdPXZhbHVlW2luZGV4XTtzcGVjaWFsRWFzaW5nW2luZGV4XT1lYXNpbmc7fX19ZWxzZXtzcGVjaWFsRWFzaW5nW25hbWVdPWVhc2luZzt9fX0KZnVuY3Rpb24gQW5pbWF0aW9uKGVsZW0scHJvcGVydGllcyxvcHRpb25zKXt2YXIgcmVzdWx0LHN0b3BwZWQsaW5kZXg9MCxsZW5ndGg9QW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLGRlZmVycmVkPWpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB0aWNrLmVsZW07fSksdGljaz1mdW5jdGlvbigpe2lmKHN0b3BwZWQpe3JldHVybiBmYWxzZTt9CnZhciBjdXJyZW50VGltZT1meE5vd3x8Y3JlYXRlRnhOb3coKSxyZW1haW5pbmc9TWF0aC5tYXgoMCxhbmltYXRpb24uc3RhcnRUaW1lK2FuaW1hdGlvbi5kdXJhdGlvbi1jdXJyZW50VGltZSksdGVtcD1yZW1haW5pbmcvYW5pbWF0aW9uLmR1cmF0aW9ufHwwLHBlcmNlbnQ9MS10ZW1wLGluZGV4PTAsbGVuZ3RoPWFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2FuaW1hdGlvbi50d2VlbnNbaW5kZXhdLnJ1bihwZXJjZW50KTt9CmRlZmVycmVkLm5vdGlmeVdpdGgoZWxlbSxbYW5pbWF0aW9uLHBlcmNlbnQscmVtYWluaW5nXSk7aWYocGVyY2VudDwxJiZsZW5ndGgpe3JldHVybiByZW1haW5pbmc7fQppZighbGVuZ3RoKXtkZWZlcnJlZC5ub3RpZnlXaXRoKGVsZW0sW2FuaW1hdGlvbiwxLDBdKTt9CmRlZmVycmVkLnJlc29sdmVXaXRoKGVsZW0sW2FuaW1hdGlvbl0pO3JldHVybiBmYWxzZTt9LGFuaW1hdGlvbj1kZWZlcnJlZC5wcm9taXNlKHtlbGVtOmVsZW0scHJvcHM6alF1ZXJ5LmV4dGVuZCh7fSxwcm9wZXJ0aWVzKSxvcHRzOmpRdWVyeS5leHRlbmQodHJ1ZSx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6alF1ZXJ5LmVhc2luZy5fZGVmYXVsdH0sb3B0aW9ucyksb3JpZ2luYWxQcm9wZXJ0aWVzOnByb3BlcnRpZXMsb3JpZ2luYWxPcHRpb25zOm9wdGlvbnMsc3RhcnRUaW1lOmZ4Tm93fHxjcmVhdGVGeE5vdygpLGR1cmF0aW9uOm9wdGlvbnMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHByb3AsZW5kKXt2YXIgdHdlZW49alF1ZXJ5LlR3ZWVuKGVsZW0sYW5pbWF0aW9uLm9wdHMscHJvcCxlbmQsYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1twcm9wXXx8YW5pbWF0aW9uLm9wdHMuZWFzaW5nKTthbmltYXRpb24udHdlZW5zLnB1c2godHdlZW4pO3JldHVybiB0d2Vlbjt9LHN0b3A6ZnVuY3Rpb24oZ290b0VuZCl7dmFyIGluZGV4PTAsbGVuZ3RoPWdvdG9FbmQ/YW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg6MDtpZihzdG9wcGVkKXtyZXR1cm4gdGhpczt9CnN0b3BwZWQ9dHJ1ZTtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXthbmltYXRpb24udHdlZW5zW2luZGV4XS5ydW4oMSk7fQppZihnb3RvRW5kKXtkZWZlcnJlZC5ub3RpZnlXaXRoKGVsZW0sW2FuaW1hdGlvbiwxLDBdKTtkZWZlcnJlZC5yZXNvbHZlV2l0aChlbGVtLFthbmltYXRpb24sZ290b0VuZF0pO31lbHNle2RlZmVycmVkLnJlamVjdFdpdGgoZWxlbSxbYW5pbWF0aW9uLGdvdG9FbmRdKTt9CnJldHVybiB0aGlzO319KSxwcm9wcz1hbmltYXRpb24ucHJvcHM7cHJvcEZpbHRlcihwcm9wcyxhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nKTtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtyZXN1bHQ9QW5pbWF0aW9uLnByZWZpbHRlcnNbaW5kZXhdLmNhbGwoYW5pbWF0aW9uLGVsZW0scHJvcHMsYW5pbWF0aW9uLm9wdHMpO2lmKHJlc3VsdCl7aWYoaXNGdW5jdGlvbihyZXN1bHQuc3RvcCkpe2pRdWVyeS5fcXVldWVIb29rcyhhbmltYXRpb24uZWxlbSxhbmltYXRpb24ub3B0cy5xdWV1ZSkuc3RvcD1yZXN1bHQuc3RvcC5iaW5kKHJlc3VsdCk7fQpyZXR1cm4gcmVzdWx0O319CmpRdWVyeS5tYXAocHJvcHMsY3JlYXRlVHdlZW4sYW5pbWF0aW9uKTtpZihpc0Z1bmN0aW9uKGFuaW1hdGlvbi5vcHRzLnN0YXJ0KSl7YW5pbWF0aW9uLm9wdHMuc3RhcnQuY2FsbChlbGVtLGFuaW1hdGlvbik7fQphbmltYXRpb24ucHJvZ3Jlc3MoYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MpLmRvbmUoYW5pbWF0aW9uLm9wdHMuZG9uZSxhbmltYXRpb24ub3B0cy5jb21wbGV0ZSkuZmFpbChhbmltYXRpb24ub3B0cy5mYWlsKS5hbHdheXMoYW5pbWF0aW9uLm9wdHMuYWx3YXlzKTtqUXVlcnkuZngudGltZXIoalF1ZXJ5LmV4dGVuZCh0aWNrLHtlbGVtOmVsZW0sYW5pbTphbmltYXRpb24scXVldWU6YW5pbWF0aW9uLm9wdHMucXVldWV9KSk7cmV0dXJuIGFuaW1hdGlvbjt9CmpRdWVyeS5BbmltYXRpb249alF1ZXJ5LmV4dGVuZChBbmltYXRpb24se3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKHByb3AsdmFsdWUpe3ZhciB0d2Vlbj10aGlzLmNyZWF0ZVR3ZWVuKHByb3AsdmFsdWUpO2FkanVzdENTUyh0d2Vlbi5lbGVtLHByb3AscmNzc051bS5leGVjKHZhbHVlKSx0d2Vlbik7cmV0dXJuIHR3ZWVuO31dfSx0d2VlbmVyOmZ1bmN0aW9uKHByb3BzLGNhbGxiYWNrKXtpZihpc0Z1bmN0aW9uKHByb3BzKSl7Y2FsbGJhY2s9cHJvcHM7cHJvcHM9WyIqIl07fWVsc2V7cHJvcHM9cHJvcHMubWF0Y2gocm5vdGh0bWx3aGl0ZSk7fQp2YXIgcHJvcCxpbmRleD0wLGxlbmd0aD1wcm9wcy5sZW5ndGg7Zm9yKDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7cHJvcD1wcm9wc1tpbmRleF07QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdPUFuaW1hdGlvbi50d2VlbmVyc1twcm9wXXx8W107QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdLnVuc2hpZnQoY2FsbGJhY2spO319LHByZWZpbHRlcnM6W2RlZmF1bHRQcmVmaWx0ZXJdLHByZWZpbHRlcjpmdW5jdGlvbihjYWxsYmFjayxwcmVwZW5kKXtpZihwcmVwZW5kKXtBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KGNhbGxiYWNrKTt9ZWxzZXtBbmltYXRpb24ucHJlZmlsdGVycy5wdXNoKGNhbGxiYWNrKTt9fX0pO2pRdWVyeS5zcGVlZD1mdW5jdGlvbihzcGVlZCxlYXNpbmcsZm4pe3ZhciBvcHQ9c3BlZWQmJnR5cGVvZiBzcGVlZD09PSJvYmplY3QiP2pRdWVyeS5leHRlbmQoe30sc3BlZWQpOntjb21wbGV0ZTpmbnx8IWZuJiZlYXNpbmd8fGlzRnVuY3Rpb24oc3BlZWQpJiZzcGVlZCxkdXJhdGlvbjpzcGVlZCxlYXNpbmc6Zm4mJmVhc2luZ3x8ZWFzaW5nJiYhaXNGdW5jdGlvbihlYXNpbmcpJiZlYXNpbmd9O2lmKGpRdWVyeS5meC5vZmYpe29wdC5kdXJhdGlvbj0wO31lbHNle2lmKHR5cGVvZiBvcHQuZHVyYXRpb24hPT0ibnVtYmVyIil7aWYob3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMpe29wdC5kdXJhdGlvbj1qUXVlcnkuZnguc3BlZWRzW29wdC5kdXJhdGlvbl07fWVsc2V7b3B0LmR1cmF0aW9uPWpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7fX19CmlmKG9wdC5xdWV1ZT09bnVsbHx8b3B0LnF1ZXVlPT09dHJ1ZSl7b3B0LnF1ZXVlPSJmeCI7fQpvcHQub2xkPW9wdC5jb21wbGV0ZTtvcHQuY29tcGxldGU9ZnVuY3Rpb24oKXtpZihpc0Z1bmN0aW9uKG9wdC5vbGQpKXtvcHQub2xkLmNhbGwodGhpcyk7fQppZihvcHQucXVldWUpe2pRdWVyeS5kZXF1ZXVlKHRoaXMsb3B0LnF1ZXVlKTt9fTtyZXR1cm4gb3B0O307alF1ZXJ5LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKHNwZWVkLHRvLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHRoaXMuZmlsdGVyKGlzSGlkZGVuV2l0aGluVHJlZSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0b30sc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTt9LGFuaW1hdGU6ZnVuY3Rpb24ocHJvcCxzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3ZhciBlbXB0eT1qUXVlcnkuaXNFbXB0eU9iamVjdChwcm9wKSxvcHRhbGw9alF1ZXJ5LnNwZWVkKHNwZWVkLGVhc2luZyxjYWxsYmFjayksZG9BbmltYXRpb249ZnVuY3Rpb24oKXt2YXIgYW5pbT1BbmltYXRpb24odGhpcyxqUXVlcnkuZXh0ZW5kKHt9LHByb3ApLG9wdGFsbCk7aWYoZW1wdHl8fGRhdGFQcml2LmdldCh0aGlzLCJmaW5pc2giKSl7YW5pbS5zdG9wKHRydWUpO319O2RvQW5pbWF0aW9uLmZpbmlzaD1kb0FuaW1hdGlvbjtyZXR1cm4gZW1wdHl8fG9wdGFsbC5xdWV1ZT09PWZhbHNlP3RoaXMuZWFjaChkb0FuaW1hdGlvbik6dGhpcy5xdWV1ZShvcHRhbGwucXVldWUsZG9BbmltYXRpb24pO30sc3RvcDpmdW5jdGlvbih0eXBlLGNsZWFyUXVldWUsZ290b0VuZCl7dmFyIHN0b3BRdWV1ZT1mdW5jdGlvbihob29rcyl7dmFyIHN0b3A9aG9va3Muc3RvcDtkZWxldGUgaG9va3Muc3RvcDtzdG9wKGdvdG9FbmQpO307aWYodHlwZW9mIHR5cGUhPT0ic3RyaW5nIil7Z290b0VuZD1jbGVhclF1ZXVlO2NsZWFyUXVldWU9dHlwZTt0eXBlPXVuZGVmaW5lZDt9CmlmKGNsZWFyUXVldWUpe3RoaXMucXVldWUodHlwZXx8ImZ4IixbXSk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGRlcXVldWU9dHJ1ZSxpbmRleD10eXBlIT1udWxsJiZ0eXBlKyJxdWV1ZUhvb2tzIix0aW1lcnM9alF1ZXJ5LnRpbWVycyxkYXRhPWRhdGFQcml2LmdldCh0aGlzKTtpZihpbmRleCl7aWYoZGF0YVtpbmRleF0mJmRhdGFbaW5kZXhdLnN0b3Ape3N0b3BRdWV1ZShkYXRhW2luZGV4XSk7fX1lbHNle2ZvcihpbmRleCBpbiBkYXRhKXtpZihkYXRhW2luZGV4XSYmZGF0YVtpbmRleF0uc3RvcCYmcnJ1bi50ZXN0KGluZGV4KSl7c3RvcFF1ZXVlKGRhdGFbaW5kZXhdKTt9fX0KZm9yKGluZGV4PXRpbWVycy5sZW5ndGg7aW5kZXgtLTspe2lmKHRpbWVyc1tpbmRleF0uZWxlbT09PXRoaXMmJih0eXBlPT1udWxsfHx0aW1lcnNbaW5kZXhdLnF1ZXVlPT09dHlwZSkpe3RpbWVyc1tpbmRleF0uYW5pbS5zdG9wKGdvdG9FbmQpO2RlcXVldWU9ZmFsc2U7dGltZXJzLnNwbGljZShpbmRleCwxKTt9fQppZihkZXF1ZXVlfHwhZ290b0VuZCl7alF1ZXJ5LmRlcXVldWUodGhpcyx0eXBlKTt9fSk7fSxmaW5pc2g6ZnVuY3Rpb24odHlwZSl7aWYodHlwZSE9PWZhbHNlKXt0eXBlPXR5cGV8fCJmeCI7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGluZGV4LGRhdGE9ZGF0YVByaXYuZ2V0KHRoaXMpLHF1ZXVlPWRhdGFbdHlwZSsicXVldWUiXSxob29rcz1kYXRhW3R5cGUrInF1ZXVlSG9va3MiXSx0aW1lcnM9alF1ZXJ5LnRpbWVycyxsZW5ndGg9cXVldWU/cXVldWUubGVuZ3RoOjA7ZGF0YS5maW5pc2g9dHJ1ZTtqUXVlcnkucXVldWUodGhpcyx0eXBlLFtdKTtpZihob29rcyYmaG9va3Muc3RvcCl7aG9va3Muc3RvcC5jYWxsKHRoaXMsdHJ1ZSk7fQpmb3IoaW5kZXg9dGltZXJzLmxlbmd0aDtpbmRleC0tOyl7aWYodGltZXJzW2luZGV4XS5lbGVtPT09dGhpcyYmdGltZXJzW2luZGV4XS5xdWV1ZT09PXR5cGUpe3RpbWVyc1tpbmRleF0uYW5pbS5zdG9wKHRydWUpO3RpbWVycy5zcGxpY2UoaW5kZXgsMSk7fX0KZm9yKGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2lmKHF1ZXVlW2luZGV4XSYmcXVldWVbaW5kZXhdLmZpbmlzaCl7cXVldWVbaW5kZXhdLmZpbmlzaC5jYWxsKHRoaXMpO319CmRlbGV0ZSBkYXRhLmZpbmlzaDt9KTt9fSk7alF1ZXJ5LmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKF9pLG5hbWUpe3ZhciBjc3NGbj1qUXVlcnkuZm5bbmFtZV07alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHNwZWVkLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHNwZWVkPT1udWxsfHx0eXBlb2Ygc3BlZWQ9PT0iYm9vbGVhbiI/Y3NzRm4uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShnZW5GeChuYW1lLHRydWUpLHNwZWVkLGVhc2luZyxjYWxsYmFjayk7fTt9KTtqUXVlcnkuZWFjaCh7c2xpZGVEb3duOmdlbkZ4KCJzaG93Iiksc2xpZGVVcDpnZW5GeCgiaGlkZSIpLHNsaWRlVG9nZ2xlOmdlbkZ4KCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKG5hbWUscHJvcHMpe2pRdWVyeS5mbltuYW1lXT1mdW5jdGlvbihzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3JldHVybiB0aGlzLmFuaW1hdGUocHJvcHMsc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTt9O30pO2pRdWVyeS50aW1lcnM9W107alF1ZXJ5LmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgdGltZXIsaT0wLHRpbWVycz1qUXVlcnkudGltZXJzO2Z4Tm93PURhdGUubm93KCk7Zm9yKDtpPHRpbWVycy5sZW5ndGg7aSsrKXt0aW1lcj10aW1lcnNbaV07aWYoIXRpbWVyKCkmJnRpbWVyc1tpXT09PXRpbWVyKXt0aW1lcnMuc3BsaWNlKGktLSwxKTt9fQppZighdGltZXJzLmxlbmd0aCl7alF1ZXJ5LmZ4LnN0b3AoKTt9CmZ4Tm93PXVuZGVmaW5lZDt9O2pRdWVyeS5meC50aW1lcj1mdW5jdGlvbih0aW1lcil7alF1ZXJ5LnRpbWVycy5wdXNoKHRpbWVyKTtqUXVlcnkuZnguc3RhcnQoKTt9O2pRdWVyeS5meC5pbnRlcnZhbD0xMztqUXVlcnkuZnguc3RhcnQ9ZnVuY3Rpb24oKXtpZihpblByb2dyZXNzKXtyZXR1cm47fQppblByb2dyZXNzPXRydWU7c2NoZWR1bGUoKTt9O2pRdWVyeS5meC5zdG9wPWZ1bmN0aW9uKCl7aW5Qcm9ncmVzcz1udWxsO307alF1ZXJ5LmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfTtqUXVlcnkuZm4uZGVsYXk9ZnVuY3Rpb24odGltZSx0eXBlKXt0aW1lPWpRdWVyeS5meD9qUXVlcnkuZnguc3BlZWRzW3RpbWVdfHx0aW1lOnRpbWU7dHlwZT10eXBlfHwiZngiO3JldHVybiB0aGlzLnF1ZXVlKHR5cGUsZnVuY3Rpb24obmV4dCxob29rcyl7dmFyIHRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQobmV4dCx0aW1lKTtob29rcy5zdG9wPWZ1bmN0aW9uKCl7d2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0KTt9O30pO307KGZ1bmN0aW9uKCl7dmFyIGlucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksc2VsZWN0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLG9wdD1zZWxlY3QuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2lucHV0LnR5cGU9ImNoZWNrYm94IjtzdXBwb3J0LmNoZWNrT249aW5wdXQudmFsdWUhPT0iIjtzdXBwb3J0Lm9wdFNlbGVjdGVkPW9wdC5zZWxlY3RlZDtpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnZhbHVlPSJ0IjtpbnB1dC50eXBlPSJyYWRpbyI7c3VwcG9ydC5yYWRpb1ZhbHVlPWlucHV0LnZhbHVlPT09InQiO30pKCk7dmFyIGJvb2xIb29rLGF0dHJIYW5kbGU9alF1ZXJ5LmV4cHIuYXR0ckhhbmRsZTtqUXVlcnkuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKG5hbWUsdmFsdWUpe3JldHVybiBhY2Nlc3ModGhpcyxqUXVlcnkuYXR0cixuYW1lLHZhbHVlLGFyZ3VtZW50cy5sZW5ndGg+MSk7fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKG5hbWUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkucmVtb3ZlQXR0cih0aGlzLG5hbWUpO30pO319KTtqUXVlcnkuZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGVsZW0sbmFtZSx2YWx1ZSl7dmFyIHJldCxob29rcyxuVHlwZT1lbGVtLm5vZGVUeXBlO2lmKG5UeXBlPT09M3x8blR5cGU9PT04fHxuVHlwZT09PTIpe3JldHVybjt9CmlmKHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZT09PSJ1bmRlZmluZWQiKXtyZXR1cm4galF1ZXJ5LnByb3AoZWxlbSxuYW1lLHZhbHVlKTt9CmlmKG5UeXBlIT09MXx8IWpRdWVyeS5pc1hNTERvYyhlbGVtKSl7aG9va3M9alF1ZXJ5LmF0dHJIb29rc1tuYW1lLnRvTG93ZXJDYXNlKCldfHwoalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KG5hbWUpP2Jvb2xIb29rOnVuZGVmaW5lZCk7fQppZih2YWx1ZSE9PXVuZGVmaW5lZCl7aWYodmFsdWU9PT1udWxsKXtqUXVlcnkucmVtb3ZlQXR0cihlbGVtLG5hbWUpO3JldHVybjt9CmlmKGhvb2tzJiYic2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLnNldChlbGVtLHZhbHVlLG5hbWUpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIHJldDt9CmVsZW0uc2V0QXR0cmlidXRlKG5hbWUsdmFsdWUrIiIpO3JldHVybiB2YWx1ZTt9CmlmKGhvb2tzJiYiZ2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLmdldChlbGVtLG5hbWUpKSE9PW51bGwpe3JldHVybiByZXQ7fQpyZXQ9alF1ZXJ5LmZpbmQuYXR0cihlbGVtLG5hbWUpO3JldHVybiByZXQ9PW51bGw/dW5kZWZpbmVkOnJldDt9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUpe2lmKCFzdXBwb3J0LnJhZGlvVmFsdWUmJnZhbHVlPT09InJhZGlvIiYmbm9kZU5hbWUoZWxlbSwiaW5wdXQiKSl7dmFyIHZhbD1lbGVtLnZhbHVlO2VsZW0uc2V0QXR0cmlidXRlKCJ0eXBlIix2YWx1ZSk7aWYodmFsKXtlbGVtLnZhbHVlPXZhbDt9CnJldHVybiB2YWx1ZTt9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZWxlbSx2YWx1ZSl7dmFyIG5hbWUsaT0wLGF0dHJOYW1lcz12YWx1ZSYmdmFsdWUubWF0Y2gocm5vdGh0bWx3aGl0ZSk7aWYoYXR0ck5hbWVzJiZlbGVtLm5vZGVUeXBlPT09MSl7d2hpbGUoKG5hbWU9YXR0ck5hbWVzW2krK10pKXtlbGVtLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTt9fX19KTtib29sSG9vaz17c2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUsbmFtZSl7aWYodmFsdWU9PT1mYWxzZSl7alF1ZXJ5LnJlbW92ZUF0dHIoZWxlbSxuYW1lKTt9ZWxzZXtlbGVtLnNldEF0dHJpYnV0ZShuYW1lLG5hbWUpO30KcmV0dXJuIG5hbWU7fX07alF1ZXJ5LmVhY2goalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihfaSxuYW1lKXt2YXIgZ2V0dGVyPWF0dHJIYW5kbGVbbmFtZV18fGpRdWVyeS5maW5kLmF0dHI7YXR0ckhhbmRsZVtuYW1lXT1mdW5jdGlvbihlbGVtLG5hbWUsaXNYTUwpe3ZhciByZXQsaGFuZGxlLGxvd2VyY2FzZU5hbWU9bmFtZS50b0xvd2VyQ2FzZSgpO2lmKCFpc1hNTCl7aGFuZGxlPWF0dHJIYW5kbGVbbG93ZXJjYXNlTmFtZV07YXR0ckhhbmRsZVtsb3dlcmNhc2VOYW1lXT1yZXQ7cmV0PWdldHRlcihlbGVtLG5hbWUsaXNYTUwpIT1udWxsP2xvd2VyY2FzZU5hbWU6bnVsbDthdHRySGFuZGxlW2xvd2VyY2FzZU5hbWVdPWhhbmRsZTt9CnJldHVybiByZXQ7fTt9KTt2YXIgcmZvY3VzYWJsZT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLHJjbGlja2FibGU9L14oPzphfGFyZWEpJC9pO2pRdWVyeS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGpRdWVyeS5wcm9wLG5hbWUsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xKTt9LHJlbW92ZVByb3A6ZnVuY3Rpb24obmFtZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW2pRdWVyeS5wcm9wRml4W25hbWVdfHxuYW1lXTt9KTt9fSk7alF1ZXJ5LmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUpe3ZhciByZXQsaG9va3MsblR5cGU9ZWxlbS5ub2RlVHlwZTtpZihuVHlwZT09PTN8fG5UeXBlPT09OHx8blR5cGU9PT0yKXtyZXR1cm47fQppZihuVHlwZSE9PTF8fCFqUXVlcnkuaXNYTUxEb2MoZWxlbSkpe25hbWU9alF1ZXJ5LnByb3BGaXhbbmFtZV18fG5hbWU7aG9va3M9alF1ZXJ5LnByb3BIb29rc1tuYW1lXTt9CmlmKHZhbHVlIT09dW5kZWZpbmVkKXtpZihob29rcyYmInNldCJpbiBob29rcyYmKHJldD1ob29rcy5zZXQoZWxlbSx2YWx1ZSxuYW1lKSkhPT11bmRlZmluZWQpe3JldHVybiByZXQ7fQpyZXR1cm4oZWxlbVtuYW1lXT12YWx1ZSk7fQppZihob29rcyYmImdldCJpbiBob29rcyYmKHJldD1ob29rcy5nZXQoZWxlbSxuYW1lKSkhPT1udWxsKXtyZXR1cm4gcmV0O30KcmV0dXJuIGVsZW1bbmFtZV07fSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHRhYmluZGV4PWpRdWVyeS5maW5kLmF0dHIoZWxlbSwidGFiaW5kZXgiKTtpZih0YWJpbmRleCl7cmV0dXJuIHBhcnNlSW50KHRhYmluZGV4LDEwKTt9CmlmKHJmb2N1c2FibGUudGVzdChlbGVtLm5vZGVOYW1lKXx8cmNsaWNrYWJsZS50ZXN0KGVsZW0ubm9kZU5hbWUpJiZlbGVtLmhyZWYpe3JldHVybiAwO30KcmV0dXJuLTE7fX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pO2lmKCFzdXBwb3J0Lm9wdFNlbGVjdGVkKXtqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD1lbGVtLnBhcmVudE5vZGU7aWYocGFyZW50JiZwYXJlbnQucGFyZW50Tm9kZSl7cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDt9CnJldHVybiBudWxsO30sc2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciBwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlO2lmKHBhcmVudCl7cGFyZW50LnNlbGVjdGVkSW5kZXg7aWYocGFyZW50LnBhcmVudE5vZGUpe3BhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7fX19fTt9CmpRdWVyeS5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtqUXVlcnkucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXM7fSk7ZnVuY3Rpb24gc3RyaXBBbmRDb2xsYXBzZSh2YWx1ZSl7dmFyIHRva2Vucz12YWx1ZS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107cmV0dXJuIHRva2Vucy5qb2luKCIgIik7fQpmdW5jdGlvbiBnZXRDbGFzcyhlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUmJmVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIjt9CmZ1bmN0aW9uIGNsYXNzZXNUb0FycmF5KHZhbHVlKXtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7cmV0dXJuIHZhbHVlO30KaWYodHlwZW9mIHZhbHVlPT09InN0cmluZyIpe3JldHVybiB2YWx1ZS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107fQpyZXR1cm5bXTt9CmpRdWVyeS5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5hZGRDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpO30pO30KY2xhc3Nlcz1jbGFzc2VzVG9BcnJheSh2YWx1ZSk7aWYoY2xhc3Nlcy5sZW5ndGgpe3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2N1clZhbHVlPWdldENsYXNzKGVsZW0pO2N1cj1lbGVtLm5vZGVUeXBlPT09MSYmKCIgIitzdHJpcEFuZENvbGxhcHNlKGN1clZhbHVlKSsiICIpO2lmKGN1cil7aj0wO3doaWxlKChjbGF6ej1jbGFzc2VzW2orK10pKXtpZihjdXIuaW5kZXhPZigiICIrY2xhenorIiAiKTwwKXtjdXIrPWNsYXp6KyIgIjt9fQpmaW5hbFZhbHVlPXN0cmlwQW5kQ29sbGFwc2UoY3VyKTtpZihjdXJWYWx1ZSE9PWZpbmFsVmFsdWUpe2VsZW0uc2V0QXR0cmlidXRlKCJjbGFzcyIsZmluYWxWYWx1ZSk7fX19fQpyZXR1cm4gdGhpczt9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5yZW1vdmVDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpO30pO30KaWYoIWFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiB0aGlzLmF0dHIoImNsYXNzIiwiIik7fQpjbGFzc2VzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTtpZihjbGFzc2VzLmxlbmd0aCl7d2hpbGUoKGVsZW09dGhpc1tpKytdKSl7Y3VyVmFsdWU9Z2V0Q2xhc3MoZWxlbSk7Y3VyPWVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoY3VyVmFsdWUpKyIgIik7aWYoY3VyKXtqPTA7d2hpbGUoKGNsYXp6PWNsYXNzZXNbaisrXSkpe3doaWxlKGN1ci5pbmRleE9mKCIgIitjbGF6eisiICIpPi0xKXtjdXI9Y3VyLnJlcGxhY2UoIiAiK2NsYXp6KyIgIiwiICIpO319CmZpbmFsVmFsdWU9c3RyaXBBbmRDb2xsYXBzZShjdXIpO2lmKGN1clZhbHVlIT09ZmluYWxWYWx1ZSl7ZWxlbS5zZXRBdHRyaWJ1dGUoImNsYXNzIixmaW5hbFZhbHVlKTt9fX19CnJldHVybiB0aGlzO30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24odmFsdWUsc3RhdGVWYWwpe3ZhciB0eXBlPXR5cGVvZiB2YWx1ZSxpc1ZhbGlkVmFsdWU9dHlwZT09PSJzdHJpbmcifHxBcnJheS5pc0FycmF5KHZhbHVlKTtpZih0eXBlb2Ygc3RhdGVWYWw9PT0iYm9vbGVhbiImJmlzVmFsaWRWYWx1ZSl7cmV0dXJuIHN0YXRlVmFsP3RoaXMuYWRkQ2xhc3ModmFsdWUpOnRoaXMucmVtb3ZlQ2xhc3ModmFsdWUpO30KaWYoaXNGdW5jdGlvbih2YWx1ZSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7alF1ZXJ5KHRoaXMpLnRvZ2dsZUNsYXNzKHZhbHVlLmNhbGwodGhpcyxpLGdldENsYXNzKHRoaXMpLHN0YXRlVmFsKSxzdGF0ZVZhbCk7fSk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGNsYXNzTmFtZSxpLHNlbGYsY2xhc3NOYW1lcztpZihpc1ZhbGlkVmFsdWUpe2k9MDtzZWxmPWpRdWVyeSh0aGlzKTtjbGFzc05hbWVzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTt3aGlsZSgoY2xhc3NOYW1lPWNsYXNzTmFtZXNbaSsrXSkpe2lmKHNlbGYuaGFzQ2xhc3MoY2xhc3NOYW1lKSl7c2VsZi5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO31lbHNle3NlbGYuYWRkQ2xhc3MoY2xhc3NOYW1lKTt9fX1lbHNlIGlmKHZhbHVlPT09dW5kZWZpbmVkfHx0eXBlPT09ImJvb2xlYW4iKXtjbGFzc05hbWU9Z2V0Q2xhc3ModGhpcyk7aWYoY2xhc3NOYW1lKXtkYXRhUHJpdi5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsY2xhc3NOYW1lKTt9CmlmKHRoaXMuc2V0QXR0cmlidXRlKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGNsYXNzTmFtZXx8dmFsdWU9PT1mYWxzZT8iIjpkYXRhUHJpdi5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIik7fX19KTt9LGhhc0NsYXNzOmZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgY2xhc3NOYW1lLGVsZW0saT0wO2NsYXNzTmFtZT0iICIrc2VsZWN0b3IrIiAiO3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoZ2V0Q2xhc3MoZWxlbSkpKyIgIikuaW5kZXhPZihjbGFzc05hbWUpPi0xKXtyZXR1cm4gdHJ1ZTt9fQpyZXR1cm4gZmFsc2U7fX0pO3ZhciBycmV0dXJuPS9cci9nO2pRdWVyeS5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbih2YWx1ZSl7dmFyIGhvb2tzLHJldCx2YWx1ZUlzRnVuY3Rpb24sZWxlbT10aGlzWzBdO2lmKCFhcmd1bWVudHMubGVuZ3RoKXtpZihlbGVtKXtob29rcz1qUXVlcnkudmFsSG9va3NbZWxlbS50eXBlXXx8alF1ZXJ5LnZhbEhvb2tzW2VsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoaG9va3MmJiJnZXQiaW4gaG9va3MmJihyZXQ9aG9va3MuZ2V0KGVsZW0sInZhbHVlIikpIT09dW5kZWZpbmVkKXtyZXR1cm4gcmV0O30KcmV0PWVsZW0udmFsdWU7aWYodHlwZW9mIHJldD09PSJzdHJpbmciKXtyZXR1cm4gcmV0LnJlcGxhY2UocnJldHVybiwiIik7fQpyZXR1cm4gcmV0PT1udWxsPyIiOnJldDt9CnJldHVybjt9CnZhbHVlSXNGdW5jdGlvbj1pc0Z1bmN0aW9uKHZhbHVlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciB2YWw7aWYodGhpcy5ub2RlVHlwZSE9PTEpe3JldHVybjt9CmlmKHZhbHVlSXNGdW5jdGlvbil7dmFsPXZhbHVlLmNhbGwodGhpcyxpLGpRdWVyeSh0aGlzKS52YWwoKSk7fWVsc2V7dmFsPXZhbHVlO30KaWYodmFsPT1udWxsKXt2YWw9IiI7fWVsc2UgaWYodHlwZW9mIHZhbD09PSJudW1iZXIiKXt2YWwrPSIiO31lbHNlIGlmKEFycmF5LmlzQXJyYXkodmFsKSl7dmFsPWpRdWVyeS5tYXAodmFsLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWU9PW51bGw/IiI6dmFsdWUrIiI7fSk7fQpob29rcz1qUXVlcnkudmFsSG9va3NbdGhpcy50eXBlXXx8alF1ZXJ5LnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoIWhvb2tzfHwhKCJzZXQiaW4gaG9va3MpfHxob29rcy5zZXQodGhpcyx2YWwsInZhbHVlIik9PT11bmRlZmluZWQpe3RoaXMudmFsdWU9dmFsO319KTt9fSk7alF1ZXJ5LmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWw9alF1ZXJ5LmZpbmQuYXR0cihlbGVtLCJ2YWx1ZSIpO3JldHVybiB2YWwhPW51bGw/dmFsOnN0cmlwQW5kQ29sbGFwc2UoalF1ZXJ5LnRleHQoZWxlbSkpO319LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWx1ZSxvcHRpb24saSxvcHRpb25zPWVsZW0ub3B0aW9ucyxpbmRleD1lbGVtLnNlbGVjdGVkSW5kZXgsb25lPWVsZW0udHlwZT09PSJzZWxlY3Qtb25lIix2YWx1ZXM9b25lP251bGw6W10sbWF4PW9uZT9pbmRleCsxOm9wdGlvbnMubGVuZ3RoO2lmKGluZGV4PDApe2k9bWF4O31lbHNle2k9b25lP2luZGV4OjA7fQpmb3IoO2k8bWF4O2krKyl7b3B0aW9uPW9wdGlvbnNbaV07aWYoKG9wdGlvbi5zZWxlY3RlZHx8aT09PWluZGV4KSYmIW9wdGlvbi5kaXNhYmxlZCYmKCFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW5vZGVOYW1lKG9wdGlvbi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7dmFsdWU9alF1ZXJ5KG9wdGlvbikudmFsKCk7aWYob25lKXtyZXR1cm4gdmFsdWU7fQp2YWx1ZXMucHVzaCh2YWx1ZSk7fX0KcmV0dXJuIHZhbHVlczt9LHNldDpmdW5jdGlvbihlbGVtLHZhbHVlKXt2YXIgb3B0aW9uU2V0LG9wdGlvbixvcHRpb25zPWVsZW0ub3B0aW9ucyx2YWx1ZXM9alF1ZXJ5Lm1ha2VBcnJheSh2YWx1ZSksaT1vcHRpb25zLmxlbmd0aDt3aGlsZShpLS0pe29wdGlvbj1vcHRpb25zW2ldO2lmKG9wdGlvbi5zZWxlY3RlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldChvcHRpb24pLHZhbHVlcyk+LTEpe29wdGlvblNldD10cnVlO319CmlmKCFvcHRpb25TZXQpe2VsZW0uc2VsZWN0ZWRJbmRleD0tMTt9CnJldHVybiB2YWx1ZXM7fX19fSk7alF1ZXJ5LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtqUXVlcnkudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlKXtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7cmV0dXJuKGVsZW0uY2hlY2tlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkoZWxlbSkudmFsKCksdmFsdWUpPi0xKTt9fX07aWYoIXN1cHBvcnQuY2hlY2tPbil7alF1ZXJ5LnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT1udWxsPyJvbiI6ZWxlbS52YWx1ZTt9O319KTtzdXBwb3J0LmZvY3VzaW49Im9uZm9jdXNpbiJpbiB3aW5kb3c7dmFyIHJmb2N1c01vcnBoPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxzdG9wUHJvcGFnYXRpb25DYWxsYmFjaz1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO307alF1ZXJ5LmV4dGVuZChqUXVlcnkuZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oZXZlbnQsZGF0YSxlbGVtLG9ubHlIYW5kbGVycyl7dmFyIGksY3VyLHRtcCxidWJibGVUeXBlLG9udHlwZSxoYW5kbGUsc3BlY2lhbCxsYXN0RWxlbWVudCxldmVudFBhdGg9W2VsZW18fGRvY3VtZW50XSx0eXBlPWhhc093bi5jYWxsKGV2ZW50LCJ0eXBlIik/ZXZlbnQudHlwZTpldmVudCxuYW1lc3BhY2VzPWhhc093bi5jYWxsKGV2ZW50LCJuYW1lc3BhY2UiKT9ldmVudC5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtjdXI9bGFzdEVsZW1lbnQ9dG1wPWVsZW09ZWxlbXx8ZG9jdW1lbnQ7aWYoZWxlbS5ub2RlVHlwZT09PTN8fGVsZW0ubm9kZVR5cGU9PT04KXtyZXR1cm47fQppZihyZm9jdXNNb3JwaC50ZXN0KHR5cGUralF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCkpe3JldHVybjt9CmlmKHR5cGUuaW5kZXhPZigiLiIpPi0xKXtuYW1lc3BhY2VzPXR5cGUuc3BsaXQoIi4iKTt0eXBlPW5hbWVzcGFjZXMuc2hpZnQoKTtuYW1lc3BhY2VzLnNvcnQoKTt9Cm9udHlwZT10eXBlLmluZGV4T2YoIjoiKTwwJiYib24iK3R5cGU7ZXZlbnQ9ZXZlbnRbalF1ZXJ5LmV4cGFuZG9dP2V2ZW50Om5ldyBqUXVlcnkuRXZlbnQodHlwZSx0eXBlb2YgZXZlbnQ9PT0ib2JqZWN0IiYmZXZlbnQpO2V2ZW50LmlzVHJpZ2dlcj1vbmx5SGFuZGxlcnM/MjozO2V2ZW50Lm5hbWVzcGFjZT1uYW1lc3BhY2VzLmpvaW4oIi4iKTtldmVudC5ybmFtZXNwYWNlPWV2ZW50Lm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIituYW1lc3BhY2VzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGw7ZXZlbnQucmVzdWx0PXVuZGVmaW5lZDtpZighZXZlbnQudGFyZ2V0KXtldmVudC50YXJnZXQ9ZWxlbTt9CmRhdGE9ZGF0YT09bnVsbD9bZXZlbnRdOmpRdWVyeS5tYWtlQXJyYXkoZGF0YSxbZXZlbnRdKTtzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTtpZighb25seUhhbmRsZXJzJiZzcGVjaWFsLnRyaWdnZXImJnNwZWNpYWwudHJpZ2dlci5hcHBseShlbGVtLGRhdGEpPT09ZmFsc2Upe3JldHVybjt9CmlmKCFvbmx5SGFuZGxlcnMmJiFzcGVjaWFsLm5vQnViYmxlJiYhaXNXaW5kb3coZWxlbSkpe2J1YmJsZVR5cGU9c3BlY2lhbC5kZWxlZ2F0ZVR5cGV8fHR5cGU7aWYoIXJmb2N1c01vcnBoLnRlc3QoYnViYmxlVHlwZSt0eXBlKSl7Y3VyPWN1ci5wYXJlbnROb2RlO30KZm9yKDtjdXI7Y3VyPWN1ci5wYXJlbnROb2RlKXtldmVudFBhdGgucHVzaChjdXIpO3RtcD1jdXI7fQppZih0bXA9PT0oZWxlbS5vd25lckRvY3VtZW50fHxkb2N1bWVudCkpe2V2ZW50UGF0aC5wdXNoKHRtcC5kZWZhdWx0Vmlld3x8dG1wLnBhcmVudFdpbmRvd3x8d2luZG93KTt9fQppPTA7d2hpbGUoKGN1cj1ldmVudFBhdGhbaSsrXSkmJiFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtsYXN0RWxlbWVudD1jdXI7ZXZlbnQudHlwZT1pPjE/YnViYmxlVHlwZTpzcGVjaWFsLmJpbmRUeXBlfHx0eXBlO2hhbmRsZT0oZGF0YVByaXYuZ2V0KGN1ciwiZXZlbnRzIil8fE9iamVjdC5jcmVhdGUobnVsbCkpW2V2ZW50LnR5cGVdJiZkYXRhUHJpdi5nZXQoY3VyLCJoYW5kbGUiKTtpZihoYW5kbGUpe2hhbmRsZS5hcHBseShjdXIsZGF0YSk7fQpoYW5kbGU9b250eXBlJiZjdXJbb250eXBlXTtpZihoYW5kbGUmJmhhbmRsZS5hcHBseSYmYWNjZXB0RGF0YShjdXIpKXtldmVudC5yZXN1bHQ9aGFuZGxlLmFwcGx5KGN1cixkYXRhKTtpZihldmVudC5yZXN1bHQ9PT1mYWxzZSl7ZXZlbnQucHJldmVudERlZmF1bHQoKTt9fX0KZXZlbnQudHlwZT10eXBlO2lmKCFvbmx5SGFuZGxlcnMmJiFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7aWYoKCFzcGVjaWFsLl9kZWZhdWx0fHxzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KGV2ZW50UGF0aC5wb3AoKSxkYXRhKT09PWZhbHNlKSYmYWNjZXB0RGF0YShlbGVtKSl7aWYob250eXBlJiZpc0Z1bmN0aW9uKGVsZW1bdHlwZV0pJiYhaXNXaW5kb3coZWxlbSkpe3RtcD1lbGVtW29udHlwZV07aWYodG1wKXtlbGVtW29udHlwZV09bnVsbDt9CmpRdWVyeS5ldmVudC50cmlnZ2VyZWQ9dHlwZTtpZihldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtsYXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2spO30KZWxlbVt0eXBlXSgpO2lmKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2xhc3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxzdG9wUHJvcGFnYXRpb25DYWxsYmFjayk7fQpqUXVlcnkuZXZlbnQudHJpZ2dlcmVkPXVuZGVmaW5lZDtpZih0bXApe2VsZW1bb250eXBlXT10bXA7fX19fQpyZXR1cm4gZXZlbnQucmVzdWx0O30sc2ltdWxhdGU6ZnVuY3Rpb24odHlwZSxlbGVtLGV2ZW50KXt2YXIgZT1qUXVlcnkuZXh0ZW5kKG5ldyBqUXVlcnkuRXZlbnQoKSxldmVudCx7dHlwZTp0eXBlLGlzU2ltdWxhdGVkOnRydWV9KTtqUXVlcnkuZXZlbnQudHJpZ2dlcihlLG51bGwsZWxlbSk7fX0pO2pRdWVyeS5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24odHlwZSxkYXRhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmV2ZW50LnRyaWdnZXIodHlwZSxkYXRhLHRoaXMpO30pO30sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24odHlwZSxkYXRhKXt2YXIgZWxlbT10aGlzWzBdO2lmKGVsZW0pe3JldHVybiBqUXVlcnkuZXZlbnQudHJpZ2dlcih0eXBlLGRhdGEsZWxlbSx0cnVlKTt9fX0pO2lmKCFzdXBwb3J0LmZvY3VzaW4pe2pRdWVyeS5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihvcmlnLGZpeCl7dmFyIGhhbmRsZXI9ZnVuY3Rpb24oZXZlbnQpe2pRdWVyeS5ldmVudC5zaW11bGF0ZShmaXgsZXZlbnQudGFyZ2V0LGpRdWVyeS5ldmVudC5maXgoZXZlbnQpKTt9O2pRdWVyeS5ldmVudC5zcGVjaWFsW2ZpeF09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGRvYz10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMuZG9jdW1lbnR8fHRoaXMsYXR0YWNoZXM9ZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgpO2lmKCFhdHRhY2hlcyl7ZG9jLmFkZEV2ZW50TGlzdGVuZXIob3JpZyxoYW5kbGVyLHRydWUpO30KZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgsKGF0dGFjaGVzfHwwKSsxKTt9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGRvYz10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMuZG9jdW1lbnR8fHRoaXMsYXR0YWNoZXM9ZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgpLTE7aWYoIWF0dGFjaGVzKXtkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihvcmlnLGhhbmRsZXIsdHJ1ZSk7ZGF0YVByaXYucmVtb3ZlKGRvYyxmaXgpO31lbHNle2RhdGFQcml2LmFjY2Vzcyhkb2MsZml4LGF0dGFjaGVzKTt9fX07fSk7fQp2YXIgbG9jYXRpb249d2luZG93LmxvY2F0aW9uO3ZhciBub25jZT17Z3VpZDpEYXRlLm5vdygpfTt2YXIgcnF1ZXJ5PSgvXD8vKTtqUXVlcnkucGFyc2VYTUw9ZnVuY3Rpb24oZGF0YSl7dmFyIHhtbDtpZighZGF0YXx8dHlwZW9mIGRhdGEhPT0ic3RyaW5nIil7cmV0dXJuIG51bGw7fQp0cnl7eG1sPShuZXcgd2luZG93LkRPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcoZGF0YSwidGV4dC94bWwiKTt9Y2F0Y2goZSl7eG1sPXVuZGVmaW5lZDt9CmlmKCF4bWx8fHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGgpe2pRdWVyeS5lcnJvcigiSW52YWxpZCBYTUw6ICIrZGF0YSk7fQpyZXR1cm4geG1sO307dmFyCnJicmFja2V0PS9cW1xdJC8sckNSTEY9L1xyP1xuL2cscnN1Ym1pdHRlclR5cGVzPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxyc3VibWl0dGFibGU9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIGJ1aWxkUGFyYW1zKHByZWZpeCxvYmosdHJhZGl0aW9uYWwsYWRkKXt2YXIgbmFtZTtpZihBcnJheS5pc0FycmF5KG9iaikpe2pRdWVyeS5lYWNoKG9iaixmdW5jdGlvbihpLHYpe2lmKHRyYWRpdGlvbmFsfHxyYnJhY2tldC50ZXN0KHByZWZpeCkpe2FkZChwcmVmaXgsdik7fWVsc2V7YnVpbGRQYXJhbXMocHJlZml4KyJbIisodHlwZW9mIHY9PT0ib2JqZWN0IiYmdiE9bnVsbD9pOiIiKSsiXSIsdix0cmFkaXRpb25hbCxhZGQpO319KTt9ZWxzZSBpZighdHJhZGl0aW9uYWwmJnRvVHlwZShvYmopPT09Im9iamVjdCIpe2ZvcihuYW1lIGluIG9iail7YnVpbGRQYXJhbXMocHJlZml4KyJbIituYW1lKyJdIixvYmpbbmFtZV0sdHJhZGl0aW9uYWwsYWRkKTt9fWVsc2V7YWRkKHByZWZpeCxvYmopO319CmpRdWVyeS5wYXJhbT1mdW5jdGlvbihhLHRyYWRpdGlvbmFsKXt2YXIgcHJlZml4LHM9W10sYWRkPWZ1bmN0aW9uKGtleSx2YWx1ZU9yRnVuY3Rpb24pe3ZhciB2YWx1ZT1pc0Z1bmN0aW9uKHZhbHVlT3JGdW5jdGlvbik/dmFsdWVPckZ1bmN0aW9uKCk6dmFsdWVPckZ1bmN0aW9uO3Nbcy5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChrZXkpKyI9IisKZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlPT1udWxsPyIiOnZhbHVlKTt9O2lmKGE9PW51bGwpe3JldHVybiIiO30KaWYoQXJyYXkuaXNBcnJheShhKXx8KGEuanF1ZXJ5JiYhalF1ZXJ5LmlzUGxhaW5PYmplY3QoYSkpKXtqUXVlcnkuZWFjaChhLGZ1bmN0aW9uKCl7YWRkKHRoaXMubmFtZSx0aGlzLnZhbHVlKTt9KTt9ZWxzZXtmb3IocHJlZml4IGluIGEpe2J1aWxkUGFyYW1zKHByZWZpeCxhW3ByZWZpeF0sdHJhZGl0aW9uYWwsYWRkKTt9fQpyZXR1cm4gcy5qb2luKCImIik7fTtqUXVlcnkuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4galF1ZXJ5LnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSk7fSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlbGVtZW50cz1qUXVlcnkucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlbGVtZW50cz9qUXVlcnkubWFrZUFycmF5KGVsZW1lbnRzKTp0aGlzO30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciB0eXBlPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhalF1ZXJ5KHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmcnN1Ym1pdHRhYmxlLnRlc3QodGhpcy5ub2RlTmFtZSkmJiFyc3VibWl0dGVyVHlwZXMudGVzdCh0eXBlKSYmKHRoaXMuY2hlY2tlZHx8IXJjaGVja2FibGVUeXBlLnRlc3QodHlwZSkpO30pLm1hcChmdW5jdGlvbihfaSxlbGVtKXt2YXIgdmFsPWpRdWVyeSh0aGlzKS52YWwoKTtpZih2YWw9PW51bGwpe3JldHVybiBudWxsO30KaWYoQXJyYXkuaXNBcnJheSh2YWwpKXtyZXR1cm4galF1ZXJ5Lm1hcCh2YWwsZnVuY3Rpb24odmFsKXtyZXR1cm57bmFtZTplbGVtLm5hbWUsdmFsdWU6dmFsLnJlcGxhY2UockNSTEYsIlxyXG4iKX07fSk7fQpyZXR1cm57bmFtZTplbGVtLm5hbWUsdmFsdWU6dmFsLnJlcGxhY2UockNSTEYsIlxyXG4iKX07fSkuZ2V0KCk7fX0pO3ZhcgpyMjA9LyUyMC9nLHJoYXNoPS8jLiokLyxyYW50aUNhY2hlPS8oWz8mXSlfPVteJl0qLyxyaGVhZGVycz0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL21nLHJsb2NhbFByb3RvY29sPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHJub0NvbnRlbnQ9L14oPzpHRVR8SEVBRCkkLyxycHJvdG9jb2w9L15cL1wvLyxwcmVmaWx0ZXJzPXt9LHRyYW5zcG9ydHM9e30sYWxsVHlwZXM9IiovIi5jb25jYXQoIioiKSxvcmlnaW5BbmNob3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO29yaWdpbkFuY2hvci5ocmVmPWxvY2F0aW9uLmhyZWY7ZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHN0cnVjdHVyZSl7cmV0dXJuIGZ1bmN0aW9uKGRhdGFUeXBlRXhwcmVzc2lvbixmdW5jKXtpZih0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uIT09InN0cmluZyIpe2Z1bmM9ZGF0YVR5cGVFeHByZXNzaW9uO2RhdGFUeXBlRXhwcmVzc2lvbj0iKiI7fQp2YXIgZGF0YVR5cGUsaT0wLGRhdGFUeXBlcz1kYXRhVHlwZUV4cHJlc3Npb24udG9Mb3dlckNhc2UoKS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107aWYoaXNGdW5jdGlvbihmdW5jKSl7d2hpbGUoKGRhdGFUeXBlPWRhdGFUeXBlc1tpKytdKSl7aWYoZGF0YVR5cGVbMF09PT0iKyIpe2RhdGFUeXBlPWRhdGFUeXBlLnNsaWNlKDEpfHwiKiI7KHN0cnVjdHVyZVtkYXRhVHlwZV09c3RydWN0dXJlW2RhdGFUeXBlXXx8W10pLnVuc2hpZnQoZnVuYyk7fWVsc2V7KHN0cnVjdHVyZVtkYXRhVHlwZV09c3RydWN0dXJlW2RhdGFUeXBlXXx8W10pLnB1c2goZnVuYyk7fX19fTt9CmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHN0cnVjdHVyZSxvcHRpb25zLG9yaWdpbmFsT3B0aW9ucyxqcVhIUil7dmFyIGluc3BlY3RlZD17fSxzZWVraW5nVHJhbnNwb3J0PShzdHJ1Y3R1cmU9PT10cmFuc3BvcnRzKTtmdW5jdGlvbiBpbnNwZWN0KGRhdGFUeXBlKXt2YXIgc2VsZWN0ZWQ7aW5zcGVjdGVkW2RhdGFUeXBlXT10cnVlO2pRdWVyeS5lYWNoKHN0cnVjdHVyZVtkYXRhVHlwZV18fFtdLGZ1bmN0aW9uKF8scHJlZmlsdGVyT3JGYWN0b3J5KXt2YXIgZGF0YVR5cGVPclRyYW5zcG9ydD1wcmVmaWx0ZXJPckZhY3Rvcnkob3B0aW9ucyxvcmlnaW5hbE9wdGlvbnMsanFYSFIpO2lmKHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0PT09InN0cmluZyImJiFzZWVraW5nVHJhbnNwb3J0JiYhaW5zcGVjdGVkW2RhdGFUeXBlT3JUcmFuc3BvcnRdKXtvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KGRhdGFUeXBlT3JUcmFuc3BvcnQpO2luc3BlY3QoZGF0YVR5cGVPclRyYW5zcG9ydCk7cmV0dXJuIGZhbHNlO31lbHNlIGlmKHNlZWtpbmdUcmFuc3BvcnQpe3JldHVybiEoc2VsZWN0ZWQ9ZGF0YVR5cGVPclRyYW5zcG9ydCk7fX0pO3JldHVybiBzZWxlY3RlZDt9CnJldHVybiBpbnNwZWN0KG9wdGlvbnMuZGF0YVR5cGVzWzBdKXx8IWluc3BlY3RlZFsiKiJdJiZpbnNwZWN0KCIqIik7fQpmdW5jdGlvbiBhamF4RXh0ZW5kKHRhcmdldCxzcmMpe3ZhciBrZXksZGVlcCxmbGF0T3B0aW9ucz1qUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3Ioa2V5IGluIHNyYyl7aWYoc3JjW2tleV0hPT11bmRlZmluZWQpeyhmbGF0T3B0aW9uc1trZXldP3RhcmdldDooZGVlcHx8KGRlZXA9e30pKSlba2V5XT1zcmNba2V5XTt9fQppZihkZWVwKXtqUXVlcnkuZXh0ZW5kKHRydWUsdGFyZ2V0LGRlZXApO30KcmV0dXJuIHRhcmdldDt9CmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMocyxqcVhIUixyZXNwb25zZXMpe3ZhciBjdCx0eXBlLGZpbmFsRGF0YVR5cGUsZmlyc3REYXRhVHlwZSxjb250ZW50cz1zLmNvbnRlbnRzLGRhdGFUeXBlcz1zLmRhdGFUeXBlczt3aGlsZShkYXRhVHlwZXNbMF09PT0iKiIpe2RhdGFUeXBlcy5zaGlmdCgpO2lmKGN0PT09dW5kZWZpbmVkKXtjdD1zLm1pbWVUeXBlfHxqcVhIUi5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIik7fX0KaWYoY3Qpe2Zvcih0eXBlIGluIGNvbnRlbnRzKXtpZihjb250ZW50c1t0eXBlXSYmY29udGVudHNbdHlwZV0udGVzdChjdCkpe2RhdGFUeXBlcy51bnNoaWZ0KHR5cGUpO2JyZWFrO319fQppZihkYXRhVHlwZXNbMF1pbiByZXNwb25zZXMpe2ZpbmFsRGF0YVR5cGU9ZGF0YVR5cGVzWzBdO31lbHNle2Zvcih0eXBlIGluIHJlc3BvbnNlcyl7aWYoIWRhdGFUeXBlc1swXXx8cy5jb252ZXJ0ZXJzW3R5cGUrIiAiK2RhdGFUeXBlc1swXV0pe2ZpbmFsRGF0YVR5cGU9dHlwZTticmVhazt9CmlmKCFmaXJzdERhdGFUeXBlKXtmaXJzdERhdGFUeXBlPXR5cGU7fX0KZmluYWxEYXRhVHlwZT1maW5hbERhdGFUeXBlfHxmaXJzdERhdGFUeXBlO30KaWYoZmluYWxEYXRhVHlwZSl7aWYoZmluYWxEYXRhVHlwZSE9PWRhdGFUeXBlc1swXSl7ZGF0YVR5cGVzLnVuc2hpZnQoZmluYWxEYXRhVHlwZSk7fQpyZXR1cm4gcmVzcG9uc2VzW2ZpbmFsRGF0YVR5cGVdO319CmZ1bmN0aW9uIGFqYXhDb252ZXJ0KHMscmVzcG9uc2UsanFYSFIsaXNTdWNjZXNzKXt2YXIgY29udjIsY3VycmVudCxjb252LHRtcCxwcmV2LGNvbnZlcnRlcnM9e30sZGF0YVR5cGVzPXMuZGF0YVR5cGVzLnNsaWNlKCk7aWYoZGF0YVR5cGVzWzFdKXtmb3IoY29udiBpbiBzLmNvbnZlcnRlcnMpe2NvbnZlcnRlcnNbY29udi50b0xvd2VyQ2FzZSgpXT1zLmNvbnZlcnRlcnNbY29udl07fX0KY3VycmVudD1kYXRhVHlwZXMuc2hpZnQoKTt3aGlsZShjdXJyZW50KXtpZihzLnJlc3BvbnNlRmllbGRzW2N1cnJlbnRdKXtqcVhIUltzLnJlc3BvbnNlRmllbGRzW2N1cnJlbnRdXT1yZXNwb25zZTt9CmlmKCFwcmV2JiZpc1N1Y2Nlc3MmJnMuZGF0YUZpbHRlcil7cmVzcG9uc2U9cy5kYXRhRmlsdGVyKHJlc3BvbnNlLHMuZGF0YVR5cGUpO30KcHJldj1jdXJyZW50O2N1cnJlbnQ9ZGF0YVR5cGVzLnNoaWZ0KCk7aWYoY3VycmVudCl7aWYoY3VycmVudD09PSIqIil7Y3VycmVudD1wcmV2O31lbHNlIGlmKHByZXYhPT0iKiImJnByZXYhPT1jdXJyZW50KXtjb252PWNvbnZlcnRlcnNbcHJldisiICIrY3VycmVudF18fGNvbnZlcnRlcnNbIiogIitjdXJyZW50XTtpZighY29udil7Zm9yKGNvbnYyIGluIGNvbnZlcnRlcnMpe3RtcD1jb252Mi5zcGxpdCgiICIpO2lmKHRtcFsxXT09PWN1cnJlbnQpe2NvbnY9Y29udmVydGVyc1twcmV2KyIgIit0bXBbMF1dfHxjb252ZXJ0ZXJzWyIqICIrdG1wWzBdXTtpZihjb252KXtpZihjb252PT09dHJ1ZSl7Y29udj1jb252ZXJ0ZXJzW2NvbnYyXTt9ZWxzZSBpZihjb252ZXJ0ZXJzW2NvbnYyXSE9PXRydWUpe2N1cnJlbnQ9dG1wWzBdO2RhdGFUeXBlcy51bnNoaWZ0KHRtcFsxXSk7fQpicmVhazt9fX19CmlmKGNvbnYhPT10cnVlKXtpZihjb252JiZzLnRocm93cyl7cmVzcG9uc2U9Y29udihyZXNwb25zZSk7fWVsc2V7dHJ5e3Jlc3BvbnNlPWNvbnYocmVzcG9uc2UpO31jYXRjaChlKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpjb252P2U6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3ByZXYrIiB0byAiK2N1cnJlbnR9O319fX19fQpyZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6cmVzcG9uc2V9O30KalF1ZXJ5LmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6bG9jYXRpb24uaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6cmxvY2FsUHJvdG9jb2wudGVzdChsb2NhdGlvbi5wcm90b2NvbCksZ2xvYmFsOnRydWUscHJvY2Vzc0RhdGE6dHJ1ZSxhc3luYzp0cnVlLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjphbGxUeXBlcyx0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjp0cnVlLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjpqUXVlcnkucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6dHJ1ZSxjb250ZXh0OnRydWV9fSxhamF4U2V0dXA6ZnVuY3Rpb24odGFyZ2V0LHNldHRpbmdzKXtyZXR1cm4gc2V0dGluZ3M/YWpheEV4dGVuZChhamF4RXh0ZW5kKHRhcmdldCxqUXVlcnkuYWpheFNldHRpbmdzKSxzZXR0aW5ncyk6YWpheEV4dGVuZChqUXVlcnkuYWpheFNldHRpbmdzLHRhcmdldCk7fSxhamF4UHJlZmlsdGVyOmFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyhwcmVmaWx0ZXJzKSxhamF4VHJhbnNwb3J0OmFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyh0cmFuc3BvcnRzKSxhamF4OmZ1bmN0aW9uKHVybCxvcHRpb25zKXtpZih0eXBlb2YgdXJsPT09Im9iamVjdCIpe29wdGlvbnM9dXJsO3VybD11bmRlZmluZWQ7fQpvcHRpb25zPW9wdGlvbnN8fHt9O3ZhciB0cmFuc3BvcnQsY2FjaGVVUkwscmVzcG9uc2VIZWFkZXJzU3RyaW5nLHJlc3BvbnNlSGVhZGVycyx0aW1lb3V0VGltZXIsdXJsQW5jaG9yLGNvbXBsZXRlZCxmaXJlR2xvYmFscyxpLHVuY2FjaGVkLHM9alF1ZXJ5LmFqYXhTZXR1cCh7fSxvcHRpb25zKSxjYWxsYmFja0NvbnRleHQ9cy5jb250ZXh0fHxzLGdsb2JhbEV2ZW50Q29udGV4dD1zLmNvbnRleHQmJihjYWxsYmFja0NvbnRleHQubm9kZVR5cGV8fGNhbGxiYWNrQ29udGV4dC5qcXVlcnkpP2pRdWVyeShjYWxsYmFja0NvbnRleHQpOmpRdWVyeS5ldmVudCxkZWZlcnJlZD1qUXVlcnkuRGVmZXJyZWQoKSxjb21wbGV0ZURlZmVycmVkPWpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iiksc3RhdHVzQ29kZT1zLnN0YXR1c0NvZGV8fHt9LHJlcXVlc3RIZWFkZXJzPXt9LHJlcXVlc3RIZWFkZXJzTmFtZXM9e30sc3RyQWJvcnQ9ImNhbmNlbGVkIixqcVhIUj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGtleSl7dmFyIG1hdGNoO2lmKGNvbXBsZXRlZCl7aWYoIXJlc3BvbnNlSGVhZGVycyl7cmVzcG9uc2VIZWFkZXJzPXt9O3doaWxlKChtYXRjaD1yaGVhZGVycy5leGVjKHJlc3BvbnNlSGVhZGVyc1N0cmluZykpKXtyZXNwb25zZUhlYWRlcnNbbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSsiICJdPShyZXNwb25zZUhlYWRlcnNbbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSsiICJdfHxbXSkuY29uY2F0KG1hdGNoWzJdKTt9fQptYXRjaD1yZXNwb25zZUhlYWRlcnNba2V5LnRvTG93ZXJDYXNlKCkrIiAiXTt9CnJldHVybiBtYXRjaD09bnVsbD9udWxsOm1hdGNoLmpvaW4oIiwgIik7fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gY29tcGxldGVkP3Jlc3BvbnNlSGVhZGVyc1N0cmluZzpudWxsO30sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihuYW1lLHZhbHVlKXtpZihjb21wbGV0ZWQ9PW51bGwpe25hbWU9cmVxdWVzdEhlYWRlcnNOYW1lc1tuYW1lLnRvTG93ZXJDYXNlKCldPXJlcXVlc3RIZWFkZXJzTmFtZXNbbmFtZS50b0xvd2VyQ2FzZSgpXXx8bmFtZTtyZXF1ZXN0SGVhZGVyc1tuYW1lXT12YWx1ZTt9CnJldHVybiB0aGlzO30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbih0eXBlKXtpZihjb21wbGV0ZWQ9PW51bGwpe3MubWltZVR5cGU9dHlwZTt9CnJldHVybiB0aGlzO30sc3RhdHVzQ29kZTpmdW5jdGlvbihtYXApe3ZhciBjb2RlO2lmKG1hcCl7aWYoY29tcGxldGVkKXtqcVhIUi5hbHdheXMobWFwW2pxWEhSLnN0YXR1c10pO31lbHNle2Zvcihjb2RlIGluIG1hcCl7c3RhdHVzQ29kZVtjb2RlXT1bc3RhdHVzQ29kZVtjb2RlXSxtYXBbY29kZV1dO319fQpyZXR1cm4gdGhpczt9LGFib3J0OmZ1bmN0aW9uKHN0YXR1c1RleHQpe3ZhciBmaW5hbFRleHQ9c3RhdHVzVGV4dHx8c3RyQWJvcnQ7aWYodHJhbnNwb3J0KXt0cmFuc3BvcnQuYWJvcnQoZmluYWxUZXh0KTt9CmRvbmUoMCxmaW5hbFRleHQpO3JldHVybiB0aGlzO319O2RlZmVycmVkLnByb21pc2UoanFYSFIpO3MudXJsPSgodXJsfHxzLnVybHx8bG9jYXRpb24uaHJlZikrIiIpLnJlcGxhY2UocnByb3RvY29sLGxvY2F0aW9uLnByb3RvY29sKyIvLyIpO3MudHlwZT1vcHRpb25zLm1ldGhvZHx8b3B0aW9ucy50eXBlfHxzLm1ldGhvZHx8cy50eXBlO3MuZGF0YVR5cGVzPShzLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFsiIl07aWYocy5jcm9zc0RvbWFpbj09bnVsbCl7dXJsQW5jaG9yPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTt0cnl7dXJsQW5jaG9yLmhyZWY9cy51cmw7dXJsQW5jaG9yLmhyZWY9dXJsQW5jaG9yLmhyZWY7cy5jcm9zc0RvbWFpbj1vcmlnaW5BbmNob3IucHJvdG9jb2wrIi8vIitvcmlnaW5BbmNob3IuaG9zdCE9PXVybEFuY2hvci5wcm90b2NvbCsiLy8iK3VybEFuY2hvci5ob3N0O31jYXRjaChlKXtzLmNyb3NzRG9tYWluPXRydWU7fX0KaWYocy5kYXRhJiZzLnByb2Nlc3NEYXRhJiZ0eXBlb2Ygcy5kYXRhIT09InN0cmluZyIpe3MuZGF0YT1qUXVlcnkucGFyYW0ocy5kYXRhLHMudHJhZGl0aW9uYWwpO30KaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMocHJlZmlsdGVycyxzLG9wdGlvbnMsanFYSFIpO2lmKGNvbXBsZXRlZCl7cmV0dXJuIGpxWEhSO30KZmlyZUdsb2JhbHM9alF1ZXJ5LmV2ZW50JiZzLmdsb2JhbDtpZihmaXJlR2xvYmFscyYmalF1ZXJ5LmFjdGl2ZSsrPT09MCl7alF1ZXJ5LmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpO30Kcy50eXBlPXMudHlwZS50b1VwcGVyQ2FzZSgpO3MuaGFzQ29udGVudD0hcm5vQ29udGVudC50ZXN0KHMudHlwZSk7Y2FjaGVVUkw9cy51cmwucmVwbGFjZShyaGFzaCwiIik7aWYoIXMuaGFzQ29udGVudCl7dW5jYWNoZWQ9cy51cmwuc2xpY2UoY2FjaGVVUkwubGVuZ3RoKTtpZihzLmRhdGEmJihzLnByb2Nlc3NEYXRhfHx0eXBlb2Ygcy5kYXRhPT09InN0cmluZyIpKXtjYWNoZVVSTCs9KHJxdWVyeS50ZXN0KGNhY2hlVVJMKT8iJiI6Ij8iKStzLmRhdGE7ZGVsZXRlIHMuZGF0YTt9CmlmKHMuY2FjaGU9PT1mYWxzZSl7Y2FjaGVVUkw9Y2FjaGVVUkwucmVwbGFjZShyYW50aUNhY2hlLCIkMSIpO3VuY2FjaGVkPShycXVlcnkudGVzdChjYWNoZVVSTCk/IiYiOiI/IikrIl89Iisobm9uY2UuZ3VpZCsrKSsKdW5jYWNoZWQ7fQpzLnVybD1jYWNoZVVSTCt1bmNhY2hlZDt9ZWxzZSBpZihzLmRhdGEmJnMucHJvY2Vzc0RhdGEmJihzLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik9PT0wKXtzLmRhdGE9cy5kYXRhLnJlcGxhY2UocjIwLCIrIik7fQppZihzLmlmTW9kaWZpZWQpe2lmKGpRdWVyeS5sYXN0TW9kaWZpZWRbY2FjaGVVUkxdKXtqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsalF1ZXJ5Lmxhc3RNb2RpZmllZFtjYWNoZVVSTF0pO30KaWYoalF1ZXJ5LmV0YWdbY2FjaGVVUkxdKXtqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixqUXVlcnkuZXRhZ1tjYWNoZVVSTF0pO319CmlmKHMuZGF0YSYmcy5oYXNDb250ZW50JiZzLmNvbnRlbnRUeXBlIT09ZmFsc2V8fG9wdGlvbnMuY29udGVudFR5cGUpe2pxWEhSLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIscy5jb250ZW50VHlwZSk7fQpqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHMuZGF0YVR5cGVzWzBdJiZzLmFjY2VwdHNbcy5kYXRhVHlwZXNbMF1dP3MuYWNjZXB0c1tzLmRhdGFUeXBlc1swXV0rCihzLmRhdGFUeXBlc1swXSE9PSIqIj8iLCAiK2FsbFR5cGVzKyI7IHE9MC4wMSI6IiIpOnMuYWNjZXB0c1siKiJdKTtmb3IoaSBpbiBzLmhlYWRlcnMpe2pxWEhSLnNldFJlcXVlc3RIZWFkZXIoaSxzLmhlYWRlcnNbaV0pO30KaWYocy5iZWZvcmVTZW5kJiYocy5iZWZvcmVTZW5kLmNhbGwoY2FsbGJhY2tDb250ZXh0LGpxWEhSLHMpPT09ZmFsc2V8fGNvbXBsZXRlZCkpe3JldHVybiBqcVhIUi5hYm9ydCgpO30Kc3RyQWJvcnQ9ImFib3J0Ijtjb21wbGV0ZURlZmVycmVkLmFkZChzLmNvbXBsZXRlKTtqcVhIUi5kb25lKHMuc3VjY2Vzcyk7anFYSFIuZmFpbChzLmVycm9yKTt0cmFuc3BvcnQ9aW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHModHJhbnNwb3J0cyxzLG9wdGlvbnMsanFYSFIpO2lmKCF0cmFuc3BvcnQpe2RvbmUoLTEsIk5vIFRyYW5zcG9ydCIpO31lbHNle2pxWEhSLnJlYWR5U3RhdGU9MTtpZihmaXJlR2xvYmFscyl7Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoImFqYXhTZW5kIixbanFYSFIsc10pO30KaWYoY29tcGxldGVkKXtyZXR1cm4ganFYSFI7fQppZihzLmFzeW5jJiZzLnRpbWVvdXQ+MCl7dGltZW91dFRpbWVyPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7anFYSFIuYWJvcnQoInRpbWVvdXQiKTt9LHMudGltZW91dCk7fQp0cnl7Y29tcGxldGVkPWZhbHNlO3RyYW5zcG9ydC5zZW5kKHJlcXVlc3RIZWFkZXJzLGRvbmUpO31jYXRjaChlKXtpZihjb21wbGV0ZWQpe3Rocm93IGU7fQpkb25lKC0xLGUpO319CmZ1bmN0aW9uIGRvbmUoc3RhdHVzLG5hdGl2ZVN0YXR1c1RleHQscmVzcG9uc2VzLGhlYWRlcnMpe3ZhciBpc1N1Y2Nlc3Msc3VjY2VzcyxlcnJvcixyZXNwb25zZSxtb2RpZmllZCxzdGF0dXNUZXh0PW5hdGl2ZVN0YXR1c1RleHQ7aWYoY29tcGxldGVkKXtyZXR1cm47fQpjb21wbGV0ZWQ9dHJ1ZTtpZih0aW1lb3V0VGltZXIpe3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dFRpbWVyKTt9CnRyYW5zcG9ydD11bmRlZmluZWQ7cmVzcG9uc2VIZWFkZXJzU3RyaW5nPWhlYWRlcnN8fCIiO2pxWEhSLnJlYWR5U3RhdGU9c3RhdHVzPjA/NDowO2lzU3VjY2Vzcz1zdGF0dXM+PTIwMCYmc3RhdHVzPDMwMHx8c3RhdHVzPT09MzA0O2lmKHJlc3BvbnNlcyl7cmVzcG9uc2U9YWpheEhhbmRsZVJlc3BvbnNlcyhzLGpxWEhSLHJlc3BvbnNlcyk7fQppZighaXNTdWNjZXNzJiZqUXVlcnkuaW5BcnJheSgic2NyaXB0IixzLmRhdGFUeXBlcyk+LTEpe3MuY29udmVydGVyc1sidGV4dCBzY3JpcHQiXT1mdW5jdGlvbigpe307fQpyZXNwb25zZT1hamF4Q29udmVydChzLHJlc3BvbnNlLGpxWEhSLGlzU3VjY2Vzcyk7aWYoaXNTdWNjZXNzKXtpZihzLmlmTW9kaWZpZWQpe21vZGlmaWVkPWpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIik7aWYobW9kaWZpZWQpe2pRdWVyeS5sYXN0TW9kaWZpZWRbY2FjaGVVUkxdPW1vZGlmaWVkO30KbW9kaWZpZWQ9anFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKTtpZihtb2RpZmllZCl7alF1ZXJ5LmV0YWdbY2FjaGVVUkxdPW1vZGlmaWVkO319CmlmKHN0YXR1cz09PTIwNHx8cy50eXBlPT09IkhFQUQiKXtzdGF0dXNUZXh0PSJub2NvbnRlbnQiO31lbHNlIGlmKHN0YXR1cz09PTMwNCl7c3RhdHVzVGV4dD0ibm90bW9kaWZpZWQiO31lbHNle3N0YXR1c1RleHQ9cmVzcG9uc2Uuc3RhdGU7c3VjY2Vzcz1yZXNwb25zZS5kYXRhO2Vycm9yPXJlc3BvbnNlLmVycm9yO2lzU3VjY2Vzcz0hZXJyb3I7fX1lbHNle2Vycm9yPXN0YXR1c1RleHQ7aWYoc3RhdHVzfHwhc3RhdHVzVGV4dCl7c3RhdHVzVGV4dD0iZXJyb3IiO2lmKHN0YXR1czwwKXtzdGF0dXM9MDt9fX0KanFYSFIuc3RhdHVzPXN0YXR1cztqcVhIUi5zdGF0dXNUZXh0PShuYXRpdmVTdGF0dXNUZXh0fHxzdGF0dXNUZXh0KSsiIjtpZihpc1N1Y2Nlc3Mpe2RlZmVycmVkLnJlc29sdmVXaXRoKGNhbGxiYWNrQ29udGV4dCxbc3VjY2VzcyxzdGF0dXNUZXh0LGpxWEhSXSk7fWVsc2V7ZGVmZXJyZWQucmVqZWN0V2l0aChjYWxsYmFja0NvbnRleHQsW2pxWEhSLHN0YXR1c1RleHQsZXJyb3JdKTt9CmpxWEhSLnN0YXR1c0NvZGUoc3RhdHVzQ29kZSk7c3RhdHVzQ29kZT11bmRlZmluZWQ7aWYoZmlyZUdsb2JhbHMpe2dsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKGlzU3VjY2Vzcz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtqcVhIUixzLGlzU3VjY2Vzcz9zdWNjZXNzOmVycm9yXSk7fQpjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKGNhbGxiYWNrQ29udGV4dCxbanFYSFIsc3RhdHVzVGV4dF0pO2lmKGZpcmVHbG9iYWxzKXtnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlcigiYWpheENvbXBsZXRlIixbanFYSFIsc10pO2lmKCEoLS1qUXVlcnkuYWN0aXZlKSl7alF1ZXJ5LmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIik7fX19CnJldHVybiBqcVhIUjt9LGdldEpTT046ZnVuY3Rpb24odXJsLGRhdGEsY2FsbGJhY2spe3JldHVybiBqUXVlcnkuZ2V0KHVybCxkYXRhLGNhbGxiYWNrLCJqc29uIik7fSxnZXRTY3JpcHQ6ZnVuY3Rpb24odXJsLGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmdldCh1cmwsdW5kZWZpbmVkLGNhbGxiYWNrLCJzY3JpcHQiKTt9fSk7alF1ZXJ5LmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oX2ksbWV0aG9kKXtqUXVlcnlbbWV0aG9kXT1mdW5jdGlvbih1cmwsZGF0YSxjYWxsYmFjayx0eXBlKXtpZihpc0Z1bmN0aW9uKGRhdGEpKXt0eXBlPXR5cGV8fGNhbGxiYWNrO2NhbGxiYWNrPWRhdGE7ZGF0YT11bmRlZmluZWQ7fQpyZXR1cm4galF1ZXJ5LmFqYXgoalF1ZXJ5LmV4dGVuZCh7dXJsOnVybCx0eXBlOm1ldGhvZCxkYXRhVHlwZTp0eXBlLGRhdGE6ZGF0YSxzdWNjZXNzOmNhbGxiYWNrfSxqUXVlcnkuaXNQbGFpbk9iamVjdCh1cmwpJiZ1cmwpKTt9O30pO2pRdWVyeS5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKHMpe3ZhciBpO2ZvcihpIGluIHMuaGVhZGVycyl7aWYoaS50b0xvd2VyQ2FzZSgpPT09ImNvbnRlbnQtdHlwZSIpe3MuY29udGVudFR5cGU9cy5oZWFkZXJzW2ldfHwiIjt9fX0pO2pRdWVyeS5fZXZhbFVybD1mdW5jdGlvbih1cmwsb3B0aW9ucyxkb2Mpe3JldHVybiBqUXVlcnkuYWpheCh7dXJsOnVybCx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOnRydWUsYXN5bmM6ZmFsc2UsZ2xvYmFsOmZhbHNlLGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oKXt9fSxkYXRhRmlsdGVyOmZ1bmN0aW9uKHJlc3BvbnNlKXtqUXVlcnkuZ2xvYmFsRXZhbChyZXNwb25zZSxvcHRpb25zLGRvYyk7fX0pO307alF1ZXJ5LmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihodG1sKXt2YXIgd3JhcDtpZih0aGlzWzBdKXtpZihpc0Z1bmN0aW9uKGh0bWwpKXtodG1sPWh0bWwuY2FsbCh0aGlzWzBdKTt9CndyYXA9alF1ZXJ5KGh0bWwsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSh0cnVlKTtpZih0aGlzWzBdLnBhcmVudE5vZGUpe3dyYXAuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pO30Kd3JhcC5tYXAoZnVuY3Rpb24oKXt2YXIgZWxlbT10aGlzO3doaWxlKGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQpe2VsZW09ZWxlbS5maXJzdEVsZW1lbnRDaGlsZDt9CnJldHVybiBlbGVtO30pLmFwcGVuZCh0aGlzKTt9CnJldHVybiB0aGlzO30sd3JhcElubmVyOmZ1bmN0aW9uKGh0bWwpe2lmKGlzRnVuY3Rpb24oaHRtbCkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7alF1ZXJ5KHRoaXMpLndyYXBJbm5lcihodG1sLmNhbGwodGhpcyxpKSk7fSk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHNlbGY9alF1ZXJ5KHRoaXMpLGNvbnRlbnRzPXNlbGYuY29udGVudHMoKTtpZihjb250ZW50cy5sZW5ndGgpe2NvbnRlbnRzLndyYXBBbGwoaHRtbCk7fWVsc2V7c2VsZi5hcHBlbmQoaHRtbCk7fX0pO30sd3JhcDpmdW5jdGlvbihodG1sKXt2YXIgaHRtbElzRnVuY3Rpb249aXNGdW5jdGlvbihodG1sKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe2pRdWVyeSh0aGlzKS53cmFwQWxsKGh0bWxJc0Z1bmN0aW9uP2h0bWwuY2FsbCh0aGlzLGkpOmh0bWwpO30pO30sdW53cmFwOmZ1bmN0aW9uKHNlbGVjdG9yKXt0aGlzLnBhcmVudChzZWxlY3Rvcikubm90KCJib2R5IikuZWFjaChmdW5jdGlvbigpe2pRdWVyeSh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpO30pO3JldHVybiB0aGlzO319KTtqUXVlcnkuZXhwci5wc2V1ZG9zLmhpZGRlbj1mdW5jdGlvbihlbGVtKXtyZXR1cm4halF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlKGVsZW0pO307alF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlPWZ1bmN0aW9uKGVsZW0pe3JldHVybiEhKGVsZW0ub2Zmc2V0V2lkdGh8fGVsZW0ub2Zmc2V0SGVpZ2h0fHxlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTt9O2pRdWVyeS5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7fWNhdGNoKGUpe319O3ZhciB4aHJTdWNjZXNzU3RhdHVzPXswOjIwMCwxMjIzOjIwNH0seGhyU3VwcG9ydGVkPWpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7c3VwcG9ydC5jb3JzPSEheGhyU3VwcG9ydGVkJiYoIndpdGhDcmVkZW50aWFscyJpbiB4aHJTdXBwb3J0ZWQpO3N1cHBvcnQuYWpheD14aHJTdXBwb3J0ZWQ9ISF4aHJTdXBwb3J0ZWQ7alF1ZXJ5LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24ob3B0aW9ucyl7dmFyIGNhbGxiYWNrLGVycm9yQ2FsbGJhY2s7aWYoc3VwcG9ydC5jb3JzfHx4aHJTdXBwb3J0ZWQmJiFvcHRpb25zLmNyb3NzRG9tYWluKXtyZXR1cm57c2VuZDpmdW5jdGlvbihoZWFkZXJzLGNvbXBsZXRlKXt2YXIgaSx4aHI9b3B0aW9ucy54aHIoKTt4aHIub3BlbihvcHRpb25zLnR5cGUsb3B0aW9ucy51cmwsb3B0aW9ucy5hc3luYyxvcHRpb25zLnVzZXJuYW1lLG9wdGlvbnMucGFzc3dvcmQpO2lmKG9wdGlvbnMueGhyRmllbGRzKXtmb3IoaSBpbiBvcHRpb25zLnhockZpZWxkcyl7eGhyW2ldPW9wdGlvbnMueGhyRmllbGRzW2ldO319CmlmKG9wdGlvbnMubWltZVR5cGUmJnhoci5vdmVycmlkZU1pbWVUeXBlKXt4aHIub3ZlcnJpZGVNaW1lVHlwZShvcHRpb25zLm1pbWVUeXBlKTt9CmlmKCFvcHRpb25zLmNyb3NzRG9tYWluJiYhaGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdKXtoZWFkZXJzWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0Ijt9CmZvcihpIGluIGhlYWRlcnMpe3hoci5zZXRSZXF1ZXN0SGVhZGVyKGksaGVhZGVyc1tpXSk7fQpjYWxsYmFjaz1mdW5jdGlvbih0eXBlKXtyZXR1cm4gZnVuY3Rpb24oKXtpZihjYWxsYmFjayl7Y2FsbGJhY2s9ZXJyb3JDYWxsYmFjaz14aHIub25sb2FkPXhoci5vbmVycm9yPXhoci5vbmFib3J0PXhoci5vbnRpbWVvdXQ9eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2lmKHR5cGU9PT0iYWJvcnQiKXt4aHIuYWJvcnQoKTt9ZWxzZSBpZih0eXBlPT09ImVycm9yIil7aWYodHlwZW9mIHhoci5zdGF0dXMhPT0ibnVtYmVyIil7Y29tcGxldGUoMCwiZXJyb3IiKTt9ZWxzZXtjb21wbGV0ZSh4aHIuc3RhdHVzLHhoci5zdGF0dXNUZXh0KTt9fWVsc2V7Y29tcGxldGUoeGhyU3VjY2Vzc1N0YXR1c1t4aHIuc3RhdHVzXXx8eGhyLnN0YXR1cyx4aHIuc3RhdHVzVGV4dCwoeGhyLnJlc3BvbnNlVHlwZXx8InRleHQiKSE9PSJ0ZXh0Inx8dHlwZW9mIHhoci5yZXNwb25zZVRleHQhPT0ic3RyaW5nIj97YmluYXJ5Onhoci5yZXNwb25zZX06e3RleHQ6eGhyLnJlc3BvbnNlVGV4dH0seGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTt9fX07fTt4aHIub25sb2FkPWNhbGxiYWNrKCk7ZXJyb3JDYWxsYmFjaz14aHIub25lcnJvcj14aHIub250aW1lb3V0PWNhbGxiYWNrKCJlcnJvciIpO2lmKHhoci5vbmFib3J0IT09dW5kZWZpbmVkKXt4aHIub25hYm9ydD1lcnJvckNhbGxiYWNrO31lbHNle3hoci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZih4aHIucmVhZHlTdGF0ZT09PTQpe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2Vycm9yQ2FsbGJhY2soKTt9fSk7fX07fQpjYWxsYmFjaz1jYWxsYmFjaygiYWJvcnQiKTt0cnl7eGhyLnNlbmQob3B0aW9ucy5oYXNDb250ZW50JiZvcHRpb25zLmRhdGF8fG51bGwpO31jYXRjaChlKXtpZihjYWxsYmFjayl7dGhyb3cgZTt9fX0sYWJvcnQ6ZnVuY3Rpb24oKXtpZihjYWxsYmFjayl7Y2FsbGJhY2soKTt9fX07fX0pO2pRdWVyeS5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKHMpe2lmKHMuY3Jvc3NEb21haW4pe3MuY29udGVudHMuc2NyaXB0PWZhbHNlO319KTtqUXVlcnkuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgIisiYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKHRleHQpe2pRdWVyeS5nbG9iYWxFdmFsKHRleHQpO3JldHVybiB0ZXh0O319fSk7alF1ZXJ5LmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24ocyl7aWYocy5jYWNoZT09PXVuZGVmaW5lZCl7cy5jYWNoZT1mYWxzZTt9CmlmKHMuY3Jvc3NEb21haW4pe3MudHlwZT0iR0VUIjt9fSk7alF1ZXJ5LmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24ocyl7aWYocy5jcm9zc0RvbWFpbnx8cy5zY3JpcHRBdHRycyl7dmFyIHNjcmlwdCxjYWxsYmFjaztyZXR1cm57c2VuZDpmdW5jdGlvbihfLGNvbXBsZXRlKXtzY3JpcHQ9alF1ZXJ5KCI8c2NyaXB0PiIpLmF0dHIocy5zY3JpcHRBdHRyc3x8e30pLnByb3Aoe2NoYXJzZXQ6cy5zY3JpcHRDaGFyc2V0LHNyYzpzLnVybH0pLm9uKCJsb2FkIGVycm9yIixjYWxsYmFjaz1mdW5jdGlvbihldnQpe3NjcmlwdC5yZW1vdmUoKTtjYWxsYmFjaz1udWxsO2lmKGV2dCl7Y29tcGxldGUoZXZ0LnR5cGU9PT0iZXJyb3IiPzQwNDoyMDAsZXZ0LnR5cGUpO319KTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdFswXSk7fSxhYm9ydDpmdW5jdGlvbigpe2lmKGNhbGxiYWNrKXtjYWxsYmFjaygpO319fTt9fSk7dmFyIG9sZENhbGxiYWNrcz1bXSxyanNvbnA9Lyg9KVw/KD89JnwkKXxcP1w/LztqUXVlcnkuYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgY2FsbGJhY2s9b2xkQ2FsbGJhY2tzLnBvcCgpfHwoalF1ZXJ5LmV4cGFuZG8rIl8iKyhub25jZS5ndWlkKyspKTt0aGlzW2NhbGxiYWNrXT10cnVlO3JldHVybiBjYWxsYmFjazt9fSk7alF1ZXJ5LmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKHMsb3JpZ2luYWxTZXR0aW5ncyxqcVhIUil7dmFyIGNhbGxiYWNrTmFtZSxvdmVyd3JpdHRlbixyZXNwb25zZUNvbnRhaW5lcixqc29uUHJvcD1zLmpzb25wIT09ZmFsc2UmJihyanNvbnAudGVzdChzLnVybCk/InVybCI6dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciJiYocy5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpPT09MCYmcmpzb25wLnRlc3Qocy5kYXRhKSYmImRhdGEiKTtpZihqc29uUHJvcHx8cy5kYXRhVHlwZXNbMF09PT0ianNvbnAiKXtjYWxsYmFja05hbWU9cy5qc29ucENhbGxiYWNrPWlzRnVuY3Rpb24ocy5qc29ucENhbGxiYWNrKT9zLmpzb25wQ2FsbGJhY2soKTpzLmpzb25wQ2FsbGJhY2s7aWYoanNvblByb3Ape3NbanNvblByb3BdPXNbanNvblByb3BdLnJlcGxhY2Uocmpzb25wLCIkMSIrY2FsbGJhY2tOYW1lKTt9ZWxzZSBpZihzLmpzb25wIT09ZmFsc2Upe3MudXJsKz0ocnF1ZXJ5LnRlc3Qocy51cmwpPyImIjoiPyIpK3MuanNvbnArIj0iK2NhbGxiYWNrTmFtZTt9CnMuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe2lmKCFyZXNwb25zZUNvbnRhaW5lcil7alF1ZXJ5LmVycm9yKGNhbGxiYWNrTmFtZSsiIHdhcyBub3QgY2FsbGVkIik7fQpyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbMF07fTtzLmRhdGFUeXBlc1swXT0ianNvbiI7b3ZlcndyaXR0ZW49d2luZG93W2NhbGxiYWNrTmFtZV07d2luZG93W2NhbGxiYWNrTmFtZV09ZnVuY3Rpb24oKXtyZXNwb25zZUNvbnRhaW5lcj1hcmd1bWVudHM7fTtqcVhIUi5hbHdheXMoZnVuY3Rpb24oKXtpZihvdmVyd3JpdHRlbj09PXVuZGVmaW5lZCl7alF1ZXJ5KHdpbmRvdykucmVtb3ZlUHJvcChjYWxsYmFja05hbWUpO31lbHNle3dpbmRvd1tjYWxsYmFja05hbWVdPW92ZXJ3cml0dGVuO30KaWYoc1tjYWxsYmFja05hbWVdKXtzLmpzb25wQ2FsbGJhY2s9b3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO29sZENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrTmFtZSk7fQppZihyZXNwb25zZUNvbnRhaW5lciYmaXNGdW5jdGlvbihvdmVyd3JpdHRlbikpe292ZXJ3cml0dGVuKHJlc3BvbnNlQ29udGFpbmVyWzBdKTt9CnJlc3BvbnNlQ29udGFpbmVyPW92ZXJ3cml0dGVuPXVuZGVmaW5lZDt9KTtyZXR1cm4ic2NyaXB0Ijt9fSk7c3VwcG9ydC5jcmVhdGVIVE1MRG9jdW1lbnQ9KGZ1bmN0aW9uKCl7dmFyIGJvZHk9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKS5ib2R5O2JvZHkuaW5uZXJIVE1MPSI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPiI7cmV0dXJuIGJvZHkuY2hpbGROb2Rlcy5sZW5ndGg9PT0yO30pKCk7alF1ZXJ5LnBhcnNlSFRNTD1mdW5jdGlvbihkYXRhLGNvbnRleHQsa2VlcFNjcmlwdHMpe2lmKHR5cGVvZiBkYXRhIT09InN0cmluZyIpe3JldHVybltdO30KaWYodHlwZW9mIGNvbnRleHQ9PT0iYm9vbGVhbiIpe2tlZXBTY3JpcHRzPWNvbnRleHQ7Y29udGV4dD1mYWxzZTt9CnZhciBiYXNlLHBhcnNlZCxzY3JpcHRzO2lmKCFjb250ZXh0KXtpZihzdXBwb3J0LmNyZWF0ZUhUTUxEb2N1bWVudCl7Y29udGV4dD1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpO2Jhc2U9Y29udGV4dC5jcmVhdGVFbGVtZW50KCJiYXNlIik7YmFzZS5ocmVmPWRvY3VtZW50LmxvY2F0aW9uLmhyZWY7Y29udGV4dC5oZWFkLmFwcGVuZENoaWxkKGJhc2UpO31lbHNle2NvbnRleHQ9ZG9jdW1lbnQ7fX0KcGFyc2VkPXJzaW5nbGVUYWcuZXhlYyhkYXRhKTtzY3JpcHRzPSFrZWVwU2NyaXB0cyYmW107aWYocGFyc2VkKXtyZXR1cm5bY29udGV4dC5jcmVhdGVFbGVtZW50KHBhcnNlZFsxXSldO30KcGFyc2VkPWJ1aWxkRnJhZ21lbnQoW2RhdGFdLGNvbnRleHQsc2NyaXB0cyk7aWYoc2NyaXB0cyYmc2NyaXB0cy5sZW5ndGgpe2pRdWVyeShzY3JpcHRzKS5yZW1vdmUoKTt9CnJldHVybiBqUXVlcnkubWVyZ2UoW10scGFyc2VkLmNoaWxkTm9kZXMpO307alF1ZXJ5LmZuLmxvYWQ9ZnVuY3Rpb24odXJsLHBhcmFtcyxjYWxsYmFjayl7dmFyIHNlbGVjdG9yLHR5cGUscmVzcG9uc2Usc2VsZj10aGlzLG9mZj11cmwuaW5kZXhPZigiICIpO2lmKG9mZj4tMSl7c2VsZWN0b3I9c3RyaXBBbmRDb2xsYXBzZSh1cmwuc2xpY2Uob2ZmKSk7dXJsPXVybC5zbGljZSgwLG9mZik7fQppZihpc0Z1bmN0aW9uKHBhcmFtcykpe2NhbGxiYWNrPXBhcmFtcztwYXJhbXM9dW5kZWZpbmVkO31lbHNlIGlmKHBhcmFtcyYmdHlwZW9mIHBhcmFtcz09PSJvYmplY3QiKXt0eXBlPSJQT1NUIjt9CmlmKHNlbGYubGVuZ3RoPjApe2pRdWVyeS5hamF4KHt1cmw6dXJsLHR5cGU6dHlwZXx8IkdFVCIsZGF0YVR5cGU6Imh0bWwiLGRhdGE6cGFyYW1zfSkuZG9uZShmdW5jdGlvbihyZXNwb25zZVRleHQpe3Jlc3BvbnNlPWFyZ3VtZW50cztzZWxmLmh0bWwoc2VsZWN0b3I/alF1ZXJ5KCI8ZGl2PiIpLmFwcGVuZChqUXVlcnkucGFyc2VIVE1MKHJlc3BvbnNlVGV4dCkpLmZpbmQoc2VsZWN0b3IpOnJlc3BvbnNlVGV4dCk7fSkuYWx3YXlzKGNhbGxiYWNrJiZmdW5jdGlvbihqcVhIUixzdGF0dXMpe3NlbGYuZWFjaChmdW5jdGlvbigpe2NhbGxiYWNrLmFwcGx5KHRoaXMscmVzcG9uc2V8fFtqcVhIUi5yZXNwb25zZVRleHQsc3RhdHVzLGpxWEhSXSk7fSk7fSk7fQpyZXR1cm4gdGhpczt9O2pRdWVyeS5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGpRdWVyeS5ncmVwKGpRdWVyeS50aW1lcnMsZnVuY3Rpb24oZm4pe3JldHVybiBlbGVtPT09Zm4uZWxlbTt9KS5sZW5ndGg7fTtqUXVlcnkub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZWxlbSxvcHRpb25zLGkpe3ZhciBjdXJQb3NpdGlvbixjdXJMZWZ0LGN1ckNTU1RvcCxjdXJUb3AsY3VyT2Zmc2V0LGN1ckNTU0xlZnQsY2FsY3VsYXRlUG9zaXRpb24scG9zaXRpb249alF1ZXJ5LmNzcyhlbGVtLCJwb3NpdGlvbiIpLGN1ckVsZW09alF1ZXJ5KGVsZW0pLHByb3BzPXt9O2lmKHBvc2l0aW9uPT09InN0YXRpYyIpe2VsZW0uc3R5bGUucG9zaXRpb249InJlbGF0aXZlIjt9CmN1ck9mZnNldD1jdXJFbGVtLm9mZnNldCgpO2N1ckNTU1RvcD1qUXVlcnkuY3NzKGVsZW0sInRvcCIpO2N1ckNTU0xlZnQ9alF1ZXJ5LmNzcyhlbGVtLCJsZWZ0Iik7Y2FsY3VsYXRlUG9zaXRpb249KHBvc2l0aW9uPT09ImFic29sdXRlInx8cG9zaXRpb249PT0iZml4ZWQiKSYmKGN1ckNTU1RvcCtjdXJDU1NMZWZ0KS5pbmRleE9mKCJhdXRvIik+LTE7aWYoY2FsY3VsYXRlUG9zaXRpb24pe2N1clBvc2l0aW9uPWN1ckVsZW0ucG9zaXRpb24oKTtjdXJUb3A9Y3VyUG9zaXRpb24udG9wO2N1ckxlZnQ9Y3VyUG9zaXRpb24ubGVmdDt9ZWxzZXtjdXJUb3A9cGFyc2VGbG9hdChjdXJDU1NUb3ApfHwwO2N1ckxlZnQ9cGFyc2VGbG9hdChjdXJDU1NMZWZ0KXx8MDt9CmlmKGlzRnVuY3Rpb24ob3B0aW9ucykpe29wdGlvbnM9b3B0aW9ucy5jYWxsKGVsZW0saSxqUXVlcnkuZXh0ZW5kKHt9LGN1ck9mZnNldCkpO30KaWYob3B0aW9ucy50b3AhPW51bGwpe3Byb3BzLnRvcD0ob3B0aW9ucy50b3AtY3VyT2Zmc2V0LnRvcCkrY3VyVG9wO30KaWYob3B0aW9ucy5sZWZ0IT1udWxsKXtwcm9wcy5sZWZ0PShvcHRpb25zLmxlZnQtY3VyT2Zmc2V0LmxlZnQpK2N1ckxlZnQ7fQppZigidXNpbmciaW4gb3B0aW9ucyl7b3B0aW9ucy51c2luZy5jYWxsKGVsZW0scHJvcHMpO31lbHNle2lmKHR5cGVvZiBwcm9wcy50b3A9PT0ibnVtYmVyIil7cHJvcHMudG9wKz0icHgiO30KaWYodHlwZW9mIHByb3BzLmxlZnQ9PT0ibnVtYmVyIil7cHJvcHMubGVmdCs9InB4Ijt9CmN1ckVsZW0uY3NzKHByb3BzKTt9fX07alF1ZXJ5LmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKG9wdGlvbnMpe2lmKGFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiBvcHRpb25zPT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGkpe2pRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsb3B0aW9ucyxpKTt9KTt9CnZhciByZWN0LHdpbixlbGVtPXRoaXNbMF07aWYoIWVsZW0pe3JldHVybjt9CmlmKCFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKXtyZXR1cm57dG9wOjAsbGVmdDowfTt9CnJlY3Q9ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt3aW49ZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O3JldHVybnt0b3A6cmVjdC50b3Ard2luLnBhZ2VZT2Zmc2V0LGxlZnQ6cmVjdC5sZWZ0K3dpbi5wYWdlWE9mZnNldH07fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzWzBdKXtyZXR1cm47fQp2YXIgb2Zmc2V0UGFyZW50LG9mZnNldCxkb2MsZWxlbT10aGlzWzBdLHBhcmVudE9mZnNldD17dG9wOjAsbGVmdDowfTtpZihqUXVlcnkuY3NzKGVsZW0sInBvc2l0aW9uIik9PT0iZml4ZWQiKXtvZmZzZXQ9ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt9ZWxzZXtvZmZzZXQ9dGhpcy5vZmZzZXQoKTtkb2M9ZWxlbS5vd25lckRvY3VtZW50O29mZnNldFBhcmVudD1lbGVtLm9mZnNldFBhcmVudHx8ZG9jLmRvY3VtZW50RWxlbWVudDt3aGlsZShvZmZzZXRQYXJlbnQmJihvZmZzZXRQYXJlbnQ9PT1kb2MuYm9keXx8b2Zmc2V0UGFyZW50PT09ZG9jLmRvY3VtZW50RWxlbWVudCkmJmpRdWVyeS5jc3Mob2Zmc2V0UGFyZW50LCJwb3NpdGlvbiIpPT09InN0YXRpYyIpe29mZnNldFBhcmVudD1vZmZzZXRQYXJlbnQucGFyZW50Tm9kZTt9CmlmKG9mZnNldFBhcmVudCYmb2Zmc2V0UGFyZW50IT09ZWxlbSYmb2Zmc2V0UGFyZW50Lm5vZGVUeXBlPT09MSl7cGFyZW50T2Zmc2V0PWpRdWVyeShvZmZzZXRQYXJlbnQpLm9mZnNldCgpO3BhcmVudE9mZnNldC50b3ArPWpRdWVyeS5jc3Mob2Zmc2V0UGFyZW50LCJib3JkZXJUb3BXaWR0aCIsdHJ1ZSk7cGFyZW50T2Zmc2V0LmxlZnQrPWpRdWVyeS5jc3Mob2Zmc2V0UGFyZW50LCJib3JkZXJMZWZ0V2lkdGgiLHRydWUpO319CnJldHVybnt0b3A6b2Zmc2V0LnRvcC1wYXJlbnRPZmZzZXQudG9wLWpRdWVyeS5jc3MoZWxlbSwibWFyZ2luVG9wIix0cnVlKSxsZWZ0Om9mZnNldC5sZWZ0LXBhcmVudE9mZnNldC5sZWZ0LWpRdWVyeS5jc3MoZWxlbSwibWFyZ2luTGVmdCIsdHJ1ZSl9O30sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIG9mZnNldFBhcmVudD10aGlzLm9mZnNldFBhcmVudDt3aGlsZShvZmZzZXRQYXJlbnQmJmpRdWVyeS5jc3Mob2Zmc2V0UGFyZW50LCJwb3NpdGlvbiIpPT09InN0YXRpYyIpe29mZnNldFBhcmVudD1vZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O30KcmV0dXJuIG9mZnNldFBhcmVudHx8ZG9jdW1lbnRFbGVtZW50O30pO319KTtqUXVlcnkuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihtZXRob2QscHJvcCl7dmFyIHRvcD0icGFnZVlPZmZzZXQiPT09cHJvcDtqUXVlcnkuZm5bbWV0aG9kXT1mdW5jdGlvbih2YWwpe3JldHVybiBhY2Nlc3ModGhpcyxmdW5jdGlvbihlbGVtLG1ldGhvZCx2YWwpe3ZhciB3aW47aWYoaXNXaW5kb3coZWxlbSkpe3dpbj1lbGVtO31lbHNlIGlmKGVsZW0ubm9kZVR5cGU9PT05KXt3aW49ZWxlbS5kZWZhdWx0Vmlldzt9CmlmKHZhbD09PXVuZGVmaW5lZCl7cmV0dXJuIHdpbj93aW5bcHJvcF06ZWxlbVttZXRob2RdO30KaWYod2luKXt3aW4uc2Nyb2xsVG8oIXRvcD92YWw6d2luLnBhZ2VYT2Zmc2V0LHRvcD92YWw6d2luLnBhZ2VZT2Zmc2V0KTt9ZWxzZXtlbGVtW21ldGhvZF09dmFsO319LG1ldGhvZCx2YWwsYXJndW1lbnRzLmxlbmd0aCk7fTt9KTtqUXVlcnkuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihfaSxwcm9wKXtqUXVlcnkuY3NzSG9va3NbcHJvcF09YWRkR2V0SG9va0lmKHN1cHBvcnQucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihlbGVtLGNvbXB1dGVkKXtpZihjb21wdXRlZCl7Y29tcHV0ZWQ9Y3VyQ1NTKGVsZW0scHJvcCk7cmV0dXJuIHJudW1ub25weC50ZXN0KGNvbXB1dGVkKT9qUXVlcnkoZWxlbSkucG9zaXRpb24oKVtwcm9wXSsicHgiOmNvbXB1dGVkO319KTt9KTtqUXVlcnkuZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKG5hbWUsdHlwZSl7alF1ZXJ5LmVhY2goe3BhZGRpbmc6ImlubmVyIituYW1lLGNvbnRlbnQ6dHlwZSwiIjoib3V0ZXIiK25hbWV9LGZ1bmN0aW9uKGRlZmF1bHRFeHRyYSxmdW5jTmFtZSl7alF1ZXJ5LmZuW2Z1bmNOYW1lXT1mdW5jdGlvbihtYXJnaW4sdmFsdWUpe3ZhciBjaGFpbmFibGU9YXJndW1lbnRzLmxlbmd0aCYmKGRlZmF1bHRFeHRyYXx8dHlwZW9mIG1hcmdpbiE9PSJib29sZWFuIiksZXh0cmE9ZGVmYXVsdEV4dHJhfHwobWFyZ2luPT09dHJ1ZXx8dmFsdWU9PT10cnVlPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSx0eXBlLHZhbHVlKXt2YXIgZG9jO2lmKGlzV2luZG93KGVsZW0pKXtyZXR1cm4gZnVuY05hbWUuaW5kZXhPZigib3V0ZXIiKT09PTA/ZWxlbVsiaW5uZXIiK25hbWVdOmVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK25hbWVdO30KaWYoZWxlbS5ub2RlVHlwZT09PTkpe2RvYz1lbGVtLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gTWF0aC5tYXgoZWxlbS5ib2R5WyJzY3JvbGwiK25hbWVdLGRvY1sic2Nyb2xsIituYW1lXSxlbGVtLmJvZHlbIm9mZnNldCIrbmFtZV0sZG9jWyJvZmZzZXQiK25hbWVdLGRvY1siY2xpZW50IituYW1lXSk7fQpyZXR1cm4gdmFsdWU9PT11bmRlZmluZWQ/alF1ZXJ5LmNzcyhlbGVtLHR5cGUsZXh0cmEpOmpRdWVyeS5zdHlsZShlbGVtLHR5cGUsdmFsdWUsZXh0cmEpO30sdHlwZSxjaGFpbmFibGU/bWFyZ2luOnVuZGVmaW5lZCxjaGFpbmFibGUpO307fSk7fSk7alF1ZXJ5LmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihfaSx0eXBlKXtqUXVlcnkuZm5bdHlwZV09ZnVuY3Rpb24oZm4pe3JldHVybiB0aGlzLm9uKHR5cGUsZm4pO307fSk7alF1ZXJ5LmZuLmV4dGVuZCh7YmluZDpmdW5jdGlvbih0eXBlcyxkYXRhLGZuKXtyZXR1cm4gdGhpcy5vbih0eXBlcyxudWxsLGRhdGEsZm4pO30sdW5iaW5kOmZ1bmN0aW9uKHR5cGVzLGZuKXtyZXR1cm4gdGhpcy5vZmYodHlwZXMsbnVsbCxmbik7fSxkZWxlZ2F0ZTpmdW5jdGlvbihzZWxlY3Rvcix0eXBlcyxkYXRhLGZuKXtyZXR1cm4gdGhpcy5vbih0eXBlcyxzZWxlY3RvcixkYXRhLGZuKTt9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oc2VsZWN0b3IsdHlwZXMsZm4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPT09MT90aGlzLm9mZihzZWxlY3RvciwiKioiKTp0aGlzLm9mZih0eXBlcyxzZWxlY3Rvcnx8IioqIixmbik7fSxob3ZlcjpmdW5jdGlvbihmbk92ZXIsZm5PdXQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZm5PdmVyKS5tb3VzZWxlYXZlKGZuT3V0fHxmbk92ZXIpO319KTtqUXVlcnkuZWFjaCgoImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrICIrIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlICIrImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgY29udGV4dG1lbnUiKS5zcGxpdCgiICIpLGZ1bmN0aW9uKF9pLG5hbWUpe2pRdWVyeS5mbltuYW1lXT1mdW5jdGlvbihkYXRhLGZuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24obmFtZSxudWxsLGRhdGEsZm4pOnRoaXMudHJpZ2dlcihuYW1lKTt9O30pO3ZhciBydHJpbT0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2c7alF1ZXJ5LnByb3h5PWZ1bmN0aW9uKGZuLGNvbnRleHQpe3ZhciB0bXAsYXJncyxwcm94eTtpZih0eXBlb2YgY29udGV4dD09PSJzdHJpbmciKXt0bXA9Zm5bY29udGV4dF07Y29udGV4dD1mbjtmbj10bXA7fQppZighaXNGdW5jdGlvbihmbikpe3JldHVybiB1bmRlZmluZWQ7fQphcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3Byb3h5PWZ1bmN0aW9uKCl7cmV0dXJuIGZuLmFwcGx5KGNvbnRleHR8fHRoaXMsYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7fTtwcm94eS5ndWlkPWZuLmd1aWQ9Zm4uZ3VpZHx8alF1ZXJ5Lmd1aWQrKztyZXR1cm4gcHJveHk7fTtqUXVlcnkuaG9sZFJlYWR5PWZ1bmN0aW9uKGhvbGQpe2lmKGhvbGQpe2pRdWVyeS5yZWFkeVdhaXQrKzt9ZWxzZXtqUXVlcnkucmVhZHkodHJ1ZSk7fX07alF1ZXJ5LmlzQXJyYXk9QXJyYXkuaXNBcnJheTtqUXVlcnkucGFyc2VKU09OPUpTT04ucGFyc2U7alF1ZXJ5Lm5vZGVOYW1lPW5vZGVOYW1lO2pRdWVyeS5pc0Z1bmN0aW9uPWlzRnVuY3Rpb247alF1ZXJ5LmlzV2luZG93PWlzV2luZG93O2pRdWVyeS5jYW1lbENhc2U9Y2FtZWxDYXNlO2pRdWVyeS50eXBlPXRvVHlwZTtqUXVlcnkubm93PURhdGUubm93O2pRdWVyeS5pc051bWVyaWM9ZnVuY3Rpb24ob2JqKXt2YXIgdHlwZT1qUXVlcnkudHlwZShvYmopO3JldHVybih0eXBlPT09Im51bWJlciJ8fHR5cGU9PT0ic3RyaW5nIikmJiFpc05hTihvYmotcGFyc2VGbG9hdChvYmopKTt9O2pRdWVyeS50cmltPWZ1bmN0aW9uKHRleHQpe3JldHVybiB0ZXh0PT1udWxsPyIiOih0ZXh0KyIiKS5yZXBsYWNlKHJ0cmltLCIiKTt9O2lmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4galF1ZXJ5O30pO30KdmFyCl9qUXVlcnk9d2luZG93LmpRdWVyeSxfJD13aW5kb3cuJDtqUXVlcnkubm9Db25mbGljdD1mdW5jdGlvbihkZWVwKXtpZih3aW5kb3cuJD09PWpRdWVyeSl7d2luZG93LiQ9XyQ7fQppZihkZWVwJiZ3aW5kb3cualF1ZXJ5PT09alF1ZXJ5KXt3aW5kb3cualF1ZXJ5PV9qUXVlcnk7fQpyZXR1cm4galF1ZXJ5O307aWYodHlwZW9mIG5vR2xvYmFsPT09InVuZGVmaW5lZCIpe3dpbmRvdy5qUXVlcnk9d2luZG93LiQ9alF1ZXJ5O30KcmV0dXJuIGpRdWVyeTt9KTtqUXVlcnkubm9Db25mbGljdCgpOzsKLyohCiAqIGpRdWVyeSBNaWdyYXRlIC0gdjMuMy4yIC0gMjAyMC0xMS0xOFQwODoyOVoKICogQ29weXJpZ2h0IE9wZW5KUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICovCihmdW5jdGlvbihmYWN0b3J5KXsidXNlIHN0cmljdCI7aWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbImpxdWVyeSJdLGZ1bmN0aW9uKGpRdWVyeSl7cmV0dXJuIGZhY3RvcnkoalF1ZXJ5LHdpbmRvdyk7fSk7fWVsc2UgaWYodHlwZW9mIG1vZHVsZT09PSJvYmplY3QiJiZtb2R1bGUuZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCJqcXVlcnkiKSx3aW5kb3cpO31lbHNle2ZhY3RvcnkoalF1ZXJ5LHdpbmRvdyk7fX0pKGZ1bmN0aW9uKGpRdWVyeSx3aW5kb3cpeyJ1c2Ugc3RyaWN0IjtqUXVlcnkubWlncmF0ZVZlcnNpb249IjMuMy4yIjtmdW5jdGlvbiBjb21wYXJlVmVyc2lvbnModjEsdjIpe3ZhciBpLHJWZXJzaW9uUGFydHM9L14oXGQrKVwuKFxkKylcLihcZCspLyx2MXA9clZlcnNpb25QYXJ0cy5leGVjKHYxKXx8W10sdjJwPXJWZXJzaW9uUGFydHMuZXhlYyh2Mil8fFtdO2ZvcihpPTE7aTw9MztpKyspe2lmKCt2MXBbaV0+K3YycFtpXSl7cmV0dXJuIDE7fQppZigrdjFwW2ldPCt2MnBbaV0pe3JldHVybi0xO319CnJldHVybiAwO30KZnVuY3Rpb24galF1ZXJ5VmVyc2lvblNpbmNlKHZlcnNpb24pe3JldHVybiBjb21wYXJlVmVyc2lvbnMoalF1ZXJ5LmZuLmpxdWVyeSx2ZXJzaW9uKT49MDt9CihmdW5jdGlvbigpe2lmKCF3aW5kb3cuY29uc29sZXx8IXdpbmRvdy5jb25zb2xlLmxvZyl7cmV0dXJuO30KaWYoIWpRdWVyeXx8IWpRdWVyeVZlcnNpb25TaW5jZSgiMy4wLjAiKSl7d2luZG93LmNvbnNvbGUubG9nKCJKUU1JR1JBVEU6IGpRdWVyeSAzLjAuMCsgUkVRVUlSRUQiKTt9CmlmKGpRdWVyeS5taWdyYXRlV2FybmluZ3Mpe3dpbmRvdy5jb25zb2xlLmxvZygiSlFNSUdSQVRFOiBNaWdyYXRlIHBsdWdpbiBsb2FkZWQgbXVsdGlwbGUgdGltZXMiKTt9CndpbmRvdy5jb25zb2xlLmxvZygiSlFNSUdSQVRFOiBNaWdyYXRlIGlzIGluc3RhbGxlZCIrCihqUXVlcnkubWlncmF0ZU11dGU/IiI6IiB3aXRoIGxvZ2dpbmcgYWN0aXZlIikrIiwgdmVyc2lvbiAiK2pRdWVyeS5taWdyYXRlVmVyc2lvbik7fSkoKTt2YXIgd2FybmVkQWJvdXQ9e307alF1ZXJ5Lm1pZ3JhdGVEZWR1cGxpY2F0ZVdhcm5pbmdzPXRydWU7alF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncz1bXTtpZihqUXVlcnkubWlncmF0ZVRyYWNlPT09dW5kZWZpbmVkKXtqUXVlcnkubWlncmF0ZVRyYWNlPXRydWU7fQpqUXVlcnkubWlncmF0ZVJlc2V0PWZ1bmN0aW9uKCl7d2FybmVkQWJvdXQ9e307alF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncy5sZW5ndGg9MDt9O2Z1bmN0aW9uIG1pZ3JhdGVXYXJuKG1zZyl7dmFyIGNvbnNvbGU9d2luZG93LmNvbnNvbGU7aWYoIWpRdWVyeS5taWdyYXRlRGVkdXBsaWNhdGVXYXJuaW5nc3x8IXdhcm5lZEFib3V0W21zZ10pe3dhcm5lZEFib3V0W21zZ109dHJ1ZTtqUXVlcnkubWlncmF0ZVdhcm5pbmdzLnB1c2gobXNnKTtpZihjb25zb2xlJiZjb25zb2xlLndhcm4mJiFqUXVlcnkubWlncmF0ZU11dGUpe2NvbnNvbGUud2FybigiSlFNSUdSQVRFOiAiK21zZyk7aWYoalF1ZXJ5Lm1pZ3JhdGVUcmFjZSYmY29uc29sZS50cmFjZSl7Y29uc29sZS50cmFjZSgpO319fX0KZnVuY3Rpb24gbWlncmF0ZVdhcm5Qcm9wKG9iaixwcm9wLHZhbHVlLG1zZyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixwcm9wLHtjb25maWd1cmFibGU6dHJ1ZSxlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7bWlncmF0ZVdhcm4obXNnKTtyZXR1cm4gdmFsdWU7fSxzZXQ6ZnVuY3Rpb24obmV3VmFsdWUpe21pZ3JhdGVXYXJuKG1zZyk7dmFsdWU9bmV3VmFsdWU7fX0pO30KZnVuY3Rpb24gbWlncmF0ZVdhcm5GdW5jKG9iaixwcm9wLG5ld0Z1bmMsbXNnKXtvYmpbcHJvcF09ZnVuY3Rpb24oKXttaWdyYXRlV2Fybihtc2cpO3JldHVybiBuZXdGdW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O30KaWYod2luZG93LmRvY3VtZW50LmNvbXBhdE1vZGU9PT0iQmFja0NvbXBhdCIpe21pZ3JhdGVXYXJuKCJqUXVlcnkgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBRdWlya3MgTW9kZSIpO30KdmFyIGZpbmRQcm9wLGNsYXNzMnR5cGU9e30sb2xkSW5pdD1qUXVlcnkuZm4uaW5pdCxvbGRGaW5kPWpRdWVyeS5maW5kLHJhdHRySGFzaFRlc3Q9L1xbKFxzKlstXHddK1xzKikoW358XiQqXT89KVxzKihbLVx3I10qPyNbLVx3I10qKVxzKlxdLyxyYXR0ckhhc2hHbG9iPS9cWyhccypbLVx3XStccyopKFt+fF4kKl0/PSlccyooWy1cdyNdKj8jWy1cdyNdKilccypcXS9nLHJ0cmltPS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZztqUXVlcnkuZm4uaW5pdD1mdW5jdGlvbihhcmcxKXt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2lmKHR5cGVvZiBhcmcxPT09InN0cmluZyImJmFyZzE9PT0iIyIpe21pZ3JhdGVXYXJuKCJqUXVlcnkoICcjJyApIGlzIG5vdCBhIHZhbGlkIHNlbGVjdG9yIik7YXJnc1swXT1bXTt9CnJldHVybiBvbGRJbml0LmFwcGx5KHRoaXMsYXJncyk7fTtqUXVlcnkuZm4uaW5pdC5wcm90b3R5cGU9alF1ZXJ5LmZuO2pRdWVyeS5maW5kPWZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2lmKHR5cGVvZiBzZWxlY3Rvcj09PSJzdHJpbmciJiZyYXR0ckhhc2hUZXN0LnRlc3Qoc2VsZWN0b3IpKXt0cnl7d2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO31jYXRjaChlcnIxKXtzZWxlY3Rvcj1zZWxlY3Rvci5yZXBsYWNlKHJhdHRySGFzaEdsb2IsZnVuY3Rpb24oXyxhdHRyLG9wLHZhbHVlKXtyZXR1cm4iWyIrYXR0citvcCsiXCIiK3ZhbHVlKyJcIl0iO30pO3RyeXt3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7bWlncmF0ZVdhcm4oIkF0dHJpYnV0ZSBzZWxlY3RvciB3aXRoICcjJyBtdXN0IGJlIHF1b3RlZDogIithcmdzWzBdKTthcmdzWzBdPXNlbGVjdG9yO31jYXRjaChlcnIyKXttaWdyYXRlV2FybigiQXR0cmlidXRlIHNlbGVjdG9yIHdpdGggJyMnIHdhcyBub3QgZml4ZWQ6ICIrYXJnc1swXSk7fX19CnJldHVybiBvbGRGaW5kLmFwcGx5KHRoaXMsYXJncyk7fTtmb3IoZmluZFByb3AgaW4gb2xkRmluZCl7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9sZEZpbmQsZmluZFByb3ApKXtqUXVlcnkuZmluZFtmaW5kUHJvcF09b2xkRmluZFtmaW5kUHJvcF07fX0KbWlncmF0ZVdhcm5GdW5jKGpRdWVyeS5mbiwic2l6ZSIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGg7fSwialF1ZXJ5LmZuLnNpemUoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkOyB1c2UgdGhlIC5sZW5ndGggcHJvcGVydHkiKTttaWdyYXRlV2FybkZ1bmMoalF1ZXJ5LCJwYXJzZUpTT04iLGZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UuYXBwbHkobnVsbCxhcmd1bWVudHMpO30sImpRdWVyeS5wYXJzZUpTT04gaXMgZGVwcmVjYXRlZDsgdXNlIEpTT04ucGFyc2UiKTttaWdyYXRlV2FybkZ1bmMoalF1ZXJ5LCJob2xkUmVhZHkiLGpRdWVyeS5ob2xkUmVhZHksImpRdWVyeS5ob2xkUmVhZHkgaXMgZGVwcmVjYXRlZCIpO21pZ3JhdGVXYXJuRnVuYyhqUXVlcnksInVuaXF1ZSIsalF1ZXJ5LnVuaXF1ZVNvcnQsImpRdWVyeS51bmlxdWUgaXMgZGVwcmVjYXRlZDsgdXNlIGpRdWVyeS51bmlxdWVTb3J0Iik7bWlncmF0ZVdhcm5Qcm9wKGpRdWVyeS5leHByLCJmaWx0ZXJzIixqUXVlcnkuZXhwci5wc2V1ZG9zLCJqUXVlcnkuZXhwci5maWx0ZXJzIGlzIGRlcHJlY2F0ZWQ7IHVzZSBqUXVlcnkuZXhwci5wc2V1ZG9zIik7bWlncmF0ZVdhcm5Qcm9wKGpRdWVyeS5leHByLCI6IixqUXVlcnkuZXhwci5wc2V1ZG9zLCJqUXVlcnkuZXhwclsnOiddIGlzIGRlcHJlY2F0ZWQ7IHVzZSBqUXVlcnkuZXhwci5wc2V1ZG9zIik7aWYoalF1ZXJ5VmVyc2lvblNpbmNlKCIzLjEuMSIpKXttaWdyYXRlV2FybkZ1bmMoalF1ZXJ5LCJ0cmltIixmdW5jdGlvbih0ZXh0KXtyZXR1cm4gdGV4dD09bnVsbD8iIjoodGV4dCsiIikucmVwbGFjZShydHJpbSwiIik7fSwialF1ZXJ5LnRyaW0gaXMgZGVwcmVjYXRlZDsgdXNlIFN0cmluZy5wcm90b3R5cGUudHJpbSIpO30KaWYoalF1ZXJ5VmVyc2lvblNpbmNlKCIzLjIuMCIpKXttaWdyYXRlV2FybkZ1bmMoalF1ZXJ5LCJub2RlTmFtZSIsZnVuY3Rpb24oZWxlbSxuYW1lKXtyZXR1cm4gZWxlbS5ub2RlTmFtZSYmZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bmFtZS50b0xvd2VyQ2FzZSgpO30sImpRdWVyeS5ub2RlTmFtZSBpcyBkZXByZWNhdGVkIik7bWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwiaXNBcnJheSIsQXJyYXkuaXNBcnJheSwialF1ZXJ5LmlzQXJyYXkgaXMgZGVwcmVjYXRlZDsgdXNlIEFycmF5LmlzQXJyYXkiKTt9CmlmKGpRdWVyeVZlcnNpb25TaW5jZSgiMy4zLjAiKSl7bWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwiaXNOdW1lcmljIixmdW5jdGlvbihvYmope3ZhciB0eXBlPXR5cGVvZiBvYmo7cmV0dXJuKHR5cGU9PT0ibnVtYmVyInx8dHlwZT09PSJzdHJpbmciKSYmIWlzTmFOKG9iai1wYXJzZUZsb2F0KG9iaikpO30sImpRdWVyeS5pc051bWVyaWMoKSBpcyBkZXByZWNhdGVkIik7alF1ZXJ5LmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKF8sbmFtZSl7Y2xhc3MydHlwZVsiW29iamVjdCAiK25hbWUrIl0iXT1uYW1lLnRvTG93ZXJDYXNlKCk7fSk7bWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwidHlwZSIsZnVuY3Rpb24ob2JqKXtpZihvYmo9PW51bGwpe3JldHVybiBvYmorIiI7fQpyZXR1cm4gdHlwZW9mIG9iaj09PSJvYmplY3QifHx0eXBlb2Ygb2JqPT09ImZ1bmN0aW9uIj9jbGFzczJ0eXBlW09iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopXXx8Im9iamVjdCI6dHlwZW9mIG9iajt9LCJqUXVlcnkudHlwZSBpcyBkZXByZWNhdGVkIik7bWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwiaXNGdW5jdGlvbiIsZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9iaj09PSJmdW5jdGlvbiI7fSwialF1ZXJ5LmlzRnVuY3Rpb24oKSBpcyBkZXByZWNhdGVkIik7bWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwiaXNXaW5kb3ciLGZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiE9bnVsbCYmb2JqPT09b2JqLndpbmRvdzt9LCJqUXVlcnkuaXNXaW5kb3coKSBpcyBkZXByZWNhdGVkIik7fQppZihqUXVlcnkuYWpheCl7dmFyIG9sZEFqYXg9alF1ZXJ5LmFqYXgscmpzb25wPS8oPSlcPyg/PSZ8JCl8XD9cPy87alF1ZXJ5LmFqYXg9ZnVuY3Rpb24oKXt2YXIgalFYSFI9b2xkQWpheC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoalFYSFIucHJvbWlzZSl7bWlncmF0ZVdhcm5GdW5jKGpRWEhSLCJzdWNjZXNzIixqUVhIUi5kb25lLCJqUVhIUi5zdWNjZXNzIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQiKTttaWdyYXRlV2FybkZ1bmMoalFYSFIsImVycm9yIixqUVhIUi5mYWlsLCJqUVhIUi5lcnJvciBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkIik7bWlncmF0ZVdhcm5GdW5jKGpRWEhSLCJjb21wbGV0ZSIsalFYSFIuYWx3YXlzLCJqUVhIUi5jb21wbGV0ZSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkIik7fQpyZXR1cm4galFYSFI7fTtpZighalF1ZXJ5VmVyc2lvblNpbmNlKCI0LjAuMCIpKXtqUXVlcnkuYWpheFByZWZpbHRlcigiK2pzb24iLGZ1bmN0aW9uKHMpe2lmKHMuanNvbnAhPT1mYWxzZSYmKHJqc29ucC50ZXN0KHMudXJsKXx8dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciJiYocy5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpPT09MCYmcmpzb25wLnRlc3Qocy5kYXRhKSkpe21pZ3JhdGVXYXJuKCJKU09OLXRvLUpTT05QIGF1dG8tcHJvbW90aW9uIGlzIGRlcHJlY2F0ZWQiKTt9fSk7fX0KdmFyIG9sZFJlbW92ZUF0dHI9alF1ZXJ5LmZuLnJlbW92ZUF0dHIsb2xkVG9nZ2xlQ2xhc3M9alF1ZXJ5LmZuLnRvZ2dsZUNsYXNzLHJtYXRjaE5vblNwYWNlPS9cUysvZztqUXVlcnkuZm4ucmVtb3ZlQXR0cj1mdW5jdGlvbihuYW1lKXt2YXIgc2VsZj10aGlzO2pRdWVyeS5lYWNoKG5hbWUubWF0Y2gocm1hdGNoTm9uU3BhY2UpLGZ1bmN0aW9uKF9pLGF0dHIpe2lmKGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdChhdHRyKSl7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi5yZW1vdmVBdHRyIG5vIGxvbmdlciBzZXRzIGJvb2xlYW4gcHJvcGVydGllczogIithdHRyKTtzZWxmLnByb3AoYXR0cixmYWxzZSk7fX0pO3JldHVybiBvbGRSZW1vdmVBdHRyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9O2pRdWVyeS5mbi50b2dnbGVDbGFzcz1mdW5jdGlvbihzdGF0ZSl7aWYoc3RhdGUhPT11bmRlZmluZWQmJnR5cGVvZiBzdGF0ZSE9PSJib29sZWFuIil7cmV0dXJuIG9sZFRvZ2dsZUNsYXNzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9Cm1pZ3JhdGVXYXJuKCJqUXVlcnkuZm4udG9nZ2xlQ2xhc3MoIGJvb2xlYW4gKSBpcyBkZXByZWNhdGVkIik7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjbGFzc05hbWU9dGhpcy5nZXRBdHRyaWJ1dGUmJnRoaXMuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIjtpZihjbGFzc05hbWUpe2pRdWVyeS5kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iLGNsYXNzTmFtZSk7fQppZih0aGlzLnNldEF0dHJpYnV0ZSl7dGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixjbGFzc05hbWV8fHN0YXRlPT09ZmFsc2U/IiI6alF1ZXJ5LmRhdGEodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIik7fX0pO307ZnVuY3Rpb24gY2FtZWxDYXNlKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKC8tKFthLXpdKS9nLGZ1bmN0aW9uKF8sbGV0dGVyKXtyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7fSk7fQp2YXIgb2xkRm5Dc3MsaW50ZXJuYWxTd2FwQ2FsbD1mYWxzZSxyYWxwaGFTdGFydD0vXlthLXpdLyxyYXV0b1B4PS9eKD86Qm9yZGVyKD86VG9wfFJpZ2h0fEJvdHRvbXxMZWZ0KT8oPzpXaWR0aHwpfCg/Ok1hcmdpbnxQYWRkaW5nKT8oPzpUb3B8UmlnaHR8Qm90dG9tfExlZnQpP3woPzpNaW58TWF4KT8oPzpXaWR0aHxIZWlnaHQpKSQvO2lmKGpRdWVyeS5zd2FwKXtqUXVlcnkuZWFjaChbImhlaWdodCIsIndpZHRoIiwicmVsaWFibGVNYXJnaW5SaWdodCJdLGZ1bmN0aW9uKF8sbmFtZSl7dmFyIG9sZEhvb2s9alF1ZXJ5LmNzc0hvb2tzW25hbWVdJiZqUXVlcnkuY3NzSG9va3NbbmFtZV0uZ2V0O2lmKG9sZEhvb2spe2pRdWVyeS5jc3NIb29rc1tuYW1lXS5nZXQ9ZnVuY3Rpb24oKXt2YXIgcmV0O2ludGVybmFsU3dhcENhbGw9dHJ1ZTtyZXQ9b2xkSG9vay5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aW50ZXJuYWxTd2FwQ2FsbD1mYWxzZTtyZXR1cm4gcmV0O307fX0pO30KalF1ZXJ5LnN3YXA9ZnVuY3Rpb24oZWxlbSxvcHRpb25zLGNhbGxiYWNrLGFyZ3Mpe3ZhciByZXQsbmFtZSxvbGQ9e307aWYoIWludGVybmFsU3dhcENhbGwpe21pZ3JhdGVXYXJuKCJqUXVlcnkuc3dhcCgpIGlzIHVuZG9jdW1lbnRlZCBhbmQgZGVwcmVjYXRlZCIpO30KZm9yKG5hbWUgaW4gb3B0aW9ucyl7b2xkW25hbWVdPWVsZW0uc3R5bGVbbmFtZV07ZWxlbS5zdHlsZVtuYW1lXT1vcHRpb25zW25hbWVdO30KcmV0PWNhbGxiYWNrLmFwcGx5KGVsZW0sYXJnc3x8W10pO2ZvcihuYW1lIGluIG9wdGlvbnMpe2VsZW0uc3R5bGVbbmFtZV09b2xkW25hbWVdO30KcmV0dXJuIHJldDt9O2lmKGpRdWVyeVZlcnNpb25TaW5jZSgiMy40LjAiKSYmdHlwZW9mIFByb3h5IT09InVuZGVmaW5lZCIpe2pRdWVyeS5jc3NQcm9wcz1uZXcgUHJveHkoalF1ZXJ5LmNzc1Byb3BzfHx7fSx7c2V0OmZ1bmN0aW9uKCl7bWlncmF0ZVdhcm4oIkpRTUlHUkFURTogalF1ZXJ5LmNzc1Byb3BzIGlzIGRlcHJlY2F0ZWQiKTtyZXR1cm4gUmVmbGVjdC5zZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO319KTt9CmlmKCFqUXVlcnkuY3NzTnVtYmVyKXtqUXVlcnkuY3NzTnVtYmVyPXt9O30KZnVuY3Rpb24gaXNBdXRvUHgocHJvcCl7cmV0dXJuIHJhbHBoYVN0YXJ0LnRlc3QocHJvcCkmJnJhdXRvUHgudGVzdChwcm9wWzBdLnRvVXBwZXJDYXNlKCkrcHJvcC5zbGljZSgxKSk7fQpvbGRGbkNzcz1qUXVlcnkuZm4uY3NzO2pRdWVyeS5mbi5jc3M9ZnVuY3Rpb24obmFtZSx2YWx1ZSl7dmFyIGNhbWVsTmFtZSxvcmlnVGhpcz10aGlzO2lmKG5hbWUmJnR5cGVvZiBuYW1lPT09Im9iamVjdCImJiFBcnJheS5pc0FycmF5KG5hbWUpKXtqUXVlcnkuZWFjaChuYW1lLGZ1bmN0aW9uKG4sdil7alF1ZXJ5LmZuLmNzcy5jYWxsKG9yaWdUaGlzLG4sdik7fSk7cmV0dXJuIHRoaXM7fQppZih0eXBlb2YgdmFsdWU9PT0ibnVtYmVyIil7Y2FtZWxOYW1lPWNhbWVsQ2FzZShuYW1lKTtpZighaXNBdXRvUHgoY2FtZWxOYW1lKSYmIWpRdWVyeS5jc3NOdW1iZXJbY2FtZWxOYW1lXSl7bWlncmF0ZVdhcm4oIk51bWJlci10eXBlZCB2YWx1ZXMgYXJlIGRlcHJlY2F0ZWQgZm9yIGpRdWVyeS5mbi5jc3MoIFwiIisKbmFtZSsiXCIsIHZhbHVlICkiKTt9fQpyZXR1cm4gb2xkRm5Dc3MuYXBwbHkodGhpcyxhcmd1bWVudHMpO307dmFyIG9sZERhdGE9alF1ZXJ5LmRhdGE7alF1ZXJ5LmRhdGE9ZnVuY3Rpb24oZWxlbSxuYW1lLHZhbHVlKXt2YXIgY3VyRGF0YSxzYW1lS2V5cyxrZXk7aWYobmFtZSYmdHlwZW9mIG5hbWU9PT0ib2JqZWN0IiYmYXJndW1lbnRzLmxlbmd0aD09PTIpe2N1ckRhdGE9alF1ZXJ5Lmhhc0RhdGEoZWxlbSkmJm9sZERhdGEuY2FsbCh0aGlzLGVsZW0pO3NhbWVLZXlzPXt9O2ZvcihrZXkgaW4gbmFtZSl7aWYoa2V5IT09Y2FtZWxDYXNlKGtleSkpe21pZ3JhdGVXYXJuKCJqUXVlcnkuZGF0YSgpIGFsd2F5cyBzZXRzL2dldHMgY2FtZWxDYXNlZCBuYW1lczogIitrZXkpO2N1ckRhdGFba2V5XT1uYW1lW2tleV07fWVsc2V7c2FtZUtleXNba2V5XT1uYW1lW2tleV07fX0Kb2xkRGF0YS5jYWxsKHRoaXMsZWxlbSxzYW1lS2V5cyk7cmV0dXJuIG5hbWU7fQppZihuYW1lJiZ0eXBlb2YgbmFtZT09PSJzdHJpbmciJiZuYW1lIT09Y2FtZWxDYXNlKG5hbWUpKXtjdXJEYXRhPWpRdWVyeS5oYXNEYXRhKGVsZW0pJiZvbGREYXRhLmNhbGwodGhpcyxlbGVtKTtpZihjdXJEYXRhJiZuYW1lIGluIGN1ckRhdGEpe21pZ3JhdGVXYXJuKCJqUXVlcnkuZGF0YSgpIGFsd2F5cyBzZXRzL2dldHMgY2FtZWxDYXNlZCBuYW1lczogIituYW1lKTtpZihhcmd1bWVudHMubGVuZ3RoPjIpe2N1ckRhdGFbbmFtZV09dmFsdWU7fQpyZXR1cm4gY3VyRGF0YVtuYW1lXTt9fQpyZXR1cm4gb2xkRGF0YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtpZihqUXVlcnkuZngpe3ZhciBpbnRlcnZhbFZhbHVlLGludGVydmFsTXNnLG9sZFR3ZWVuUnVuPWpRdWVyeS5Ud2Vlbi5wcm90b3R5cGUucnVuLGxpbmVhckVhc2luZz1mdW5jdGlvbihwY3Qpe3JldHVybiBwY3Q7fTtqUXVlcnkuVHdlZW4ucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe2lmKGpRdWVyeS5lYXNpbmdbdGhpcy5lYXNpbmddLmxlbmd0aD4xKXttaWdyYXRlV2FybigiJ2pRdWVyeS5lYXNpbmcuIit0aGlzLmVhc2luZy50b1N0cmluZygpKyInIHNob3VsZCB1c2Ugb25seSBvbmUgYXJndW1lbnQiKTtqUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXT1saW5lYXJFYXNpbmc7fQpvbGRUd2VlblJ1bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtpbnRlcnZhbFZhbHVlPWpRdWVyeS5meC5pbnRlcnZhbHx8MTM7aW50ZXJ2YWxNc2c9ImpRdWVyeS5meC5pbnRlcnZhbCBpcyBkZXByZWNhdGVkIjtpZih3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoalF1ZXJ5LmZ4LCJpbnRlcnZhbCIse2NvbmZpZ3VyYWJsZTp0cnVlLGVudW1lcmFibGU6dHJ1ZSxnZXQ6ZnVuY3Rpb24oKXtpZighd2luZG93LmRvY3VtZW50LmhpZGRlbil7bWlncmF0ZVdhcm4oaW50ZXJ2YWxNc2cpO30KcmV0dXJuIGludGVydmFsVmFsdWU7fSxzZXQ6ZnVuY3Rpb24obmV3VmFsdWUpe21pZ3JhdGVXYXJuKGludGVydmFsTXNnKTtpbnRlcnZhbFZhbHVlPW5ld1ZhbHVlO319KTt9fQp2YXIgb2xkTG9hZD1qUXVlcnkuZm4ubG9hZCxvbGRFdmVudEFkZD1qUXVlcnkuZXZlbnQuYWRkLG9yaWdpbmFsRml4PWpRdWVyeS5ldmVudC5maXg7alF1ZXJ5LmV2ZW50LnByb3BzPVtdO2pRdWVyeS5ldmVudC5maXhIb29rcz17fTttaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV2ZW50LnByb3BzLCJjb25jYXQiLGpRdWVyeS5ldmVudC5wcm9wcy5jb25jYXQsImpRdWVyeS5ldmVudC5wcm9wcy5jb25jYXQoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkIik7alF1ZXJ5LmV2ZW50LmZpeD1mdW5jdGlvbihvcmlnaW5hbEV2ZW50KXt2YXIgZXZlbnQsdHlwZT1vcmlnaW5hbEV2ZW50LnR5cGUsZml4SG9vaz10aGlzLmZpeEhvb2tzW3R5cGVdLHByb3BzPWpRdWVyeS5ldmVudC5wcm9wcztpZihwcm9wcy5sZW5ndGgpe21pZ3JhdGVXYXJuKCJqUXVlcnkuZXZlbnQucHJvcHMgYXJlIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQ6ICIrcHJvcHMuam9pbigpKTt3aGlsZShwcm9wcy5sZW5ndGgpe2pRdWVyeS5ldmVudC5hZGRQcm9wKHByb3BzLnBvcCgpKTt9fQppZihmaXhIb29rJiYhZml4SG9vay5fbWlncmF0ZWRfKXtmaXhIb29rLl9taWdyYXRlZF89dHJ1ZTttaWdyYXRlV2FybigialF1ZXJ5LmV2ZW50LmZpeEhvb2tzIGFyZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkOiAiK3R5cGUpO2lmKChwcm9wcz1maXhIb29rLnByb3BzKSYmcHJvcHMubGVuZ3RoKXt3aGlsZShwcm9wcy5sZW5ndGgpe2pRdWVyeS5ldmVudC5hZGRQcm9wKHByb3BzLnBvcCgpKTt9fX0KZXZlbnQ9b3JpZ2luYWxGaXguY2FsbCh0aGlzLG9yaWdpbmFsRXZlbnQpO3JldHVybiBmaXhIb29rJiZmaXhIb29rLmZpbHRlcj9maXhIb29rLmZpbHRlcihldmVudCxvcmlnaW5hbEV2ZW50KTpldmVudDt9O2pRdWVyeS5ldmVudC5hZGQ9ZnVuY3Rpb24oZWxlbSx0eXBlcyl7aWYoZWxlbT09PXdpbmRvdyYmdHlwZXM9PT0ibG9hZCImJndpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIil7bWlncmF0ZVdhcm4oImpRdWVyeSh3aW5kb3cpLm9uKCdsb2FkJy4uLikgY2FsbGVkIGFmdGVyIGxvYWQgZXZlbnQgb2NjdXJyZWQiKTt9CnJldHVybiBvbGRFdmVudEFkZC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtqUXVlcnkuZWFjaChbImxvYWQiLCJ1bmxvYWQiLCJlcnJvciJdLGZ1bmN0aW9uKF8sbmFtZSl7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKCl7dmFyIGFyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO2lmKG5hbWU9PT0ibG9hZCImJnR5cGVvZiBhcmdzWzBdPT09InN0cmluZyIpe3JldHVybiBvbGRMb2FkLmFwcGx5KHRoaXMsYXJncyk7fQptaWdyYXRlV2FybigialF1ZXJ5LmZuLiIrbmFtZSsiKCkgaXMgZGVwcmVjYXRlZCIpO2FyZ3Muc3BsaWNlKDAsMCxuYW1lKTtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gdGhpcy5vbi5hcHBseSh0aGlzLGFyZ3MpO30KdGhpcy50cmlnZ2VySGFuZGxlci5hcHBseSh0aGlzLGFyZ3MpO3JldHVybiB0aGlzO307fSk7alF1ZXJ5LmVhY2goKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayAiKyJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSAiKyJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Iikuc3BsaXQoIiAiKSxmdW5jdGlvbihfaSxuYW1lKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oZGF0YSxmbil7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi4iK25hbWUrIigpIGV2ZW50IHNob3J0aGFuZCBpcyBkZXByZWNhdGVkIik7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKG5hbWUsbnVsbCxkYXRhLGZuKTp0aGlzLnRyaWdnZXIobmFtZSk7fTt9KTtqUXVlcnkoZnVuY3Rpb24oKXtqUXVlcnkod2luZG93LmRvY3VtZW50KS50cmlnZ2VySGFuZGxlcigicmVhZHkiKTt9KTtqUXVlcnkuZXZlbnQuc3BlY2lhbC5yZWFkeT17c2V0dXA6ZnVuY3Rpb24oKXtpZih0aGlzPT09d2luZG93LmRvY3VtZW50KXttaWdyYXRlV2FybigiJ3JlYWR5JyBldmVudCBpcyBkZXByZWNhdGVkIik7fX19O2pRdWVyeS5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24odHlwZXMsZGF0YSxmbil7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi5iaW5kKCkgaXMgZGVwcmVjYXRlZCIpO3JldHVybiB0aGlzLm9uKHR5cGVzLG51bGwsZGF0YSxmbik7fSx1bmJpbmQ6ZnVuY3Rpb24odHlwZXMsZm4pe21pZ3JhdGVXYXJuKCJqUXVlcnkuZm4udW5iaW5kKCkgaXMgZGVwcmVjYXRlZCIpO3JldHVybiB0aGlzLm9mZih0eXBlcyxudWxsLGZuKTt9LGRlbGVnYXRlOmZ1bmN0aW9uKHNlbGVjdG9yLHR5cGVzLGRhdGEsZm4pe21pZ3JhdGVXYXJuKCJqUXVlcnkuZm4uZGVsZWdhdGUoKSBpcyBkZXByZWNhdGVkIik7cmV0dXJuIHRoaXMub24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbik7fSx1bmRlbGVnYXRlOmZ1bmN0aW9uKHNlbGVjdG9yLHR5cGVzLGZuKXttaWdyYXRlV2FybigialF1ZXJ5LmZuLnVuZGVsZWdhdGUoKSBpcyBkZXByZWNhdGVkIik7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg9PT0xP3RoaXMub2ZmKHNlbGVjdG9yLCIqKiIpOnRoaXMub2ZmKHR5cGVzLHNlbGVjdG9yfHwiKioiLGZuKTt9LGhvdmVyOmZ1bmN0aW9uKGZuT3Zlcixmbk91dCl7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi5ob3ZlcigpIGlzIGRlcHJlY2F0ZWQiKTtyZXR1cm4gdGhpcy5vbigibW91c2VlbnRlciIsZm5PdmVyKS5vbigibW91c2VsZWF2ZSIsZm5PdXR8fGZuT3Zlcik7fX0pO3ZhciByeGh0bWxUYWc9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSopW14+XSopXC8+L2dpLG9yaWdIdG1sUHJlZmlsdGVyPWpRdWVyeS5odG1sUHJlZmlsdGVyLG1ha2VNYXJrdXA9ZnVuY3Rpb24oaHRtbCl7dmFyIGRvYz13aW5kb3cuZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtkb2MuYm9keS5pbm5lckhUTUw9aHRtbDtyZXR1cm4gZG9jLmJvZHkmJmRvYy5ib2R5LmlubmVySFRNTDt9LHdhcm5JZkNoYW5nZWQ9ZnVuY3Rpb24oaHRtbCl7dmFyIGNoYW5nZWQ9aHRtbC5yZXBsYWNlKHJ4aHRtbFRhZywiPCQxPjwvJDI+Iik7aWYoY2hhbmdlZCE9PWh0bWwmJm1ha2VNYXJrdXAoaHRtbCkhPT1tYWtlTWFya3VwKGNoYW5nZWQpKXttaWdyYXRlV2FybigiSFRNTCB0YWdzIG11c3QgYmUgcHJvcGVybHkgbmVzdGVkIGFuZCBjbG9zZWQ6ICIraHRtbCk7fX07alF1ZXJ5LlVOU0FGRV9yZXN0b3JlTGVnYWN5SHRtbFByZWZpbHRlcj1mdW5jdGlvbigpe2pRdWVyeS5odG1sUHJlZmlsdGVyPWZ1bmN0aW9uKGh0bWwpe3dhcm5JZkNoYW5nZWQoaHRtbCk7cmV0dXJuIGh0bWwucmVwbGFjZShyeGh0bWxUYWcsIjwkMT48LyQyPiIpO307fTtqUXVlcnkuaHRtbFByZWZpbHRlcj1mdW5jdGlvbihodG1sKXt3YXJuSWZDaGFuZ2VkKGh0bWwpO3JldHVybiBvcmlnSHRtbFByZWZpbHRlcihodG1sKTt9O3ZhciBvbGRPZmZzZXQ9alF1ZXJ5LmZuLm9mZnNldDtqUXVlcnkuZm4ub2Zmc2V0PWZ1bmN0aW9uKCl7dmFyIGVsZW09dGhpc1swXTtpZihlbGVtJiYoIWVsZW0ubm9kZVR5cGV8fCFlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCkpe21pZ3JhdGVXYXJuKCJqUXVlcnkuZm4ub2Zmc2V0KCkgcmVxdWlyZXMgYSB2YWxpZCBET00gZWxlbWVudCIpO3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3RoaXM6dW5kZWZpbmVkO30KcmV0dXJuIG9sZE9mZnNldC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtpZihqUXVlcnkuYWpheCl7dmFyIG9sZFBhcmFtPWpRdWVyeS5wYXJhbTtqUXVlcnkucGFyYW09ZnVuY3Rpb24oZGF0YSx0cmFkaXRpb25hbCl7dmFyIGFqYXhUcmFkaXRpb25hbD1qUXVlcnkuYWpheFNldHRpbmdzJiZqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO2lmKHRyYWRpdGlvbmFsPT09dW5kZWZpbmVkJiZhamF4VHJhZGl0aW9uYWwpe21pZ3JhdGVXYXJuKCJqUXVlcnkucGFyYW0oKSBubyBsb25nZXIgdXNlcyBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsIik7dHJhZGl0aW9uYWw9YWpheFRyYWRpdGlvbmFsO30KcmV0dXJuIG9sZFBhcmFtLmNhbGwodGhpcyxkYXRhLHRyYWRpdGlvbmFsKTt9O30KdmFyIG9sZFNlbGY9alF1ZXJ5LmZuLmFuZFNlbGZ8fGpRdWVyeS5mbi5hZGRCYWNrO2pRdWVyeS5mbi5hbmRTZWxmPWZ1bmN0aW9uKCl7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi5hbmRTZWxmKCkgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZCwgdXNlIGpRdWVyeS5mbi5hZGRCYWNrKCkiKTtyZXR1cm4gb2xkU2VsZi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtpZihqUXVlcnkuRGVmZXJyZWQpe3ZhciBvbGREZWZlcnJlZD1qUXVlcnkuRGVmZXJyZWQsdHVwbGVzPVtbInJlc29sdmUiLCJkb25lIixqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsalF1ZXJ5LkNhbGxiYWNrcygibWVtb3J5IiksalF1ZXJ5LkNhbGxiYWNrcygibWVtb3J5IildXTtqUXVlcnkuRGVmZXJyZWQ9ZnVuY3Rpb24oZnVuYyl7dmFyIGRlZmVycmVkPW9sZERlZmVycmVkKCkscHJvbWlzZT1kZWZlcnJlZC5wcm9taXNlKCk7ZGVmZXJyZWQucGlwZT1wcm9taXNlLnBpcGU9ZnVuY3Rpb24oKXt2YXIgZm5zPWFyZ3VtZW50czttaWdyYXRlV2FybigiZGVmZXJyZWQucGlwZSgpIGlzIGRlcHJlY2F0ZWQiKTtyZXR1cm4galF1ZXJ5LkRlZmVycmVkKGZ1bmN0aW9uKG5ld0RlZmVyKXtqUXVlcnkuZWFjaCh0dXBsZXMsZnVuY3Rpb24oaSx0dXBsZSl7dmFyIGZuPXR5cGVvZiBmbnNbaV09PT0iZnVuY3Rpb24iJiZmbnNbaV07ZGVmZXJyZWRbdHVwbGVbMV1dKGZ1bmN0aW9uKCl7dmFyIHJldHVybmVkPWZuJiZmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYocmV0dXJuZWQmJnR5cGVvZiByZXR1cm5lZC5wcm9taXNlPT09ImZ1bmN0aW9uIil7cmV0dXJuZWQucHJvbWlzZSgpLmRvbmUobmV3RGVmZXIucmVzb2x2ZSkuZmFpbChuZXdEZWZlci5yZWplY3QpLnByb2dyZXNzKG5ld0RlZmVyLm5vdGlmeSk7fWVsc2V7bmV3RGVmZXJbdHVwbGVbMF0rIldpdGgiXSh0aGlzPT09cHJvbWlzZT9uZXdEZWZlci5wcm9taXNlKCk6dGhpcyxmbj9bcmV0dXJuZWRdOmFyZ3VtZW50cyk7fX0pO30pO2Zucz1udWxsO30pLnByb21pc2UoKTt9O2lmKGZ1bmMpe2Z1bmMuY2FsbChkZWZlcnJlZCxkZWZlcnJlZCk7fQpyZXR1cm4gZGVmZXJyZWQ7fTtqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1vbGREZWZlcnJlZC5leGNlcHRpb25Ib29rO30KcmV0dXJuIGpRdWVyeTt9KTs7d2luZG93LmFkZENvbW1lbnQ9KGZ1bmN0aW9uKHdpbmRvdyl7dmFyIGRvY3VtZW50PXdpbmRvdy5kb2N1bWVudDt2YXIgY29uZmlnPXtjb21tZW50UmVwbHlDbGFzczonY29tbWVudC1yZXBseS1saW5rJyxjb21tZW50UmVwbHlUaXRsZUlkOidyZXBseS10aXRsZScsY2FuY2VsUmVwbHlJZDonY2FuY2VsLWNvbW1lbnQtcmVwbHktbGluaycsY29tbWVudEZvcm1JZDonY29tbWVudGZvcm0nLHRlbXBvcmFyeUZvcm1JZDond3AtdGVtcC1mb3JtLWRpdicscGFyZW50SWRGaWVsZElkOidjb21tZW50X3BhcmVudCcscG9zdElkRmllbGRJZDonY29tbWVudF9wb3N0X0lEJ307dmFyIE11dGF0aW9uT2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuTW96TXV0YXRpb25PYnNlcnZlcjt2YXIgY3V0c1RoZU11c3RhcmQ9J3F1ZXJ5U2VsZWN0b3InaW4gZG9jdW1lbnQmJidhZGRFdmVudExpc3RlbmVyJ2luIHdpbmRvdzt2YXIgc3VwcG9ydHNEYXRhc2V0PSEhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRhdGFzZXQ7dmFyIGNhbmNlbEVsZW1lbnQ7dmFyIGNvbW1lbnRGb3JtRWxlbWVudDt2YXIgcmVzcG9uZEVsZW1lbnQ7dmFyIG9ic2VydmVyO2lmKGN1dHNUaGVNdXN0YXJkJiZkb2N1bWVudC5yZWFkeVN0YXRlIT09J2xvYWRpbmcnKXtyZWFkeSgpO31lbHNlIGlmKGN1dHNUaGVNdXN0YXJkKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcscmVhZHksZmFsc2UpO30KZnVuY3Rpb24gcmVhZHkoKXtpbml0KCk7b2JzZXJ2ZUNoYW5nZXMoKTt9CmZ1bmN0aW9uIGluaXQoY29udGV4dCl7aWYoIWN1dHNUaGVNdXN0YXJkKXtyZXR1cm47fQpjYW5jZWxFbGVtZW50PWdldEVsZW1lbnRCeUlkKGNvbmZpZy5jYW5jZWxSZXBseUlkKTtjb21tZW50Rm9ybUVsZW1lbnQ9Z2V0RWxlbWVudEJ5SWQoY29uZmlnLmNvbW1lbnRGb3JtSWQpO2lmKCFjYW5jZWxFbGVtZW50KXtyZXR1cm47fQpjYW5jZWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLGNhbmNlbEV2ZW50KTtjYW5jZWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjYW5jZWxFdmVudCk7dmFyIHN1Ym1pdEZvcm1IYW5kbGVyPWZ1bmN0aW9uKGUpe2lmKChlLm1ldGFLZXl8fGUuY3RybEtleSkmJmUua2V5Q29kZT09PTEzKXtjb21tZW50Rm9ybUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsc3VibWl0Rm9ybUhhbmRsZXIpO2UucHJldmVudERlZmF1bHQoKTtjb21tZW50Rm9ybUVsZW1lbnQuc3VibWl0LmNsaWNrKCk7cmV0dXJuIGZhbHNlO319O2lmKGNvbW1lbnRGb3JtRWxlbWVudCl7Y29tbWVudEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHN1Ym1pdEZvcm1IYW5kbGVyKTt9CnZhciBsaW5rcz1yZXBseUxpbmtzKGNvbnRleHQpO3ZhciBlbGVtZW50O2Zvcih2YXIgaT0wLGw9bGlua3MubGVuZ3RoO2k8bDtpKyspe2VsZW1lbnQ9bGlua3NbaV07ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxjbGlja0V2ZW50KTtlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjbGlja0V2ZW50KTt9fQpmdW5jdGlvbiByZXBseUxpbmtzKGNvbnRleHQpe3ZhciBzZWxlY3RvckNsYXNzPWNvbmZpZy5jb21tZW50UmVwbHlDbGFzczt2YXIgYWxsUmVwbHlMaW5rcztpZighY29udGV4dHx8IWNvbnRleHQuY2hpbGROb2Rlcyl7Y29udGV4dD1kb2N1bWVudDt9CmlmKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe2FsbFJlcGx5TGlua3M9Y29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHNlbGVjdG9yQ2xhc3MpO30KZWxzZXthbGxSZXBseUxpbmtzPWNvbnRleHQucXVlcnlTZWxlY3RvckFsbCgnLicrc2VsZWN0b3JDbGFzcyk7fQpyZXR1cm4gYWxsUmVwbHlMaW5rczt9CmZ1bmN0aW9uIGNhbmNlbEV2ZW50KGV2ZW50KXt2YXIgY2FuY2VsTGluaz10aGlzO3ZhciB0ZW1wb3JhcnlGb3JtSWQ9Y29uZmlnLnRlbXBvcmFyeUZvcm1JZDt2YXIgdGVtcG9yYXJ5RWxlbWVudD1nZXRFbGVtZW50QnlJZCh0ZW1wb3JhcnlGb3JtSWQpO2lmKCF0ZW1wb3JhcnlFbGVtZW50fHwhcmVzcG9uZEVsZW1lbnQpe3JldHVybjt9CmdldEVsZW1lbnRCeUlkKGNvbmZpZy5wYXJlbnRJZEZpZWxkSWQpLnZhbHVlPScwJzt2YXIgaGVhZGluZ1RleHQ9dGVtcG9yYXJ5RWxlbWVudC50ZXh0Q29udGVudDt0ZW1wb3JhcnlFbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHJlc3BvbmRFbGVtZW50LHRlbXBvcmFyeUVsZW1lbnQpO2NhbmNlbExpbmsuc3R5bGUuZGlzcGxheT0nbm9uZSc7dmFyIHJlcGx5SGVhZGluZ0VsZW1lbnQ9Z2V0RWxlbWVudEJ5SWQoY29uZmlnLmNvbW1lbnRSZXBseVRpdGxlSWQpO3ZhciByZXBseUhlYWRpbmdUZXh0Tm9kZT1yZXBseUhlYWRpbmdFbGVtZW50JiZyZXBseUhlYWRpbmdFbGVtZW50LmZpcnN0Q2hpbGQ7dmFyIHJlcGx5TGlua1RvUGFyZW50PXJlcGx5SGVhZGluZ1RleHROb2RlJiZyZXBseUhlYWRpbmdUZXh0Tm9kZS5uZXh0U2libGluZztpZihyZXBseUhlYWRpbmdUZXh0Tm9kZSYmcmVwbHlIZWFkaW5nVGV4dE5vZGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERSYmaGVhZGluZ1RleHQpe2lmKHJlcGx5TGlua1RvUGFyZW50JiYnQSc9PT1yZXBseUxpbmtUb1BhcmVudC5ub2RlTmFtZSYmcmVwbHlMaW5rVG9QYXJlbnQuaWQhPT1jb25maWcuY2FuY2VsUmVwbHlJZCl7cmVwbHlMaW5rVG9QYXJlbnQuc3R5bGUuZGlzcGxheT0nJzt9CnJlcGx5SGVhZGluZ1RleHROb2RlLnRleHRDb250ZW50PWhlYWRpbmdUZXh0O30KZXZlbnQucHJldmVudERlZmF1bHQoKTt9CmZ1bmN0aW9uIGNsaWNrRXZlbnQoZXZlbnQpe3ZhciByZXBseU5vZGU9Z2V0RWxlbWVudEJ5SWQoY29uZmlnLmNvbW1lbnRSZXBseVRpdGxlSWQpO3ZhciBkZWZhdWx0UmVwbHlIZWFkaW5nPXJlcGx5Tm9kZSYmcmVwbHlOb2RlLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQ7dmFyIHJlcGx5TGluaz10aGlzLGNvbW1JZD1nZXREYXRhQXR0cmlidXRlKHJlcGx5TGluaywnYmVsb3dlbGVtZW50JykscGFyZW50SWQ9Z2V0RGF0YUF0dHJpYnV0ZShyZXBseUxpbmssJ2NvbW1lbnRpZCcpLHJlc3BvbmRJZD1nZXREYXRhQXR0cmlidXRlKHJlcGx5TGluaywncmVzcG9uZGVsZW1lbnQnKSxwb3N0SWQ9Z2V0RGF0YUF0dHJpYnV0ZShyZXBseUxpbmssJ3Bvc3RpZCcpLHJlcGx5VG89Z2V0RGF0YUF0dHJpYnV0ZShyZXBseUxpbmssJ3JlcGx5dG8nKXx8ZGVmYXVsdFJlcGx5SGVhZGluZyxmb2xsb3c7aWYoIWNvbW1JZHx8IXBhcmVudElkfHwhcmVzcG9uZElkfHwhcG9zdElkKXtyZXR1cm47fQpmb2xsb3c9d2luZG93LmFkZENvbW1lbnQubW92ZUZvcm0oY29tbUlkLHBhcmVudElkLHJlc3BvbmRJZCxwb3N0SWQscmVwbHlUbyk7aWYoZmFsc2U9PT1mb2xsb3cpe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7fX0KZnVuY3Rpb24gb2JzZXJ2ZUNoYW5nZXMoKXtpZighTXV0YXRpb25PYnNlcnZlcil7cmV0dXJuO30KdmFyIG9ic2VydmVyT3B0aW9ucz17Y2hpbGRMaXN0OnRydWUsc3VidHJlZTp0cnVlfTtvYnNlcnZlcj1uZXcgTXV0YXRpb25PYnNlcnZlcihoYW5kbGVDaGFuZ2VzKTtvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksb2JzZXJ2ZXJPcHRpb25zKTt9CmZ1bmN0aW9uIGhhbmRsZUNoYW5nZXMobXV0YXRpb25SZWNvcmRzKXt2YXIgaT1tdXRhdGlvblJlY29yZHMubGVuZ3RoO3doaWxlKGktLSl7aWYobXV0YXRpb25SZWNvcmRzW2ldLmFkZGVkTm9kZXMubGVuZ3RoKXtpbml0KCk7cmV0dXJuO319fQpmdW5jdGlvbiBnZXREYXRhQXR0cmlidXRlKGVsZW1lbnQsYXR0cmlidXRlKXtpZihzdXBwb3J0c0RhdGFzZXQpe3JldHVybiBlbGVtZW50LmRhdGFzZXRbYXR0cmlidXRlXTt9CmVsc2V7cmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLScrYXR0cmlidXRlKTt9fQpmdW5jdGlvbiBnZXRFbGVtZW50QnlJZChlbGVtZW50SWQpe3JldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpO30KZnVuY3Rpb24gbW92ZUZvcm0oYWRkQmVsb3dJZCxjb21tZW50SWQscmVzcG9uZElkLHBvc3RJZCxyZXBseVRvKXt2YXIgYWRkQmVsb3dFbGVtZW50PWdldEVsZW1lbnRCeUlkKGFkZEJlbG93SWQpO3Jlc3BvbmRFbGVtZW50PWdldEVsZW1lbnRCeUlkKHJlc3BvbmRJZCk7dmFyIHBhcmVudElkRmllbGQ9Z2V0RWxlbWVudEJ5SWQoY29uZmlnLnBhcmVudElkRmllbGRJZCk7dmFyIHBvc3RJZEZpZWxkPWdldEVsZW1lbnRCeUlkKGNvbmZpZy5wb3N0SWRGaWVsZElkKTt2YXIgZWxlbWVudCxjc3NIaWRkZW4sc3R5bGU7dmFyIHJlcGx5SGVhZGluZz1nZXRFbGVtZW50QnlJZChjb25maWcuY29tbWVudFJlcGx5VGl0bGVJZCk7dmFyIHJlcGx5SGVhZGluZ1RleHROb2RlPXJlcGx5SGVhZGluZyYmcmVwbHlIZWFkaW5nLmZpcnN0Q2hpbGQ7dmFyIHJlcGx5TGlua1RvUGFyZW50PXJlcGx5SGVhZGluZ1RleHROb2RlJiZyZXBseUhlYWRpbmdUZXh0Tm9kZS5uZXh0U2libGluZztpZighYWRkQmVsb3dFbGVtZW50fHwhcmVzcG9uZEVsZW1lbnR8fCFwYXJlbnRJZEZpZWxkKXtyZXR1cm47fQppZigndW5kZWZpbmVkJz09PXR5cGVvZiByZXBseVRvKXtyZXBseVRvPXJlcGx5SGVhZGluZ1RleHROb2RlJiZyZXBseUhlYWRpbmdUZXh0Tm9kZS50ZXh0Q29udGVudDt9CmFkZFBsYWNlSG9sZGVyKHJlc3BvbmRFbGVtZW50KTtpZihwb3N0SWQmJnBvc3RJZEZpZWxkKXtwb3N0SWRGaWVsZC52YWx1ZT1wb3N0SWQ7fQpwYXJlbnRJZEZpZWxkLnZhbHVlPWNvbW1lbnRJZDtjYW5jZWxFbGVtZW50LnN0eWxlLmRpc3BsYXk9Jyc7YWRkQmVsb3dFbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHJlc3BvbmRFbGVtZW50LGFkZEJlbG93RWxlbWVudC5uZXh0U2libGluZyk7aWYocmVwbHlIZWFkaW5nVGV4dE5vZGUmJnJlcGx5SGVhZGluZ1RleHROb2RlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe2lmKHJlcGx5TGlua1RvUGFyZW50JiYnQSc9PT1yZXBseUxpbmtUb1BhcmVudC5ub2RlTmFtZSYmcmVwbHlMaW5rVG9QYXJlbnQuaWQhPT1jb25maWcuY2FuY2VsUmVwbHlJZCl7cmVwbHlMaW5rVG9QYXJlbnQuc3R5bGUuZGlzcGxheT0nbm9uZSc7fQpyZXBseUhlYWRpbmdUZXh0Tm9kZS50ZXh0Q29udGVudD1yZXBseVRvO30KY2FuY2VsRWxlbWVudC5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlO307dHJ5e2Zvcih2YXIgaT0wO2k8Y29tbWVudEZvcm1FbGVtZW50LmVsZW1lbnRzLmxlbmd0aDtpKyspe2VsZW1lbnQ9Y29tbWVudEZvcm1FbGVtZW50LmVsZW1lbnRzW2ldO2Nzc0hpZGRlbj1mYWxzZTtpZignZ2V0Q29tcHV0ZWRTdHlsZSdpbiB3aW5kb3cpe3N0eWxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO31lbHNlIGlmKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUpe3N0eWxlPWVsZW1lbnQuY3VycmVudFN0eWxlO30KaWYoKGVsZW1lbnQub2Zmc2V0V2lkdGg8PTAmJmVsZW1lbnQub2Zmc2V0SGVpZ2h0PD0wKXx8c3R5bGUudmlzaWJpbGl0eT09PSdoaWRkZW4nKXtjc3NIaWRkZW49dHJ1ZTt9CmlmKCdoaWRkZW4nPT09ZWxlbWVudC50eXBlfHxlbGVtZW50LmRpc2FibGVkfHxjc3NIaWRkZW4pe2NvbnRpbnVlO30KZWxlbWVudC5mb2N1cygpO2JyZWFrO319CmNhdGNoKGUpe30KcmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gYWRkUGxhY2VIb2xkZXIocmVzcG9uZEVsZW1lbnQpe3ZhciB0ZW1wb3JhcnlGb3JtSWQ9Y29uZmlnLnRlbXBvcmFyeUZvcm1JZDt2YXIgdGVtcG9yYXJ5RWxlbWVudD1nZXRFbGVtZW50QnlJZCh0ZW1wb3JhcnlGb3JtSWQpO3ZhciByZXBseUVsZW1lbnQ9Z2V0RWxlbWVudEJ5SWQoY29uZmlnLmNvbW1lbnRSZXBseVRpdGxlSWQpO3ZhciBpbml0aWFsSGVhZGluZ1RleHQ9cmVwbHlFbGVtZW50P3JlcGx5RWxlbWVudC5maXJzdENoaWxkLnRleHRDb250ZW50OicnO2lmKHRlbXBvcmFyeUVsZW1lbnQpe3JldHVybjt9CnRlbXBvcmFyeUVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7dGVtcG9yYXJ5RWxlbWVudC5pZD10ZW1wb3JhcnlGb3JtSWQ7dGVtcG9yYXJ5RWxlbWVudC5zdHlsZS5kaXNwbGF5PSdub25lJzt0ZW1wb3JhcnlFbGVtZW50LnRleHRDb250ZW50PWluaXRpYWxIZWFkaW5nVGV4dDtyZXNwb25kRWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ZW1wb3JhcnlFbGVtZW50LHJlc3BvbmRFbGVtZW50KTt9CnJldHVybntpbml0OmluaXQsbW92ZUZvcm06bW92ZUZvcm19O30pKHdpbmRvdyk7Ow==";s:12:"dependencies";a:0:{}}