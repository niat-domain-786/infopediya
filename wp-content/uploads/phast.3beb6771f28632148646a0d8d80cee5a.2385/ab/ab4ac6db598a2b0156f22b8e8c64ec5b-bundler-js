0 3 75590c681e7476af9f4a35c090110523 a:5:{s:8:"dataType";s:8:"resource";s:3:"url";s:64:"https://infopediya.com/wp-content/mmr/5ae72104-1607680429.min.js";s:8:"mimeType";s:22:"application/javascript";s:4:"blob";s:229160:"LyohIFRoaXMgZmlsZSBpcyBhdXRvLWdlbmVyYXRlZCAqLwohZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZSgiaG92ZXJpbnRlbnQiLFsibW9kdWxlIl0sdCk7ZWxzZSBpZigidW5kZWZpbmVkIiE9dHlwZW9mIGV4cG9ydHMpdChtb2R1bGUpO2Vsc2V7dmFyIG49e2V4cG9ydHM6e319O3QobiksZS5ob3ZlcmludGVudD1uLmV4cG9ydHN9fSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF07Zm9yKHZhciBvIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sbykmJihlW29dPW5bb10pfXJldHVybiBlfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSxuLG8pe2Z1bmN0aW9uIGkoZSx0KXtyZXR1cm4geSYmKHk9Y2xlYXJUaW1lb3V0KHkpKSxiPTAscD92b2lkIDA6by5jYWxsKGUsdCl9ZnVuY3Rpb24gcihlKXttPWUuY2xpZW50WCxkPWUuY2xpZW50WX1mdW5jdGlvbiB1KGUsdCl7aWYoeSYmKHk9Y2xlYXJUaW1lb3V0KHkpKSxNYXRoLmFicyhoLW0pK01hdGguYWJzKEUtZCk8eC5zZW5zaXRpdml0eSlyZXR1cm4gYj0xLHA/dm9pZCAwOm4uY2FsbChlLHQpO2g9bSxFPWQseT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dShlLHQpfSx4LmludGVydmFsKX1mdW5jdGlvbiBzKHQpe3JldHVybiBMPSEwLHkmJih5PWNsZWFyVGltZW91dCh5KSksZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHIsITEpLDEhPT1iJiYoaD10LmNsaWVudFgsRT10LmNsaWVudFksZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHIsITEpLHk9c2V0VGltZW91dChmdW5jdGlvbigpe3UoZSx0KX0seC5pbnRlcnZhbCkpLHRoaXN9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gTD0hMSx5JiYoeT1jbGVhclRpbWVvdXQoeSkpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixyLCExKSwxPT09YiYmKHk9c2V0VGltZW91dChmdW5jdGlvbigpe2koZSx0KX0seC50aW1lb3V0KSksdGhpc31mdW5jdGlvbiB2KHQpe0x8fChwPSEwLG4uY2FsbChlLHQpKX1mdW5jdGlvbiBhKHQpeyFMJiZwJiYocD0hMSxvLmNhbGwoZSx0KSl9ZnVuY3Rpb24gZigpe2UuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHYsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsYSwhMSl9ZnVuY3Rpb24gbCgpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHYsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmx1ciIsYSwhMSl9dmFyIG0sZCxoLEUsTD0hMSxwPSExLFQ9e30sYj0wLHk9MCx4PXtzZW5zaXRpdml0eTo3LGludGVydmFsOjEwMCx0aW1lb3V0OjAsaGFuZGxlRm9jdXM6ITF9O3JldHVybiBULm9wdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIG49ZS5oYW5kbGVGb2N1cyE9PXguaGFuZGxlRm9jdXM7cmV0dXJuIHg9dCh7fSx4LGUpLG4mJih4LmhhbmRsZUZvY3VzP2YoKTpsKCkpLFR9LFQucmVtb3ZlPWZ1bmN0aW9uKCl7ZSYmKGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIixzLCExKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IixjLCExKSxsKCkpfSxlJiYoZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLHMsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLGMsITEpKSxUfX0pOyhmdW5jdGlvbihkb2N1bWVudCx3aW5kb3csbmF2aWdhdG9yKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJyxmdW5jdGlvbigpe3ZhciBhZG1pbkJhcj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3BhZG1pbmJhcicpLHRvcE1lbnVJdGVtcyxhbGxNZW51SXRlbXMsYWRtaW5CYXJMb2dvdXQsYWRtaW5CYXJTZWFyY2hGb3JtLHNob3J0bGluayxza2lwTGluayxtb2JpbGVFdmVudCxhZG1pbkJhclNlYXJjaElucHV0LGk7aWYoIWFkbWluQmFyfHwhKCdxdWVyeVNlbGVjdG9yQWxsJ2luIGFkbWluQmFyKSl7cmV0dXJufQp0b3BNZW51SXRlbXM9YWRtaW5CYXIucXVlcnlTZWxlY3RvckFsbCgnbGkubWVudXBvcCcpO2FsbE1lbnVJdGVtcz1hZG1pbkJhci5xdWVyeVNlbGVjdG9yQWxsKCcuYWItaXRlbScpO2FkbWluQmFyTG9nb3V0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cC1hZG1pbi1iYXItbG9nb3V0Jyk7YWRtaW5CYXJTZWFyY2hGb3JtPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZG1pbmJhcnNlYXJjaCcpO3Nob3J0bGluaz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3AtYWRtaW4tYmFyLWdldC1zaG9ydGxpbmsnKTtza2lwTGluaz1hZG1pbkJhci5xdWVyeVNlbGVjdG9yKCcuc2NyZWVuLXJlYWRlci1zaG9ydGN1dCcpO21vYmlsZUV2ZW50PS9Nb2JpbGVcLy4rU2FmYXJpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpPyd0b3VjaHN0YXJ0JzonY2xpY2snO3JlbW92ZUNsYXNzKGFkbWluQmFyLCdub2pzJyk7aWYoJ29udG91Y2hzdGFydCdpbiB3aW5kb3cpe2RvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihtb2JpbGVFdmVudCxmdW5jdGlvbihlKXtpZighZ2V0Q2xvc2VzdChlLnRhcmdldCwnbGkubWVudXBvcCcpKXtyZW1vdmVBbGxIb3ZlckNsYXNzKHRvcE1lbnVJdGVtcyl9fSk7YWRtaW5CYXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsZnVuY3Rpb24gYmluZE1vYmlsZUV2ZW50cygpe2Zvcih2YXIgaT0wO2k8dG9wTWVudUl0ZW1zLmxlbmd0aDtpKyspe3RvcE1lbnVJdGVtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsbW9iaWxlSG92ZXIuYmluZChudWxsLHRvcE1lbnVJdGVtcykpfQphZG1pbkJhci5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JyxiaW5kTW9iaWxlRXZlbnRzKX0pfQphZG1pbkJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2Nyb2xsVG9Ub3ApO2ZvcihpPTA7aTx0b3BNZW51SXRlbXMubGVuZ3RoO2krKyl7d2luZG93LmhvdmVyaW50ZW50KHRvcE1lbnVJdGVtc1tpXSxhZGRDbGFzcy5iaW5kKG51bGwsdG9wTWVudUl0ZW1zW2ldLCdob3ZlcicpLHJlbW92ZUNsYXNzLmJpbmQobnVsbCx0b3BNZW51SXRlbXNbaV0sJ2hvdmVyJykpLm9wdGlvbnMoe3RpbWVvdXQ6MTgwfSk7dG9wTWVudUl0ZW1zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRvZ2dsZUhvdmVySWZFbnRlcil9CmZvcihpPTA7aTxhbGxNZW51SXRlbXMubGVuZ3RoO2krKyl7YWxsTWVudUl0ZW1zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHJlbW92ZUhvdmVySWZFc2NhcGUpfQppZihhZG1pbkJhclNlYXJjaEZvcm0pe2FkbWluQmFyU2VhcmNoSW5wdXQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkbWluYmFyLXNlYXJjaCcpO2FkbWluQmFyU2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLGZ1bmN0aW9uKCl7YWRkQ2xhc3MoYWRtaW5CYXJTZWFyY2hGb3JtLCdhZG1pbmJhci1mb2N1c2VkJyl9KTthZG1pbkJhclNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLGZ1bmN0aW9uKCl7cmVtb3ZlQ2xhc3MoYWRtaW5CYXJTZWFyY2hGb3JtLCdhZG1pbmJhci1mb2N1c2VkJyl9KX0KaWYoc2tpcExpbmspe3NraXBMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLGZvY3VzVGFyZ2V0QWZ0ZXJFbnRlcil9CmlmKHNob3J0bGluayl7c2hvcnRsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxjbGlja1Nob3J0bGluayl9CmlmKHdpbmRvdy5sb2NhdGlvbi5oYXNoKXt3aW5kb3cuc2Nyb2xsQnkoMCwtMzIpfQppZihhZG1pbkJhckxvZ291dCl7YWRtaW5CYXJMb2dvdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGVtcHR5U2Vzc2lvblN0b3JhZ2UpfX0pO2Z1bmN0aW9uIHJlbW92ZUhvdmVySWZFc2NhcGUoZXZlbnQpe3ZhciB3cmFwcGVyO2lmKGV2ZW50LndoaWNoIT09Mjcpe3JldHVybn0Kd3JhcHBlcj1nZXRDbG9zZXN0KGV2ZW50LnRhcmdldCwnLm1lbnVwb3AnKTtpZighd3JhcHBlcil7cmV0dXJufQp3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5tZW51cG9wID4gLmFiLWl0ZW0nKS5mb2N1cygpO3JlbW92ZUNsYXNzKHdyYXBwZXIsJ2hvdmVyJyl9CmZ1bmN0aW9uIHRvZ2dsZUhvdmVySWZFbnRlcihldmVudCl7dmFyIHdyYXBwZXI7aWYoZXZlbnQud2hpY2ghPT0xMyl7cmV0dXJufQppZighIWdldENsb3Nlc3QoZXZlbnQudGFyZ2V0LCcuYWItc3ViLXdyYXBwZXInKSl7cmV0dXJufQp3cmFwcGVyPWdldENsb3Nlc3QoZXZlbnQudGFyZ2V0LCcubWVudXBvcCcpO2lmKCF3cmFwcGVyKXtyZXR1cm59CmV2ZW50LnByZXZlbnREZWZhdWx0KCk7aWYoaGFzQ2xhc3Mod3JhcHBlciwnaG92ZXInKSl7cmVtb3ZlQ2xhc3Mod3JhcHBlciwnaG92ZXInKX1lbHNle2FkZENsYXNzKHdyYXBwZXIsJ2hvdmVyJyl9fQpmdW5jdGlvbiBmb2N1c1RhcmdldEFmdGVyRW50ZXIoZXZlbnQpe3ZhciBpZCx1c2VyQWdlbnQ7aWYoZXZlbnQud2hpY2ghPT0xMyl7cmV0dXJufQppZD1ldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7dXNlckFnZW50PW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtpZih1c2VyQWdlbnQuaW5kZXhPZignYXBwbGV3ZWJraXQnKT4tMSYmaWQmJmlkLmNoYXJBdCgwKT09PScjJyl7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0YXJnZXQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQucmVwbGFjZSgnIycsJycpKTtpZih0YXJnZXQpe3RhcmdldC5zZXRBdHRyaWJ1dGUoJ3RhYkluZGV4JywnMCcpO3RhcmdldC5mb2N1cygpfX0sMTAwKX19CmZ1bmN0aW9uIG1vYmlsZUhvdmVyKHRvcE1lbnVJdGVtcyxldmVudCl7dmFyIHdyYXBwZXI7aWYoISFnZXRDbG9zZXN0KGV2ZW50LnRhcmdldCwnLmFiLXN1Yi13cmFwcGVyJykpe3JldHVybn0KZXZlbnQucHJldmVudERlZmF1bHQoKTt3cmFwcGVyPWdldENsb3Nlc3QoZXZlbnQudGFyZ2V0LCcubWVudXBvcCcpO2lmKCF3cmFwcGVyKXtyZXR1cm59CmlmKGhhc0NsYXNzKHdyYXBwZXIsJ2hvdmVyJykpe3JlbW92ZUNsYXNzKHdyYXBwZXIsJ2hvdmVyJyl9ZWxzZXtyZW1vdmVBbGxIb3ZlckNsYXNzKHRvcE1lbnVJdGVtcyk7YWRkQ2xhc3Mod3JhcHBlciwnaG92ZXInKX19CmZ1bmN0aW9uIGNsaWNrU2hvcnRsaW5rKGV2ZW50KXt2YXIgd3JhcHBlcj1ldmVudC50YXJnZXQucGFyZW50Tm9kZSxpbnB1dDtpZih3cmFwcGVyKXtpbnB1dD13cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy5zaG9ydGxpbmstaW5wdXQnKX0KaWYoIWlucHV0KXtyZXR1cm59CmlmKGV2ZW50LnByZXZlbnREZWZhdWx0KXtldmVudC5wcmV2ZW50RGVmYXVsdCgpfQpldmVudC5yZXR1cm5WYWx1ZT0hMTthZGRDbGFzcyh3cmFwcGVyLCdzZWxlY3RlZCcpO2lucHV0LmZvY3VzKCk7aW5wdXQuc2VsZWN0KCk7aW5wdXQub25ibHVyPWZ1bmN0aW9uKCl7cmVtb3ZlQ2xhc3Mod3JhcHBlciwnc2VsZWN0ZWQnKX07cmV0dXJuITF9CmZ1bmN0aW9uIGVtcHR5U2Vzc2lvblN0b3JhZ2UoKXtpZignc2Vzc2lvblN0b3JhZ2UnaW4gd2luZG93KXt0cnl7Zm9yKHZhciBrZXkgaW4gc2Vzc2lvblN0b3JhZ2Upe2lmKGtleS5pbmRleE9mKCd3cC1hdXRvc2F2ZS0nKT4tMSl7c2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpfX19Y2F0Y2goZXIpe319fQpmdW5jdGlvbiBoYXNDbGFzcyhlbGVtZW50LGNsYXNzTmFtZSl7dmFyIGNsYXNzTmFtZXM7aWYoIWVsZW1lbnQpe3JldHVybiExfQppZihlbGVtZW50LmNsYXNzTGlzdCYmZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMpe3JldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpfWVsc2UgaWYoZWxlbWVudC5jbGFzc05hbWUpe2NsYXNzTmFtZXM9ZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKTtyZXR1cm4gY2xhc3NOYW1lcy5pbmRleE9mKGNsYXNzTmFtZSk+LTF9CnJldHVybiExfQpmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LGNsYXNzTmFtZSl7aWYoIWVsZW1lbnQpe3JldHVybn0KaWYoZWxlbWVudC5jbGFzc0xpc3QmJmVsZW1lbnQuY2xhc3NMaXN0LmFkZCl7ZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSl9ZWxzZSBpZighaGFzQ2xhc3MoZWxlbWVudCxjbGFzc05hbWUpKXtpZihlbGVtZW50LmNsYXNzTmFtZSl7ZWxlbWVudC5jbGFzc05hbWUrPScgJ30KZWxlbWVudC5jbGFzc05hbWUrPWNsYXNzTmFtZX19CmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW1lbnQsY2xhc3NOYW1lKXt2YXIgdGVzdE5hbWUsY2xhc3NlcztpZighZWxlbWVudHx8IWhhc0NsYXNzKGVsZW1lbnQsY2xhc3NOYW1lKSl7cmV0dXJufQppZihlbGVtZW50LmNsYXNzTGlzdCYmZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKXtlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKX1lbHNle3Rlc3ROYW1lPScgJytjbGFzc05hbWUrJyAnO2NsYXNzZXM9JyAnK2VsZW1lbnQuY2xhc3NOYW1lKycgJzt3aGlsZShjbGFzc2VzLmluZGV4T2YodGVzdE5hbWUpPi0xKXtjbGFzc2VzPWNsYXNzZXMucmVwbGFjZSh0ZXN0TmFtZSwnJyl9CmVsZW1lbnQuY2xhc3NOYW1lPWNsYXNzZXMucmVwbGFjZSgvXltcc10rfFtcc10rJC9nLCcnKX19CmZ1bmN0aW9uIHJlbW92ZUFsbEhvdmVyQ2xhc3ModG9wTWVudUl0ZW1zKXtpZih0b3BNZW51SXRlbXMmJnRvcE1lbnVJdGVtcy5sZW5ndGgpe2Zvcih2YXIgaT0wO2k8dG9wTWVudUl0ZW1zLmxlbmd0aDtpKyspe3JlbW92ZUNsYXNzKHRvcE1lbnVJdGVtc1tpXSwnaG92ZXInKX19fQpmdW5jdGlvbiBzY3JvbGxUb1RvcChldmVudCl7aWYoZXZlbnQudGFyZ2V0JiZldmVudC50YXJnZXQuaWQhPT0nd3BhZG1pbmJhcicmJmV2ZW50LnRhcmdldC5pZCE9PSd3cC1hZG1pbi1iYXItdG9wLXNlY29uZGFyeScpe3JldHVybn0KdHJ5e3dpbmRvdy5zY3JvbGxUbyh7dG9wOi0zMixsZWZ0OjAsYmVoYXZpb3I6J3Ntb290aCd9KX1jYXRjaChlcil7d2luZG93LnNjcm9sbFRvKDAsLTMyKX19CmZ1bmN0aW9uIGdldENsb3Nlc3QoZWwsc2VsZWN0b3Ipe2lmKCF3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyl7d2luZG93LkVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXM9d2luZG93LkVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3Rvcnx8d2luZG93LkVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3Rvcnx8d2luZG93LkVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yfHx3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUub01hdGNoZXNTZWxlY3Rvcnx8d2luZG93LkVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8ZnVuY3Rpb24ocyl7dmFyIG1hdGNoZXM9KHRoaXMuZG9jdW1lbnR8fHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSxpPW1hdGNoZXMubGVuZ3RoO3doaWxlKC0taT49MCYmbWF0Y2hlcy5pdGVtKGkpIT09dGhpcyl7fQpyZXR1cm4gaT4tMX19CmZvcig7ZWwmJmVsIT09ZG9jdW1lbnQ7ZWw9ZWwucGFyZW50Tm9kZSl7aWYoZWwubWF0Y2hlcyhzZWxlY3Rvcikpe3JldHVybiBlbH19CnJldHVybiBudWxsfX0pKGRvY3VtZW50LHdpbmRvdyxuYXZpZ2F0b3IpOwovKiEKICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2My41LjEKICogaHR0cHM6Ly9qcXVlcnkuY29tLwogKgogKiBJbmNsdWRlcyBTaXp6bGUuanMKICogaHR0cHM6Ly9zaXp6bGVqcy5jb20vCiAqCiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCiAqIGh0dHBzOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIERhdGU6IDIwMjAtMDUtMDRUMjI6NDlaCiAqLwooZnVuY3Rpb24oZ2xvYmFsLGZhY3RvcnkpeyJ1c2Ugc3RyaWN0IjtpZih0eXBlb2YgbW9kdWxlPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUuZXhwb3J0cz09PSJvYmplY3QiKXttb2R1bGUuZXhwb3J0cz1nbG9iYWwuZG9jdW1lbnQ/ZmFjdG9yeShnbG9iYWwsITApOmZ1bmN0aW9uKHcpe2lmKCF3LmRvY3VtZW50KXt0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKX0KcmV0dXJuIGZhY3Rvcnkodyl9fWVsc2V7ZmFjdG9yeShnbG9iYWwpfX0pKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIj93aW5kb3c6dGhpcyxmdW5jdGlvbih3aW5kb3csbm9HbG9iYWwpeyJ1c2Ugc3RyaWN0Ijt2YXIgYXJyPVtdO3ZhciBnZXRQcm90bz1PYmplY3QuZ2V0UHJvdG90eXBlT2Y7dmFyIHNsaWNlPWFyci5zbGljZTt2YXIgZmxhdD1hcnIuZmxhdD9mdW5jdGlvbihhcnJheSl7cmV0dXJuIGFyci5mbGF0LmNhbGwoYXJyYXkpfTpmdW5jdGlvbihhcnJheSl7cmV0dXJuIGFyci5jb25jYXQuYXBwbHkoW10sYXJyYXkpfTt2YXIgcHVzaD1hcnIucHVzaDt2YXIgaW5kZXhPZj1hcnIuaW5kZXhPZjt2YXIgY2xhc3MydHlwZT17fTt2YXIgdG9TdHJpbmc9Y2xhc3MydHlwZS50b1N0cmluZzt2YXIgaGFzT3duPWNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7dmFyIGZuVG9TdHJpbmc9aGFzT3duLnRvU3RyaW5nO3ZhciBPYmplY3RGdW5jdGlvblN0cmluZz1mblRvU3RyaW5nLmNhbGwoT2JqZWN0KTt2YXIgc3VwcG9ydD17fTt2YXIgaXNGdW5jdGlvbj1mdW5jdGlvbiBpc0Z1bmN0aW9uKG9iail7cmV0dXJuIHR5cGVvZiBvYmo9PT0iZnVuY3Rpb24iJiZ0eXBlb2Ygb2JqLm5vZGVUeXBlIT09Im51bWJlciJ9O3ZhciBpc1dpbmRvdz1mdW5jdGlvbiBpc1dpbmRvdyhvYmope3JldHVybiBvYmohPW51bGwmJm9iaj09PW9iai53aW5kb3d9O3ZhciBkb2N1bWVudD13aW5kb3cuZG9jdW1lbnQ7dmFyIHByZXNlcnZlZFNjcmlwdEF0dHJpYnV0ZXM9e3R5cGU6ITAsc3JjOiEwLG5vbmNlOiEwLG5vTW9kdWxlOiEwfTtmdW5jdGlvbiBET01FdmFsKGNvZGUsbm9kZSxkb2Mpe2RvYz1kb2N8fGRvY3VtZW50O3ZhciBpLHZhbCxzY3JpcHQ9ZG9jLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO3NjcmlwdC50ZXh0PWNvZGU7aWYobm9kZSl7Zm9yKGkgaW4gcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyl7dmFsPW5vZGVbaV18fG5vZGUuZ2V0QXR0cmlidXRlJiZub2RlLmdldEF0dHJpYnV0ZShpKTtpZih2YWwpe3NjcmlwdC5zZXRBdHRyaWJ1dGUoaSx2YWwpfX19CmRvYy5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpfQpmdW5jdGlvbiB0b1R5cGUob2JqKXtpZihvYmo9PW51bGwpe3JldHVybiBvYmorIiJ9CnJldHVybiB0eXBlb2Ygb2JqPT09Im9iamVjdCJ8fHR5cGVvZiBvYmo9PT0iZnVuY3Rpb24iP2NsYXNzMnR5cGVbdG9TdHJpbmcuY2FsbChvYmopXXx8Im9iamVjdCI6dHlwZW9mIG9ian0KdmFyIHZlcnNpb249IjMuNS4xIixqUXVlcnk9ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCl7cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdChzZWxlY3Rvcixjb250ZXh0KX07alF1ZXJ5LmZuPWpRdWVyeS5wcm90b3R5cGU9e2pxdWVyeTp2ZXJzaW9uLGNvbnN0cnVjdG9yOmpRdWVyeSxsZW5ndGg6MCx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHNsaWNlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihudW0pe2lmKG51bT09bnVsbCl7cmV0dXJuIHNsaWNlLmNhbGwodGhpcyl9CnJldHVybiBudW08MD90aGlzW251bSt0aGlzLmxlbmd0aF06dGhpc1tudW1dfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZWxlbXMpe3ZhciByZXQ9alF1ZXJ5Lm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlbGVtcyk7cmV0LnByZXZPYmplY3Q9dGhpcztyZXR1cm4gcmV0fSxlYWNoOmZ1bmN0aW9uKGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmVhY2godGhpcyxjYWxsYmFjayl9LG1hcDpmdW5jdGlvbihjYWxsYmFjayl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeS5tYXAodGhpcyxmdW5jdGlvbihlbGVtLGkpe3JldHVybiBjYWxsYmFjay5jYWxsKGVsZW0saSxlbGVtKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soc2xpY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXZlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhqUXVlcnkuZ3JlcCh0aGlzLGZ1bmN0aW9uKF9lbGVtLGkpe3JldHVybihpKzEpJTJ9KSl9LG9kZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhqUXVlcnkuZ3JlcCh0aGlzLGZ1bmN0aW9uKF9lbGVtLGkpe3JldHVybiBpJTJ9KSl9LGVxOmZ1bmN0aW9uKGkpe3ZhciBsZW49dGhpcy5sZW5ndGgsaj0raSsoaTwwP2xlbjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaj49MCYmajxsZW4/W3RoaXNbal1dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcigpfSxwdXNoOnB1c2gsc29ydDphcnIuc29ydCxzcGxpY2U6YXJyLnNwbGljZX07alF1ZXJ5LmV4dGVuZD1qUXVlcnkuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIG9wdGlvbnMsbmFtZSxzcmMsY29weSxjb3B5SXNBcnJheSxjbG9uZSx0YXJnZXQ9YXJndW1lbnRzWzBdfHx7fSxpPTEsbGVuZ3RoPWFyZ3VtZW50cy5sZW5ndGgsZGVlcD0hMTtpZih0eXBlb2YgdGFyZ2V0PT09ImJvb2xlYW4iKXtkZWVwPXRhcmdldDt0YXJnZXQ9YXJndW1lbnRzW2ldfHx7fTtpKyt9CmlmKHR5cGVvZiB0YXJnZXQhPT0ib2JqZWN0IiYmIWlzRnVuY3Rpb24odGFyZ2V0KSl7dGFyZ2V0PXt9fQppZihpPT09bGVuZ3RoKXt0YXJnZXQ9dGhpcztpLS19CmZvcig7aTxsZW5ndGg7aSsrKXtpZigob3B0aW9ucz1hcmd1bWVudHNbaV0pIT1udWxsKXtmb3IobmFtZSBpbiBvcHRpb25zKXtjb3B5PW9wdGlvbnNbbmFtZV07aWYobmFtZT09PSJfX3Byb3RvX18ifHx0YXJnZXQ9PT1jb3B5KXtjb250aW51ZX0KaWYoZGVlcCYmY29weSYmKGpRdWVyeS5pc1BsYWluT2JqZWN0KGNvcHkpfHwoY29weUlzQXJyYXk9QXJyYXkuaXNBcnJheShjb3B5KSkpKXtzcmM9dGFyZ2V0W25hbWVdO2lmKGNvcHlJc0FycmF5JiYhQXJyYXkuaXNBcnJheShzcmMpKXtjbG9uZT1bXX1lbHNlIGlmKCFjb3B5SXNBcnJheSYmIWpRdWVyeS5pc1BsYWluT2JqZWN0KHNyYykpe2Nsb25lPXt9fWVsc2V7Y2xvbmU9c3JjfQpjb3B5SXNBcnJheT0hMTt0YXJnZXRbbmFtZV09alF1ZXJ5LmV4dGVuZChkZWVwLGNsb25lLGNvcHkpfWVsc2UgaWYoY29weSE9PXVuZGVmaW5lZCl7dGFyZ2V0W25hbWVdPWNvcHl9fX19CnJldHVybiB0YXJnZXR9O2pRdWVyeS5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKHZlcnNpb24rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihtc2cpe3Rocm93IG5ldyBFcnJvcihtc2cpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKG9iail7dmFyIHByb3RvLEN0b3I7aWYoIW9ianx8dG9TdHJpbmcuY2FsbChvYmopIT09IltvYmplY3QgT2JqZWN0XSIpe3JldHVybiExfQpwcm90bz1nZXRQcm90byhvYmopO2lmKCFwcm90byl7cmV0dXJuITB9CkN0b3I9aGFzT3duLmNhbGwocHJvdG8sImNvbnN0cnVjdG9yIikmJnByb3RvLmNvbnN0cnVjdG9yO3JldHVybiB0eXBlb2YgQ3Rvcj09PSJmdW5jdGlvbiImJmZuVG9TdHJpbmcuY2FsbChDdG9yKT09PU9iamVjdEZ1bmN0aW9uU3RyaW5nfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKG9iail7dmFyIG5hbWU7Zm9yKG5hbWUgaW4gb2JqKXtyZXR1cm4hMX0KcmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oY29kZSxvcHRpb25zLGRvYyl7RE9NRXZhbChjb2RlLHtub25jZTpvcHRpb25zJiZvcHRpb25zLm5vbmNlfSxkb2MpfSxlYWNoOmZ1bmN0aW9uKG9iaixjYWxsYmFjayl7dmFyIGxlbmd0aCxpPTA7aWYoaXNBcnJheUxpa2Uob2JqKSl7bGVuZ3RoPW9iai5sZW5ndGg7Zm9yKDtpPGxlbmd0aDtpKyspe2lmKGNhbGxiYWNrLmNhbGwob2JqW2ldLGksb2JqW2ldKT09PSExKXticmVha319fWVsc2V7Zm9yKGkgaW4gb2JqKXtpZihjYWxsYmFjay5jYWxsKG9ialtpXSxpLG9ialtpXSk9PT0hMSl7YnJlYWt9fX0KcmV0dXJuIG9ian0sbWFrZUFycmF5OmZ1bmN0aW9uKGFycixyZXN1bHRzKXt2YXIgcmV0PXJlc3VsdHN8fFtdO2lmKGFyciE9bnVsbCl7aWYoaXNBcnJheUxpa2UoT2JqZWN0KGFycikpKXtqUXVlcnkubWVyZ2UocmV0LHR5cGVvZiBhcnI9PT0ic3RyaW5nIj9bYXJyXTphcnIpfWVsc2V7cHVzaC5jYWxsKHJldCxhcnIpfX0KcmV0dXJuIHJldH0saW5BcnJheTpmdW5jdGlvbihlbGVtLGFycixpKXtyZXR1cm4gYXJyPT1udWxsPy0xOmluZGV4T2YuY2FsbChhcnIsZWxlbSxpKX0sbWVyZ2U6ZnVuY3Rpb24oZmlyc3Qsc2Vjb25kKXt2YXIgbGVuPStzZWNvbmQubGVuZ3RoLGo9MCxpPWZpcnN0Lmxlbmd0aDtmb3IoO2o8bGVuO2orKyl7Zmlyc3RbaSsrXT1zZWNvbmRbal19CmZpcnN0Lmxlbmd0aD1pO3JldHVybiBmaXJzdH0sZ3JlcDpmdW5jdGlvbihlbGVtcyxjYWxsYmFjayxpbnZlcnQpe3ZhciBjYWxsYmFja0ludmVyc2UsbWF0Y2hlcz1bXSxpPTAsbGVuZ3RoPWVsZW1zLmxlbmd0aCxjYWxsYmFja0V4cGVjdD0haW52ZXJ0O2Zvcig7aTxsZW5ndGg7aSsrKXtjYWxsYmFja0ludmVyc2U9IWNhbGxiYWNrKGVsZW1zW2ldLGkpO2lmKGNhbGxiYWNrSW52ZXJzZSE9PWNhbGxiYWNrRXhwZWN0KXttYXRjaGVzLnB1c2goZWxlbXNbaV0pfX0KcmV0dXJuIG1hdGNoZXN9LG1hcDpmdW5jdGlvbihlbGVtcyxjYWxsYmFjayxhcmcpe3ZhciBsZW5ndGgsdmFsdWUsaT0wLHJldD1bXTtpZihpc0FycmF5TGlrZShlbGVtcykpe2xlbmd0aD1lbGVtcy5sZW5ndGg7Zm9yKDtpPGxlbmd0aDtpKyspe3ZhbHVlPWNhbGxiYWNrKGVsZW1zW2ldLGksYXJnKTtpZih2YWx1ZSE9bnVsbCl7cmV0LnB1c2godmFsdWUpfX19ZWxzZXtmb3IoaSBpbiBlbGVtcyl7dmFsdWU9Y2FsbGJhY2soZWxlbXNbaV0saSxhcmcpO2lmKHZhbHVlIT1udWxsKXtyZXQucHVzaCh2YWx1ZSl9fX0KcmV0dXJuIGZsYXQocmV0KX0sZ3VpZDoxLHN1cHBvcnQ6c3VwcG9ydH0pO2lmKHR5cGVvZiBTeW1ib2w9PT0iZnVuY3Rpb24iKXtqUXVlcnkuZm5bU3ltYm9sLml0ZXJhdG9yXT1hcnJbU3ltYm9sLml0ZXJhdG9yXX0KalF1ZXJ5LmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKF9pLG5hbWUpe2NsYXNzMnR5cGVbIltvYmplY3QgIituYW1lKyJdIl09bmFtZS50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gaXNBcnJheUxpa2Uob2JqKXt2YXIgbGVuZ3RoPSEhb2JqJiYibGVuZ3RoImluIG9iaiYmb2JqLmxlbmd0aCx0eXBlPXRvVHlwZShvYmopO2lmKGlzRnVuY3Rpb24ob2JqKXx8aXNXaW5kb3cob2JqKSl7cmV0dXJuITF9CnJldHVybiB0eXBlPT09ImFycmF5Inx8bGVuZ3RoPT09MHx8dHlwZW9mIGxlbmd0aD09PSJudW1iZXIiJiZsZW5ndGg+MCYmKGxlbmd0aC0xKWluIG9ian0KdmFyIFNpenpsZT0KLyohCiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYyLjMuNQogKiBodHRwczovL3NpenpsZWpzLmNvbS8KICoKICogQ29weXJpZ2h0IEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cHM6Ly9qcy5mb3VuZGF0aW9uLwogKgogKiBEYXRlOiAyMDIwLTAzLTE0CiAqLwooZnVuY3Rpb24od2luZG93KXt2YXIgaSxzdXBwb3J0LEV4cHIsZ2V0VGV4dCxpc1hNTCx0b2tlbml6ZSxjb21waWxlLHNlbGVjdCxvdXRlcm1vc3RDb250ZXh0LHNvcnRJbnB1dCxoYXNEdXBsaWNhdGUsc2V0RG9jdW1lbnQsZG9jdW1lbnQsZG9jRWxlbSxkb2N1bWVudElzSFRNTCxyYnVnZ3lRU0EscmJ1Z2d5TWF0Y2hlcyxtYXRjaGVzLGNvbnRhaW5zLGV4cGFuZG89InNpenpsZSIrMSpuZXcgRGF0ZSgpLHByZWZlcnJlZERvYz13aW5kb3cuZG9jdW1lbnQsZGlycnVucz0wLGRvbmU9MCxjbGFzc0NhY2hlPWNyZWF0ZUNhY2hlKCksdG9rZW5DYWNoZT1jcmVhdGVDYWNoZSgpLGNvbXBpbGVyQ2FjaGU9Y3JlYXRlQ2FjaGUoKSxub25uYXRpdmVTZWxlY3RvckNhY2hlPWNyZWF0ZUNhY2hlKCksc29ydE9yZGVyPWZ1bmN0aW9uKGEsYil7aWYoYT09PWIpe2hhc0R1cGxpY2F0ZT0hMH0KcmV0dXJuIDB9LGhhc093bj0oe30pLmhhc093blByb3BlcnR5LGFycj1bXSxwb3A9YXJyLnBvcCxwdXNoTmF0aXZlPWFyci5wdXNoLHB1c2g9YXJyLnB1c2gsc2xpY2U9YXJyLnNsaWNlLGluZGV4T2Y9ZnVuY3Rpb24obGlzdCxlbGVtKXt2YXIgaT0wLGxlbj1saXN0Lmxlbmd0aDtmb3IoO2k8bGVuO2krKyl7aWYobGlzdFtpXT09PWVsZW0pe3JldHVybiBpfX0KcmV0dXJuLTF9LGJvb2xlYW5zPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58IisiaXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsd2hpdGVzcGFjZT0iW1xceDIwXFx0XFxyXFxuXFxmXSIsaWRlbnRpZmllcj0iKD86XFxcXFtcXGRhLWZBLUZdezEsNn0iK3doaXRlc3BhY2UrIj98XFxcXFteXFxyXFxuXFxmXXxbXFx3LV18W15cMC1cXHg3Zl0pKyIsYXR0cmlidXRlcz0iXFxbIit3aGl0ZXNwYWNlKyIqKCIraWRlbnRpZmllcisiKSg/OiIrd2hpdGVzcGFjZSsiKihbKl4kfCF+XT89KSIrd2hpdGVzcGFjZSsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK2lkZW50aWZpZXIrIikpfCkiK3doaXRlc3BhY2UrIipcXF0iLHBzZXVkb3M9IjooIitpZGVudGlmaWVyKyIpKD86XFwoKCIrIignKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8IisiKCg/OlxcXFwufFteXFxcXCgpW1xcXV18IithdHRyaWJ1dGVzKyIpKil8IisiLioiKyIpXFwpfCkiLHJ3aGl0ZXNwYWNlPW5ldyBSZWdFeHAod2hpdGVzcGFjZSsiKyIsImciKSxydHJpbT1uZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK3doaXRlc3BhY2UrIiskIiwiZyIpLHJjb21tYT1uZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIqLCIrd2hpdGVzcGFjZSsiKiIpLHJjb21iaW5hdG9ycz1uZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIqKFs+K35dfCIrd2hpdGVzcGFjZSsiKSIrd2hpdGVzcGFjZSsiKiIpLHJkZXNjZW5kPW5ldyBSZWdFeHAod2hpdGVzcGFjZSsifD4iKSxycHNldWRvPW5ldyBSZWdFeHAocHNldWRvcykscmlkZW50aWZpZXI9bmV3IFJlZ0V4cCgiXiIraWRlbnRpZmllcisiJCIpLG1hdGNoRXhwcj17IklEIjpuZXcgUmVnRXhwKCJeIygiK2lkZW50aWZpZXIrIikiKSwiQ0xBU1MiOm5ldyBSZWdFeHAoIl5cXC4oIitpZGVudGlmaWVyKyIpIiksIlRBRyI6bmV3IFJlZ0V4cCgiXigiK2lkZW50aWZpZXIrInxbKl0pIiksIkFUVFIiOm5ldyBSZWdFeHAoIl4iK2F0dHJpYnV0ZXMpLCJQU0VVRE8iOm5ldyBSZWdFeHAoIl4iK3BzZXVkb3MpLCJDSElMRCI6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIit3aGl0ZXNwYWNlKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIit3aGl0ZXNwYWNlKyIqKD86KFsrLV18KSIrd2hpdGVzcGFjZSsiKihcXGQrKXwpKSIrd2hpdGVzcGFjZSsiKlxcKXwpIiwiaSIpLCJib29sIjpuZXcgUmVnRXhwKCJeKD86Iitib29sZWFucysiKSQiLCJpIiksIm5lZWRzQ29udGV4dCI6bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIit3aGl0ZXNwYWNlKyIqKCg/Oi1cXGQpP1xcZCopIit3aGl0ZXNwYWNlKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxyaHRtbD0vSFRNTCQvaSxyaW5wdXRzPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2kscmhlYWRlcj0vXmhcZCQvaSxybmF0aXZlPS9eW157XStce1xzKlxbbmF0aXZlIFx3LyxycXVpY2tFeHByPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8scnNpYmxpbmc9L1srfl0vLHJ1bmVzY2FwZT1uZXcgUmVnRXhwKCJcXFxcW1xcZGEtZkEtRl17MSw2fSIrd2hpdGVzcGFjZSsiP3xcXFxcKFteXFxyXFxuXFxmXSkiLCJnIiksZnVuZXNjYXBlPWZ1bmN0aW9uKGVzY2FwZSxub25IZXgpe3ZhciBoaWdoPSIweCIrZXNjYXBlLnNsaWNlKDEpLTB4MTAwMDA7cmV0dXJuIG5vbkhleD9ub25IZXg6aGlnaDwwP1N0cmluZy5mcm9tQ2hhckNvZGUoaGlnaCsweDEwMDAwKTpTdHJpbmcuZnJvbUNoYXJDb2RlKGhpZ2g+PjEwfDB4RDgwMCxoaWdoJjB4M0ZGfDB4REMwMCl9LHJjc3Nlc2NhcGU9LyhbXDAtXHgxZlx4N2ZdfF4tP1xkKXxeLSR8W15cMC1ceDFmXHg3Zi1cdUZGRkZcdy1dL2csZmNzc2VzY2FwZT1mdW5jdGlvbihjaCxhc0NvZGVQb2ludCl7aWYoYXNDb2RlUG9pbnQpe2lmKGNoPT09IlwwIil7cmV0dXJuIlx1RkZGRCJ9CnJldHVybiBjaC5zbGljZSgwLC0xKSsiXFwiK2NoLmNoYXJDb2RlQXQoY2gubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KSsiICJ9CnJldHVybiJcXCIrY2h9LHVubG9hZEhhbmRsZXI9ZnVuY3Rpb24oKXtzZXREb2N1bWVudCgpfSxpbkRpc2FibGVkRmllbGRzZXQ9YWRkQ29tYmluYXRvcihmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5kaXNhYmxlZD09PSEwJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iZmllbGRzZXQifSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e3B1c2guYXBwbHkoKGFycj1zbGljZS5jYWxsKHByZWZlcnJlZERvYy5jaGlsZE5vZGVzKSkscHJlZmVycmVkRG9jLmNoaWxkTm9kZXMpO2FycltwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGUpe3B1c2g9e2FwcGx5OmFyci5sZW5ndGg/ZnVuY3Rpb24odGFyZ2V0LGVscyl7cHVzaE5hdGl2ZS5hcHBseSh0YXJnZXQsc2xpY2UuY2FsbChlbHMpKX06ZnVuY3Rpb24odGFyZ2V0LGVscyl7dmFyIGo9dGFyZ2V0Lmxlbmd0aCxpPTA7d2hpbGUoKHRhcmdldFtqKytdPWVsc1tpKytdKSl7fQp0YXJnZXQubGVuZ3RoPWotMX19fQpmdW5jdGlvbiBTaXp6bGUoc2VsZWN0b3IsY29udGV4dCxyZXN1bHRzLHNlZWQpe3ZhciBtLGksZWxlbSxuaWQsbWF0Y2gsZ3JvdXBzLG5ld1NlbGVjdG9yLG5ld0NvbnRleHQ9Y29udGV4dCYmY29udGV4dC5vd25lckRvY3VtZW50LG5vZGVUeXBlPWNvbnRleHQ/Y29udGV4dC5ub2RlVHlwZTo5O3Jlc3VsdHM9cmVzdWx0c3x8W107aWYodHlwZW9mIHNlbGVjdG9yIT09InN0cmluZyJ8fCFzZWxlY3Rvcnx8bm9kZVR5cGUhPT0xJiZub2RlVHlwZSE9PTkmJm5vZGVUeXBlIT09MTEpe3JldHVybiByZXN1bHRzfQppZighc2VlZCl7c2V0RG9jdW1lbnQoY29udGV4dCk7Y29udGV4dD1jb250ZXh0fHxkb2N1bWVudDtpZihkb2N1bWVudElzSFRNTCl7aWYobm9kZVR5cGUhPT0xMSYmKG1hdGNoPXJxdWlja0V4cHIuZXhlYyhzZWxlY3RvcikpKXtpZigobT1tYXRjaFsxXSkpe2lmKG5vZGVUeXBlPT09OSl7aWYoKGVsZW09Y29udGV4dC5nZXRFbGVtZW50QnlJZChtKSkpe2lmKGVsZW0uaWQ9PT1tKXtyZXN1bHRzLnB1c2goZWxlbSk7cmV0dXJuIHJlc3VsdHN9fWVsc2V7cmV0dXJuIHJlc3VsdHN9fWVsc2V7aWYobmV3Q29udGV4dCYmKGVsZW09bmV3Q29udGV4dC5nZXRFbGVtZW50QnlJZChtKSkmJmNvbnRhaW5zKGNvbnRleHQsZWxlbSkmJmVsZW0uaWQ9PT1tKXtyZXN1bHRzLnB1c2goZWxlbSk7cmV0dXJuIHJlc3VsdHN9fX1lbHNlIGlmKG1hdGNoWzJdKXtwdXNoLmFwcGx5KHJlc3VsdHMsY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3RvcikpO3JldHVybiByZXN1bHRzfWVsc2UgaWYoKG09bWF0Y2hbM10pJiZzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSl7cHVzaC5hcHBseShyZXN1bHRzLGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtKSk7cmV0dXJuIHJlc3VsdHN9fQppZihzdXBwb3J0LnFzYSYmIW5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGVbc2VsZWN0b3IrIiAiXSYmKCFyYnVnZ3lRU0F8fCFyYnVnZ3lRU0EudGVzdChzZWxlY3RvcikpJiYobm9kZVR5cGUhPT0xfHxjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ib2JqZWN0Iikpe25ld1NlbGVjdG9yPXNlbGVjdG9yO25ld0NvbnRleHQ9Y29udGV4dDtpZihub2RlVHlwZT09PTEmJihyZGVzY2VuZC50ZXN0KHNlbGVjdG9yKXx8cmNvbWJpbmF0b3JzLnRlc3Qoc2VsZWN0b3IpKSl7bmV3Q29udGV4dD1yc2libGluZy50ZXN0KHNlbGVjdG9yKSYmdGVzdENvbnRleHQoY29udGV4dC5wYXJlbnROb2RlKXx8Y29udGV4dDtpZihuZXdDb250ZXh0IT09Y29udGV4dHx8IXN1cHBvcnQuc2NvcGUpe2lmKChuaWQ9Y29udGV4dC5nZXRBdHRyaWJ1dGUoImlkIikpKXtuaWQ9bmlkLnJlcGxhY2UocmNzc2VzY2FwZSxmY3NzZXNjYXBlKX1lbHNle2NvbnRleHQuc2V0QXR0cmlidXRlKCJpZCIsKG5pZD1leHBhbmRvKSl9fQpncm91cHM9dG9rZW5pemUoc2VsZWN0b3IpO2k9Z3JvdXBzLmxlbmd0aDt3aGlsZShpLS0pe2dyb3Vwc1tpXT0obmlkPyIjIituaWQ6IjpzY29wZSIpKyIgIit0b1NlbGVjdG9yKGdyb3Vwc1tpXSl9Cm5ld1NlbGVjdG9yPWdyb3Vwcy5qb2luKCIsIil9CnRyeXtwdXNoLmFwcGx5KHJlc3VsdHMsbmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKG5ld1NlbGVjdG9yKSk7cmV0dXJuIHJlc3VsdHN9Y2F0Y2gocXNhRXJyb3Ipe25vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUoc2VsZWN0b3IsITApfWZpbmFsbHl7aWYobmlkPT09ZXhwYW5kbyl7Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX19fQpyZXR1cm4gc2VsZWN0KHNlbGVjdG9yLnJlcGxhY2UocnRyaW0sIiQxIiksY29udGV4dCxyZXN1bHRzLHNlZWQpfQpmdW5jdGlvbiBjcmVhdGVDYWNoZSgpe3ZhciBrZXlzPVtdO2Z1bmN0aW9uIGNhY2hlKGtleSx2YWx1ZSl7aWYoa2V5cy5wdXNoKGtleSsiICIpPkV4cHIuY2FjaGVMZW5ndGgpe2RlbGV0ZSBjYWNoZVtrZXlzLnNoaWZ0KCldfQpyZXR1cm4oY2FjaGVba2V5KyIgIl09dmFsdWUpfQpyZXR1cm4gY2FjaGV9CmZ1bmN0aW9uIG1hcmtGdW5jdGlvbihmbil7Zm5bZXhwYW5kb109ITA7cmV0dXJuIGZufQpmdW5jdGlvbiBhc3NlcnQoZm4pe3ZhciBlbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpO3RyeXtyZXR1cm4hIWZuKGVsKX1jYXRjaChlKXtyZXR1cm4hMX1maW5hbGx5e2lmKGVsLnBhcmVudE5vZGUpe2VsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpfQplbD1udWxsfX0KZnVuY3Rpb24gYWRkSGFuZGxlKGF0dHJzLGhhbmRsZXIpe3ZhciBhcnI9YXR0cnMuc3BsaXQoInwiKSxpPWFyci5sZW5ndGg7d2hpbGUoaS0tKXtFeHByLmF0dHJIYW5kbGVbYXJyW2ldXT1oYW5kbGVyfX0KZnVuY3Rpb24gc2libGluZ0NoZWNrKGEsYil7dmFyIGN1cj1iJiZhLGRpZmY9Y3VyJiZhLm5vZGVUeXBlPT09MSYmYi5ub2RlVHlwZT09PTEmJmEuc291cmNlSW5kZXgtYi5zb3VyY2VJbmRleDtpZihkaWZmKXtyZXR1cm4gZGlmZn0KaWYoY3VyKXt3aGlsZSgoY3VyPWN1ci5uZXh0U2libGluZykpe2lmKGN1cj09PWIpe3JldHVybi0xfX19CnJldHVybiBhPzE6LTF9CmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKHR5cGUpe3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgbmFtZT1lbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIG5hbWU9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT10eXBlfX0KZnVuY3Rpb24gY3JlYXRlQnV0dG9uUHNldWRvKHR5cGUpe3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgbmFtZT1lbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKG5hbWU9PT0iaW5wdXQifHxuYW1lPT09ImJ1dHRvbiIpJiZlbGVtLnR5cGU9PT10eXBlfX0KZnVuY3Rpb24gY3JlYXRlRGlzYWJsZWRQc2V1ZG8oZGlzYWJsZWQpe3JldHVybiBmdW5jdGlvbihlbGVtKXtpZigiZm9ybSJpbiBlbGVtKXtpZihlbGVtLnBhcmVudE5vZGUmJmVsZW0uZGlzYWJsZWQ9PT0hMSl7aWYoImxhYmVsImluIGVsZW0pe2lmKCJsYWJlbCJpbiBlbGVtLnBhcmVudE5vZGUpe3JldHVybiBlbGVtLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT1kaXNhYmxlZH1lbHNle3JldHVybiBlbGVtLmRpc2FibGVkPT09ZGlzYWJsZWR9fQpyZXR1cm4gZWxlbS5pc0Rpc2FibGVkPT09ZGlzYWJsZWR8fGVsZW0uaXNEaXNhYmxlZCE9PSFkaXNhYmxlZCYmaW5EaXNhYmxlZEZpZWxkc2V0KGVsZW0pPT09ZGlzYWJsZWR9CnJldHVybiBlbGVtLmRpc2FibGVkPT09ZGlzYWJsZWR9ZWxzZSBpZigibGFiZWwiaW4gZWxlbSl7cmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT1kaXNhYmxlZH0KcmV0dXJuITF9fQpmdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZuKXtyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKGFyZ3VtZW50KXthcmd1bWVudD0rYXJndW1lbnQ7cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLG1hdGNoZXMpe3ZhciBqLG1hdGNoSW5kZXhlcz1mbihbXSxzZWVkLmxlbmd0aCxhcmd1bWVudCksaT1tYXRjaEluZGV4ZXMubGVuZ3RoO3doaWxlKGktLSl7aWYoc2VlZFsoaj1tYXRjaEluZGV4ZXNbaV0pXSl7c2VlZFtqXT0hKG1hdGNoZXNbal09c2VlZFtqXSl9fX0pfSl9CmZ1bmN0aW9uIHRlc3RDb250ZXh0KGNvbnRleHQpe3JldHVybiBjb250ZXh0JiZ0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PSJ1bmRlZmluZWQiJiZjb250ZXh0fQpzdXBwb3J0PVNpenpsZS5zdXBwb3J0PXt9O2lzWE1MPVNpenpsZS5pc1hNTD1mdW5jdGlvbihlbGVtKXt2YXIgbmFtZXNwYWNlPWVsZW0ubmFtZXNwYWNlVVJJLGRvY0VsZW09KGVsZW0ub3duZXJEb2N1bWVudHx8ZWxlbSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiFyaHRtbC50ZXN0KG5hbWVzcGFjZXx8ZG9jRWxlbSYmZG9jRWxlbS5ub2RlTmFtZXx8IkhUTUwiKX07c2V0RG9jdW1lbnQ9U2l6emxlLnNldERvY3VtZW50PWZ1bmN0aW9uKG5vZGUpe3ZhciBoYXNDb21wYXJlLHN1YldpbmRvdyxkb2M9bm9kZT9ub2RlLm93bmVyRG9jdW1lbnR8fG5vZGU6cHJlZmVycmVkRG9jO2lmKGRvYz09ZG9jdW1lbnR8fGRvYy5ub2RlVHlwZSE9PTl8fCFkb2MuZG9jdW1lbnRFbGVtZW50KXtyZXR1cm4gZG9jdW1lbnR9CmRvY3VtZW50PWRvYztkb2NFbGVtPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtkb2N1bWVudElzSFRNTD0haXNYTUwoZG9jdW1lbnQpO2lmKHByZWZlcnJlZERvYyE9ZG9jdW1lbnQmJihzdWJXaW5kb3c9ZG9jdW1lbnQuZGVmYXVsdFZpZXcpJiZzdWJXaW5kb3cudG9wIT09c3ViV2luZG93KXtpZihzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7c3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsdW5sb2FkSGFuZGxlciwhMSl9ZWxzZSBpZihzdWJXaW5kb3cuYXR0YWNoRXZlbnQpe3N1YldpbmRvdy5hdHRhY2hFdmVudCgib251bmxvYWQiLHVubG9hZEhhbmRsZXIpfX0Kc3VwcG9ydC5zY29wZT1hc3NlcnQoZnVuY3Rpb24oZWwpe2RvY0VsZW0uYXBwZW5kQ2hpbGQoZWwpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyZXR1cm4gdHlwZW9mIGVsLnF1ZXJ5U2VsZWN0b3JBbGwhPT0idW5kZWZpbmVkIiYmIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjpzY29wZSBmaWVsZHNldCBkaXYiKS5sZW5ndGh9KTtzdXBwb3J0LmF0dHJpYnV0ZXM9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5jbGFzc05hbWU9ImkiO3JldHVybiFlbC5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSk7c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZT1hc3NlcnQoZnVuY3Rpb24oZWwpe2VsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoIiIpKTtyZXR1cm4hZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGh9KTtzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWU9cm5hdGl2ZS50ZXN0KGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpO3N1cHBvcnQuZ2V0QnlJZD1hc3NlcnQoZnVuY3Rpb24oZWwpe2RvY0VsZW0uYXBwZW5kQ2hpbGQoZWwpLmlkPWV4cGFuZG87cmV0dXJuIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lfHwhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoZXhwYW5kbykubGVuZ3RofSk7aWYoc3VwcG9ydC5nZXRCeUlkKXtFeHByLmZpbHRlci5JRD1mdW5jdGlvbihpZCl7dmFyIGF0dHJJZD1pZC5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoImlkIik9PT1hdHRySWR9fTtFeHByLmZpbmQuSUQ9ZnVuY3Rpb24oaWQsY29udGV4dCl7aWYodHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3ZhciBlbGVtPWNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoaWQpO3JldHVybiBlbGVtP1tlbGVtXTpbXX19fWVsc2V7RXhwci5maWx0ZXIuSUQ9ZnVuY3Rpb24oaWQpe3ZhciBhdHRySWQ9aWQucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKTtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7dmFyIG5vZGU9dHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSE9PSJ1bmRlZmluZWQiJiZlbGVtLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIG5vZGUmJm5vZGUudmFsdWU9PT1hdHRySWR9fTtFeHByLmZpbmQuSUQ9ZnVuY3Rpb24oaWQsY29udGV4dCl7aWYodHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3ZhciBub2RlLGksZWxlbXMsZWxlbT1jb250ZXh0LmdldEVsZW1lbnRCeUlkKGlkKTtpZihlbGVtKXtub2RlPWVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihub2RlJiZub2RlLnZhbHVlPT09aWQpe3JldHVybltlbGVtXX0KZWxlbXM9Y29udGV4dC5nZXRFbGVtZW50c0J5TmFtZShpZCk7aT0wO3doaWxlKChlbGVtPWVsZW1zW2krK10pKXtub2RlPWVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihub2RlJiZub2RlLnZhbHVlPT09aWQpe3JldHVybltlbGVtXX19fQpyZXR1cm5bXX19fQpFeHByLmZpbmQuVEFHPXN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24odGFnLGNvbnRleHQpe2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09InVuZGVmaW5lZCIpe3JldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyl9ZWxzZSBpZihzdXBwb3J0LnFzYSl7cmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCh0YWcpfX06ZnVuY3Rpb24odGFnLGNvbnRleHQpe3ZhciBlbGVtLHRtcD1bXSxpPTAscmVzdWx0cz1jb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyk7aWYodGFnPT09IioiKXt3aGlsZSgoZWxlbT1yZXN1bHRzW2krK10pKXtpZihlbGVtLm5vZGVUeXBlPT09MSl7dG1wLnB1c2goZWxlbSl9fQpyZXR1cm4gdG1wfQpyZXR1cm4gcmVzdWx0c307RXhwci5maW5kLkNMQVNTPXN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oY2xhc3NOYW1lLGNvbnRleHQpe2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3JldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKX19O3JidWdneU1hdGNoZXM9W107cmJ1Z2d5UVNBPVtdO2lmKChzdXBwb3J0LnFzYT1ybmF0aXZlLnRlc3QoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCkpKXthc3NlcnQoZnVuY3Rpb24oZWwpe3ZhciBpbnB1dDtkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5pbm5lckhUTUw9IjxhIGlkPSciK2V4cGFuZG8rIic+PC9hPiIrIjxzZWxlY3QgaWQ9JyIrZXhwYW5kbysiLVxyXFwnIG1zYWxsb3djYXB0dXJlPScnPiIrIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IjtpZihlbC5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlsqXiRdPSIrd2hpdGVzcGFjZSsiKig/OicnfFwiXCIpIil9CmlmKCFlbC5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgiXFxbIit3aGl0ZXNwYWNlKyIqKD86dmFsdWV8Iitib29sZWFucysiKSIpfQppZighZWwucXVlcnlTZWxlY3RvckFsbCgiW2lkfj0iK2V4cGFuZG8rIi1dIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgifj0iKX0KaW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCIiKTtlbC5hcHBlbmRDaGlsZChpbnB1dCk7aWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPScnXSIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIlxcWyIrd2hpdGVzcGFjZSsiKm5hbWUiK3doaXRlc3BhY2UrIio9Iit3aGl0ZXNwYWNlKyIqKD86Jyd8XCJcIikiKX0KaWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgiOmNoZWNrZWQiKX0KaWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoImEjIitleHBhbmRvKyIrKiIpLmxlbmd0aCl7cmJ1Z2d5UVNBLnB1c2goIi4jLitbK35dIil9CmVsLnF1ZXJ5U2VsZWN0b3JBbGwoIlxcXGYiKTtyYnVnZ3lRU0EucHVzaCgiW1xcclxcblxcZl0iKX0pO2Fzc2VydChmdW5jdGlvbihlbCl7ZWwuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPiIrIjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciBpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpO2VsLmFwcGVuZENoaWxkKGlucHV0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIik7aWYoZWwucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCJuYW1lIit3aGl0ZXNwYWNlKyIqWypeJHwhfl0/PSIpfQppZihlbC5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCE9PTIpe3JidWdneVFTQS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpfQpkb2NFbGVtLmFwcGVuZENoaWxkKGVsKS5kaXNhYmxlZD0hMDtpZihlbC5xdWVyeVNlbGVjdG9yQWxsKCI6ZGlzYWJsZWQiKS5sZW5ndGghPT0yKXtyYnVnZ3lRU0EucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKX0KZWwucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpO3JidWdneVFTQS5wdXNoKCIsLio6Iil9KX0KaWYoKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yPXJuYXRpdmUudGVzdCgobWF0Y2hlcz1kb2NFbGVtLm1hdGNoZXN8fGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3Rvcnx8ZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yfHxkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSkpKXthc3NlcnQoZnVuY3Rpb24oZWwpe3N1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2g9bWF0Y2hlcy5jYWxsKGVsLCIqIik7bWF0Y2hlcy5jYWxsKGVsLCJbcyE9JyddOngiKTtyYnVnZ3lNYXRjaGVzLnB1c2goIiE9Iixwc2V1ZG9zKX0pfQpyYnVnZ3lRU0E9cmJ1Z2d5UVNBLmxlbmd0aCYmbmV3IFJlZ0V4cChyYnVnZ3lRU0Euam9pbigifCIpKTtyYnVnZ3lNYXRjaGVzPXJidWdneU1hdGNoZXMubGVuZ3RoJiZuZXcgUmVnRXhwKHJidWdneU1hdGNoZXMuam9pbigifCIpKTtoYXNDb21wYXJlPXJuYXRpdmUudGVzdChkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKTtjb250YWlucz1oYXNDb21wYXJlfHxybmF0aXZlLnRlc3QoZG9jRWxlbS5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYWRvd249YS5ub2RlVHlwZT09PTk/YS5kb2N1bWVudEVsZW1lbnQ6YSxidXA9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09YnVwfHwhIShidXAmJmJ1cC5ub2RlVHlwZT09PTEmJihhZG93bi5jb250YWlucz9hZG93bi5jb250YWlucyhidXApOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYnVwKSYxNikpfTpmdW5jdGlvbihhLGIpe2lmKGIpe3doaWxlKChiPWIucGFyZW50Tm9kZSkpe2lmKGI9PT1hKXtyZXR1cm4hMH19fQpyZXR1cm4hMX07c29ydE9yZGVyPWhhc0NvbXBhcmU/ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPSEwO3JldHVybiAwfQp2YXIgY29tcGFyZT0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtpZihjb21wYXJlKXtyZXR1cm4gY29tcGFyZX0KY29tcGFyZT0oYS5vd25lckRvY3VtZW50fHxhKT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxO2lmKGNvbXBhcmUmMXx8KCFzdXBwb3J0LnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWNvbXBhcmUpKXtpZihhPT1kb2N1bWVudHx8YS5vd25lckRvY3VtZW50PT1wcmVmZXJyZWREb2MmJmNvbnRhaW5zKHByZWZlcnJlZERvYyxhKSl7cmV0dXJuLTF9CmlmKGI9PWRvY3VtZW50fHxiLm93bmVyRG9jdW1lbnQ9PXByZWZlcnJlZERvYyYmY29udGFpbnMocHJlZmVycmVkRG9jLGIpKXtyZXR1cm4gMX0KcmV0dXJuIHNvcnRJbnB1dD8oaW5kZXhPZihzb3J0SW5wdXQsYSktaW5kZXhPZihzb3J0SW5wdXQsYikpOjB9CnJldHVybiBjb21wYXJlJjQ/LTE6MX06ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPSEwO3JldHVybiAwfQp2YXIgY3VyLGk9MCxhdXA9YS5wYXJlbnROb2RlLGJ1cD1iLnBhcmVudE5vZGUsYXA9W2FdLGJwPVtiXTtpZighYXVwfHwhYnVwKXtyZXR1cm4gYT09ZG9jdW1lbnQ/LTE6Yj09ZG9jdW1lbnQ/MTphdXA/LTE6YnVwPzE6c29ydElucHV0PyhpbmRleE9mKHNvcnRJbnB1dCxhKS1pbmRleE9mKHNvcnRJbnB1dCxiKSk6MH1lbHNlIGlmKGF1cD09PWJ1cCl7cmV0dXJuIHNpYmxpbmdDaGVjayhhLGIpfQpjdXI9YTt3aGlsZSgoY3VyPWN1ci5wYXJlbnROb2RlKSl7YXAudW5zaGlmdChjdXIpfQpjdXI9Yjt3aGlsZSgoY3VyPWN1ci5wYXJlbnROb2RlKSl7YnAudW5zaGlmdChjdXIpfQp3aGlsZShhcFtpXT09PWJwW2ldKXtpKyt9CnJldHVybiBpP3NpYmxpbmdDaGVjayhhcFtpXSxicFtpXSk6YXBbaV09PXByZWZlcnJlZERvYz8tMTpicFtpXT09cHJlZmVycmVkRG9jPzE6MH07cmV0dXJuIGRvY3VtZW50fTtTaXp6bGUubWF0Y2hlcz1mdW5jdGlvbihleHByLGVsZW1lbnRzKXtyZXR1cm4gU2l6emxlKGV4cHIsbnVsbCxudWxsLGVsZW1lbnRzKX07U2l6emxlLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlbGVtLGV4cHIpe3NldERvY3VtZW50KGVsZW0pO2lmKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yJiZkb2N1bWVudElzSFRNTCYmIW5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGVbZXhwcisiICJdJiYoIXJidWdneU1hdGNoZXN8fCFyYnVnZ3lNYXRjaGVzLnRlc3QoZXhwcikpJiYoIXJidWdneVFTQXx8IXJidWdneVFTQS50ZXN0KGV4cHIpKSl7dHJ5e3ZhciByZXQ9bWF0Y2hlcy5jYWxsKGVsZW0sZXhwcik7aWYocmV0fHxzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNofHxlbGVtLmRvY3VtZW50JiZlbGVtLmRvY3VtZW50Lm5vZGVUeXBlIT09MTEpe3JldHVybiByZXR9fWNhdGNoKGUpe25vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUoZXhwciwhMCl9fQpyZXR1cm4gU2l6emxlKGV4cHIsZG9jdW1lbnQsbnVsbCxbZWxlbV0pLmxlbmd0aD4wfTtTaXp6bGUuY29udGFpbnM9ZnVuY3Rpb24oY29udGV4dCxlbGVtKXtpZigoY29udGV4dC5vd25lckRvY3VtZW50fHxjb250ZXh0KSE9ZG9jdW1lbnQpe3NldERvY3VtZW50KGNvbnRleHQpfQpyZXR1cm4gY29udGFpbnMoY29udGV4dCxlbGVtKX07U2l6emxlLmF0dHI9ZnVuY3Rpb24oZWxlbSxuYW1lKXtpZigoZWxlbS5vd25lckRvY3VtZW50fHxlbGVtKSE9ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pfQp2YXIgZm49RXhwci5hdHRySGFuZGxlW25hbWUudG9Mb3dlckNhc2UoKV0sdmFsPWZuJiZoYXNPd24uY2FsbChFeHByLmF0dHJIYW5kbGUsbmFtZS50b0xvd2VyQ2FzZSgpKT9mbihlbGVtLG5hbWUsIWRvY3VtZW50SXNIVE1MKTp1bmRlZmluZWQ7cmV0dXJuIHZhbCE9PXVuZGVmaW5lZD92YWw6c3VwcG9ydC5hdHRyaWJ1dGVzfHwhZG9jdW1lbnRJc0hUTUw/ZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSk6KHZhbD1lbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpJiZ2YWwuc3BlY2lmaWVkP3ZhbC52YWx1ZTpudWxsfTtTaXp6bGUuZXNjYXBlPWZ1bmN0aW9uKHNlbCl7cmV0dXJuKHNlbCsiIikucmVwbGFjZShyY3NzZXNjYXBlLGZjc3Nlc2NhcGUpfTtTaXp6bGUuZXJyb3I9ZnVuY3Rpb24obXNnKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrbXNnKX07U2l6emxlLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24ocmVzdWx0cyl7dmFyIGVsZW0sZHVwbGljYXRlcz1bXSxqPTAsaT0wO2hhc0R1cGxpY2F0ZT0hc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzO3NvcnRJbnB1dD0hc3VwcG9ydC5zb3J0U3RhYmxlJiZyZXN1bHRzLnNsaWNlKDApO3Jlc3VsdHMuc29ydChzb3J0T3JkZXIpO2lmKGhhc0R1cGxpY2F0ZSl7d2hpbGUoKGVsZW09cmVzdWx0c1tpKytdKSl7aWYoZWxlbT09PXJlc3VsdHNbaV0pe2o9ZHVwbGljYXRlcy5wdXNoKGkpfX0Kd2hpbGUoai0tKXtyZXN1bHRzLnNwbGljZShkdXBsaWNhdGVzW2pdLDEpfX0Kc29ydElucHV0PW51bGw7cmV0dXJuIHJlc3VsdHN9O2dldFRleHQ9U2l6emxlLmdldFRleHQ9ZnVuY3Rpb24oZWxlbSl7dmFyIG5vZGUscmV0PSIiLGk9MCxub2RlVHlwZT1lbGVtLm5vZGVUeXBlO2lmKCFub2RlVHlwZSl7d2hpbGUoKG5vZGU9ZWxlbVtpKytdKSl7cmV0Kz1nZXRUZXh0KG5vZGUpfX1lbHNlIGlmKG5vZGVUeXBlPT09MXx8bm9kZVR5cGU9PT05fHxub2RlVHlwZT09PTExKXtpZih0eXBlb2YgZWxlbS50ZXh0Q29udGVudD09PSJzdHJpbmciKXtyZXR1cm4gZWxlbS50ZXh0Q29udGVudH1lbHNle2ZvcihlbGVtPWVsZW0uZmlyc3RDaGlsZDtlbGVtO2VsZW09ZWxlbS5uZXh0U2libGluZyl7cmV0Kz1nZXRUZXh0KGVsZW0pfX19ZWxzZSBpZihub2RlVHlwZT09PTN8fG5vZGVUeXBlPT09NCl7cmV0dXJuIGVsZW0ubm9kZVZhbHVlfQpyZXR1cm4gcmV0fTtFeHByPVNpenpsZS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzptYXJrRnVuY3Rpb24sbWF0Y2g6bWF0Y2hFeHByLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7IkFUVFIiOmZ1bmN0aW9uKG1hdGNoKXttYXRjaFsxXT1tYXRjaFsxXS5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO21hdGNoWzNdPShtYXRjaFszXXx8bWF0Y2hbNF18fG1hdGNoWzVdfHwiIikucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKTtpZihtYXRjaFsyXT09PSJ+PSIpe21hdGNoWzNdPSIgIittYXRjaFszXSsiICJ9CnJldHVybiBtYXRjaC5zbGljZSgwLDQpfSwiQ0hJTEQiOmZ1bmN0aW9uKG1hdGNoKXttYXRjaFsxXT1tYXRjaFsxXS50b0xvd2VyQ2FzZSgpO2lmKG1hdGNoWzFdLnNsaWNlKDAsMyk9PT0ibnRoIil7aWYoIW1hdGNoWzNdKXtTaXp6bGUuZXJyb3IobWF0Y2hbMF0pfQptYXRjaFs0XT0rKG1hdGNoWzRdP21hdGNoWzVdKyhtYXRjaFs2XXx8MSk6MioobWF0Y2hbM109PT0iZXZlbiJ8fG1hdGNoWzNdPT09Im9kZCIpKTttYXRjaFs1XT0rKChtYXRjaFs3XSttYXRjaFs4XSl8fG1hdGNoWzNdPT09Im9kZCIpfWVsc2UgaWYobWF0Y2hbM10pe1NpenpsZS5lcnJvcihtYXRjaFswXSl9CnJldHVybiBtYXRjaH0sIlBTRVVETyI6ZnVuY3Rpb24obWF0Y2gpe3ZhciBleGNlc3MsdW5xdW90ZWQ9IW1hdGNoWzZdJiZtYXRjaFsyXTtpZihtYXRjaEV4cHIuQ0hJTEQudGVzdChtYXRjaFswXSkpe3JldHVybiBudWxsfQppZihtYXRjaFszXSl7bWF0Y2hbMl09bWF0Y2hbNF18fG1hdGNoWzVdfHwiIn1lbHNlIGlmKHVucXVvdGVkJiZycHNldWRvLnRlc3QodW5xdW90ZWQpJiYoZXhjZXNzPXRva2VuaXplKHVucXVvdGVkLCEwKSkmJihleGNlc3M9dW5xdW90ZWQuaW5kZXhPZigiKSIsdW5xdW90ZWQubGVuZ3RoLWV4Y2VzcyktdW5xdW90ZWQubGVuZ3RoKSl7bWF0Y2hbMF09bWF0Y2hbMF0uc2xpY2UoMCxleGNlc3MpO21hdGNoWzJdPXVucXVvdGVkLnNsaWNlKDAsZXhjZXNzKX0KcmV0dXJuIG1hdGNoLnNsaWNlKDAsMyl9fSxmaWx0ZXI6eyJUQUciOmZ1bmN0aW9uKG5vZGVOYW1lU2VsZWN0b3Ipe3ZhciBub2RlTmFtZT1ub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSkudG9Mb3dlckNhc2UoKTtyZXR1cm4gbm9kZU5hbWVTZWxlY3Rvcj09PSIqIj9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5ub2RlTmFtZSYmZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bm9kZU5hbWV9fSwiQ0xBU1MiOmZ1bmN0aW9uKGNsYXNzTmFtZSl7dmFyIHBhdHRlcm49Y2xhc3NDYWNoZVtjbGFzc05hbWUrIiAiXTtyZXR1cm4gcGF0dGVybnx8KHBhdHRlcm49bmV3IFJlZ0V4cCgiKF58Iit3aGl0ZXNwYWNlKyIpIitjbGFzc05hbWUrIigiK3doaXRlc3BhY2UrInwkKSIpKSYmY2xhc3NDYWNoZShjbGFzc05hbWUsZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHBhdHRlcm4udGVzdCh0eXBlb2YgZWxlbS5jbGFzc05hbWU9PT0ic3RyaW5nIiYmZWxlbS5jbGFzc05hbWV8fHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSE9PSJ1bmRlZmluZWQiJiZlbGVtLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LCJBVFRSIjpmdW5jdGlvbihuYW1lLG9wZXJhdG9yLGNoZWNrKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7dmFyIHJlc3VsdD1TaXp6bGUuYXR0cihlbGVtLG5hbWUpO2lmKHJlc3VsdD09bnVsbCl7cmV0dXJuIG9wZXJhdG9yPT09IiE9In0KaWYoIW9wZXJhdG9yKXtyZXR1cm4hMH0KcmVzdWx0Kz0iIjtyZXR1cm4gb3BlcmF0b3I9PT0iPSI/cmVzdWx0PT09Y2hlY2s6b3BlcmF0b3I9PT0iIT0iP3Jlc3VsdCE9PWNoZWNrOm9wZXJhdG9yPT09Il49Ij9jaGVjayYmcmVzdWx0LmluZGV4T2YoY2hlY2spPT09MDpvcGVyYXRvcj09PSIqPSI/Y2hlY2smJnJlc3VsdC5pbmRleE9mKGNoZWNrKT4tMTpvcGVyYXRvcj09PSIkPSI/Y2hlY2smJnJlc3VsdC5zbGljZSgtY2hlY2subGVuZ3RoKT09PWNoZWNrOm9wZXJhdG9yPT09In49Ij8oIiAiK3Jlc3VsdC5yZXBsYWNlKHJ3aGl0ZXNwYWNlLCIgIikrIiAiKS5pbmRleE9mKGNoZWNrKT4tMTpvcGVyYXRvcj09PSJ8PSI/cmVzdWx0PT09Y2hlY2t8fHJlc3VsdC5zbGljZSgwLGNoZWNrLmxlbmd0aCsxKT09PWNoZWNrKyItIjohMX19LCJDSElMRCI6ZnVuY3Rpb24odHlwZSx3aGF0LF9hcmd1bWVudCxmaXJzdCxsYXN0KXt2YXIgc2ltcGxlPXR5cGUuc2xpY2UoMCwzKSE9PSJudGgiLGZvcndhcmQ9dHlwZS5zbGljZSgtNCkhPT0ibGFzdCIsb2ZUeXBlPXdoYXQ9PT0ib2YtdHlwZSI7cmV0dXJuIGZpcnN0PT09MSYmbGFzdD09PTA/ZnVuY3Rpb24oZWxlbSl7cmV0dXJuISFlbGVtLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGVsZW0sX2NvbnRleHQseG1sKXt2YXIgY2FjaGUsdW5pcXVlQ2FjaGUsb3V0ZXJDYWNoZSxub2RlLG5vZGVJbmRleCxzdGFydCxkaXI9c2ltcGxlIT09Zm9yd2FyZD8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHBhcmVudD1lbGVtLnBhcmVudE5vZGUsbmFtZT1vZlR5cGUmJmVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSx1c2VDYWNoZT0heG1sJiYhb2ZUeXBlLGRpZmY9ITE7aWYocGFyZW50KXtpZihzaW1wbGUpe3doaWxlKGRpcil7bm9kZT1lbGVtO3doaWxlKChub2RlPW5vZGVbZGlyXSkpe2lmKG9mVHlwZT9ub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1uYW1lOm5vZGUubm9kZVR5cGU9PT0xKXtyZXR1cm4hMX19CnN0YXJ0PWRpcj10eXBlPT09Im9ubHkiJiYhc3RhcnQmJiJuZXh0U2libGluZyJ9CnJldHVybiEwfQpzdGFydD1bZm9yd2FyZD9wYXJlbnQuZmlyc3RDaGlsZDpwYXJlbnQubGFzdENoaWxkXTtpZihmb3J3YXJkJiZ1c2VDYWNoZSl7bm9kZT1wYXJlbnQ7b3V0ZXJDYWNoZT1ub2RlW2V4cGFuZG9dfHwobm9kZVtleHBhbmRvXT17fSk7dW5pcXVlQ2FjaGU9b3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXXx8KG91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF09e30pO2NhY2hlPXVuaXF1ZUNhY2hlW3R5cGVdfHxbXTtub2RlSW5kZXg9Y2FjaGVbMF09PT1kaXJydW5zJiZjYWNoZVsxXTtkaWZmPW5vZGVJbmRleCYmY2FjaGVbMl07bm9kZT1ub2RlSW5kZXgmJnBhcmVudC5jaGlsZE5vZGVzW25vZGVJbmRleF07d2hpbGUoKG5vZGU9Kytub2RlSW5kZXgmJm5vZGUmJm5vZGVbZGlyXXx8KGRpZmY9bm9kZUluZGV4PTApfHxzdGFydC5wb3AoKSkpe2lmKG5vZGUubm9kZVR5cGU9PT0xJiYrK2RpZmYmJm5vZGU9PT1lbGVtKXt1bmlxdWVDYWNoZVt0eXBlXT1bZGlycnVucyxub2RlSW5kZXgsZGlmZl07YnJlYWt9fX1lbHNle2lmKHVzZUNhY2hlKXtub2RlPWVsZW07b3V0ZXJDYWNoZT1ub2RlW2V4cGFuZG9dfHwobm9kZVtleHBhbmRvXT17fSk7dW5pcXVlQ2FjaGU9b3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXXx8KG91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF09e30pO2NhY2hlPXVuaXF1ZUNhY2hlW3R5cGVdfHxbXTtub2RlSW5kZXg9Y2FjaGVbMF09PT1kaXJydW5zJiZjYWNoZVsxXTtkaWZmPW5vZGVJbmRleH0KaWYoZGlmZj09PSExKXt3aGlsZSgobm9kZT0rK25vZGVJbmRleCYmbm9kZSYmbm9kZVtkaXJdfHwoZGlmZj1ub2RlSW5kZXg9MCl8fHN0YXJ0LnBvcCgpKSl7aWYoKG9mVHlwZT9ub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1uYW1lOm5vZGUubm9kZVR5cGU9PT0xKSYmKytkaWZmKXtpZih1c2VDYWNoZSl7b3V0ZXJDYWNoZT1ub2RlW2V4cGFuZG9dfHwobm9kZVtleHBhbmRvXT17fSk7dW5pcXVlQ2FjaGU9b3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXXx8KG91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF09e30pO3VuaXF1ZUNhY2hlW3R5cGVdPVtkaXJydW5zLGRpZmZdfQppZihub2RlPT09ZWxlbSl7YnJlYWt9fX19fQpkaWZmLT1sYXN0O3JldHVybiBkaWZmPT09Zmlyc3R8fChkaWZmJWZpcnN0PT09MCYmZGlmZi9maXJzdD49MCl9fX0sIlBTRVVETyI6ZnVuY3Rpb24ocHNldWRvLGFyZ3VtZW50KXt2YXIgYXJncyxmbj1FeHByLnBzZXVkb3NbcHNldWRvXXx8RXhwci5zZXRGaWx0ZXJzW3BzZXVkby50b0xvd2VyQ2FzZSgpXXx8U2l6emxlLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrcHNldWRvKTtpZihmbltleHBhbmRvXSl7cmV0dXJuIGZuKGFyZ3VtZW50KX0KaWYoZm4ubGVuZ3RoPjEpe2FyZ3M9W3BzZXVkbyxwc2V1ZG8sIiIsYXJndW1lbnRdO3JldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkocHNldWRvLnRvTG93ZXJDYXNlKCkpP21hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLG1hdGNoZXMpe3ZhciBpZHgsbWF0Y2hlZD1mbihzZWVkLGFyZ3VtZW50KSxpPW1hdGNoZWQubGVuZ3RoO3doaWxlKGktLSl7aWR4PWluZGV4T2Yoc2VlZCxtYXRjaGVkW2ldKTtzZWVkW2lkeF09IShtYXRjaGVzW2lkeF09bWF0Y2hlZFtpXSl9fSk6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGZuKGVsZW0sMCxhcmdzKX19CnJldHVybiBmbn19LHBzZXVkb3M6eyJub3QiOm1hcmtGdW5jdGlvbihmdW5jdGlvbihzZWxlY3Rvcil7dmFyIGlucHV0PVtdLHJlc3VsdHM9W10sbWF0Y2hlcj1jb21waWxlKHNlbGVjdG9yLnJlcGxhY2UocnRyaW0sIiQxIikpO3JldHVybiBtYXRjaGVyW2V4cGFuZG9dP21hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLG1hdGNoZXMsX2NvbnRleHQseG1sKXt2YXIgZWxlbSx1bm1hdGNoZWQ9bWF0Y2hlcihzZWVkLG51bGwseG1sLFtdKSxpPXNlZWQubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09dW5tYXRjaGVkW2ldKSl7c2VlZFtpXT0hKG1hdGNoZXNbaV09ZWxlbSl9fX0pOmZ1bmN0aW9uKGVsZW0sX2NvbnRleHQseG1sKXtpbnB1dFswXT1lbGVtO21hdGNoZXIoaW5wdXQsbnVsbCx4bWwscmVzdWx0cyk7aW5wdXRbMF09bnVsbDtyZXR1cm4hcmVzdWx0cy5wb3AoKX19KSwiaGFzIjptYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4gU2l6emxlKHNlbGVjdG9yLGVsZW0pLmxlbmd0aD4wfX0pLCJjb250YWlucyI6bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHRleHQpe3RleHQ9dGV4dC5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4oZWxlbS50ZXh0Q29udGVudHx8Z2V0VGV4dChlbGVtKSkuaW5kZXhPZih0ZXh0KT4tMX19KSwibGFuZyI6bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKGxhbmcpe2lmKCFyaWRlbnRpZmllci50ZXN0KGxhbmd8fCIiKSl7U2l6emxlLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2xhbmcpfQpsYW5nPWxhbmcucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKS50b0xvd2VyQ2FzZSgpO3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgZWxlbUxhbmc7ZG97aWYoKGVsZW1MYW5nPWRvY3VtZW50SXNIVE1MP2VsZW0ubGFuZzplbGVtLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8ZWxlbS5nZXRBdHRyaWJ1dGUoImxhbmciKSkpe2VsZW1MYW5nPWVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGVsZW1MYW5nPT09bGFuZ3x8ZWxlbUxhbmcuaW5kZXhPZihsYW5nKyItIik9PT0wfX13aGlsZSgoZWxlbT1lbGVtLnBhcmVudE5vZGUpJiZlbGVtLm5vZGVUeXBlPT09MSk7cmV0dXJuITF9fSksInRhcmdldCI6ZnVuY3Rpb24oZWxlbSl7dmFyIGhhc2g9d2luZG93LmxvY2F0aW9uJiZ3aW5kb3cubG9jYXRpb24uaGFzaDtyZXR1cm4gaGFzaCYmaGFzaC5zbGljZSgxKT09PWVsZW0uaWR9LCJyb290IjpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbT09PWRvY0VsZW19LCJmb2N1cyI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW09PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50JiYoIWRvY3VtZW50Lmhhc0ZvY3VzfHxkb2N1bWVudC5oYXNGb2N1cygpKSYmISEoZWxlbS50eXBlfHxlbGVtLmhyZWZ8fH5lbGVtLnRhYkluZGV4KX0sImVuYWJsZWQiOmNyZWF0ZURpc2FibGVkUHNldWRvKCExKSwiZGlzYWJsZWQiOmNyZWF0ZURpc2FibGVkUHNldWRvKCEwKSwiY2hlY2tlZCI6ZnVuY3Rpb24oZWxlbSl7dmFyIG5vZGVOYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4obm9kZU5hbWU9PT0iaW5wdXQiJiYhIWVsZW0uY2hlY2tlZCl8fChub2RlTmFtZT09PSJvcHRpb24iJiYhIWVsZW0uc2VsZWN0ZWQpfSwic2VsZWN0ZWQiOmZ1bmN0aW9uKGVsZW0pe2lmKGVsZW0ucGFyZW50Tm9kZSl7ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXh9CnJldHVybiBlbGVtLnNlbGVjdGVkPT09ITB9LCJlbXB0eSI6ZnVuY3Rpb24oZWxlbSl7Zm9yKGVsZW09ZWxlbS5maXJzdENoaWxkO2VsZW07ZWxlbT1lbGVtLm5leHRTaWJsaW5nKXtpZihlbGVtLm5vZGVUeXBlPDYpe3JldHVybiExfX0KcmV0dXJuITB9LCJwYXJlbnQiOmZ1bmN0aW9uKGVsZW0pe3JldHVybiFFeHByLnBzZXVkb3MuZW1wdHkoZWxlbSl9LCJoZWFkZXIiOmZ1bmN0aW9uKGVsZW0pe3JldHVybiByaGVhZGVyLnRlc3QoZWxlbS5ub2RlTmFtZSl9LCJpbnB1dCI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHJpbnB1dHMudGVzdChlbGVtLm5vZGVOYW1lKX0sImJ1dHRvbiI6ZnVuY3Rpb24oZWxlbSl7dmFyIG5hbWU9ZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiBuYW1lPT09ImlucHV0IiYmZWxlbS50eXBlPT09ImJ1dHRvbiJ8fG5hbWU9PT0iYnV0dG9uIn0sInRleHQiOmZ1bmN0aW9uKGVsZW0pe3ZhciBhdHRyO3JldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT0idGV4dCImJigoYXR0cj1lbGVtLmdldEF0dHJpYnV0ZSgidHlwZSIpKT09bnVsbHx8YXR0ci50b0xvd2VyQ2FzZSgpPT09InRleHQiKX0sImZpcnN0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksImxhc3QiOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oX21hdGNoSW5kZXhlcyxsZW5ndGgpe3JldHVybltsZW5ndGgtMV19KSwiZXEiOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oX21hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3JldHVyblthcmd1bWVudDwwP2FyZ3VtZW50K2xlbmd0aDphcmd1bWVudF19KSwiZXZlbiI6Y3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbihtYXRjaEluZGV4ZXMsbGVuZ3RoKXt2YXIgaT0wO2Zvcig7aTxsZW5ndGg7aSs9Mil7bWF0Y2hJbmRleGVzLnB1c2goaSl9CnJldHVybiBtYXRjaEluZGV4ZXN9KSwib2RkIjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgpe3ZhciBpPTE7Zm9yKDtpPGxlbmd0aDtpKz0yKXttYXRjaEluZGV4ZXMucHVzaChpKX0KcmV0dXJuIG1hdGNoSW5kZXhlc30pLCJsdCI6Y3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbihtYXRjaEluZGV4ZXMsbGVuZ3RoLGFyZ3VtZW50KXt2YXIgaT1hcmd1bWVudDwwP2FyZ3VtZW50K2xlbmd0aDphcmd1bWVudD5sZW5ndGg/bGVuZ3RoOmFyZ3VtZW50O2Zvcig7LS1pPj0wOyl7bWF0Y2hJbmRleGVzLnB1c2goaSl9CnJldHVybiBtYXRjaEluZGV4ZXN9KSwiZ3QiOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24obWF0Y2hJbmRleGVzLGxlbmd0aCxhcmd1bWVudCl7dmFyIGk9YXJndW1lbnQ8MD9hcmd1bWVudCtsZW5ndGg6YXJndW1lbnQ7Zm9yKDsrK2k8bGVuZ3RoOyl7bWF0Y2hJbmRleGVzLnB1c2goaSl9CnJldHVybiBtYXRjaEluZGV4ZXN9KX19O0V4cHIucHNldWRvcy5udGg9RXhwci5wc2V1ZG9zLmVxO2ZvcihpIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KXtFeHByLnBzZXVkb3NbaV09Y3JlYXRlSW5wdXRQc2V1ZG8oaSl9CmZvcihpIGlue3N1Ym1pdDohMCxyZXNldDohMH0pe0V4cHIucHNldWRvc1tpXT1jcmVhdGVCdXR0b25Qc2V1ZG8oaSl9CmZ1bmN0aW9uIHNldEZpbHRlcnMoKXt9CnNldEZpbHRlcnMucHJvdG90eXBlPUV4cHIuZmlsdGVycz1FeHByLnBzZXVkb3M7RXhwci5zZXRGaWx0ZXJzPW5ldyBzZXRGaWx0ZXJzKCk7dG9rZW5pemU9U2l6emxlLnRva2VuaXplPWZ1bmN0aW9uKHNlbGVjdG9yLHBhcnNlT25seSl7dmFyIG1hdGNoZWQsbWF0Y2gsdG9rZW5zLHR5cGUsc29GYXIsZ3JvdXBzLHByZUZpbHRlcnMsY2FjaGVkPXRva2VuQ2FjaGVbc2VsZWN0b3IrIiAiXTtpZihjYWNoZWQpe3JldHVybiBwYXJzZU9ubHk/MDpjYWNoZWQuc2xpY2UoMCl9CnNvRmFyPXNlbGVjdG9yO2dyb3Vwcz1bXTtwcmVGaWx0ZXJzPUV4cHIucHJlRmlsdGVyO3doaWxlKHNvRmFyKXtpZighbWF0Y2hlZHx8KG1hdGNoPXJjb21tYS5leGVjKHNvRmFyKSkpe2lmKG1hdGNoKXtzb0Zhcj1zb0Zhci5zbGljZShtYXRjaFswXS5sZW5ndGgpfHxzb0Zhcn0KZ3JvdXBzLnB1c2goKHRva2Vucz1bXSkpfQptYXRjaGVkPSExO2lmKChtYXRjaD1yY29tYmluYXRvcnMuZXhlYyhzb0ZhcikpKXttYXRjaGVkPW1hdGNoLnNoaWZ0KCk7dG9rZW5zLnB1c2goe3ZhbHVlOm1hdGNoZWQsdHlwZTptYXRjaFswXS5yZXBsYWNlKHJ0cmltLCIgIil9KTtzb0Zhcj1zb0Zhci5zbGljZShtYXRjaGVkLmxlbmd0aCl9CmZvcih0eXBlIGluIEV4cHIuZmlsdGVyKXtpZigobWF0Y2g9bWF0Y2hFeHByW3R5cGVdLmV4ZWMoc29GYXIpKSYmKCFwcmVGaWx0ZXJzW3R5cGVdfHwobWF0Y2g9cHJlRmlsdGVyc1t0eXBlXShtYXRjaCkpKSl7bWF0Y2hlZD1tYXRjaC5zaGlmdCgpO3Rva2Vucy5wdXNoKHt2YWx1ZTptYXRjaGVkLHR5cGU6dHlwZSxtYXRjaGVzOm1hdGNofSk7c29GYXI9c29GYXIuc2xpY2UobWF0Y2hlZC5sZW5ndGgpfX0KaWYoIW1hdGNoZWQpe2JyZWFrfX0KcmV0dXJuIHBhcnNlT25seT9zb0Zhci5sZW5ndGg6c29GYXI/U2l6emxlLmVycm9yKHNlbGVjdG9yKTp0b2tlbkNhY2hlKHNlbGVjdG9yLGdyb3Vwcykuc2xpY2UoMCl9O2Z1bmN0aW9uIHRvU2VsZWN0b3IodG9rZW5zKXt2YXIgaT0wLGxlbj10b2tlbnMubGVuZ3RoLHNlbGVjdG9yPSIiO2Zvcig7aTxsZW47aSsrKXtzZWxlY3Rvcis9dG9rZW5zW2ldLnZhbHVlfQpyZXR1cm4gc2VsZWN0b3J9CmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IobWF0Y2hlcixjb21iaW5hdG9yLGJhc2Upe3ZhciBkaXI9Y29tYmluYXRvci5kaXIsc2tpcD1jb21iaW5hdG9yLm5leHQsa2V5PXNraXB8fGRpcixjaGVja05vbkVsZW1lbnRzPWJhc2UmJmtleT09PSJwYXJlbnROb2RlIixkb25lTmFtZT1kb25lKys7cmV0dXJuIGNvbWJpbmF0b3IuZmlyc3Q/ZnVuY3Rpb24oZWxlbSxjb250ZXh0LHhtbCl7d2hpbGUoKGVsZW09ZWxlbVtkaXJdKSl7aWYoZWxlbS5ub2RlVHlwZT09PTF8fGNoZWNrTm9uRWxlbWVudHMpe3JldHVybiBtYXRjaGVyKGVsZW0sY29udGV4dCx4bWwpfX0KcmV0dXJuITF9OmZ1bmN0aW9uKGVsZW0sY29udGV4dCx4bWwpe3ZhciBvbGRDYWNoZSx1bmlxdWVDYWNoZSxvdXRlckNhY2hlLG5ld0NhY2hlPVtkaXJydW5zLGRvbmVOYW1lXTtpZih4bWwpe3doaWxlKChlbGVtPWVsZW1bZGlyXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xfHxjaGVja05vbkVsZW1lbnRzKXtpZihtYXRjaGVyKGVsZW0sY29udGV4dCx4bWwpKXtyZXR1cm4hMH19fX1lbHNle3doaWxlKChlbGVtPWVsZW1bZGlyXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xfHxjaGVja05vbkVsZW1lbnRzKXtvdXRlckNhY2hlPWVsZW1bZXhwYW5kb118fChlbGVtW2V4cGFuZG9dPXt9KTt1bmlxdWVDYWNoZT1vdXRlckNhY2hlW2VsZW0udW5pcXVlSURdfHwob3V0ZXJDYWNoZVtlbGVtLnVuaXF1ZUlEXT17fSk7aWYoc2tpcCYmc2tpcD09PWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7ZWxlbT1lbGVtW2Rpcl18fGVsZW19ZWxzZSBpZigob2xkQ2FjaGU9dW5pcXVlQ2FjaGVba2V5XSkmJm9sZENhY2hlWzBdPT09ZGlycnVucyYmb2xkQ2FjaGVbMV09PT1kb25lTmFtZSl7cmV0dXJuKG5ld0NhY2hlWzJdPW9sZENhY2hlWzJdKX1lbHNle3VuaXF1ZUNhY2hlW2tleV09bmV3Q2FjaGU7aWYoKG5ld0NhY2hlWzJdPW1hdGNoZXIoZWxlbSxjb250ZXh0LHhtbCkpKXtyZXR1cm4hMH19fX19CnJldHVybiExfX0KZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpe3JldHVybiBtYXRjaGVycy5sZW5ndGg+MT9mdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXt2YXIgaT1tYXRjaGVycy5sZW5ndGg7d2hpbGUoaS0tKXtpZighbWF0Y2hlcnNbaV0oZWxlbSxjb250ZXh0LHhtbCkpe3JldHVybiExfX0KcmV0dXJuITB9Om1hdGNoZXJzWzBdfQpmdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKHNlbGVjdG9yLGNvbnRleHRzLHJlc3VsdHMpe3ZhciBpPTAsbGVuPWNvbnRleHRzLmxlbmd0aDtmb3IoO2k8bGVuO2krKyl7U2l6emxlKHNlbGVjdG9yLGNvbnRleHRzW2ldLHJlc3VsdHMpfQpyZXR1cm4gcmVzdWx0c30KZnVuY3Rpb24gY29uZGVuc2UodW5tYXRjaGVkLG1hcCxmaWx0ZXIsY29udGV4dCx4bWwpe3ZhciBlbGVtLG5ld1VubWF0Y2hlZD1bXSxpPTAsbGVuPXVubWF0Y2hlZC5sZW5ndGgsbWFwcGVkPW1hcCE9bnVsbDtmb3IoO2k8bGVuO2krKyl7aWYoKGVsZW09dW5tYXRjaGVkW2ldKSl7aWYoIWZpbHRlcnx8ZmlsdGVyKGVsZW0sY29udGV4dCx4bWwpKXtuZXdVbm1hdGNoZWQucHVzaChlbGVtKTtpZihtYXBwZWQpe21hcC5wdXNoKGkpfX19fQpyZXR1cm4gbmV3VW5tYXRjaGVkfQpmdW5jdGlvbiBzZXRNYXRjaGVyKHByZUZpbHRlcixzZWxlY3RvcixtYXRjaGVyLHBvc3RGaWx0ZXIscG9zdEZpbmRlcixwb3N0U2VsZWN0b3Ipe2lmKHBvc3RGaWx0ZXImJiFwb3N0RmlsdGVyW2V4cGFuZG9dKXtwb3N0RmlsdGVyPXNldE1hdGNoZXIocG9zdEZpbHRlcil9CmlmKHBvc3RGaW5kZXImJiFwb3N0RmluZGVyW2V4cGFuZG9dKXtwb3N0RmluZGVyPXNldE1hdGNoZXIocG9zdEZpbmRlcixwb3N0U2VsZWN0b3IpfQpyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHNlZWQscmVzdWx0cyxjb250ZXh0LHhtbCl7dmFyIHRlbXAsaSxlbGVtLHByZU1hcD1bXSxwb3N0TWFwPVtdLHByZWV4aXN0aW5nPXJlc3VsdHMubGVuZ3RoLGVsZW1zPXNlZWR8fG11bHRpcGxlQ29udGV4dHMoc2VsZWN0b3J8fCIqIixjb250ZXh0Lm5vZGVUeXBlP1tjb250ZXh0XTpjb250ZXh0LFtdKSxtYXRjaGVySW49cHJlRmlsdGVyJiYoc2VlZHx8IXNlbGVjdG9yKT9jb25kZW5zZShlbGVtcyxwcmVNYXAscHJlRmlsdGVyLGNvbnRleHQseG1sKTplbGVtcyxtYXRjaGVyT3V0PW1hdGNoZXI/cG9zdEZpbmRlcnx8KHNlZWQ/cHJlRmlsdGVyOnByZWV4aXN0aW5nfHxwb3N0RmlsdGVyKT9bXTpyZXN1bHRzOm1hdGNoZXJJbjtpZihtYXRjaGVyKXttYXRjaGVyKG1hdGNoZXJJbixtYXRjaGVyT3V0LGNvbnRleHQseG1sKX0KaWYocG9zdEZpbHRlcil7dGVtcD1jb25kZW5zZShtYXRjaGVyT3V0LHBvc3RNYXApO3Bvc3RGaWx0ZXIodGVtcCxbXSxjb250ZXh0LHhtbCk7aT10ZW1wLmxlbmd0aDt3aGlsZShpLS0pe2lmKChlbGVtPXRlbXBbaV0pKXttYXRjaGVyT3V0W3Bvc3RNYXBbaV1dPSEobWF0Y2hlckluW3Bvc3RNYXBbaV1dPWVsZW0pfX19CmlmKHNlZWQpe2lmKHBvc3RGaW5kZXJ8fHByZUZpbHRlcil7aWYocG9zdEZpbmRlcil7dGVtcD1bXTtpPW1hdGNoZXJPdXQubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09bWF0Y2hlck91dFtpXSkpe3RlbXAucHVzaCgobWF0Y2hlckluW2ldPWVsZW0pKX19CnBvc3RGaW5kZXIobnVsbCwobWF0Y2hlck91dD1bXSksdGVtcCx4bWwpfQppPW1hdGNoZXJPdXQubGVuZ3RoO3doaWxlKGktLSl7aWYoKGVsZW09bWF0Y2hlck91dFtpXSkmJih0ZW1wPXBvc3RGaW5kZXI/aW5kZXhPZihzZWVkLGVsZW0pOnByZU1hcFtpXSk+LTEpe3NlZWRbdGVtcF09IShyZXN1bHRzW3RlbXBdPWVsZW0pfX19fWVsc2V7bWF0Y2hlck91dD1jb25kZW5zZShtYXRjaGVyT3V0PT09cmVzdWx0cz9tYXRjaGVyT3V0LnNwbGljZShwcmVleGlzdGluZyxtYXRjaGVyT3V0Lmxlbmd0aCk6bWF0Y2hlck91dCk7aWYocG9zdEZpbmRlcil7cG9zdEZpbmRlcihudWxsLHJlc3VsdHMsbWF0Y2hlck91dCx4bWwpfWVsc2V7cHVzaC5hcHBseShyZXN1bHRzLG1hdGNoZXJPdXQpfX19KX0KZnVuY3Rpb24gbWF0Y2hlckZyb21Ub2tlbnModG9rZW5zKXt2YXIgY2hlY2tDb250ZXh0LG1hdGNoZXIsaixsZW49dG9rZW5zLmxlbmd0aCxsZWFkaW5nUmVsYXRpdmU9RXhwci5yZWxhdGl2ZVt0b2tlbnNbMF0udHlwZV0saW1wbGljaXRSZWxhdGl2ZT1sZWFkaW5nUmVsYXRpdmV8fEV4cHIucmVsYXRpdmVbIiAiXSxpPWxlYWRpbmdSZWxhdGl2ZT8xOjAsbWF0Y2hDb250ZXh0PWFkZENvbWJpbmF0b3IoZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW09PT1jaGVja0NvbnRleHR9LGltcGxpY2l0UmVsYXRpdmUsITApLG1hdGNoQW55Q29udGV4dD1hZGRDb21iaW5hdG9yKGZ1bmN0aW9uKGVsZW0pe3JldHVybiBpbmRleE9mKGNoZWNrQ29udGV4dCxlbGVtKT4tMX0saW1wbGljaXRSZWxhdGl2ZSwhMCksbWF0Y2hlcnM9W2Z1bmN0aW9uKGVsZW0sY29udGV4dCx4bWwpe3ZhciByZXQ9KCFsZWFkaW5nUmVsYXRpdmUmJih4bWx8fGNvbnRleHQhPT1vdXRlcm1vc3RDb250ZXh0KSl8fCgoY2hlY2tDb250ZXh0PWNvbnRleHQpLm5vZGVUeXBlP21hdGNoQ29udGV4dChlbGVtLGNvbnRleHQseG1sKTptYXRjaEFueUNvbnRleHQoZWxlbSxjb250ZXh0LHhtbCkpO2NoZWNrQ29udGV4dD1udWxsO3JldHVybiByZXR9XTtmb3IoO2k8bGVuO2krKyl7aWYoKG1hdGNoZXI9RXhwci5yZWxhdGl2ZVt0b2tlbnNbaV0udHlwZV0pKXttYXRjaGVycz1bYWRkQ29tYmluYXRvcihlbGVtZW50TWF0Y2hlcihtYXRjaGVycyksbWF0Y2hlcildfWVsc2V7bWF0Y2hlcj1FeHByLmZpbHRlclt0b2tlbnNbaV0udHlwZV0uYXBwbHkobnVsbCx0b2tlbnNbaV0ubWF0Y2hlcyk7aWYobWF0Y2hlcltleHBhbmRvXSl7aj0rK2k7Zm9yKDtqPGxlbjtqKyspe2lmKEV4cHIucmVsYXRpdmVbdG9rZW5zW2pdLnR5cGVdKXticmVha319CnJldHVybiBzZXRNYXRjaGVyKGk+MSYmZWxlbWVudE1hdGNoZXIobWF0Y2hlcnMpLGk+MSYmdG9TZWxlY3Rvcih0b2tlbnMuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6dG9rZW5zW2ktMl0udHlwZT09PSIgIj8iKiI6IiJ9KSkucmVwbGFjZShydHJpbSwiJDEiKSxtYXRjaGVyLGk8aiYmbWF0Y2hlckZyb21Ub2tlbnModG9rZW5zLnNsaWNlKGksaikpLGo8bGVuJiZtYXRjaGVyRnJvbVRva2VucygodG9rZW5zPXRva2Vucy5zbGljZShqKSkpLGo8bGVuJiZ0b1NlbGVjdG9yKHRva2VucykpfQptYXRjaGVycy5wdXNoKG1hdGNoZXIpfX0KcmV0dXJuIGVsZW1lbnRNYXRjaGVyKG1hdGNoZXJzKX0KZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKGVsZW1lbnRNYXRjaGVycyxzZXRNYXRjaGVycyl7dmFyIGJ5U2V0PXNldE1hdGNoZXJzLmxlbmd0aD4wLGJ5RWxlbWVudD1lbGVtZW50TWF0Y2hlcnMubGVuZ3RoPjAsc3VwZXJNYXRjaGVyPWZ1bmN0aW9uKHNlZWQsY29udGV4dCx4bWwscmVzdWx0cyxvdXRlcm1vc3Qpe3ZhciBlbGVtLGosbWF0Y2hlcixtYXRjaGVkQ291bnQ9MCxpPSIwIix1bm1hdGNoZWQ9c2VlZCYmW10sc2V0TWF0Y2hlZD1bXSxjb250ZXh0QmFja3VwPW91dGVybW9zdENvbnRleHQsZWxlbXM9c2VlZHx8YnlFbGVtZW50JiZFeHByLmZpbmQuVEFHKCIqIixvdXRlcm1vc3QpLGRpcnJ1bnNVbmlxdWU9KGRpcnJ1bnMrPWNvbnRleHRCYWNrdXA9PW51bGw/MTpNYXRoLnJhbmRvbSgpfHwwLjEpLGxlbj1lbGVtcy5sZW5ndGg7aWYob3V0ZXJtb3N0KXtvdXRlcm1vc3RDb250ZXh0PWNvbnRleHQ9PWRvY3VtZW50fHxjb250ZXh0fHxvdXRlcm1vc3R9CmZvcig7aSE9PWxlbiYmKGVsZW09ZWxlbXNbaV0pIT1udWxsO2krKyl7aWYoYnlFbGVtZW50JiZlbGVtKXtqPTA7aWYoIWNvbnRleHQmJmVsZW0ub3duZXJEb2N1bWVudCE9ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pO3htbD0hZG9jdW1lbnRJc0hUTUx9CndoaWxlKChtYXRjaGVyPWVsZW1lbnRNYXRjaGVyc1tqKytdKSl7aWYobWF0Y2hlcihlbGVtLGNvbnRleHR8fGRvY3VtZW50LHhtbCkpe3Jlc3VsdHMucHVzaChlbGVtKTticmVha319CmlmKG91dGVybW9zdCl7ZGlycnVucz1kaXJydW5zVW5pcXVlfX0KaWYoYnlTZXQpe2lmKChlbGVtPSFtYXRjaGVyJiZlbGVtKSl7bWF0Y2hlZENvdW50LS19CmlmKHNlZWQpe3VubWF0Y2hlZC5wdXNoKGVsZW0pfX19Cm1hdGNoZWRDb3VudCs9aTtpZihieVNldCYmaSE9PW1hdGNoZWRDb3VudCl7aj0wO3doaWxlKChtYXRjaGVyPXNldE1hdGNoZXJzW2orK10pKXttYXRjaGVyKHVubWF0Y2hlZCxzZXRNYXRjaGVkLGNvbnRleHQseG1sKX0KaWYoc2VlZCl7aWYobWF0Y2hlZENvdW50PjApe3doaWxlKGktLSl7aWYoISh1bm1hdGNoZWRbaV18fHNldE1hdGNoZWRbaV0pKXtzZXRNYXRjaGVkW2ldPXBvcC5jYWxsKHJlc3VsdHMpfX19CnNldE1hdGNoZWQ9Y29uZGVuc2Uoc2V0TWF0Y2hlZCl9CnB1c2guYXBwbHkocmVzdWx0cyxzZXRNYXRjaGVkKTtpZihvdXRlcm1vc3QmJiFzZWVkJiZzZXRNYXRjaGVkLmxlbmd0aD4wJiYobWF0Y2hlZENvdW50K3NldE1hdGNoZXJzLmxlbmd0aCk+MSl7U2l6emxlLnVuaXF1ZVNvcnQocmVzdWx0cyl9fQppZihvdXRlcm1vc3Qpe2RpcnJ1bnM9ZGlycnVuc1VuaXF1ZTtvdXRlcm1vc3RDb250ZXh0PWNvbnRleHRCYWNrdXB9CnJldHVybiB1bm1hdGNoZWR9O3JldHVybiBieVNldD9tYXJrRnVuY3Rpb24oc3VwZXJNYXRjaGVyKTpzdXBlck1hdGNoZXJ9CmNvbXBpbGU9U2l6emxlLmNvbXBpbGU9ZnVuY3Rpb24oc2VsZWN0b3IsbWF0Y2gpe3ZhciBpLHNldE1hdGNoZXJzPVtdLGVsZW1lbnRNYXRjaGVycz1bXSxjYWNoZWQ9Y29tcGlsZXJDYWNoZVtzZWxlY3RvcisiICJdO2lmKCFjYWNoZWQpe2lmKCFtYXRjaCl7bWF0Y2g9dG9rZW5pemUoc2VsZWN0b3IpfQppPW1hdGNoLmxlbmd0aDt3aGlsZShpLS0pe2NhY2hlZD1tYXRjaGVyRnJvbVRva2VucyhtYXRjaFtpXSk7aWYoY2FjaGVkW2V4cGFuZG9dKXtzZXRNYXRjaGVycy5wdXNoKGNhY2hlZCl9ZWxzZXtlbGVtZW50TWF0Y2hlcnMucHVzaChjYWNoZWQpfX0KY2FjaGVkPWNvbXBpbGVyQ2FjaGUoc2VsZWN0b3IsbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKGVsZW1lbnRNYXRjaGVycyxzZXRNYXRjaGVycykpO2NhY2hlZC5zZWxlY3Rvcj1zZWxlY3Rvcn0KcmV0dXJuIGNhY2hlZH07c2VsZWN0PVNpenpsZS5zZWxlY3Q9ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCxyZXN1bHRzLHNlZWQpe3ZhciBpLHRva2Vucyx0b2tlbix0eXBlLGZpbmQsY29tcGlsZWQ9dHlwZW9mIHNlbGVjdG9yPT09ImZ1bmN0aW9uIiYmc2VsZWN0b3IsbWF0Y2g9IXNlZWQmJnRva2VuaXplKChzZWxlY3Rvcj1jb21waWxlZC5zZWxlY3Rvcnx8c2VsZWN0b3IpKTtyZXN1bHRzPXJlc3VsdHN8fFtdO2lmKG1hdGNoLmxlbmd0aD09PTEpe3Rva2Vucz1tYXRjaFswXT1tYXRjaFswXS5zbGljZSgwKTtpZih0b2tlbnMubGVuZ3RoPjImJih0b2tlbj10b2tlbnNbMF0pLnR5cGU9PT0iSUQiJiZjb250ZXh0Lm5vZGVUeXBlPT09OSYmZG9jdW1lbnRJc0hUTUwmJkV4cHIucmVsYXRpdmVbdG9rZW5zWzFdLnR5cGVdKXtjb250ZXh0PShFeHByLmZpbmQuSUQodG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpLGNvbnRleHQpfHxbXSlbMF07aWYoIWNvbnRleHQpe3JldHVybiByZXN1bHRzfWVsc2UgaWYoY29tcGlsZWQpe2NvbnRleHQ9Y29udGV4dC5wYXJlbnROb2RlfQpzZWxlY3Rvcj1zZWxlY3Rvci5zbGljZSh0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfQppPW1hdGNoRXhwci5uZWVkc0NvbnRleHQudGVzdChzZWxlY3Rvcik/MDp0b2tlbnMubGVuZ3RoO3doaWxlKGktLSl7dG9rZW49dG9rZW5zW2ldO2lmKEV4cHIucmVsYXRpdmVbKHR5cGU9dG9rZW4udHlwZSldKXticmVha30KaWYoKGZpbmQ9RXhwci5maW5kW3R5cGVdKSl7aWYoKHNlZWQ9ZmluZCh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSkscnNpYmxpbmcudGVzdCh0b2tlbnNbMF0udHlwZSkmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpKSl7dG9rZW5zLnNwbGljZShpLDEpO3NlbGVjdG9yPXNlZWQubGVuZ3RoJiZ0b1NlbGVjdG9yKHRva2Vucyk7aWYoIXNlbGVjdG9yKXtwdXNoLmFwcGx5KHJlc3VsdHMsc2VlZCk7cmV0dXJuIHJlc3VsdHN9CmJyZWFrfX19fShjb21waWxlZHx8Y29tcGlsZShzZWxlY3RvcixtYXRjaCkpKHNlZWQsY29udGV4dCwhZG9jdW1lbnRJc0hUTUwscmVzdWx0cywhY29udGV4dHx8cnNpYmxpbmcudGVzdChzZWxlY3RvcikmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpO3JldHVybiByZXN1bHRzfTtzdXBwb3J0LnNvcnRTdGFibGU9ZXhwYW5kby5zcGxpdCgiIikuc29ydChzb3J0T3JkZXIpLmpvaW4oIiIpPT09ZXhwYW5kbztzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM9ISFoYXNEdXBsaWNhdGU7c2V0RG9jdW1lbnQoKTtzdXBwb3J0LnNvcnREZXRhY2hlZD1hc3NlcnQoZnVuY3Rpb24oZWwpe3JldHVybiBlbC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKSYxfSk7aWYoIWFzc2VydChmdW5jdGlvbihlbCl7ZWwuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IjtyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIjIn0pKXthZGRIYW5kbGUoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGVsZW0sbmFtZSxpc1hNTCl7aWYoIWlzWE1MKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSxuYW1lLnRvTG93ZXJDYXNlKCk9PT0idHlwZSI/MToyKX19KX0KaWYoIXN1cHBvcnQuYXR0cmlidXRlc3x8IWFzc2VydChmdW5jdGlvbihlbCl7ZWwuaW5uZXJIVE1MPSI8aW5wdXQvPiI7ZWwuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIik7cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPT09IiJ9KSl7YWRkSGFuZGxlKCJ2YWx1ZSIsZnVuY3Rpb24oZWxlbSxfbmFtZSxpc1hNTCl7aWYoIWlzWE1MJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiKXtyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWV9fSl9CmlmKCFhc3NlcnQoZnVuY3Rpb24oZWwpe3JldHVybiBlbC5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIik9PW51bGx9KSl7YWRkSGFuZGxlKGJvb2xlYW5zLGZ1bmN0aW9uKGVsZW0sbmFtZSxpc1hNTCl7dmFyIHZhbDtpZighaXNYTUwpe3JldHVybiBlbGVtW25hbWVdPT09ITA/bmFtZS50b0xvd2VyQ2FzZSgpOih2YWw9ZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKG5hbWUpKSYmdmFsLnNwZWNpZmllZD92YWwudmFsdWU6bnVsbH19KX0KcmV0dXJuIFNpenpsZX0pKHdpbmRvdyk7alF1ZXJ5LmZpbmQ9U2l6emxlO2pRdWVyeS5leHByPVNpenpsZS5zZWxlY3RvcnM7alF1ZXJ5LmV4cHJbIjoiXT1qUXVlcnkuZXhwci5wc2V1ZG9zO2pRdWVyeS51bmlxdWVTb3J0PWpRdWVyeS51bmlxdWU9U2l6emxlLnVuaXF1ZVNvcnQ7alF1ZXJ5LnRleHQ9U2l6emxlLmdldFRleHQ7alF1ZXJ5LmlzWE1MRG9jPVNpenpsZS5pc1hNTDtqUXVlcnkuY29udGFpbnM9U2l6emxlLmNvbnRhaW5zO2pRdWVyeS5lc2NhcGVTZWxlY3Rvcj1TaXp6bGUuZXNjYXBlO3ZhciBkaXI9ZnVuY3Rpb24oZWxlbSxkaXIsdW50aWwpe3ZhciBtYXRjaGVkPVtdLHRydW5jYXRlPXVudGlsIT09dW5kZWZpbmVkO3doaWxlKChlbGVtPWVsZW1bZGlyXSkmJmVsZW0ubm9kZVR5cGUhPT05KXtpZihlbGVtLm5vZGVUeXBlPT09MSl7aWYodHJ1bmNhdGUmJmpRdWVyeShlbGVtKS5pcyh1bnRpbCkpe2JyZWFrfQptYXRjaGVkLnB1c2goZWxlbSl9fQpyZXR1cm4gbWF0Y2hlZH07dmFyIHNpYmxpbmdzPWZ1bmN0aW9uKG4sZWxlbSl7dmFyIG1hdGNoZWQ9W107Zm9yKDtuO249bi5uZXh0U2libGluZyl7aWYobi5ub2RlVHlwZT09PTEmJm4hPT1lbGVtKXttYXRjaGVkLnB1c2gobil9fQpyZXR1cm4gbWF0Y2hlZH07dmFyIHJuZWVkc0NvbnRleHQ9alF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O2Z1bmN0aW9uIG5vZGVOYW1lKGVsZW0sbmFtZSl7cmV0dXJuIGVsZW0ubm9kZU5hbWUmJmVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PW5hbWUudG9Mb3dlckNhc2UoKX07dmFyIHJzaW5nbGVUYWc9KC9ePChbYS16XVteXC9cMD46XHgyMFx0XHJcblxmXSopW1x4MjBcdFxyXG5cZl0qXC8/Pig/OjxcL1wxPnwpJC9pKTtmdW5jdGlvbiB3aW5ub3coZWxlbWVudHMscXVhbGlmaWVyLG5vdCl7aWYoaXNGdW5jdGlvbihxdWFsaWZpZXIpKXtyZXR1cm4galF1ZXJ5LmdyZXAoZWxlbWVudHMsZnVuY3Rpb24oZWxlbSxpKXtyZXR1cm4hIXF1YWxpZmllci5jYWxsKGVsZW0saSxlbGVtKSE9PW5vdH0pfQppZihxdWFsaWZpZXIubm9kZVR5cGUpe3JldHVybiBqUXVlcnkuZ3JlcChlbGVtZW50cyxmdW5jdGlvbihlbGVtKXtyZXR1cm4oZWxlbT09PXF1YWxpZmllcikhPT1ub3R9KX0KaWYodHlwZW9mIHF1YWxpZmllciE9PSJzdHJpbmciKXtyZXR1cm4galF1ZXJ5LmdyZXAoZWxlbWVudHMsZnVuY3Rpb24oZWxlbSl7cmV0dXJuKGluZGV4T2YuY2FsbChxdWFsaWZpZXIsZWxlbSk+LTEpIT09bm90fSl9CnJldHVybiBqUXVlcnkuZmlsdGVyKHF1YWxpZmllcixlbGVtZW50cyxub3QpfQpqUXVlcnkuZmlsdGVyPWZ1bmN0aW9uKGV4cHIsZWxlbXMsbm90KXt2YXIgZWxlbT1lbGVtc1swXTtpZihub3Qpe2V4cHI9Ijpub3QoIitleHByKyIpIn0KaWYoZWxlbXMubGVuZ3RoPT09MSYmZWxlbS5ub2RlVHlwZT09PTEpe3JldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoZWxlbSxleHByKT9bZWxlbV06W119CnJldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzKGV4cHIsalF1ZXJ5LmdyZXAoZWxlbXMsZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW0ubm9kZVR5cGU9PT0xfSkpfTtqUXVlcnkuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgaSxyZXQsbGVuPXRoaXMubGVuZ3RoLHNlbGY9dGhpcztpZih0eXBlb2Ygc2VsZWN0b3IhPT0ic3RyaW5nIil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeShzZWxlY3RvcikuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGk9MDtpPGxlbjtpKyspe2lmKGpRdWVyeS5jb250YWlucyhzZWxmW2ldLHRoaXMpKXtyZXR1cm4hMH19fSkpfQpyZXQ9dGhpcy5wdXNoU3RhY2soW10pO2ZvcihpPTA7aTxsZW47aSsrKXtqUXVlcnkuZmluZChzZWxlY3RvcixzZWxmW2ldLHJldCl9CnJldHVybiBsZW4+MT9qUXVlcnkudW5pcXVlU29ydChyZXQpOnJldH0sZmlsdGVyOmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sod2lubm93KHRoaXMsc2VsZWN0b3J8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHdpbm5vdyh0aGlzLHNlbGVjdG9yfHxbXSwhMCkpfSxpczpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuISF3aW5ub3codGhpcyx0eXBlb2Ygc2VsZWN0b3I9PT0ic3RyaW5nIiYmcm5lZWRzQ29udGV4dC50ZXN0KHNlbGVjdG9yKT9qUXVlcnkoc2VsZWN0b3IpOnNlbGVjdG9yfHxbXSwhMSkubGVuZ3RofX0pO3ZhciByb290alF1ZXJ5LHJxdWlja0V4cHI9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLyxpbml0PWpRdWVyeS5mbi5pbml0PWZ1bmN0aW9uKHNlbGVjdG9yLGNvbnRleHQscm9vdCl7dmFyIG1hdGNoLGVsZW07aWYoIXNlbGVjdG9yKXtyZXR1cm4gdGhpc30Kcm9vdD1yb290fHxyb290alF1ZXJ5O2lmKHR5cGVvZiBzZWxlY3Rvcj09PSJzdHJpbmciKXtpZihzZWxlY3RvclswXT09PSI8IiYmc2VsZWN0b3Jbc2VsZWN0b3IubGVuZ3RoLTFdPT09Ij4iJiZzZWxlY3Rvci5sZW5ndGg+PTMpe21hdGNoPVtudWxsLHNlbGVjdG9yLG51bGxdfWVsc2V7bWF0Y2g9cnF1aWNrRXhwci5leGVjKHNlbGVjdG9yKX0KaWYobWF0Y2gmJihtYXRjaFsxXXx8IWNvbnRleHQpKXtpZihtYXRjaFsxXSl7Y29udGV4dD1jb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5P2NvbnRleHRbMF06Y29udGV4dDtqUXVlcnkubWVyZ2UodGhpcyxqUXVlcnkucGFyc2VIVE1MKG1hdGNoWzFdLGNvbnRleHQmJmNvbnRleHQubm9kZVR5cGU/Y29udGV4dC5vd25lckRvY3VtZW50fHxjb250ZXh0OmRvY3VtZW50LCEwKSk7aWYocnNpbmdsZVRhZy50ZXN0KG1hdGNoWzFdKSYmalF1ZXJ5LmlzUGxhaW5PYmplY3QoY29udGV4dCkpe2ZvcihtYXRjaCBpbiBjb250ZXh0KXtpZihpc0Z1bmN0aW9uKHRoaXNbbWF0Y2hdKSl7dGhpc1ttYXRjaF0oY29udGV4dFttYXRjaF0pfWVsc2V7dGhpcy5hdHRyKG1hdGNoLGNvbnRleHRbbWF0Y2hdKX19fQpyZXR1cm4gdGhpc31lbHNle2VsZW09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWF0Y2hbMl0pO2lmKGVsZW0pe3RoaXNbMF09ZWxlbTt0aGlzLmxlbmd0aD0xfQpyZXR1cm4gdGhpc319ZWxzZSBpZighY29udGV4dHx8Y29udGV4dC5qcXVlcnkpe3JldHVybihjb250ZXh0fHxyb290KS5maW5kKHNlbGVjdG9yKX1lbHNle3JldHVybiB0aGlzLmNvbnN0cnVjdG9yKGNvbnRleHQpLmZpbmQoc2VsZWN0b3IpfX1lbHNlIGlmKHNlbGVjdG9yLm5vZGVUeXBlKXt0aGlzWzBdPXNlbGVjdG9yO3RoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9ZWxzZSBpZihpc0Z1bmN0aW9uKHNlbGVjdG9yKSl7cmV0dXJuIHJvb3QucmVhZHkhPT11bmRlZmluZWQ/cm9vdC5yZWFkeShzZWxlY3Rvcik6c2VsZWN0b3IoalF1ZXJ5KX0KcmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoc2VsZWN0b3IsdGhpcyl9O2luaXQucHJvdG90eXBlPWpRdWVyeS5mbjtyb290alF1ZXJ5PWpRdWVyeShkb2N1bWVudCk7dmFyIHJwYXJlbnRzcHJldj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxndWFyYW50ZWVkVW5pcXVlPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2pRdWVyeS5mbi5leHRlbmQoe2hhczpmdW5jdGlvbih0YXJnZXQpe3ZhciB0YXJnZXRzPWpRdWVyeSh0YXJnZXQsdGhpcyksbD10YXJnZXRzLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgaT0wO2Zvcig7aTxsO2krKyl7aWYoalF1ZXJ5LmNvbnRhaW5zKHRoaXMsdGFyZ2V0c1tpXSkpe3JldHVybiEwfX19KX0sY2xvc2VzdDpmdW5jdGlvbihzZWxlY3RvcnMsY29udGV4dCl7dmFyIGN1cixpPTAsbD10aGlzLmxlbmd0aCxtYXRjaGVkPVtdLHRhcmdldHM9dHlwZW9mIHNlbGVjdG9ycyE9PSJzdHJpbmciJiZqUXVlcnkoc2VsZWN0b3JzKTtpZighcm5lZWRzQ29udGV4dC50ZXN0KHNlbGVjdG9ycykpe2Zvcig7aTxsO2krKyl7Zm9yKGN1cj10aGlzW2ldO2N1ciYmY3VyIT09Y29udGV4dDtjdXI9Y3VyLnBhcmVudE5vZGUpe2lmKGN1ci5ub2RlVHlwZTwxMSYmKHRhcmdldHM/dGFyZ2V0cy5pbmRleChjdXIpPi0xOmN1ci5ub2RlVHlwZT09PTEmJmpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvcihjdXIsc2VsZWN0b3JzKSkpe21hdGNoZWQucHVzaChjdXIpO2JyZWFrfX19fQpyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWF0Y2hlZC5sZW5ndGg+MT9qUXVlcnkudW5pcXVlU29ydChtYXRjaGVkKTptYXRjaGVkKX0saW5kZXg6ZnVuY3Rpb24oZWxlbSl7aWYoIWVsZW0pe3JldHVybih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfQppZih0eXBlb2YgZWxlbT09PSJzdHJpbmciKXtyZXR1cm4gaW5kZXhPZi5jYWxsKGpRdWVyeShlbGVtKSx0aGlzWzBdKX0KcmV0dXJuIGluZGV4T2YuY2FsbCh0aGlzLGVsZW0uanF1ZXJ5P2VsZW1bMF06ZWxlbSl9LGFkZDpmdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0KXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soalF1ZXJ5LnVuaXF1ZVNvcnQoalF1ZXJ5Lm1lcmdlKHRoaXMuZ2V0KCksalF1ZXJ5KHNlbGVjdG9yLGNvbnRleHQpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gdGhpcy5hZGQoc2VsZWN0b3I9PW51bGw/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoc2VsZWN0b3IpKX19KTtmdW5jdGlvbiBzaWJsaW5nKGN1cixkaXIpe3doaWxlKChjdXI9Y3VyW2Rpcl0pJiZjdXIubm9kZVR5cGUhPT0xKXt9CnJldHVybiBjdXJ9CmpRdWVyeS5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD1lbGVtLnBhcmVudE5vZGU7cmV0dXJuIHBhcmVudCYmcGFyZW50Lm5vZGVUeXBlIT09MTE/cGFyZW50Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGRpcihlbGVtLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlbGVtLF9pLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sInBhcmVudE5vZGUiLHVudGlsKX0sbmV4dDpmdW5jdGlvbihlbGVtKXtyZXR1cm4gc2libGluZyhlbGVtLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5nKGVsZW0sInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkaXIoZWxlbSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZGlyKGVsZW0sInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oZWxlbSxfaSx1bnRpbCl7cmV0dXJuIGRpcihlbGVtLCJuZXh0U2libGluZyIsdW50aWwpfSxwcmV2VW50aWw6ZnVuY3Rpb24oZWxlbSxfaSx1bnRpbCl7cmV0dXJuIGRpcihlbGVtLCJwcmV2aW91c1NpYmxpbmciLHVudGlsKX0sc2libGluZ3M6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmdzKChlbGVtLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGVsZW0pfSxjaGlsZHJlbjpmdW5jdGlvbihlbGVtKXtyZXR1cm4gc2libGluZ3MoZWxlbS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oZWxlbSl7aWYoZWxlbS5jb250ZW50RG9jdW1lbnQhPW51bGwmJmdldFByb3RvKGVsZW0uY29udGVudERvY3VtZW50KSl7cmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50fQppZihub2RlTmFtZShlbGVtLCJ0ZW1wbGF0ZSIpKXtlbGVtPWVsZW0uY29udGVudHx8ZWxlbX0KcmV0dXJuIGpRdWVyeS5tZXJnZShbXSxlbGVtLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24obmFtZSxmbil7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHVudGlsLHNlbGVjdG9yKXt2YXIgbWF0Y2hlZD1qUXVlcnkubWFwKHRoaXMsZm4sdW50aWwpO2lmKG5hbWUuc2xpY2UoLTUpIT09IlVudGlsIil7c2VsZWN0b3I9dW50aWx9CmlmKHNlbGVjdG9yJiZ0eXBlb2Ygc2VsZWN0b3I9PT0ic3RyaW5nIil7bWF0Y2hlZD1qUXVlcnkuZmlsdGVyKHNlbGVjdG9yLG1hdGNoZWQpfQppZih0aGlzLmxlbmd0aD4xKXtpZighZ3VhcmFudGVlZFVuaXF1ZVtuYW1lXSl7alF1ZXJ5LnVuaXF1ZVNvcnQobWF0Y2hlZCl9CmlmKHJwYXJlbnRzcHJldi50ZXN0KG5hbWUpKXttYXRjaGVkLnJldmVyc2UoKX19CnJldHVybiB0aGlzLnB1c2hTdGFjayhtYXRjaGVkKX19KTt2YXIgcm5vdGh0bWx3aGl0ZT0oL1teXHgyMFx0XHJcblxmXSsvZyk7ZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyhvcHRpb25zKXt2YXIgb2JqZWN0PXt9O2pRdWVyeS5lYWNoKG9wdGlvbnMubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFtdLGZ1bmN0aW9uKF8sZmxhZyl7b2JqZWN0W2ZsYWddPSEwfSk7cmV0dXJuIG9iamVjdH0KalF1ZXJ5LkNhbGxiYWNrcz1mdW5jdGlvbihvcHRpb25zKXtvcHRpb25zPXR5cGVvZiBvcHRpb25zPT09InN0cmluZyI/Y3JlYXRlT3B0aW9ucyhvcHRpb25zKTpqUXVlcnkuZXh0ZW5kKHt9LG9wdGlvbnMpO3ZhciBmaXJpbmcsbWVtb3J5LGZpcmVkLGxvY2tlZCxsaXN0PVtdLHF1ZXVlPVtdLGZpcmluZ0luZGV4PS0xLGZpcmU9ZnVuY3Rpb24oKXtsb2NrZWQ9bG9ja2VkfHxvcHRpb25zLm9uY2U7ZmlyZWQ9ZmlyaW5nPSEwO2Zvcig7cXVldWUubGVuZ3RoO2ZpcmluZ0luZGV4PS0xKXttZW1vcnk9cXVldWUuc2hpZnQoKTt3aGlsZSgrK2ZpcmluZ0luZGV4PGxpc3QubGVuZ3RoKXtpZihsaXN0W2ZpcmluZ0luZGV4XS5hcHBseShtZW1vcnlbMF0sbWVtb3J5WzFdKT09PSExJiZvcHRpb25zLnN0b3BPbkZhbHNlKXtmaXJpbmdJbmRleD1saXN0Lmxlbmd0aDttZW1vcnk9ITF9fX0KaWYoIW9wdGlvbnMubWVtb3J5KXttZW1vcnk9ITF9CmZpcmluZz0hMTtpZihsb2NrZWQpe2lmKG1lbW9yeSl7bGlzdD1bXX1lbHNle2xpc3Q9IiJ9fX0sc2VsZj17YWRkOmZ1bmN0aW9uKCl7aWYobGlzdCl7aWYobWVtb3J5JiYhZmlyaW5nKXtmaXJpbmdJbmRleD1saXN0Lmxlbmd0aC0xO3F1ZXVlLnB1c2gobWVtb3J5KX0oZnVuY3Rpb24gYWRkKGFyZ3Mpe2pRdWVyeS5lYWNoKGFyZ3MsZnVuY3Rpb24oXyxhcmcpe2lmKGlzRnVuY3Rpb24oYXJnKSl7aWYoIW9wdGlvbnMudW5pcXVlfHwhc2VsZi5oYXMoYXJnKSl7bGlzdC5wdXNoKGFyZyl9fWVsc2UgaWYoYXJnJiZhcmcubGVuZ3RoJiZ0b1R5cGUoYXJnKSE9PSJzdHJpbmciKXthZGQoYXJnKX19KX0pKGFyZ3VtZW50cyk7aWYobWVtb3J5JiYhZmlyaW5nKXtmaXJlKCl9fQpyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7alF1ZXJ5LmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKF8sYXJnKXt2YXIgaW5kZXg7d2hpbGUoKGluZGV4PWpRdWVyeS5pbkFycmF5KGFyZyxsaXN0LGluZGV4KSk+LTEpe2xpc3Quc3BsaWNlKGluZGV4LDEpO2lmKGluZGV4PD1maXJpbmdJbmRleCl7ZmlyaW5nSW5kZXgtLX19fSk7cmV0dXJuIHRoaXN9LGhhczpmdW5jdGlvbihmbil7cmV0dXJuIGZuP2pRdWVyeS5pbkFycmF5KGZuLGxpc3QpPi0xOmxpc3QubGVuZ3RoPjB9LGVtcHR5OmZ1bmN0aW9uKCl7aWYobGlzdCl7bGlzdD1bXX0KcmV0dXJuIHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtsb2NrZWQ9cXVldWU9W107bGlzdD1tZW1vcnk9IiI7cmV0dXJuIHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWxpc3R9LGxvY2s6ZnVuY3Rpb24oKXtsb2NrZWQ9cXVldWU9W107aWYoIW1lbW9yeSYmIWZpcmluZyl7bGlzdD1tZW1vcnk9IiJ9CnJldHVybiB0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWxvY2tlZH0sZmlyZVdpdGg6ZnVuY3Rpb24oY29udGV4dCxhcmdzKXtpZighbG9ja2VkKXthcmdzPWFyZ3N8fFtdO2FyZ3M9W2NvbnRleHQsYXJncy5zbGljZT9hcmdzLnNsaWNlKCk6YXJnc107cXVldWUucHVzaChhcmdzKTtpZighZmlyaW5nKXtmaXJlKCl9fQpyZXR1cm4gdGhpc30sZmlyZTpmdW5jdGlvbigpe3NlbGYuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZmlyZWR9fTtyZXR1cm4gc2VsZn07ZnVuY3Rpb24gSWRlbnRpdHkodil7cmV0dXJuIHZ9CmZ1bmN0aW9uIFRocm93ZXIoZXgpe3Rocm93IGV4fQpmdW5jdGlvbiBhZG9wdFZhbHVlKHZhbHVlLHJlc29sdmUscmVqZWN0LG5vVmFsdWUpe3ZhciBtZXRob2Q7dHJ5e2lmKHZhbHVlJiZpc0Z1bmN0aW9uKChtZXRob2Q9dmFsdWUucHJvbWlzZSkpKXttZXRob2QuY2FsbCh2YWx1ZSkuZG9uZShyZXNvbHZlKS5mYWlsKHJlamVjdCl9ZWxzZSBpZih2YWx1ZSYmaXNGdW5jdGlvbigobWV0aG9kPXZhbHVlLnRoZW4pKSl7bWV0aG9kLmNhbGwodmFsdWUscmVzb2x2ZSxyZWplY3QpfWVsc2V7cmVzb2x2ZS5hcHBseSh1bmRlZmluZWQsW3ZhbHVlXS5zbGljZShub1ZhbHVlKSl9fWNhdGNoKHZhbHVlKXtyZWplY3QuYXBwbHkodW5kZWZpbmVkLFt2YWx1ZV0pfX0KalF1ZXJ5LmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZnVuYyl7dmFyIHR1cGxlcz1bWyJub3RpZnkiLCJwcm9ncmVzcyIsalF1ZXJ5LkNhbGxiYWNrcygibWVtb3J5IiksalF1ZXJ5LkNhbGxiYWNrcygibWVtb3J5IiksMl0sWyJyZXNvbHZlIiwiZG9uZSIsalF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksMSwicmVqZWN0ZWQiXV0sc3RhdGU9InBlbmRpbmciLHByb21pc2U9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHN0YXRlfSxhbHdheXM6ZnVuY3Rpb24oKXtkZWZlcnJlZC5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpO3JldHVybiB0aGlzfSwiY2F0Y2giOmZ1bmN0aW9uKGZuKXtyZXR1cm4gcHJvbWlzZS50aGVuKG51bGwsZm4pfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGZucz1hcmd1bWVudHM7cmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbihuZXdEZWZlcil7alF1ZXJ5LmVhY2godHVwbGVzLGZ1bmN0aW9uKF9pLHR1cGxlKXt2YXIgZm49aXNGdW5jdGlvbihmbnNbdHVwbGVbNF1dKSYmZm5zW3R1cGxlWzRdXTtkZWZlcnJlZFt0dXBsZVsxXV0oZnVuY3Rpb24oKXt2YXIgcmV0dXJuZWQ9Zm4mJmZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihyZXR1cm5lZCYmaXNGdW5jdGlvbihyZXR1cm5lZC5wcm9taXNlKSl7cmV0dXJuZWQucHJvbWlzZSgpLnByb2dyZXNzKG5ld0RlZmVyLm5vdGlmeSkuZG9uZShuZXdEZWZlci5yZXNvbHZlKS5mYWlsKG5ld0RlZmVyLnJlamVjdCl9ZWxzZXtuZXdEZWZlclt0dXBsZVswXSsiV2l0aCJdKHRoaXMsZm4/W3JldHVybmVkXTphcmd1bWVudHMpfX0pfSk7Zm5zPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24ob25GdWxmaWxsZWQsb25SZWplY3RlZCxvblByb2dyZXNzKXt2YXIgbWF4RGVwdGg9MDtmdW5jdGlvbiByZXNvbHZlKGRlcHRoLGRlZmVycmVkLGhhbmRsZXIsc3BlY2lhbCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHRoYXQ9dGhpcyxhcmdzPWFyZ3VtZW50cyxtaWdodFRocm93PWZ1bmN0aW9uKCl7dmFyIHJldHVybmVkLHRoZW47aWYoZGVwdGg8bWF4RGVwdGgpe3JldHVybn0KcmV0dXJuZWQ9aGFuZGxlci5hcHBseSh0aGF0LGFyZ3MpO2lmKHJldHVybmVkPT09ZGVmZXJyZWQucHJvbWlzZSgpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb24iKX0KdGhlbj1yZXR1cm5lZCYmKHR5cGVvZiByZXR1cm5lZD09PSJvYmplY3QifHx0eXBlb2YgcmV0dXJuZWQ9PT0iZnVuY3Rpb24iKSYmcmV0dXJuZWQudGhlbjtpZihpc0Z1bmN0aW9uKHRoZW4pKXtpZihzcGVjaWFsKXt0aGVuLmNhbGwocmV0dXJuZWQscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxzcGVjaWFsKSxyZXNvbHZlKG1heERlcHRoLGRlZmVycmVkLFRocm93ZXIsc3BlY2lhbCkpfWVsc2V7bWF4RGVwdGgrKzt0aGVuLmNhbGwocmV0dXJuZWQscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxzcGVjaWFsKSxyZXNvbHZlKG1heERlcHRoLGRlZmVycmVkLFRocm93ZXIsc3BlY2lhbCkscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxkZWZlcnJlZC5ub3RpZnlXaXRoKSl9fWVsc2V7aWYoaGFuZGxlciE9PUlkZW50aXR5KXt0aGF0PXVuZGVmaW5lZDthcmdzPVtyZXR1cm5lZF19KHNwZWNpYWx8fGRlZmVycmVkLnJlc29sdmVXaXRoKSh0aGF0LGFyZ3MpfX0scHJvY2Vzcz1zcGVjaWFsP21pZ2h0VGhyb3c6ZnVuY3Rpb24oKXt0cnl7bWlnaHRUaHJvdygpfWNhdGNoKGUpe2lmKGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKXtqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHByb2Nlc3Muc3RhY2tUcmFjZSl9CmlmKGRlcHRoKzE+PW1heERlcHRoKXtpZihoYW5kbGVyIT09VGhyb3dlcil7dGhhdD11bmRlZmluZWQ7YXJncz1bZV19CmRlZmVycmVkLnJlamVjdFdpdGgodGhhdCxhcmdzKX19fTtpZihkZXB0aCl7cHJvY2VzcygpfWVsc2V7aWYoalF1ZXJ5LkRlZmVycmVkLmdldFN0YWNrSG9vayl7cHJvY2Vzcy5zdGFja1RyYWNlPWpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2soKX0Kd2luZG93LnNldFRpbWVvdXQocHJvY2Vzcyl9fX0KcmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbihuZXdEZWZlcil7dHVwbGVzWzBdWzNdLmFkZChyZXNvbHZlKDAsbmV3RGVmZXIsaXNGdW5jdGlvbihvblByb2dyZXNzKT9vblByb2dyZXNzOklkZW50aXR5LG5ld0RlZmVyLm5vdGlmeVdpdGgpKTt0dXBsZXNbMV1bM10uYWRkKHJlc29sdmUoMCxuZXdEZWZlcixpc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKT9vbkZ1bGZpbGxlZDpJZGVudGl0eSkpO3R1cGxlc1syXVszXS5hZGQocmVzb2x2ZSgwLG5ld0RlZmVyLGlzRnVuY3Rpb24ob25SZWplY3RlZCk/b25SZWplY3RlZDpUaHJvd2VyKSl9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqIT1udWxsP2pRdWVyeS5leHRlbmQob2JqLHByb21pc2UpOnByb21pc2V9fSxkZWZlcnJlZD17fTtqUXVlcnkuZWFjaCh0dXBsZXMsZnVuY3Rpb24oaSx0dXBsZSl7dmFyIGxpc3Q9dHVwbGVbMl0sc3RhdGVTdHJpbmc9dHVwbGVbNV07cHJvbWlzZVt0dXBsZVsxXV09bGlzdC5hZGQ7aWYoc3RhdGVTdHJpbmcpe2xpc3QuYWRkKGZ1bmN0aW9uKCl7c3RhdGU9c3RhdGVTdHJpbmd9LHR1cGxlc1szLWldWzJdLmRpc2FibGUsdHVwbGVzWzMtaV1bM10uZGlzYWJsZSx0dXBsZXNbMF1bMl0ubG9jayx0dXBsZXNbMF1bM10ubG9jayl9Cmxpc3QuYWRkKHR1cGxlWzNdLmZpcmUpO2RlZmVycmVkW3R1cGxlWzBdXT1mdW5jdGlvbigpe2RlZmVycmVkW3R1cGxlWzBdKyJXaXRoIl0odGhpcz09PWRlZmVycmVkP3VuZGVmaW5lZDp0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9O2RlZmVycmVkW3R1cGxlWzBdKyJXaXRoIl09bGlzdC5maXJlV2l0aH0pO3Byb21pc2UucHJvbWlzZShkZWZlcnJlZCk7aWYoZnVuYyl7ZnVuYy5jYWxsKGRlZmVycmVkLGRlZmVycmVkKX0KcmV0dXJuIGRlZmVycmVkfSx3aGVuOmZ1bmN0aW9uKHNpbmdsZVZhbHVlKXt2YXIKcmVtYWluaW5nPWFyZ3VtZW50cy5sZW5ndGgsaT1yZW1haW5pbmcscmVzb2x2ZUNvbnRleHRzPUFycmF5KGkpLHJlc29sdmVWYWx1ZXM9c2xpY2UuY2FsbChhcmd1bWVudHMpLG1hc3Rlcj1qUXVlcnkuRGVmZXJyZWQoKSx1cGRhdGVGdW5jPWZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbih2YWx1ZSl7cmVzb2x2ZUNvbnRleHRzW2ldPXRoaXM7cmVzb2x2ZVZhbHVlc1tpXT1hcmd1bWVudHMubGVuZ3RoPjE/c2xpY2UuY2FsbChhcmd1bWVudHMpOnZhbHVlO2lmKCEoLS1yZW1haW5pbmcpKXttYXN0ZXIucmVzb2x2ZVdpdGgocmVzb2x2ZUNvbnRleHRzLHJlc29sdmVWYWx1ZXMpfX19O2lmKHJlbWFpbmluZzw9MSl7YWRvcHRWYWx1ZShzaW5nbGVWYWx1ZSxtYXN0ZXIuZG9uZSh1cGRhdGVGdW5jKGkpKS5yZXNvbHZlLG1hc3Rlci5yZWplY3QsIXJlbWFpbmluZyk7aWYobWFzdGVyLnN0YXRlKCk9PT0icGVuZGluZyJ8fGlzRnVuY3Rpb24ocmVzb2x2ZVZhbHVlc1tpXSYmcmVzb2x2ZVZhbHVlc1tpXS50aGVuKSl7cmV0dXJuIG1hc3Rlci50aGVuKCl9fQp3aGlsZShpLS0pe2Fkb3B0VmFsdWUocmVzb2x2ZVZhbHVlc1tpXSx1cGRhdGVGdW5jKGkpLG1hc3Rlci5yZWplY3QpfQpyZXR1cm4gbWFzdGVyLnByb21pc2UoKX19KTt2YXIgcmVycm9yTmFtZXM9L14oRXZhbHxJbnRlcm5hbHxSYW5nZXxSZWZlcmVuY2V8U3ludGF4fFR5cGV8VVJJKUVycm9yJC87alF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2s9ZnVuY3Rpb24oZXJyb3Isc3RhY2spe2lmKHdpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS53YXJuJiZlcnJvciYmcmVycm9yTmFtZXMudGVzdChlcnJvci5uYW1lKSl7d2luZG93LmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIitlcnJvci5tZXNzYWdlLGVycm9yLnN0YWNrLHN0YWNrKX19O2pRdWVyeS5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlcnJvcil7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlcnJvcn0pfTt2YXIgcmVhZHlMaXN0PWpRdWVyeS5EZWZlcnJlZCgpO2pRdWVyeS5mbi5yZWFkeT1mdW5jdGlvbihmbil7cmVhZHlMaXN0LnRoZW4oZm4pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKXtqUXVlcnkucmVhZHlFeGNlcHRpb24oZXJyb3IpfSk7cmV0dXJuIHRoaXN9O2pRdWVyeS5leHRlbmQoe2lzUmVhZHk6ITEscmVhZHlXYWl0OjEscmVhZHk6ZnVuY3Rpb24od2FpdCl7aWYod2FpdD09PSEwPy0talF1ZXJ5LnJlYWR5V2FpdDpqUXVlcnkuaXNSZWFkeSl7cmV0dXJufQpqUXVlcnkuaXNSZWFkeT0hMDtpZih3YWl0IT09ITAmJi0talF1ZXJ5LnJlYWR5V2FpdD4wKXtyZXR1cm59CnJlYWR5TGlzdC5yZXNvbHZlV2l0aChkb2N1bWVudCxbalF1ZXJ5XSl9fSk7alF1ZXJ5LnJlYWR5LnRoZW49cmVhZHlMaXN0LnRoZW47ZnVuY3Rpb24gY29tcGxldGVkKCl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsY29tcGxldGVkKTt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsY29tcGxldGVkKTtqUXVlcnkucmVhZHkoKX0KaWYoZG9jdW1lbnQucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSJ8fChkb2N1bWVudC5yZWFkeVN0YXRlIT09ImxvYWRpbmciJiYhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKSl7d2luZG93LnNldFRpbWVvdXQoalF1ZXJ5LnJlYWR5KX1lbHNle2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGNvbXBsZXRlZCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGNvbXBsZXRlZCl9CnZhciBhY2Nlc3M9ZnVuY3Rpb24oZWxlbXMsZm4sa2V5LHZhbHVlLGNoYWluYWJsZSxlbXB0eUdldCxyYXcpe3ZhciBpPTAsbGVuPWVsZW1zLmxlbmd0aCxidWxrPWtleT09bnVsbDtpZih0b1R5cGUoa2V5KT09PSJvYmplY3QiKXtjaGFpbmFibGU9ITA7Zm9yKGkgaW4ga2V5KXthY2Nlc3MoZWxlbXMsZm4saSxrZXlbaV0sITAsZW1wdHlHZXQscmF3KX19ZWxzZSBpZih2YWx1ZSE9PXVuZGVmaW5lZCl7Y2hhaW5hYmxlPSEwO2lmKCFpc0Z1bmN0aW9uKHZhbHVlKSl7cmF3PSEwfQppZihidWxrKXtpZihyYXcpe2ZuLmNhbGwoZWxlbXMsdmFsdWUpO2ZuPW51bGx9ZWxzZXtidWxrPWZuO2ZuPWZ1bmN0aW9uKGVsZW0sX2tleSx2YWx1ZSl7cmV0dXJuIGJ1bGsuY2FsbChqUXVlcnkoZWxlbSksdmFsdWUpfX19CmlmKGZuKXtmb3IoO2k8bGVuO2krKyl7Zm4oZWxlbXNbaV0sa2V5LHJhdz92YWx1ZTp2YWx1ZS5jYWxsKGVsZW1zW2ldLGksZm4oZWxlbXNbaV0sa2V5KSkpfX19CmlmKGNoYWluYWJsZSl7cmV0dXJuIGVsZW1zfQppZihidWxrKXtyZXR1cm4gZm4uY2FsbChlbGVtcyl9CnJldHVybiBsZW4/Zm4oZWxlbXNbMF0sa2V5KTplbXB0eUdldH07dmFyIHJtc1ByZWZpeD0vXi1tcy0vLHJkYXNoQWxwaGE9Ly0oW2Etel0pL2c7ZnVuY3Rpb24gZmNhbWVsQ2FzZShfYWxsLGxldHRlcil7cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpfQpmdW5jdGlvbiBjYW1lbENhc2Uoc3RyaW5nKXtyZXR1cm4gc3RyaW5nLnJlcGxhY2Uocm1zUHJlZml4LCJtcy0iKS5yZXBsYWNlKHJkYXNoQWxwaGEsZmNhbWVsQ2FzZSl9CnZhciBhY2NlcHREYXRhPWZ1bmN0aW9uKG93bmVyKXtyZXR1cm4gb3duZXIubm9kZVR5cGU9PT0xfHxvd25lci5ub2RlVHlwZT09PTl8fCEoK293bmVyLm5vZGVUeXBlKX07ZnVuY3Rpb24gRGF0YSgpe3RoaXMuZXhwYW5kbz1qUXVlcnkuZXhwYW5kbytEYXRhLnVpZCsrfQpEYXRhLnVpZD0xO0RhdGEucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihvd25lcil7dmFyIHZhbHVlPW93bmVyW3RoaXMuZXhwYW5kb107aWYoIXZhbHVlKXt2YWx1ZT17fTtpZihhY2NlcHREYXRhKG93bmVyKSl7aWYob3duZXIubm9kZVR5cGUpe293bmVyW3RoaXMuZXhwYW5kb109dmFsdWV9ZWxzZXtPYmplY3QuZGVmaW5lUHJvcGVydHkob3duZXIsdGhpcy5leHBhbmRvLHt2YWx1ZTp2YWx1ZSxjb25maWd1cmFibGU6ITB9KX19fQpyZXR1cm4gdmFsdWV9LHNldDpmdW5jdGlvbihvd25lcixkYXRhLHZhbHVlKXt2YXIgcHJvcCxjYWNoZT10aGlzLmNhY2hlKG93bmVyKTtpZih0eXBlb2YgZGF0YT09PSJzdHJpbmciKXtjYWNoZVtjYW1lbENhc2UoZGF0YSldPXZhbHVlfWVsc2V7Zm9yKHByb3AgaW4gZGF0YSl7Y2FjaGVbY2FtZWxDYXNlKHByb3ApXT1kYXRhW3Byb3BdfX0KcmV0dXJuIGNhY2hlfSxnZXQ6ZnVuY3Rpb24ob3duZXIsa2V5KXtyZXR1cm4ga2V5PT09dW5kZWZpbmVkP3RoaXMuY2FjaGUob3duZXIpOm93bmVyW3RoaXMuZXhwYW5kb10mJm93bmVyW3RoaXMuZXhwYW5kb11bY2FtZWxDYXNlKGtleSldfSxhY2Nlc3M6ZnVuY3Rpb24ob3duZXIsa2V5LHZhbHVlKXtpZihrZXk9PT11bmRlZmluZWR8fCgoa2V5JiZ0eXBlb2Yga2V5PT09InN0cmluZyIpJiZ2YWx1ZT09PXVuZGVmaW5lZCkpe3JldHVybiB0aGlzLmdldChvd25lcixrZXkpfQp0aGlzLnNldChvd25lcixrZXksdmFsdWUpO3JldHVybiB2YWx1ZSE9PXVuZGVmaW5lZD92YWx1ZTprZXl9LHJlbW92ZTpmdW5jdGlvbihvd25lcixrZXkpe3ZhciBpLGNhY2hlPW93bmVyW3RoaXMuZXhwYW5kb107aWYoY2FjaGU9PT11bmRlZmluZWQpe3JldHVybn0KaWYoa2V5IT09dW5kZWZpbmVkKXtpZihBcnJheS5pc0FycmF5KGtleSkpe2tleT1rZXkubWFwKGNhbWVsQ2FzZSl9ZWxzZXtrZXk9Y2FtZWxDYXNlKGtleSk7a2V5PWtleSBpbiBjYWNoZT9ba2V5XTooa2V5Lm1hdGNoKHJub3RodG1sd2hpdGUpfHxbXSl9Cmk9a2V5Lmxlbmd0aDt3aGlsZShpLS0pe2RlbGV0ZSBjYWNoZVtrZXlbaV1dfX0KaWYoa2V5PT09dW5kZWZpbmVkfHxqUXVlcnkuaXNFbXB0eU9iamVjdChjYWNoZSkpe2lmKG93bmVyLm5vZGVUeXBlKXtvd25lclt0aGlzLmV4cGFuZG9dPXVuZGVmaW5lZH1lbHNle2RlbGV0ZSBvd25lclt0aGlzLmV4cGFuZG9dfX19LGhhc0RhdGE6ZnVuY3Rpb24ob3duZXIpe3ZhciBjYWNoZT1vd25lclt0aGlzLmV4cGFuZG9dO3JldHVybiBjYWNoZSE9PXVuZGVmaW5lZCYmIWpRdWVyeS5pc0VtcHR5T2JqZWN0KGNhY2hlKX19O3ZhciBkYXRhUHJpdj1uZXcgRGF0YSgpO3ZhciBkYXRhVXNlcj1uZXcgRGF0YSgpO3ZhciByYnJhY2U9L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxybXVsdGlEYXNoPS9bQS1aXS9nO2Z1bmN0aW9uIGdldERhdGEoZGF0YSl7aWYoZGF0YT09PSJ0cnVlIil7cmV0dXJuITB9CmlmKGRhdGE9PT0iZmFsc2UiKXtyZXR1cm4hMX0KaWYoZGF0YT09PSJudWxsIil7cmV0dXJuIG51bGx9CmlmKGRhdGE9PT0rZGF0YSsiIil7cmV0dXJuK2RhdGF9CmlmKHJicmFjZS50ZXN0KGRhdGEpKXtyZXR1cm4gSlNPTi5wYXJzZShkYXRhKX0KcmV0dXJuIGRhdGF9CmZ1bmN0aW9uIGRhdGFBdHRyKGVsZW0sa2V5LGRhdGEpe3ZhciBuYW1lO2lmKGRhdGE9PT11bmRlZmluZWQmJmVsZW0ubm9kZVR5cGU9PT0xKXtuYW1lPSJkYXRhLSIra2V5LnJlcGxhY2Uocm11bHRpRGFzaCwiLSQmIikudG9Mb3dlckNhc2UoKTtkYXRhPWVsZW0uZ2V0QXR0cmlidXRlKG5hbWUpO2lmKHR5cGVvZiBkYXRhPT09InN0cmluZyIpe3RyeXtkYXRhPWdldERhdGEoZGF0YSl9Y2F0Y2goZSl7fQpkYXRhVXNlci5zZXQoZWxlbSxrZXksZGF0YSl9ZWxzZXtkYXRhPXVuZGVmaW5lZH19CnJldHVybiBkYXRhfQpqUXVlcnkuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkYXRhVXNlci5oYXNEYXRhKGVsZW0pfHxkYXRhUHJpdi5oYXNEYXRhKGVsZW0pfSxkYXRhOmZ1bmN0aW9uKGVsZW0sbmFtZSxkYXRhKXtyZXR1cm4gZGF0YVVzZXIuYWNjZXNzKGVsZW0sbmFtZSxkYXRhKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlbGVtLG5hbWUpe2RhdGFVc2VyLnJlbW92ZShlbGVtLG5hbWUpfSxfZGF0YTpmdW5jdGlvbihlbGVtLG5hbWUsZGF0YSl7cmV0dXJuIGRhdGFQcml2LmFjY2VzcyhlbGVtLG5hbWUsZGF0YSl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGVsZW0sbmFtZSl7ZGF0YVByaXYucmVtb3ZlKGVsZW0sbmFtZSl9fSk7alF1ZXJ5LmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihrZXksdmFsdWUpe3ZhciBpLG5hbWUsZGF0YSxlbGVtPXRoaXNbMF0sYXR0cnM9ZWxlbSYmZWxlbS5hdHRyaWJ1dGVzO2lmKGtleT09PXVuZGVmaW5lZCl7aWYodGhpcy5sZW5ndGgpe2RhdGE9ZGF0YVVzZXIuZ2V0KGVsZW0pO2lmKGVsZW0ubm9kZVR5cGU9PT0xJiYhZGF0YVByaXYuZ2V0KGVsZW0sImhhc0RhdGFBdHRycyIpKXtpPWF0dHJzLmxlbmd0aDt3aGlsZShpLS0pe2lmKGF0dHJzW2ldKXtuYW1lPWF0dHJzW2ldLm5hbWU7aWYobmFtZS5pbmRleE9mKCJkYXRhLSIpPT09MCl7bmFtZT1jYW1lbENhc2UobmFtZS5zbGljZSg1KSk7ZGF0YUF0dHIoZWxlbSxuYW1lLGRhdGFbbmFtZV0pfX19CmRhdGFQcml2LnNldChlbGVtLCJoYXNEYXRhQXR0cnMiLCEwKX19CnJldHVybiBkYXRhfQppZih0eXBlb2Yga2V5PT09Im9iamVjdCIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkYXRhVXNlci5zZXQodGhpcyxrZXkpfSl9CnJldHVybiBhY2Nlc3ModGhpcyxmdW5jdGlvbih2YWx1ZSl7dmFyIGRhdGE7aWYoZWxlbSYmdmFsdWU9PT11bmRlZmluZWQpe2RhdGE9ZGF0YVVzZXIuZ2V0KGVsZW0sa2V5KTtpZihkYXRhIT09dW5kZWZpbmVkKXtyZXR1cm4gZGF0YX0KZGF0YT1kYXRhQXR0cihlbGVtLGtleSk7aWYoZGF0YSE9PXVuZGVmaW5lZCl7cmV0dXJuIGRhdGF9CnJldHVybn0KdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGF0YVVzZXIuc2V0KHRoaXMsa2V5LHZhbHVlKX0pfSxudWxsLHZhbHVlLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihrZXkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkYXRhVXNlci5yZW1vdmUodGhpcyxrZXkpfSl9fSk7alF1ZXJ5LmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZWxlbSx0eXBlLGRhdGEpe3ZhciBxdWV1ZTtpZihlbGVtKXt0eXBlPSh0eXBlfHwiZngiKSsicXVldWUiO3F1ZXVlPWRhdGFQcml2LmdldChlbGVtLHR5cGUpO2lmKGRhdGEpe2lmKCFxdWV1ZXx8QXJyYXkuaXNBcnJheShkYXRhKSl7cXVldWU9ZGF0YVByaXYuYWNjZXNzKGVsZW0sdHlwZSxqUXVlcnkubWFrZUFycmF5KGRhdGEpKX1lbHNle3F1ZXVlLnB1c2goZGF0YSl9fQpyZXR1cm4gcXVldWV8fFtdfX0sZGVxdWV1ZTpmdW5jdGlvbihlbGVtLHR5cGUpe3R5cGU9dHlwZXx8ImZ4Ijt2YXIgcXVldWU9alF1ZXJ5LnF1ZXVlKGVsZW0sdHlwZSksc3RhcnRMZW5ndGg9cXVldWUubGVuZ3RoLGZuPXF1ZXVlLnNoaWZ0KCksaG9va3M9alF1ZXJ5Ll9xdWV1ZUhvb2tzKGVsZW0sdHlwZSksbmV4dD1mdW5jdGlvbigpe2pRdWVyeS5kZXF1ZXVlKGVsZW0sdHlwZSl9O2lmKGZuPT09ImlucHJvZ3Jlc3MiKXtmbj1xdWV1ZS5zaGlmdCgpO3N0YXJ0TGVuZ3RoLS19CmlmKGZuKXtpZih0eXBlPT09ImZ4Iil7cXVldWUudW5zaGlmdCgiaW5wcm9ncmVzcyIpfQpkZWxldGUgaG9va3Muc3RvcDtmbi5jYWxsKGVsZW0sbmV4dCxob29rcyl9CmlmKCFzdGFydExlbmd0aCYmaG9va3Mpe2hvb2tzLmVtcHR5LmZpcmUoKX19LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGVsZW0sdHlwZSl7dmFyIGtleT10eXBlKyJxdWV1ZUhvb2tzIjtyZXR1cm4gZGF0YVByaXYuZ2V0KGVsZW0sa2V5KXx8ZGF0YVByaXYuYWNjZXNzKGVsZW0sa2V5LHtlbXB0eTpqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe2RhdGFQcml2LnJlbW92ZShlbGVtLFt0eXBlKyJxdWV1ZSIsa2V5XSl9KX0pfX0pO2pRdWVyeS5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKHR5cGUsZGF0YSl7dmFyIHNldHRlcj0yO2lmKHR5cGVvZiB0eXBlIT09InN0cmluZyIpe2RhdGE9dHlwZTt0eXBlPSJmeCI7c2V0dGVyLS19CmlmKGFyZ3VtZW50cy5sZW5ndGg8c2V0dGVyKXtyZXR1cm4galF1ZXJ5LnF1ZXVlKHRoaXNbMF0sdHlwZSl9CnJldHVybiBkYXRhPT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHF1ZXVlPWpRdWVyeS5xdWV1ZSh0aGlzLHR5cGUsZGF0YSk7alF1ZXJ5Ll9xdWV1ZUhvb2tzKHRoaXMsdHlwZSk7aWYodHlwZT09PSJmeCImJnF1ZXVlWzBdIT09ImlucHJvZ3Jlc3MiKXtqUXVlcnkuZGVxdWV1ZSh0aGlzLHR5cGUpfX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKHR5cGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkuZGVxdWV1ZSh0aGlzLHR5cGUpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24odHlwZSl7cmV0dXJuIHRoaXMucXVldWUodHlwZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24odHlwZSxvYmope3ZhciB0bXAsY291bnQ9MSxkZWZlcj1qUXVlcnkuRGVmZXJyZWQoKSxlbGVtZW50cz10aGlzLGk9dGhpcy5sZW5ndGgscmVzb2x2ZT1mdW5jdGlvbigpe2lmKCEoLS1jb3VudCkpe2RlZmVyLnJlc29sdmVXaXRoKGVsZW1lbnRzLFtlbGVtZW50c10pfX07aWYodHlwZW9mIHR5cGUhPT0ic3RyaW5nIil7b2JqPXR5cGU7dHlwZT11bmRlZmluZWR9CnR5cGU9dHlwZXx8ImZ4Ijt3aGlsZShpLS0pe3RtcD1kYXRhUHJpdi5nZXQoZWxlbWVudHNbaV0sdHlwZSsicXVldWVIb29rcyIpO2lmKHRtcCYmdG1wLmVtcHR5KXtjb3VudCsrO3RtcC5lbXB0eS5hZGQocmVzb2x2ZSl9fQpyZXNvbHZlKCk7cmV0dXJuIGRlZmVyLnByb21pc2Uob2JqKX19KTt2YXIgcG51bT0oL1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLykuc291cmNlO3ZhciByY3NzTnVtPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitwbnVtKyIpKFthLXolXSopJCIsImkiKTt2YXIgY3NzRXhwYW5kPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il07dmFyIGRvY3VtZW50RWxlbWVudD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7dmFyIGlzQXR0YWNoZWQ9ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGpRdWVyeS5jb250YWlucyhlbGVtLm93bmVyRG9jdW1lbnQsZWxlbSl9LGNvbXBvc2VkPXtjb21wb3NlZDohMH07aWYoZG9jdW1lbnRFbGVtZW50LmdldFJvb3ROb2RlKXtpc0F0dGFjaGVkPWZ1bmN0aW9uKGVsZW0pe3JldHVybiBqUXVlcnkuY29udGFpbnMoZWxlbS5vd25lckRvY3VtZW50LGVsZW0pfHxlbGVtLmdldFJvb3ROb2RlKGNvbXBvc2VkKT09PWVsZW0ub3duZXJEb2N1bWVudH19CnZhciBpc0hpZGRlbldpdGhpblRyZWU9ZnVuY3Rpb24oZWxlbSxlbCl7ZWxlbT1lbHx8ZWxlbTtyZXR1cm4gZWxlbS5zdHlsZS5kaXNwbGF5PT09Im5vbmUifHxlbGVtLnN0eWxlLmRpc3BsYXk9PT0iIiYmaXNBdHRhY2hlZChlbGVtKSYmalF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5Iik9PT0ibm9uZSJ9O2Z1bmN0aW9uIGFkanVzdENTUyhlbGVtLHByb3AsdmFsdWVQYXJ0cyx0d2Vlbil7dmFyIGFkanVzdGVkLHNjYWxlLG1heEl0ZXJhdGlvbnM9MjAsY3VycmVudFZhbHVlPXR3ZWVuP2Z1bmN0aW9uKCl7cmV0dXJuIHR3ZWVuLmN1cigpfTpmdW5jdGlvbigpe3JldHVybiBqUXVlcnkuY3NzKGVsZW0scHJvcCwiIil9LGluaXRpYWw9Y3VycmVudFZhbHVlKCksdW5pdD12YWx1ZVBhcnRzJiZ2YWx1ZVBhcnRzWzNdfHwoalF1ZXJ5LmNzc051bWJlcltwcm9wXT8iIjoicHgiKSxpbml0aWFsSW5Vbml0PWVsZW0ubm9kZVR5cGUmJihqUXVlcnkuY3NzTnVtYmVyW3Byb3BdfHx1bml0IT09InB4IiYmK2luaXRpYWwpJiZyY3NzTnVtLmV4ZWMoalF1ZXJ5LmNzcyhlbGVtLHByb3ApKTtpZihpbml0aWFsSW5Vbml0JiZpbml0aWFsSW5Vbml0WzNdIT09dW5pdCl7aW5pdGlhbD1pbml0aWFsLzI7dW5pdD11bml0fHxpbml0aWFsSW5Vbml0WzNdO2luaXRpYWxJblVuaXQ9K2luaXRpYWx8fDE7d2hpbGUobWF4SXRlcmF0aW9ucy0tKXtqUXVlcnkuc3R5bGUoZWxlbSxwcm9wLGluaXRpYWxJblVuaXQrdW5pdCk7aWYoKDEtc2NhbGUpKigxLShzY2FsZT1jdXJyZW50VmFsdWUoKS9pbml0aWFsfHwwLjUpKTw9MCl7bWF4SXRlcmF0aW9ucz0wfQppbml0aWFsSW5Vbml0PWluaXRpYWxJblVuaXQvc2NhbGV9CmluaXRpYWxJblVuaXQ9aW5pdGlhbEluVW5pdCoyO2pRdWVyeS5zdHlsZShlbGVtLHByb3AsaW5pdGlhbEluVW5pdCt1bml0KTt2YWx1ZVBhcnRzPXZhbHVlUGFydHN8fFtdfQppZih2YWx1ZVBhcnRzKXtpbml0aWFsSW5Vbml0PStpbml0aWFsSW5Vbml0fHwraW5pdGlhbHx8MDthZGp1c3RlZD12YWx1ZVBhcnRzWzFdP2luaXRpYWxJblVuaXQrKHZhbHVlUGFydHNbMV0rMSkqdmFsdWVQYXJ0c1syXTordmFsdWVQYXJ0c1syXTtpZih0d2Vlbil7dHdlZW4udW5pdD11bml0O3R3ZWVuLnN0YXJ0PWluaXRpYWxJblVuaXQ7dHdlZW4uZW5kPWFkanVzdGVkfX0KcmV0dXJuIGFkanVzdGVkfQp2YXIgZGVmYXVsdERpc3BsYXlNYXA9e307ZnVuY3Rpb24gZ2V0RGVmYXVsdERpc3BsYXkoZWxlbSl7dmFyIHRlbXAsZG9jPWVsZW0ub3duZXJEb2N1bWVudCxub2RlTmFtZT1lbGVtLm5vZGVOYW1lLGRpc3BsYXk9ZGVmYXVsdERpc3BsYXlNYXBbbm9kZU5hbWVdO2lmKGRpc3BsYXkpe3JldHVybiBkaXNwbGF5fQp0ZW1wPWRvYy5ib2R5LmFwcGVuZENoaWxkKGRvYy5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKSk7ZGlzcGxheT1qUXVlcnkuY3NzKHRlbXAsImRpc3BsYXkiKTt0ZW1wLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGVtcCk7aWYoZGlzcGxheT09PSJub25lIil7ZGlzcGxheT0iYmxvY2sifQpkZWZhdWx0RGlzcGxheU1hcFtub2RlTmFtZV09ZGlzcGxheTtyZXR1cm4gZGlzcGxheX0KZnVuY3Rpb24gc2hvd0hpZGUoZWxlbWVudHMsc2hvdyl7dmFyIGRpc3BsYXksZWxlbSx2YWx1ZXM9W10saW5kZXg9MCxsZW5ndGg9ZWxlbWVudHMubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2VsZW09ZWxlbWVudHNbaW5kZXhdO2lmKCFlbGVtLnN0eWxlKXtjb250aW51ZX0KZGlzcGxheT1lbGVtLnN0eWxlLmRpc3BsYXk7aWYoc2hvdyl7aWYoZGlzcGxheT09PSJub25lIil7dmFsdWVzW2luZGV4XT1kYXRhUHJpdi5nZXQoZWxlbSwiZGlzcGxheSIpfHxudWxsO2lmKCF2YWx1ZXNbaW5kZXhdKXtlbGVtLnN0eWxlLmRpc3BsYXk9IiJ9fQppZihlbGVtLnN0eWxlLmRpc3BsYXk9PT0iIiYmaXNIaWRkZW5XaXRoaW5UcmVlKGVsZW0pKXt2YWx1ZXNbaW5kZXhdPWdldERlZmF1bHREaXNwbGF5KGVsZW0pfX1lbHNle2lmKGRpc3BsYXkhPT0ibm9uZSIpe3ZhbHVlc1tpbmRleF09Im5vbmUiO2RhdGFQcml2LnNldChlbGVtLCJkaXNwbGF5IixkaXNwbGF5KX19fQpmb3IoaW5kZXg9MDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7aWYodmFsdWVzW2luZGV4XSE9bnVsbCl7ZWxlbWVudHNbaW5kZXhdLnN0eWxlLmRpc3BsYXk9dmFsdWVzW2luZGV4XX19CnJldHVybiBlbGVtZW50c30KalF1ZXJ5LmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbigpe3JldHVybiBzaG93SGlkZSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBzaG93SGlkZSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKHN0YXRlKXtpZih0eXBlb2Ygc3RhdGU9PT0iYm9vbGVhbiIpe3JldHVybiBzdGF0ZT90aGlzLnNob3coKTp0aGlzLmhpZGUoKX0KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGlzSGlkZGVuV2l0aGluVHJlZSh0aGlzKSl7alF1ZXJ5KHRoaXMpLnNob3coKX1lbHNle2pRdWVyeSh0aGlzKS5oaWRlKCl9fSl9fSk7dmFyIHJjaGVja2FibGVUeXBlPSgvXig/OmNoZWNrYm94fHJhZGlvKSQvaSk7dmFyIHJ0YWdOYW1lPSgvPChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKikvaSk7dmFyIHJzY3JpcHRUeXBlPSgvXiR8Xm1vZHVsZSR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kpOyhmdW5jdGlvbigpe3ZhciBmcmFnbWVudD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZGl2PWZyYWdtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIik7aW5wdXQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpO2lucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKTtkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO3N1cHBvcnQuY2hlY2tDbG9uZT1kaXYuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkO2Rpdi5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iO3N1cHBvcnQubm9DbG9uZUNoZWNrZWQ9ISFkaXYuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO2Rpdi5pbm5lckhUTUw9IjxvcHRpb24+PC9vcHRpb24+IjtzdXBwb3J0Lm9wdGlvbj0hIWRpdi5sYXN0Q2hpbGR9KSgpO3ZhciB3cmFwTWFwPXt0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07d3JhcE1hcC50Ym9keT13cmFwTWFwLnRmb290PXdyYXBNYXAuY29sZ3JvdXA9d3JhcE1hcC5jYXB0aW9uPXdyYXBNYXAudGhlYWQ7d3JhcE1hcC50aD13cmFwTWFwLnRkO2lmKCFzdXBwb3J0Lm9wdGlvbil7d3JhcE1hcC5vcHRncm91cD13cmFwTWFwLm9wdGlvbj1bMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdfQpmdW5jdGlvbiBnZXRBbGwoY29udGV4dCx0YWcpe3ZhciByZXQ7aWYodHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT0idW5kZWZpbmVkIil7cmV0PWNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnfHwiKiIpfWVsc2UgaWYodHlwZW9mIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCE9PSJ1bmRlZmluZWQiKXtyZXQ9Y29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHRhZ3x8IioiKX1lbHNle3JldD1bXX0KaWYodGFnPT09dW5kZWZpbmVkfHx0YWcmJm5vZGVOYW1lKGNvbnRleHQsdGFnKSl7cmV0dXJuIGpRdWVyeS5tZXJnZShbY29udGV4dF0scmV0KX0KcmV0dXJuIHJldH0KZnVuY3Rpb24gc2V0R2xvYmFsRXZhbChlbGVtcyxyZWZFbGVtZW50cyl7dmFyIGk9MCxsPWVsZW1zLmxlbmd0aDtmb3IoO2k8bDtpKyspe2RhdGFQcml2LnNldChlbGVtc1tpXSwiZ2xvYmFsRXZhbCIsIXJlZkVsZW1lbnRzfHxkYXRhUHJpdi5nZXQocmVmRWxlbWVudHNbaV0sImdsb2JhbEV2YWwiKSl9fQp2YXIgcmh0bWw9Lzx8JiM/XHcrOy87ZnVuY3Rpb24gYnVpbGRGcmFnbWVudChlbGVtcyxjb250ZXh0LHNjcmlwdHMsc2VsZWN0aW9uLGlnbm9yZWQpe3ZhciBlbGVtLHRtcCx0YWcsd3JhcCxhdHRhY2hlZCxqLGZyYWdtZW50PWNvbnRleHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLG5vZGVzPVtdLGk9MCxsPWVsZW1zLmxlbmd0aDtmb3IoO2k8bDtpKyspe2VsZW09ZWxlbXNbaV07aWYoZWxlbXx8ZWxlbT09PTApe2lmKHRvVHlwZShlbGVtKT09PSJvYmplY3QiKXtqUXVlcnkubWVyZ2Uobm9kZXMsZWxlbS5ub2RlVHlwZT9bZWxlbV06ZWxlbSl9ZWxzZSBpZighcmh0bWwudGVzdChlbGVtKSl7bm9kZXMucHVzaChjb250ZXh0LmNyZWF0ZVRleHROb2RlKGVsZW0pKX1lbHNle3RtcD10bXB8fGZyYWdtZW50LmFwcGVuZENoaWxkKGNvbnRleHQuY3JlYXRlRWxlbWVudCgiZGl2IikpO3RhZz0ocnRhZ05hbWUuZXhlYyhlbGVtKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKTt3cmFwPXdyYXBNYXBbdGFnXXx8d3JhcE1hcC5fZGVmYXVsdDt0bXAuaW5uZXJIVE1MPXdyYXBbMV0ralF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoZWxlbSkrd3JhcFsyXTtqPXdyYXBbMF07d2hpbGUoai0tKXt0bXA9dG1wLmxhc3RDaGlsZH0KalF1ZXJ5Lm1lcmdlKG5vZGVzLHRtcC5jaGlsZE5vZGVzKTt0bXA9ZnJhZ21lbnQuZmlyc3RDaGlsZDt0bXAudGV4dENvbnRlbnQ9IiJ9fX0KZnJhZ21lbnQudGV4dENvbnRlbnQ9IiI7aT0wO3doaWxlKChlbGVtPW5vZGVzW2krK10pKXtpZihzZWxlY3Rpb24mJmpRdWVyeS5pbkFycmF5KGVsZW0sc2VsZWN0aW9uKT4tMSl7aWYoaWdub3JlZCl7aWdub3JlZC5wdXNoKGVsZW0pfQpjb250aW51ZX0KYXR0YWNoZWQ9aXNBdHRhY2hlZChlbGVtKTt0bXA9Z2V0QWxsKGZyYWdtZW50LmFwcGVuZENoaWxkKGVsZW0pLCJzY3JpcHQiKTtpZihhdHRhY2hlZCl7c2V0R2xvYmFsRXZhbCh0bXApfQppZihzY3JpcHRzKXtqPTA7d2hpbGUoKGVsZW09dG1wW2orK10pKXtpZihyc2NyaXB0VHlwZS50ZXN0KGVsZW0udHlwZXx8IiIpKXtzY3JpcHRzLnB1c2goZWxlbSl9fX19CnJldHVybiBmcmFnbWVudH0KdmFyIHJrZXlFdmVudD0vXmtleS8scm1vdXNlRXZlbnQ9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLHJ0eXBlbmFtZXNwYWNlPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiByZXR1cm5UcnVlKCl7cmV0dXJuITB9CmZ1bmN0aW9uIHJldHVybkZhbHNlKCl7cmV0dXJuITF9CmZ1bmN0aW9uIGV4cGVjdFN5bmMoZWxlbSx0eXBlKXtyZXR1cm4oZWxlbT09PXNhZmVBY3RpdmVFbGVtZW50KCkpPT09KHR5cGU9PT0iZm9jdXMiKX0KZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKXt0cnl7cmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZXJyKXt9fQpmdW5jdGlvbiBvbihlbGVtLHR5cGVzLHNlbGVjdG9yLGRhdGEsZm4sb25lKXt2YXIgb3JpZ0ZuLHR5cGU7aWYodHlwZW9mIHR5cGVzPT09Im9iamVjdCIpe2lmKHR5cGVvZiBzZWxlY3RvciE9PSJzdHJpbmciKXtkYXRhPWRhdGF8fHNlbGVjdG9yO3NlbGVjdG9yPXVuZGVmaW5lZH0KZm9yKHR5cGUgaW4gdHlwZXMpe29uKGVsZW0sdHlwZSxzZWxlY3RvcixkYXRhLHR5cGVzW3R5cGVdLG9uZSl9CnJldHVybiBlbGVtfQppZihkYXRhPT1udWxsJiZmbj09bnVsbCl7Zm49c2VsZWN0b3I7ZGF0YT1zZWxlY3Rvcj11bmRlZmluZWR9ZWxzZSBpZihmbj09bnVsbCl7aWYodHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe2ZuPWRhdGE7ZGF0YT11bmRlZmluZWR9ZWxzZXtmbj1kYXRhO2RhdGE9c2VsZWN0b3I7c2VsZWN0b3I9dW5kZWZpbmVkfX0KaWYoZm49PT0hMSl7Zm49cmV0dXJuRmFsc2V9ZWxzZSBpZighZm4pe3JldHVybiBlbGVtfQppZihvbmU9PT0xKXtvcmlnRm49Zm47Zm49ZnVuY3Rpb24oZXZlbnQpe2pRdWVyeSgpLm9mZihldmVudCk7cmV0dXJuIG9yaWdGbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2ZuLmd1aWQ9b3JpZ0ZuLmd1aWR8fChvcmlnRm4uZ3VpZD1qUXVlcnkuZ3VpZCsrKX0KcmV0dXJuIGVsZW0uZWFjaChmdW5jdGlvbigpe2pRdWVyeS5ldmVudC5hZGQodGhpcyx0eXBlcyxmbixkYXRhLHNlbGVjdG9yKX0pfQpqUXVlcnkuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oZWxlbSx0eXBlcyxoYW5kbGVyLGRhdGEsc2VsZWN0b3Ipe3ZhciBoYW5kbGVPYmpJbixldmVudEhhbmRsZSx0bXAsZXZlbnRzLHQsaGFuZGxlT2JqLHNwZWNpYWwsaGFuZGxlcnMsdHlwZSxuYW1lc3BhY2VzLG9yaWdUeXBlLGVsZW1EYXRhPWRhdGFQcml2LmdldChlbGVtKTtpZighYWNjZXB0RGF0YShlbGVtKSl7cmV0dXJufQppZihoYW5kbGVyLmhhbmRsZXIpe2hhbmRsZU9iakluPWhhbmRsZXI7aGFuZGxlcj1oYW5kbGVPYmpJbi5oYW5kbGVyO3NlbGVjdG9yPWhhbmRsZU9iakluLnNlbGVjdG9yfQppZihzZWxlY3Rvcil7alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGRvY3VtZW50RWxlbWVudCxzZWxlY3Rvcil9CmlmKCFoYW5kbGVyLmd1aWQpe2hhbmRsZXIuZ3VpZD1qUXVlcnkuZ3VpZCsrfQppZighKGV2ZW50cz1lbGVtRGF0YS5ldmVudHMpKXtldmVudHM9ZWxlbURhdGEuZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCl9CmlmKCEoZXZlbnRIYW5kbGU9ZWxlbURhdGEuaGFuZGxlKSl7ZXZlbnRIYW5kbGU9ZWxlbURhdGEuaGFuZGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgalF1ZXJ5IT09InVuZGVmaW5lZCImJmpRdWVyeS5ldmVudC50cmlnZ2VyZWQhPT1lLnR5cGU/alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KGVsZW0sYXJndW1lbnRzKTp1bmRlZmluZWR9fQp0eXBlcz0odHlwZXN8fCIiKS5tYXRjaChybm90aHRtbHdoaXRlKXx8WyIiXTt0PXR5cGVzLmxlbmd0aDt3aGlsZSh0LS0pe3RtcD1ydHlwZW5hbWVzcGFjZS5leGVjKHR5cGVzW3RdKXx8W107dHlwZT1vcmlnVHlwZT10bXBbMV07bmFtZXNwYWNlcz0odG1wWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCk7aWYoIXR5cGUpe2NvbnRpbnVlfQpzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTt0eXBlPShzZWxlY3Rvcj9zcGVjaWFsLmRlbGVnYXRlVHlwZTpzcGVjaWFsLmJpbmRUeXBlKXx8dHlwZTtzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTtoYW5kbGVPYmo9alF1ZXJ5LmV4dGVuZCh7dHlwZTp0eXBlLG9yaWdUeXBlOm9yaWdUeXBlLGRhdGE6ZGF0YSxoYW5kbGVyOmhhbmRsZXIsZ3VpZDpoYW5kbGVyLmd1aWQsc2VsZWN0b3I6c2VsZWN0b3IsbmVlZHNDb250ZXh0OnNlbGVjdG9yJiZqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChzZWxlY3RvciksbmFtZXNwYWNlOm5hbWVzcGFjZXMuam9pbigiLiIpfSxoYW5kbGVPYmpJbik7aWYoIShoYW5kbGVycz1ldmVudHNbdHlwZV0pKXtoYW5kbGVycz1ldmVudHNbdHlwZV09W107aGFuZGxlcnMuZGVsZWdhdGVDb3VudD0wO2lmKCFzcGVjaWFsLnNldHVwfHxzcGVjaWFsLnNldHVwLmNhbGwoZWxlbSxkYXRhLG5hbWVzcGFjZXMsZXZlbnRIYW5kbGUpPT09ITEpe2lmKGVsZW0uYWRkRXZlbnRMaXN0ZW5lcil7ZWxlbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsZXZlbnRIYW5kbGUpfX19CmlmKHNwZWNpYWwuYWRkKXtzcGVjaWFsLmFkZC5jYWxsKGVsZW0saGFuZGxlT2JqKTtpZighaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCl7aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZD1oYW5kbGVyLmd1aWR9fQppZihzZWxlY3Rvcil7aGFuZGxlcnMuc3BsaWNlKGhhbmRsZXJzLmRlbGVnYXRlQ291bnQrKywwLGhhbmRsZU9iail9ZWxzZXtoYW5kbGVycy5wdXNoKGhhbmRsZU9iail9CmpRdWVyeS5ldmVudC5nbG9iYWxbdHlwZV09ITB9fSxyZW1vdmU6ZnVuY3Rpb24oZWxlbSx0eXBlcyxoYW5kbGVyLHNlbGVjdG9yLG1hcHBlZFR5cGVzKXt2YXIgaixvcmlnQ291bnQsdG1wLGV2ZW50cyx0LGhhbmRsZU9iaixzcGVjaWFsLGhhbmRsZXJzLHR5cGUsbmFtZXNwYWNlcyxvcmlnVHlwZSxlbGVtRGF0YT1kYXRhUHJpdi5oYXNEYXRhKGVsZW0pJiZkYXRhUHJpdi5nZXQoZWxlbSk7aWYoIWVsZW1EYXRhfHwhKGV2ZW50cz1lbGVtRGF0YS5ldmVudHMpKXtyZXR1cm59CnR5cGVzPSh0eXBlc3x8IiIpLm1hdGNoKHJub3RodG1sd2hpdGUpfHxbIiJdO3Q9dHlwZXMubGVuZ3RoO3doaWxlKHQtLSl7dG1wPXJ0eXBlbmFtZXNwYWNlLmV4ZWModHlwZXNbdF0pfHxbXTt0eXBlPW9yaWdUeXBlPXRtcFsxXTtuYW1lc3BhY2VzPSh0bXBbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKTtpZighdHlwZSl7Zm9yKHR5cGUgaW4gZXZlbnRzKXtqUXVlcnkuZXZlbnQucmVtb3ZlKGVsZW0sdHlwZSt0eXBlc1t0XSxoYW5kbGVyLHNlbGVjdG9yLCEwKX0KY29udGludWV9CnNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbdHlwZV18fHt9O3R5cGU9KHNlbGVjdG9yP3NwZWNpYWwuZGVsZWdhdGVUeXBlOnNwZWNpYWwuYmluZFR5cGUpfHx0eXBlO2hhbmRsZXJzPWV2ZW50c1t0eXBlXXx8W107dG1wPXRtcFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrbmFtZXNwYWNlcy5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTtvcmlnQ291bnQ9aj1oYW5kbGVycy5sZW5ndGg7d2hpbGUoai0tKXtoYW5kbGVPYmo9aGFuZGxlcnNbal07aWYoKG1hcHBlZFR5cGVzfHxvcmlnVHlwZT09PWhhbmRsZU9iai5vcmlnVHlwZSkmJighaGFuZGxlcnx8aGFuZGxlci5ndWlkPT09aGFuZGxlT2JqLmd1aWQpJiYoIXRtcHx8dG1wLnRlc3QoaGFuZGxlT2JqLm5hbWVzcGFjZSkpJiYoIXNlbGVjdG9yfHxzZWxlY3Rvcj09PWhhbmRsZU9iai5zZWxlY3Rvcnx8c2VsZWN0b3I9PT0iKioiJiZoYW5kbGVPYmouc2VsZWN0b3IpKXtoYW5kbGVycy5zcGxpY2UoaiwxKTtpZihoYW5kbGVPYmouc2VsZWN0b3Ipe2hhbmRsZXJzLmRlbGVnYXRlQ291bnQtLX0KaWYoc3BlY2lhbC5yZW1vdmUpe3NwZWNpYWwucmVtb3ZlLmNhbGwoZWxlbSxoYW5kbGVPYmopfX19CmlmKG9yaWdDb3VudCYmIWhhbmRsZXJzLmxlbmd0aCl7aWYoIXNwZWNpYWwudGVhcmRvd258fHNwZWNpYWwudGVhcmRvd24uY2FsbChlbGVtLG5hbWVzcGFjZXMsZWxlbURhdGEuaGFuZGxlKT09PSExKXtqUXVlcnkucmVtb3ZlRXZlbnQoZWxlbSx0eXBlLGVsZW1EYXRhLmhhbmRsZSl9CmRlbGV0ZSBldmVudHNbdHlwZV19fQppZihqUXVlcnkuaXNFbXB0eU9iamVjdChldmVudHMpKXtkYXRhUHJpdi5yZW1vdmUoZWxlbSwiaGFuZGxlIGV2ZW50cyIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24obmF0aXZlRXZlbnQpe3ZhciBpLGoscmV0LG1hdGNoZWQsaGFuZGxlT2JqLGhhbmRsZXJRdWV1ZSxhcmdzPW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKSxldmVudD1qUXVlcnkuZXZlbnQuZml4KG5hdGl2ZUV2ZW50KSxoYW5kbGVycz0oZGF0YVByaXYuZ2V0KHRoaXMsImV2ZW50cyIpfHxPYmplY3QuY3JlYXRlKG51bGwpKVtldmVudC50eXBlXXx8W10sc3BlY2lhbD1qUXVlcnkuZXZlbnQuc3BlY2lhbFtldmVudC50eXBlXXx8e307YXJnc1swXT1ldmVudDtmb3IoaT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspe2FyZ3NbaV09YXJndW1lbnRzW2ldfQpldmVudC5kZWxlZ2F0ZVRhcmdldD10aGlzO2lmKHNwZWNpYWwucHJlRGlzcGF0Y2gmJnNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGV2ZW50KT09PSExKXtyZXR1cm59CmhhbmRsZXJRdWV1ZT1qUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGV2ZW50LGhhbmRsZXJzKTtpPTA7d2hpbGUoKG1hdGNoZWQ9aGFuZGxlclF1ZXVlW2krK10pJiYhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7ZXZlbnQuY3VycmVudFRhcmdldD1tYXRjaGVkLmVsZW07aj0wO3doaWxlKChoYW5kbGVPYmo9bWF0Y2hlZC5oYW5kbGVyc1tqKytdKSYmIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2lmKCFldmVudC5ybmFtZXNwYWNlfHxoYW5kbGVPYmoubmFtZXNwYWNlPT09ITF8fGV2ZW50LnJuYW1lc3BhY2UudGVzdChoYW5kbGVPYmoubmFtZXNwYWNlKSl7ZXZlbnQuaGFuZGxlT2JqPWhhbmRsZU9iajtldmVudC5kYXRhPWhhbmRsZU9iai5kYXRhO3JldD0oKGpRdWVyeS5ldmVudC5zcGVjaWFsW2hhbmRsZU9iai5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGhhbmRsZU9iai5oYW5kbGVyKS5hcHBseShtYXRjaGVkLmVsZW0sYXJncyk7aWYocmV0IT09dW5kZWZpbmVkKXtpZigoZXZlbnQucmVzdWx0PXJldCk9PT0hMSl7ZXZlbnQucHJldmVudERlZmF1bHQoKTtldmVudC5zdG9wUHJvcGFnYXRpb24oKX19fX19CmlmKHNwZWNpYWwucG9zdERpc3BhdGNoKXtzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsZXZlbnQpfQpyZXR1cm4gZXZlbnQucmVzdWx0fSxoYW5kbGVyczpmdW5jdGlvbihldmVudCxoYW5kbGVycyl7dmFyIGksaGFuZGxlT2JqLHNlbCxtYXRjaGVkSGFuZGxlcnMsbWF0Y2hlZFNlbGVjdG9ycyxoYW5kbGVyUXVldWU9W10sZGVsZWdhdGVDb3VudD1oYW5kbGVycy5kZWxlZ2F0ZUNvdW50LGN1cj1ldmVudC50YXJnZXQ7aWYoZGVsZWdhdGVDb3VudCYmY3VyLm5vZGVUeXBlJiYhKGV2ZW50LnR5cGU9PT0iY2xpY2siJiZldmVudC5idXR0b24+PTEpKXtmb3IoO2N1ciE9PXRoaXM7Y3VyPWN1ci5wYXJlbnROb2RlfHx0aGlzKXtpZihjdXIubm9kZVR5cGU9PT0xJiYhKGV2ZW50LnR5cGU9PT0iY2xpY2siJiZjdXIuZGlzYWJsZWQ9PT0hMCkpe21hdGNoZWRIYW5kbGVycz1bXTttYXRjaGVkU2VsZWN0b3JzPXt9O2ZvcihpPTA7aTxkZWxlZ2F0ZUNvdW50O2krKyl7aGFuZGxlT2JqPWhhbmRsZXJzW2ldO3NlbD1oYW5kbGVPYmouc2VsZWN0b3IrIiAiO2lmKG1hdGNoZWRTZWxlY3RvcnNbc2VsXT09PXVuZGVmaW5lZCl7bWF0Y2hlZFNlbGVjdG9yc1tzZWxdPWhhbmRsZU9iai5uZWVkc0NvbnRleHQ/alF1ZXJ5KHNlbCx0aGlzKS5pbmRleChjdXIpPi0xOmpRdWVyeS5maW5kKHNlbCx0aGlzLG51bGwsW2N1cl0pLmxlbmd0aH0KaWYobWF0Y2hlZFNlbGVjdG9yc1tzZWxdKXttYXRjaGVkSGFuZGxlcnMucHVzaChoYW5kbGVPYmopfX0KaWYobWF0Y2hlZEhhbmRsZXJzLmxlbmd0aCl7aGFuZGxlclF1ZXVlLnB1c2goe2VsZW06Y3VyLGhhbmRsZXJzOm1hdGNoZWRIYW5kbGVyc30pfX19fQpjdXI9dGhpcztpZihkZWxlZ2F0ZUNvdW50PGhhbmRsZXJzLmxlbmd0aCl7aGFuZGxlclF1ZXVlLnB1c2goe2VsZW06Y3VyLGhhbmRsZXJzOmhhbmRsZXJzLnNsaWNlKGRlbGVnYXRlQ291bnQpfSl9CnJldHVybiBoYW5kbGVyUXVldWV9LGFkZFByb3A6ZnVuY3Rpb24obmFtZSxob29rKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoalF1ZXJ5LkV2ZW50LnByb3RvdHlwZSxuYW1lLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6aXNGdW5jdGlvbihob29rKT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudCl7cmV0dXJuIGhvb2sodGhpcy5vcmlnaW5hbEV2ZW50KX19OmZ1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXtyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W25hbWVdfX0sc2V0OmZ1bmN0aW9uKHZhbHVlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxuYW1lLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp2YWx1ZX0pfX0pfSxmaXg6ZnVuY3Rpb24ob3JpZ2luYWxFdmVudCl7cmV0dXJuIG9yaWdpbmFsRXZlbnRbalF1ZXJ5LmV4cGFuZG9dP29yaWdpbmFsRXZlbnQ6bmV3IGpRdWVyeS5FdmVudChvcmlnaW5hbEV2ZW50KX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGNsaWNrOntzZXR1cDpmdW5jdGlvbihkYXRhKXt2YXIgZWw9dGhpc3x8ZGF0YTtpZihyY2hlY2thYmxlVHlwZS50ZXN0KGVsLnR5cGUpJiZlbC5jbGljayYmbm9kZU5hbWUoZWwsImlucHV0Iikpe2xldmVyYWdlTmF0aXZlKGVsLCJjbGljayIscmV0dXJuVHJ1ZSl9CnJldHVybiExfSx0cmlnZ2VyOmZ1bmN0aW9uKGRhdGEpe3ZhciBlbD10aGlzfHxkYXRhO2lmKHJjaGVja2FibGVUeXBlLnRlc3QoZWwudHlwZSkmJmVsLmNsaWNrJiZub2RlTmFtZShlbCwiaW5wdXQiKSl7bGV2ZXJhZ2VOYXRpdmUoZWwsImNsaWNrIil9CnJldHVybiEwfSxfZGVmYXVsdDpmdW5jdGlvbihldmVudCl7dmFyIHRhcmdldD1ldmVudC50YXJnZXQ7cmV0dXJuIHJjaGVja2FibGVUeXBlLnRlc3QodGFyZ2V0LnR5cGUpJiZ0YXJnZXQuY2xpY2smJm5vZGVOYW1lKHRhcmdldCwiaW5wdXQiKSYmZGF0YVByaXYuZ2V0KHRhcmdldCwiY2xpY2siKXx8bm9kZU5hbWUodGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihldmVudCl7aWYoZXZlbnQucmVzdWx0IT09dW5kZWZpbmVkJiZldmVudC5vcmlnaW5hbEV2ZW50KXtldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWV2ZW50LnJlc3VsdH19fX19O2Z1bmN0aW9uIGxldmVyYWdlTmF0aXZlKGVsLHR5cGUsZXhwZWN0U3luYyl7aWYoIWV4cGVjdFN5bmMpe2lmKGRhdGFQcml2LmdldChlbCx0eXBlKT09PXVuZGVmaW5lZCl7alF1ZXJ5LmV2ZW50LmFkZChlbCx0eXBlLHJldHVyblRydWUpfQpyZXR1cm59CmRhdGFQcml2LnNldChlbCx0eXBlLCExKTtqUXVlcnkuZXZlbnQuYWRkKGVsLHR5cGUse25hbWVzcGFjZTohMSxoYW5kbGVyOmZ1bmN0aW9uKGV2ZW50KXt2YXIgbm90QXN5bmMscmVzdWx0LHNhdmVkPWRhdGFQcml2LmdldCh0aGlzLHR5cGUpO2lmKChldmVudC5pc1RyaWdnZXImMSkmJnRoaXNbdHlwZV0pe2lmKCFzYXZlZC5sZW5ndGgpe3NhdmVkPXNsaWNlLmNhbGwoYXJndW1lbnRzKTtkYXRhUHJpdi5zZXQodGhpcyx0eXBlLHNhdmVkKTtub3RBc3luYz1leHBlY3RTeW5jKHRoaXMsdHlwZSk7dGhpc1t0eXBlXSgpO3Jlc3VsdD1kYXRhUHJpdi5nZXQodGhpcyx0eXBlKTtpZihzYXZlZCE9PXJlc3VsdHx8bm90QXN5bmMpe2RhdGFQcml2LnNldCh0aGlzLHR5cGUsITEpfWVsc2V7cmVzdWx0PXt9fQppZihzYXZlZCE9PXJlc3VsdCl7ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7ZXZlbnQucHJldmVudERlZmF1bHQoKTtyZXR1cm4gcmVzdWx0LnZhbHVlfX1lbHNlIGlmKChqUXVlcnkuZXZlbnQuc3BlY2lhbFt0eXBlXXx8e30pLmRlbGVnYXRlVHlwZSl7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9fWVsc2UgaWYoc2F2ZWQubGVuZ3RoKXtkYXRhUHJpdi5zZXQodGhpcyx0eXBlLHt2YWx1ZTpqUXVlcnkuZXZlbnQudHJpZ2dlcihqUXVlcnkuZXh0ZW5kKHNhdmVkWzBdLGpRdWVyeS5FdmVudC5wcm90b3R5cGUpLHNhdmVkLnNsaWNlKDEpLHRoaXMpfSk7ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9fX0pfQpqUXVlcnkucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZWxlbSx0eXBlLGhhbmRsZSl7aWYoZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKXtlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxoYW5kbGUpfX07alF1ZXJ5LkV2ZW50PWZ1bmN0aW9uKHNyYyxwcm9wcyl7aWYoISh0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50KSl7cmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoc3JjLHByb3BzKX0KaWYoc3JjJiZzcmMudHlwZSl7dGhpcy5vcmlnaW5hbEV2ZW50PXNyYzt0aGlzLnR5cGU9c3JjLnR5cGU7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9c3JjLmRlZmF1bHRQcmV2ZW50ZWR8fHNyYy5kZWZhdWx0UHJldmVudGVkPT09dW5kZWZpbmVkJiZzcmMucmV0dXJuVmFsdWU9PT0hMT9yZXR1cm5UcnVlOnJldHVybkZhbHNlO3RoaXMudGFyZ2V0PShzcmMudGFyZ2V0JiZzcmMudGFyZ2V0Lm5vZGVUeXBlPT09Myk/c3JjLnRhcmdldC5wYXJlbnROb2RlOnNyYy50YXJnZXQ7dGhpcy5jdXJyZW50VGFyZ2V0PXNyYy5jdXJyZW50VGFyZ2V0O3RoaXMucmVsYXRlZFRhcmdldD1zcmMucmVsYXRlZFRhcmdldH1lbHNle3RoaXMudHlwZT1zcmN9CmlmKHByb3BzKXtqUXVlcnkuZXh0ZW5kKHRoaXMscHJvcHMpfQp0aGlzLnRpbWVTdGFtcD1zcmMmJnNyYy50aW1lU3RhbXB8fERhdGUubm93KCk7dGhpc1tqUXVlcnkuZXhwYW5kb109ITB9O2pRdWVyeS5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmpRdWVyeS5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6cmV0dXJuRmFsc2UsaXNQcm9wYWdhdGlvblN0b3BwZWQ6cmV0dXJuRmFsc2UsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6cmV0dXJuRmFsc2UsaXNTaW11bGF0ZWQ6ITEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cmV0dXJuVHJ1ZTtpZihlJiYhdGhpcy5pc1NpbXVsYXRlZCl7ZS5wcmV2ZW50RGVmYXVsdCgpfX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9cmV0dXJuVHJ1ZTtpZihlJiYhdGhpcy5pc1NpbXVsYXRlZCl7ZS5zdG9wUHJvcGFnYXRpb24oKX19LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPXJldHVyblRydWU7aWYoZSYmIXRoaXMuaXNTaW11bGF0ZWQpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9CnRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fTtqUXVlcnkuZWFjaCh7YWx0S2V5OiEwLGJ1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxjaGFuZ2VkVG91Y2hlczohMCxjdHJsS2V5OiEwLGRldGFpbDohMCxldmVudFBoYXNlOiEwLG1ldGFLZXk6ITAscGFnZVg6ITAscGFnZVk6ITAsc2hpZnRLZXk6ITAsdmlldzohMCwiY2hhciI6ITAsY29kZTohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihldmVudCl7dmFyIGJ1dHRvbj1ldmVudC5idXR0b247aWYoZXZlbnQud2hpY2g9PW51bGwmJnJrZXlFdmVudC50ZXN0KGV2ZW50LnR5cGUpKXtyZXR1cm4gZXZlbnQuY2hhckNvZGUhPW51bGw/ZXZlbnQuY2hhckNvZGU6ZXZlbnQua2V5Q29kZX0KaWYoIWV2ZW50LndoaWNoJiZidXR0b24hPT11bmRlZmluZWQmJnJtb3VzZUV2ZW50LnRlc3QoZXZlbnQudHlwZSkpe2lmKGJ1dHRvbiYxKXtyZXR1cm4gMX0KaWYoYnV0dG9uJjIpe3JldHVybiAzfQppZihidXR0b24mNCl7cmV0dXJuIDJ9CnJldHVybiAwfQpyZXR1cm4gZXZlbnQud2hpY2h9fSxqUXVlcnkuZXZlbnQuYWRkUHJvcCk7alF1ZXJ5LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKHR5cGUsZGVsZWdhdGVUeXBlKXtqUXVlcnkuZXZlbnQuc3BlY2lhbFt0eXBlXT17c2V0dXA6ZnVuY3Rpb24oKXtsZXZlcmFnZU5hdGl2ZSh0aGlzLHR5cGUsZXhwZWN0U3luYyk7cmV0dXJuITF9LHRyaWdnZXI6ZnVuY3Rpb24oKXtsZXZlcmFnZU5hdGl2ZSh0aGlzLHR5cGUpO3JldHVybiEwfSxkZWxlZ2F0ZVR5cGU6ZGVsZWdhdGVUeXBlfX0pO2pRdWVyeS5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihvcmlnLGZpeCl7alF1ZXJ5LmV2ZW50LnNwZWNpYWxbb3JpZ109e2RlbGVnYXRlVHlwZTpmaXgsYmluZFR5cGU6Zml4LGhhbmRsZTpmdW5jdGlvbihldmVudCl7dmFyIHJldCx0YXJnZXQ9dGhpcyxyZWxhdGVkPWV2ZW50LnJlbGF0ZWRUYXJnZXQsaGFuZGxlT2JqPWV2ZW50LmhhbmRsZU9iajtpZighcmVsYXRlZHx8KHJlbGF0ZWQhPT10YXJnZXQmJiFqUXVlcnkuY29udGFpbnModGFyZ2V0LHJlbGF0ZWQpKSl7ZXZlbnQudHlwZT1oYW5kbGVPYmoub3JpZ1R5cGU7cmV0PWhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtldmVudC50eXBlPWZpeH0KcmV0dXJuIHJldH19fSk7alF1ZXJ5LmZuLmV4dGVuZCh7b246ZnVuY3Rpb24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbil7cmV0dXJuIG9uKHRoaXMsdHlwZXMsc2VsZWN0b3IsZGF0YSxmbil9LG9uZTpmdW5jdGlvbih0eXBlcyxzZWxlY3RvcixkYXRhLGZuKXtyZXR1cm4gb24odGhpcyx0eXBlcyxzZWxlY3RvcixkYXRhLGZuLDEpfSxvZmY6ZnVuY3Rpb24odHlwZXMsc2VsZWN0b3IsZm4pe3ZhciBoYW5kbGVPYmosdHlwZTtpZih0eXBlcyYmdHlwZXMucHJldmVudERlZmF1bHQmJnR5cGVzLmhhbmRsZU9iail7aGFuZGxlT2JqPXR5cGVzLmhhbmRsZU9iajtqUXVlcnkodHlwZXMuZGVsZWdhdGVUYXJnZXQpLm9mZihoYW5kbGVPYmoubmFtZXNwYWNlP2hhbmRsZU9iai5vcmlnVHlwZSsiLiIraGFuZGxlT2JqLm5hbWVzcGFjZTpoYW5kbGVPYmoub3JpZ1R5cGUsaGFuZGxlT2JqLnNlbGVjdG9yLGhhbmRsZU9iai5oYW5kbGVyKTtyZXR1cm4gdGhpc30KaWYodHlwZW9mIHR5cGVzPT09Im9iamVjdCIpe2Zvcih0eXBlIGluIHR5cGVzKXt0aGlzLm9mZih0eXBlLHNlbGVjdG9yLHR5cGVzW3R5cGVdKX0KcmV0dXJuIHRoaXN9CmlmKHNlbGVjdG9yPT09ITF8fHR5cGVvZiBzZWxlY3Rvcj09PSJmdW5jdGlvbiIpe2ZuPXNlbGVjdG9yO3NlbGVjdG9yPXVuZGVmaW5lZH0KaWYoZm49PT0hMSl7Zm49cmV0dXJuRmFsc2V9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkuZXZlbnQucmVtb3ZlKHRoaXMsdHlwZXMsZm4sc2VsZWN0b3IpfSl9fSk7dmFyIHJub0lubmVyaHRtbD0vPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxyY2hlY2tlZD0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxyY2xlYW5TY3JpcHQ9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nO2Z1bmN0aW9uIG1hbmlwdWxhdGlvblRhcmdldChlbGVtLGNvbnRlbnQpe2lmKG5vZGVOYW1lKGVsZW0sInRhYmxlIikmJm5vZGVOYW1lKGNvbnRlbnQubm9kZVR5cGUhPT0xMT9jb250ZW50OmNvbnRlbnQuZmlyc3RDaGlsZCwidHIiKSl7cmV0dXJuIGpRdWVyeShlbGVtKS5jaGlsZHJlbigidGJvZHkiKVswXXx8ZWxlbX0KcmV0dXJuIGVsZW19CmZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoZWxlbSl7ZWxlbS50eXBlPShlbGVtLmdldEF0dHJpYnV0ZSgidHlwZSIpIT09bnVsbCkrIi8iK2VsZW0udHlwZTtyZXR1cm4gZWxlbX0KZnVuY3Rpb24gcmVzdG9yZVNjcmlwdChlbGVtKXtpZigoZWxlbS50eXBlfHwiIikuc2xpY2UoMCw1KT09PSJ0cnVlLyIpe2VsZW0udHlwZT1lbGVtLnR5cGUuc2xpY2UoNSl9ZWxzZXtlbGVtLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpfQpyZXR1cm4gZWxlbX0KZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoc3JjLGRlc3Qpe3ZhciBpLGwsdHlwZSxwZGF0YU9sZCx1ZGF0YU9sZCx1ZGF0YUN1cixldmVudHM7aWYoZGVzdC5ub2RlVHlwZSE9PTEpe3JldHVybn0KaWYoZGF0YVByaXYuaGFzRGF0YShzcmMpKXtwZGF0YU9sZD1kYXRhUHJpdi5nZXQoc3JjKTtldmVudHM9cGRhdGFPbGQuZXZlbnRzO2lmKGV2ZW50cyl7ZGF0YVByaXYucmVtb3ZlKGRlc3QsImhhbmRsZSBldmVudHMiKTtmb3IodHlwZSBpbiBldmVudHMpe2ZvcihpPTAsbD1ldmVudHNbdHlwZV0ubGVuZ3RoO2k8bDtpKyspe2pRdWVyeS5ldmVudC5hZGQoZGVzdCx0eXBlLGV2ZW50c1t0eXBlXVtpXSl9fX19CmlmKGRhdGFVc2VyLmhhc0RhdGEoc3JjKSl7dWRhdGFPbGQ9ZGF0YVVzZXIuYWNjZXNzKHNyYyk7dWRhdGFDdXI9alF1ZXJ5LmV4dGVuZCh7fSx1ZGF0YU9sZCk7ZGF0YVVzZXIuc2V0KGRlc3QsdWRhdGFDdXIpfX0KZnVuY3Rpb24gZml4SW5wdXQoc3JjLGRlc3Qpe3ZhciBub2RlTmFtZT1kZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYobm9kZU5hbWU9PT0iaW5wdXQiJiZyY2hlY2thYmxlVHlwZS50ZXN0KHNyYy50eXBlKSl7ZGVzdC5jaGVja2VkPXNyYy5jaGVja2VkfWVsc2UgaWYobm9kZU5hbWU9PT0iaW5wdXQifHxub2RlTmFtZT09PSJ0ZXh0YXJlYSIpe2Rlc3QuZGVmYXVsdFZhbHVlPXNyYy5kZWZhdWx0VmFsdWV9fQpmdW5jdGlvbiBkb21NYW5pcChjb2xsZWN0aW9uLGFyZ3MsY2FsbGJhY2ssaWdub3JlZCl7YXJncz1mbGF0KGFyZ3MpO3ZhciBmcmFnbWVudCxmaXJzdCxzY3JpcHRzLGhhc1NjcmlwdHMsbm9kZSxkb2MsaT0wLGw9Y29sbGVjdGlvbi5sZW5ndGgsaU5vQ2xvbmU9bC0xLHZhbHVlPWFyZ3NbMF0sdmFsdWVJc0Z1bmN0aW9uPWlzRnVuY3Rpb24odmFsdWUpO2lmKHZhbHVlSXNGdW5jdGlvbnx8KGw+MSYmdHlwZW9mIHZhbHVlPT09InN0cmluZyImJiFzdXBwb3J0LmNoZWNrQ2xvbmUmJnJjaGVja2VkLnRlc3QodmFsdWUpKSl7cmV0dXJuIGNvbGxlY3Rpb24uZWFjaChmdW5jdGlvbihpbmRleCl7dmFyIHNlbGY9Y29sbGVjdGlvbi5lcShpbmRleCk7aWYodmFsdWVJc0Z1bmN0aW9uKXthcmdzWzBdPXZhbHVlLmNhbGwodGhpcyxpbmRleCxzZWxmLmh0bWwoKSl9CmRvbU1hbmlwKHNlbGYsYXJncyxjYWxsYmFjayxpZ25vcmVkKX0pfQppZihsKXtmcmFnbWVudD1idWlsZEZyYWdtZW50KGFyZ3MsY29sbGVjdGlvblswXS5vd25lckRvY3VtZW50LCExLGNvbGxlY3Rpb24saWdub3JlZCk7Zmlyc3Q9ZnJhZ21lbnQuZmlyc3RDaGlsZDtpZihmcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aD09PTEpe2ZyYWdtZW50PWZpcnN0fQppZihmaXJzdHx8aWdub3JlZCl7c2NyaXB0cz1qUXVlcnkubWFwKGdldEFsbChmcmFnbWVudCwic2NyaXB0IiksZGlzYWJsZVNjcmlwdCk7aGFzU2NyaXB0cz1zY3JpcHRzLmxlbmd0aDtmb3IoO2k8bDtpKyspe25vZGU9ZnJhZ21lbnQ7aWYoaSE9PWlOb0Nsb25lKXtub2RlPWpRdWVyeS5jbG9uZShub2RlLCEwLCEwKTtpZihoYXNTY3JpcHRzKXtqUXVlcnkubWVyZ2Uoc2NyaXB0cyxnZXRBbGwobm9kZSwic2NyaXB0IikpfX0KY2FsbGJhY2suY2FsbChjb2xsZWN0aW9uW2ldLG5vZGUsaSl9CmlmKGhhc1NjcmlwdHMpe2RvYz1zY3JpcHRzW3NjcmlwdHMubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQ7alF1ZXJ5Lm1hcChzY3JpcHRzLHJlc3RvcmVTY3JpcHQpO2ZvcihpPTA7aTxoYXNTY3JpcHRzO2krKyl7bm9kZT1zY3JpcHRzW2ldO2lmKHJzY3JpcHRUeXBlLnRlc3Qobm9kZS50eXBlfHwiIikmJiFkYXRhUHJpdi5hY2Nlc3Mobm9kZSwiZ2xvYmFsRXZhbCIpJiZqUXVlcnkuY29udGFpbnMoZG9jLG5vZGUpKXtpZihub2RlLnNyYyYmKG5vZGUudHlwZXx8IiIpLnRvTG93ZXJDYXNlKCkhPT0ibW9kdWxlIil7aWYoalF1ZXJ5Ll9ldmFsVXJsJiYhbm9kZS5ub01vZHVsZSl7alF1ZXJ5Ll9ldmFsVXJsKG5vZGUuc3JjLHtub25jZTpub2RlLm5vbmNlfHxub2RlLmdldEF0dHJpYnV0ZSgibm9uY2UiKX0sZG9jKX19ZWxzZXtET01FdmFsKG5vZGUudGV4dENvbnRlbnQucmVwbGFjZShyY2xlYW5TY3JpcHQsIiIpLG5vZGUsZG9jKX19fX19fQpyZXR1cm4gY29sbGVjdGlvbn0KZnVuY3Rpb24gcmVtb3ZlKGVsZW0sc2VsZWN0b3Isa2VlcERhdGEpe3ZhciBub2RlLG5vZGVzPXNlbGVjdG9yP2pRdWVyeS5maWx0ZXIoc2VsZWN0b3IsZWxlbSk6ZWxlbSxpPTA7Zm9yKDsobm9kZT1ub2Rlc1tpXSkhPW51bGw7aSsrKXtpZigha2VlcERhdGEmJm5vZGUubm9kZVR5cGU9PT0xKXtqUXVlcnkuY2xlYW5EYXRhKGdldEFsbChub2RlKSl9CmlmKG5vZGUucGFyZW50Tm9kZSl7aWYoa2VlcERhdGEmJmlzQXR0YWNoZWQobm9kZSkpe3NldEdsb2JhbEV2YWwoZ2V0QWxsKG5vZGUsInNjcmlwdCIpKX0Kbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpfX0KcmV0dXJuIGVsZW19CmpRdWVyeS5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oaHRtbCl7cmV0dXJuIGh0bWx9LGNsb25lOmZ1bmN0aW9uKGVsZW0sZGF0YUFuZEV2ZW50cyxkZWVwRGF0YUFuZEV2ZW50cyl7dmFyIGksbCxzcmNFbGVtZW50cyxkZXN0RWxlbWVudHMsY2xvbmU9ZWxlbS5jbG9uZU5vZGUoITApLGluUGFnZT1pc0F0dGFjaGVkKGVsZW0pO2lmKCFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkJiYoZWxlbS5ub2RlVHlwZT09PTF8fGVsZW0ubm9kZVR5cGU9PT0xMSkmJiFqUXVlcnkuaXNYTUxEb2MoZWxlbSkpe2Rlc3RFbGVtZW50cz1nZXRBbGwoY2xvbmUpO3NyY0VsZW1lbnRzPWdldEFsbChlbGVtKTtmb3IoaT0wLGw9c3JjRWxlbWVudHMubGVuZ3RoO2k8bDtpKyspe2ZpeElucHV0KHNyY0VsZW1lbnRzW2ldLGRlc3RFbGVtZW50c1tpXSl9fQppZihkYXRhQW5kRXZlbnRzKXtpZihkZWVwRGF0YUFuZEV2ZW50cyl7c3JjRWxlbWVudHM9c3JjRWxlbWVudHN8fGdldEFsbChlbGVtKTtkZXN0RWxlbWVudHM9ZGVzdEVsZW1lbnRzfHxnZXRBbGwoY2xvbmUpO2ZvcihpPTAsbD1zcmNFbGVtZW50cy5sZW5ndGg7aTxsO2krKyl7Y2xvbmVDb3B5RXZlbnQoc3JjRWxlbWVudHNbaV0sZGVzdEVsZW1lbnRzW2ldKX19ZWxzZXtjbG9uZUNvcHlFdmVudChlbGVtLGNsb25lKX19CmRlc3RFbGVtZW50cz1nZXRBbGwoY2xvbmUsInNjcmlwdCIpO2lmKGRlc3RFbGVtZW50cy5sZW5ndGg+MCl7c2V0R2xvYmFsRXZhbChkZXN0RWxlbWVudHMsIWluUGFnZSYmZ2V0QWxsKGVsZW0sInNjcmlwdCIpKX0KcmV0dXJuIGNsb25lfSxjbGVhbkRhdGE6ZnVuY3Rpb24oZWxlbXMpe3ZhciBkYXRhLGVsZW0sdHlwZSxzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsLGk9MDtmb3IoOyhlbGVtPWVsZW1zW2ldKSE9PXVuZGVmaW5lZDtpKyspe2lmKGFjY2VwdERhdGEoZWxlbSkpe2lmKChkYXRhPWVsZW1bZGF0YVByaXYuZXhwYW5kb10pKXtpZihkYXRhLmV2ZW50cyl7Zm9yKHR5cGUgaW4gZGF0YS5ldmVudHMpe2lmKHNwZWNpYWxbdHlwZV0pe2pRdWVyeS5ldmVudC5yZW1vdmUoZWxlbSx0eXBlKX1lbHNle2pRdWVyeS5yZW1vdmVFdmVudChlbGVtLHR5cGUsZGF0YS5oYW5kbGUpfX19CmVsZW1bZGF0YVByaXYuZXhwYW5kb109dW5kZWZpbmVkfQppZihlbGVtW2RhdGFVc2VyLmV4cGFuZG9dKXtlbGVtW2RhdGFVc2VyLmV4cGFuZG9dPXVuZGVmaW5lZH19fX19KTtqUXVlcnkuZm4uZXh0ZW5kKHtkZXRhY2g6ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiByZW1vdmUodGhpcyxzZWxlY3RvciwhMCl9LHJlbW92ZTpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHJlbW92ZSh0aGlzLHNlbGVjdG9yKX0sdGV4dDpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWU9PT11bmRlZmluZWQ/alF1ZXJ5LnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzLm5vZGVUeXBlPT09MXx8dGhpcy5ub2RlVHlwZT09PTExfHx0aGlzLm5vZGVUeXBlPT09OSl7dGhpcy50ZXh0Q29udGVudD12YWx1ZX19KX0sbnVsbCx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIGRvbU1hbmlwKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGVsZW0pe2lmKHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTF8fHRoaXMubm9kZVR5cGU9PT05KXt2YXIgdGFyZ2V0PW1hbmlwdWxhdGlvblRhcmdldCh0aGlzLGVsZW0pO3RhcmdldC5hcHBlbmRDaGlsZChlbGVtKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBkb21NYW5pcCh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlbGVtKXtpZih0aGlzLm5vZGVUeXBlPT09MXx8dGhpcy5ub2RlVHlwZT09PTExfHx0aGlzLm5vZGVUeXBlPT09OSl7dmFyIHRhcmdldD1tYW5pcHVsYXRpb25UYXJnZXQodGhpcyxlbGVtKTt0YXJnZXQuaW5zZXJ0QmVmb3JlKGVsZW0sdGFyZ2V0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7aWYodGhpcy5wYXJlbnROb2RlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW0sdGhpcyl9fSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGRvbU1hbmlwKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGVsZW0pe2lmKHRoaXMucGFyZW50Tm9kZSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtLHRoaXMubmV4dFNpYmxpbmcpfX0pfSxlbXB0eTpmdW5jdGlvbigpe3ZhciBlbGVtLGk9MDtmb3IoOyhlbGVtPXRoaXNbaV0pIT1udWxsO2krKyl7aWYoZWxlbS5ub2RlVHlwZT09PTEpe2pRdWVyeS5jbGVhbkRhdGEoZ2V0QWxsKGVsZW0sITEpKTtlbGVtLnRleHRDb250ZW50PSIifX0KcmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGRhdGFBbmRFdmVudHMsZGVlcERhdGFBbmRFdmVudHMpe2RhdGFBbmRFdmVudHM9ZGF0YUFuZEV2ZW50cz09bnVsbD8hMTpkYXRhQW5kRXZlbnRzO2RlZXBEYXRhQW5kRXZlbnRzPWRlZXBEYXRhQW5kRXZlbnRzPT1udWxsP2RhdGFBbmRFdmVudHM6ZGVlcERhdGFBbmRFdmVudHM7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeS5jbG9uZSh0aGlzLGRhdGFBbmRFdmVudHMsZGVlcERhdGFBbmRFdmVudHMpfSl9LGh0bWw6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBhY2Nlc3ModGhpcyxmdW5jdGlvbih2YWx1ZSl7dmFyIGVsZW09dGhpc1swXXx8e30saT0wLGw9dGhpcy5sZW5ndGg7aWYodmFsdWU9PT11bmRlZmluZWQmJmVsZW0ubm9kZVR5cGU9PT0xKXtyZXR1cm4gZWxlbS5pbm5lckhUTUx9CmlmKHR5cGVvZiB2YWx1ZT09PSJzdHJpbmciJiYhcm5vSW5uZXJodG1sLnRlc3QodmFsdWUpJiYhd3JhcE1hcFsocnRhZ05hbWUuZXhlYyh2YWx1ZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXt2YWx1ZT1qUXVlcnkuaHRtbFByZWZpbHRlcih2YWx1ZSk7dHJ5e2Zvcig7aTxsO2krKyl7ZWxlbT10aGlzW2ldfHx7fTtpZihlbGVtLm5vZGVUeXBlPT09MSl7alF1ZXJ5LmNsZWFuRGF0YShnZXRBbGwoZWxlbSwhMSkpO2VsZW0uaW5uZXJIVE1MPXZhbHVlfX0KZWxlbT0wfWNhdGNoKGUpe319CmlmKGVsZW0pe3RoaXMuZW1wdHkoKS5hcHBlbmQodmFsdWUpfX0sbnVsbCx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgaWdub3JlZD1bXTtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD10aGlzLnBhcmVudE5vZGU7aWYoalF1ZXJ5LmluQXJyYXkodGhpcyxpZ25vcmVkKTwwKXtqUXVlcnkuY2xlYW5EYXRhKGdldEFsbCh0aGlzKSk7aWYocGFyZW50KXtwYXJlbnQucmVwbGFjZUNoaWxkKGVsZW0sdGhpcyl9fX0saWdub3JlZCl9fSk7alF1ZXJ5LmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihuYW1lLG9yaWdpbmFsKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBlbGVtcyxyZXQ9W10saW5zZXJ0PWpRdWVyeShzZWxlY3RvciksbGFzdD1pbnNlcnQubGVuZ3RoLTEsaT0wO2Zvcig7aTw9bGFzdDtpKyspe2VsZW1zPWk9PT1sYXN0P3RoaXM6dGhpcy5jbG9uZSghMCk7alF1ZXJ5KGluc2VydFtpXSlbb3JpZ2luYWxdKGVsZW1zKTtwdXNoLmFwcGx5KHJldCxlbGVtcy5nZXQoKSl9CnJldHVybiB0aGlzLnB1c2hTdGFjayhyZXQpfX0pO3ZhciBybnVtbm9ucHg9bmV3IFJlZ0V4cCgiXigiK3BudW0rIikoPyFweClbYS16JV0rJCIsImkiKTt2YXIgZ2V0U3R5bGVzPWZ1bmN0aW9uKGVsZW0pe3ZhciB2aWV3PWVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztpZighdmlld3x8IXZpZXcub3BlbmVyKXt2aWV3PXdpbmRvd30KcmV0dXJuIHZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKX07dmFyIHN3YXA9ZnVuY3Rpb24oZWxlbSxvcHRpb25zLGNhbGxiYWNrKXt2YXIgcmV0LG5hbWUsb2xkPXt9O2ZvcihuYW1lIGluIG9wdGlvbnMpe29sZFtuYW1lXT1lbGVtLnN0eWxlW25hbWVdO2VsZW0uc3R5bGVbbmFtZV09b3B0aW9uc1tuYW1lXX0KcmV0PWNhbGxiYWNrLmNhbGwoZWxlbSk7Zm9yKG5hbWUgaW4gb3B0aW9ucyl7ZWxlbS5zdHlsZVtuYW1lXT1vbGRbbmFtZV19CnJldHVybiByZXR9O3ZhciByYm94U3R5bGU9bmV3IFJlZ0V4cChjc3NFeHBhbmQuam9pbigifCIpLCJpIik7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gY29tcHV0ZVN0eWxlVGVzdHMoKXtpZighZGl2KXtyZXR1cm59CmNvbnRhaW5lci5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4O3dpZHRoOjYwcHg7IisibWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowIjtkaXYuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcmZsb3c6c2Nyb2xsOyIrIm1hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7Iisid2lkdGg6NjAlO3RvcDoxJSI7ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcikuYXBwZW5kQ2hpbGQoZGl2KTt2YXIgZGl2U3R5bGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZGl2KTtwaXhlbFBvc2l0aW9uVmFsPWRpdlN0eWxlLnRvcCE9PSIxJSI7cmVsaWFibGVNYXJnaW5MZWZ0VmFsPXJvdW5kUGl4ZWxNZWFzdXJlcyhkaXZTdHlsZS5tYXJnaW5MZWZ0KT09PTEyO2Rpdi5zdHlsZS5yaWdodD0iNjAlIjtwaXhlbEJveFN0eWxlc1ZhbD1yb3VuZFBpeGVsTWVhc3VyZXMoZGl2U3R5bGUucmlnaHQpPT09MzY7Ym94U2l6aW5nUmVsaWFibGVWYWw9cm91bmRQaXhlbE1lYXN1cmVzKGRpdlN0eWxlLndpZHRoKT09PTM2O2Rpdi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO3Njcm9sbGJveFNpemVWYWw9cm91bmRQaXhlbE1lYXN1cmVzKGRpdi5vZmZzZXRXaWR0aC8zKT09PTEyO2RvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZChjb250YWluZXIpO2Rpdj1udWxsfQpmdW5jdGlvbiByb3VuZFBpeGVsTWVhc3VyZXMobWVhc3VyZSl7cmV0dXJuIE1hdGgucm91bmQocGFyc2VGbG9hdChtZWFzdXJlKSl9CnZhciBwaXhlbFBvc2l0aW9uVmFsLGJveFNpemluZ1JlbGlhYmxlVmFsLHNjcm9sbGJveFNpemVWYWwscGl4ZWxCb3hTdHlsZXNWYWwscmVsaWFibGVUckRpbWVuc2lvbnNWYWwscmVsaWFibGVNYXJnaW5MZWZ0VmFsLGNvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxkaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoIWRpdi5zdHlsZSl7cmV0dXJufQpkaXYuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IjtkaXYuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIjtzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZT1kaXYuc3R5bGUuYmFja2dyb3VuZENsaXA9PT0iY29udGVudC1ib3giO2pRdWVyeS5leHRlbmQoc3VwcG9ydCx7Ym94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBib3hTaXppbmdSZWxpYWJsZVZhbH0scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbEJveFN0eWxlc1ZhbH0scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIHBpeGVsUG9zaXRpb25WYWx9LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIHJlbGlhYmxlTWFyZ2luTGVmdFZhbH0sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIHNjcm9sbGJveFNpemVWYWx9LHJlbGlhYmxlVHJEaW1lbnNpb25zOmZ1bmN0aW9uKCl7dmFyIHRhYmxlLHRyLHRyQ2hpbGQsdHJTdHlsZTtpZihyZWxpYWJsZVRyRGltZW5zaW9uc1ZhbD09bnVsbCl7dGFibGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTt0cj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ciIpO3RyQ2hpbGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGFibGUuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweCI7dHIuc3R5bGUuaGVpZ2h0PSIxcHgiO3RyQ2hpbGQuc3R5bGUuaGVpZ2h0PSI5cHgiO2RvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0YWJsZSkuYXBwZW5kQ2hpbGQodHIpLmFwcGVuZENoaWxkKHRyQ2hpbGQpO3RyU3R5bGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUodHIpO3JlbGlhYmxlVHJEaW1lbnNpb25zVmFsPXBhcnNlSW50KHRyU3R5bGUuaGVpZ2h0KT4zO2RvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0YWJsZSl9CnJldHVybiByZWxpYWJsZVRyRGltZW5zaW9uc1ZhbH19KX0pKCk7ZnVuY3Rpb24gY3VyQ1NTKGVsZW0sbmFtZSxjb21wdXRlZCl7dmFyIHdpZHRoLG1pbldpZHRoLG1heFdpZHRoLHJldCxzdHlsZT1lbGVtLnN0eWxlO2NvbXB1dGVkPWNvbXB1dGVkfHxnZXRTdHlsZXMoZWxlbSk7aWYoY29tcHV0ZWQpe3JldD1jb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpfHxjb21wdXRlZFtuYW1lXTtpZihyZXQ9PT0iIiYmIWlzQXR0YWNoZWQoZWxlbSkpe3JldD1qUXVlcnkuc3R5bGUoZWxlbSxuYW1lKX0KaWYoIXN1cHBvcnQucGl4ZWxCb3hTdHlsZXMoKSYmcm51bW5vbnB4LnRlc3QocmV0KSYmcmJveFN0eWxlLnRlc3QobmFtZSkpe3dpZHRoPXN0eWxlLndpZHRoO21pbldpZHRoPXN0eWxlLm1pbldpZHRoO21heFdpZHRoPXN0eWxlLm1heFdpZHRoO3N0eWxlLm1pbldpZHRoPXN0eWxlLm1heFdpZHRoPXN0eWxlLndpZHRoPXJldDtyZXQ9Y29tcHV0ZWQud2lkdGg7c3R5bGUud2lkdGg9d2lkdGg7c3R5bGUubWluV2lkdGg9bWluV2lkdGg7c3R5bGUubWF4V2lkdGg9bWF4V2lkdGh9fQpyZXR1cm4gcmV0IT09dW5kZWZpbmVkP3JldCsiIjpyZXR9CmZ1bmN0aW9uIGFkZEdldEhvb2tJZihjb25kaXRpb25Gbixob29rRm4pe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZihjb25kaXRpb25GbigpKXtkZWxldGUgdGhpcy5nZXQ7cmV0dXJufQpyZXR1cm4odGhpcy5nZXQ9aG9va0ZuKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0KdmFyIGNzc1ByZWZpeGVzPVsiV2Via2l0IiwiTW96IiwibXMiXSxlbXB0eVN0eWxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLHZlbmRvclByb3BzPXt9O2Z1bmN0aW9uIHZlbmRvclByb3BOYW1lKG5hbWUpe3ZhciBjYXBOYW1lPW5hbWVbMF0udG9VcHBlckNhc2UoKStuYW1lLnNsaWNlKDEpLGk9Y3NzUHJlZml4ZXMubGVuZ3RoO3doaWxlKGktLSl7bmFtZT1jc3NQcmVmaXhlc1tpXStjYXBOYW1lO2lmKG5hbWUgaW4gZW1wdHlTdHlsZSl7cmV0dXJuIG5hbWV9fX0KZnVuY3Rpb24gZmluYWxQcm9wTmFtZShuYW1lKXt2YXIgZmluYWw9alF1ZXJ5LmNzc1Byb3BzW25hbWVdfHx2ZW5kb3JQcm9wc1tuYW1lXTtpZihmaW5hbCl7cmV0dXJuIGZpbmFsfQppZihuYW1lIGluIGVtcHR5U3R5bGUpe3JldHVybiBuYW1lfQpyZXR1cm4gdmVuZG9yUHJvcHNbbmFtZV09dmVuZG9yUHJvcE5hbWUobmFtZSl8fG5hbWV9CnZhciByZGlzcGxheXN3YXA9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLHJjdXN0b21Qcm9wPS9eLS0vLGNzc1Nob3c9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LGNzc05vcm1hbFRyYW5zZm9ybT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn07ZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoX2VsZW0sdmFsdWUsc3VidHJhY3Qpe3ZhciBtYXRjaGVzPXJjc3NOdW0uZXhlYyh2YWx1ZSk7cmV0dXJuIG1hdGNoZXM/TWF0aC5tYXgoMCxtYXRjaGVzWzJdLShzdWJ0cmFjdHx8MCkpKyhtYXRjaGVzWzNdfHwicHgiKTp2YWx1ZX0KZnVuY3Rpb24gYm94TW9kZWxBZGp1c3RtZW50KGVsZW0sZGltZW5zaW9uLGJveCxpc0JvcmRlckJveCxzdHlsZXMsY29tcHV0ZWRWYWwpe3ZhciBpPWRpbWVuc2lvbj09PSJ3aWR0aCI/MTowLGV4dHJhPTAsZGVsdGE9MDtpZihib3g9PT0oaXNCb3JkZXJCb3g/ImJvcmRlciI6ImNvbnRlbnQiKSl7cmV0dXJuIDB9CmZvcig7aTw0O2krPTIpe2lmKGJveD09PSJtYXJnaW4iKXtkZWx0YSs9alF1ZXJ5LmNzcyhlbGVtLGJveCtjc3NFeHBhbmRbaV0sITAsc3R5bGVzKX0KaWYoIWlzQm9yZGVyQm94KXtkZWx0YSs9alF1ZXJ5LmNzcyhlbGVtLCJwYWRkaW5nIitjc3NFeHBhbmRbaV0sITAsc3R5bGVzKTtpZihib3ghPT0icGFkZGluZyIpe2RlbHRhKz1qUXVlcnkuY3NzKGVsZW0sImJvcmRlciIrY3NzRXhwYW5kW2ldKyJXaWR0aCIsITAsc3R5bGVzKX1lbHNle2V4dHJhKz1qUXVlcnkuY3NzKGVsZW0sImJvcmRlciIrY3NzRXhwYW5kW2ldKyJXaWR0aCIsITAsc3R5bGVzKX19ZWxzZXtpZihib3g9PT0iY29udGVudCIpe2RlbHRhLT1qUXVlcnkuY3NzKGVsZW0sInBhZGRpbmciK2Nzc0V4cGFuZFtpXSwhMCxzdHlsZXMpfQppZihib3ghPT0ibWFyZ2luIil7ZGVsdGEtPWpRdWVyeS5jc3MoZWxlbSwiYm9yZGVyIitjc3NFeHBhbmRbaV0rIldpZHRoIiwhMCxzdHlsZXMpfX19CmlmKCFpc0JvcmRlckJveCYmY29tcHV0ZWRWYWw+PTApe2RlbHRhKz1NYXRoLm1heCgwLE1hdGguY2VpbChlbGVtWyJvZmZzZXQiK2RpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpK2RpbWVuc2lvbi5zbGljZSgxKV0tY29tcHV0ZWRWYWwtZGVsdGEtZXh0cmEtMC41KSl8fDB9CnJldHVybiBkZWx0YX0KZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodChlbGVtLGRpbWVuc2lvbixleHRyYSl7dmFyIHN0eWxlcz1nZXRTdHlsZXMoZWxlbSksYm94U2l6aW5nTmVlZGVkPSFzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCl8fGV4dHJhLGlzQm9yZGVyQm94PWJveFNpemluZ05lZWRlZCYmalF1ZXJ5LmNzcyhlbGVtLCJib3hTaXppbmciLCExLHN0eWxlcyk9PT0iYm9yZGVyLWJveCIsdmFsdWVJc0JvcmRlckJveD1pc0JvcmRlckJveCx2YWw9Y3VyQ1NTKGVsZW0sZGltZW5zaW9uLHN0eWxlcyksb2Zmc2V0UHJvcD0ib2Zmc2V0IitkaW1lbnNpb25bMF0udG9VcHBlckNhc2UoKStkaW1lbnNpb24uc2xpY2UoMSk7aWYocm51bW5vbnB4LnRlc3QodmFsKSl7aWYoIWV4dHJhKXtyZXR1cm4gdmFsfQp2YWw9ImF1dG8ifQppZigoIXN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSYmaXNCb3JkZXJCb3h8fCFzdXBwb3J0LnJlbGlhYmxlVHJEaW1lbnNpb25zKCkmJm5vZGVOYW1lKGVsZW0sInRyIil8fHZhbD09PSJhdXRvInx8IXBhcnNlRmxvYXQodmFsKSYmalF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5IiwhMSxzdHlsZXMpPT09ImlubGluZSIpJiZlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKXtpc0JvcmRlckJveD1qUXVlcnkuY3NzKGVsZW0sImJveFNpemluZyIsITEsc3R5bGVzKT09PSJib3JkZXItYm94Ijt2YWx1ZUlzQm9yZGVyQm94PW9mZnNldFByb3AgaW4gZWxlbTtpZih2YWx1ZUlzQm9yZGVyQm94KXt2YWw9ZWxlbVtvZmZzZXRQcm9wXX19CnZhbD1wYXJzZUZsb2F0KHZhbCl8fDA7cmV0dXJuKHZhbCtib3hNb2RlbEFkanVzdG1lbnQoZWxlbSxkaW1lbnNpb24sZXh0cmF8fChpc0JvcmRlckJveD8iYm9yZGVyIjoiY29udGVudCIpLHZhbHVlSXNCb3JkZXJCb3gsc3R5bGVzLHZhbCkpKyJweCJ9CmpRdWVyeS5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZWxlbSxjb21wdXRlZCl7aWYoY29tcHV0ZWQpe3ZhciByZXQ9Y3VyQ1NTKGVsZW0sIm9wYWNpdHkiKTtyZXR1cm4gcmV0PT09IiI/IjEiOnJldH19fX0sY3NzTnVtYmVyOnsiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiOiEwLCJjb2x1bW5Db3VudCI6ITAsImZpbGxPcGFjaXR5IjohMCwiZmxleEdyb3ciOiEwLCJmbGV4U2hyaW5rIjohMCwiZm9udFdlaWdodCI6ITAsImdyaWRBcmVhIjohMCwiZ3JpZENvbHVtbiI6ITAsImdyaWRDb2x1bW5FbmQiOiEwLCJncmlkQ29sdW1uU3RhcnQiOiEwLCJncmlkUm93IjohMCwiZ3JpZFJvd0VuZCI6ITAsImdyaWRSb3dTdGFydCI6ITAsImxpbmVIZWlnaHQiOiEwLCJvcGFjaXR5IjohMCwib3JkZXIiOiEwLCJvcnBoYW5zIjohMCwid2lkb3dzIjohMCwiekluZGV4IjohMCwiem9vbSI6ITB9LGNzc1Byb3BzOnt9LHN0eWxlOmZ1bmN0aW9uKGVsZW0sbmFtZSx2YWx1ZSxleHRyYSl7aWYoIWVsZW18fGVsZW0ubm9kZVR5cGU9PT0zfHxlbGVtLm5vZGVUeXBlPT09OHx8IWVsZW0uc3R5bGUpe3JldHVybn0KdmFyIHJldCx0eXBlLGhvb2tzLG9yaWdOYW1lPWNhbWVsQ2FzZShuYW1lKSxpc0N1c3RvbVByb3A9cmN1c3RvbVByb3AudGVzdChuYW1lKSxzdHlsZT1lbGVtLnN0eWxlO2lmKCFpc0N1c3RvbVByb3Ape25hbWU9ZmluYWxQcm9wTmFtZShvcmlnTmFtZSl9Cmhvb2tzPWpRdWVyeS5jc3NIb29rc1tuYW1lXXx8alF1ZXJ5LmNzc0hvb2tzW29yaWdOYW1lXTtpZih2YWx1ZSE9PXVuZGVmaW5lZCl7dHlwZT10eXBlb2YgdmFsdWU7aWYodHlwZT09PSJzdHJpbmciJiYocmV0PXJjc3NOdW0uZXhlYyh2YWx1ZSkpJiZyZXRbMV0pe3ZhbHVlPWFkanVzdENTUyhlbGVtLG5hbWUscmV0KTt0eXBlPSJudW1iZXIifQppZih2YWx1ZT09bnVsbHx8dmFsdWUhPT12YWx1ZSl7cmV0dXJufQppZih0eXBlPT09Im51bWJlciImJiFpc0N1c3RvbVByb3Ape3ZhbHVlKz1yZXQmJnJldFszXXx8KGpRdWVyeS5jc3NOdW1iZXJbb3JpZ05hbWVdPyIiOiJweCIpfQppZighc3VwcG9ydC5jbGVhckNsb25lU3R5bGUmJnZhbHVlPT09IiImJm5hbWUuaW5kZXhPZigiYmFja2dyb3VuZCIpPT09MCl7c3R5bGVbbmFtZV09ImluaGVyaXQifQppZighaG9va3N8fCEoInNldCJpbiBob29rcyl8fCh2YWx1ZT1ob29rcy5zZXQoZWxlbSx2YWx1ZSxleHRyYSkpIT09dW5kZWZpbmVkKXtpZihpc0N1c3RvbVByb3Ape3N0eWxlLnNldFByb3BlcnR5KG5hbWUsdmFsdWUpfWVsc2V7c3R5bGVbbmFtZV09dmFsdWV9fX1lbHNle2lmKGhvb2tzJiYiZ2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLmdldChlbGVtLCExLGV4dHJhKSkhPT11bmRlZmluZWQpe3JldHVybiByZXR9CnJldHVybiBzdHlsZVtuYW1lXX19LGNzczpmdW5jdGlvbihlbGVtLG5hbWUsZXh0cmEsc3R5bGVzKXt2YXIgdmFsLG51bSxob29rcyxvcmlnTmFtZT1jYW1lbENhc2UobmFtZSksaXNDdXN0b21Qcm9wPXJjdXN0b21Qcm9wLnRlc3QobmFtZSk7aWYoIWlzQ3VzdG9tUHJvcCl7bmFtZT1maW5hbFByb3BOYW1lKG9yaWdOYW1lKX0KaG9va3M9alF1ZXJ5LmNzc0hvb2tzW25hbWVdfHxqUXVlcnkuY3NzSG9va3Nbb3JpZ05hbWVdO2lmKGhvb2tzJiYiZ2V0ImluIGhvb2tzKXt2YWw9aG9va3MuZ2V0KGVsZW0sITAsZXh0cmEpfQppZih2YWw9PT11bmRlZmluZWQpe3ZhbD1jdXJDU1MoZWxlbSxuYW1lLHN0eWxlcyl9CmlmKHZhbD09PSJub3JtYWwiJiZuYW1lIGluIGNzc05vcm1hbFRyYW5zZm9ybSl7dmFsPWNzc05vcm1hbFRyYW5zZm9ybVtuYW1lXX0KaWYoZXh0cmE9PT0iInx8ZXh0cmEpe251bT1wYXJzZUZsb2F0KHZhbCk7cmV0dXJuIGV4dHJhPT09ITB8fGlzRmluaXRlKG51bSk/bnVtfHwwOnZhbH0KcmV0dXJuIHZhbH19KTtqUXVlcnkuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oX2ksZGltZW5zaW9uKXtqUXVlcnkuY3NzSG9va3NbZGltZW5zaW9uXT17Z2V0OmZ1bmN0aW9uKGVsZW0sY29tcHV0ZWQsZXh0cmEpe2lmKGNvbXB1dGVkKXtyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoalF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5IikpJiYoIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGh8fCFlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKT9zd2FwKGVsZW0sY3NzU2hvdyxmdW5jdGlvbigpe3JldHVybiBnZXRXaWR0aE9ySGVpZ2h0KGVsZW0sZGltZW5zaW9uLGV4dHJhKX0pOmdldFdpZHRoT3JIZWlnaHQoZWxlbSxkaW1lbnNpb24sZXh0cmEpfX0sc2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUsZXh0cmEpe3ZhciBtYXRjaGVzLHN0eWxlcz1nZXRTdHlsZXMoZWxlbSksc2Nyb2xsYm94U2l6ZUJ1Z2d5PSFzdXBwb3J0LnNjcm9sbGJveFNpemUoKSYmc3R5bGVzLnBvc2l0aW9uPT09ImFic29sdXRlIixib3hTaXppbmdOZWVkZWQ9c2Nyb2xsYm94U2l6ZUJ1Z2d5fHxleHRyYSxpc0JvcmRlckJveD1ib3hTaXppbmdOZWVkZWQmJmpRdWVyeS5jc3MoZWxlbSwiYm94U2l6aW5nIiwhMSxzdHlsZXMpPT09ImJvcmRlci1ib3giLHN1YnRyYWN0PWV4dHJhP2JveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbixleHRyYSxpc0JvcmRlckJveCxzdHlsZXMpOjA7aWYoaXNCb3JkZXJCb3gmJnNjcm9sbGJveFNpemVCdWdneSl7c3VidHJhY3QtPU1hdGguY2VpbChlbGVtWyJvZmZzZXQiK2RpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpK2RpbWVuc2lvbi5zbGljZSgxKV0tcGFyc2VGbG9hdChzdHlsZXNbZGltZW5zaW9uXSktYm94TW9kZWxBZGp1c3RtZW50KGVsZW0sZGltZW5zaW9uLCJib3JkZXIiLCExLHN0eWxlcyktMC41KX0KaWYoc3VidHJhY3QmJihtYXRjaGVzPXJjc3NOdW0uZXhlYyh2YWx1ZSkpJiYobWF0Y2hlc1szXXx8InB4IikhPT0icHgiKXtlbGVtLnN0eWxlW2RpbWVuc2lvbl09dmFsdWU7dmFsdWU9alF1ZXJ5LmNzcyhlbGVtLGRpbWVuc2lvbil9CnJldHVybiBzZXRQb3NpdGl2ZU51bWJlcihlbGVtLHZhbHVlLHN1YnRyYWN0KX19fSk7alF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQ9YWRkR2V0SG9va0lmKHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGVsZW0sY29tcHV0ZWQpe2lmKGNvbXB1dGVkKXtyZXR1cm4ocGFyc2VGbG9hdChjdXJDU1MoZWxlbSwibWFyZ2luTGVmdCIpKXx8ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LXN3YXAoZWxlbSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrInB4In19KTtqUXVlcnkuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKHByZWZpeCxzdWZmaXgpe2pRdWVyeS5jc3NIb29rc1twcmVmaXgrc3VmZml4XT17ZXhwYW5kOmZ1bmN0aW9uKHZhbHVlKXt2YXIgaT0wLGV4cGFuZGVkPXt9LHBhcnRzPXR5cGVvZiB2YWx1ZT09PSJzdHJpbmciP3ZhbHVlLnNwbGl0KCIgIik6W3ZhbHVlXTtmb3IoO2k8NDtpKyspe2V4cGFuZGVkW3ByZWZpeCtjc3NFeHBhbmRbaV0rc3VmZml4XT1wYXJ0c1tpXXx8cGFydHNbaS0yXXx8cGFydHNbMF19CnJldHVybiBleHBhbmRlZH19O2lmKHByZWZpeCE9PSJtYXJnaW4iKXtqUXVlcnkuY3NzSG9va3NbcHJlZml4K3N1ZmZpeF0uc2V0PXNldFBvc2l0aXZlTnVtYmVyfX0pO2pRdWVyeS5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihuYW1lLHZhbHVlKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSxuYW1lLHZhbHVlKXt2YXIgc3R5bGVzLGxlbixtYXA9e30saT0wO2lmKEFycmF5LmlzQXJyYXkobmFtZSkpe3N0eWxlcz1nZXRTdHlsZXMoZWxlbSk7bGVuPW5hbWUubGVuZ3RoO2Zvcig7aTxsZW47aSsrKXttYXBbbmFtZVtpXV09alF1ZXJ5LmNzcyhlbGVtLG5hbWVbaV0sITEsc3R5bGVzKX0KcmV0dXJuIG1hcH0KcmV0dXJuIHZhbHVlIT09dW5kZWZpbmVkP2pRdWVyeS5zdHlsZShlbGVtLG5hbWUsdmFsdWUpOmpRdWVyeS5jc3MoZWxlbSxuYW1lKX0sbmFtZSx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoPjEpfX0pO2Z1bmN0aW9uIFR3ZWVuKGVsZW0sb3B0aW9ucyxwcm9wLGVuZCxlYXNpbmcpe3JldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoZWxlbSxvcHRpb25zLHByb3AsZW5kLGVhc2luZyl9CmpRdWVyeS5Ud2Vlbj1Ud2VlbjtUd2Vlbi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlR3ZWVuLGluaXQ6ZnVuY3Rpb24oZWxlbSxvcHRpb25zLHByb3AsZW5kLGVhc2luZyx1bml0KXt0aGlzLmVsZW09ZWxlbTt0aGlzLnByb3A9cHJvcDt0aGlzLmVhc2luZz1lYXNpbmd8fGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7dGhpcy5vcHRpb25zPW9wdGlvbnM7dGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpO3RoaXMuZW5kPWVuZDt0aGlzLnVuaXQ9dW5pdHx8KGpRdWVyeS5jc3NOdW1iZXJbcHJvcF0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBob29rcz1Ud2Vlbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gaG9va3MmJmhvb2tzLmdldD9ob29rcy5nZXQodGhpcyk6VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKHBlcmNlbnQpe3ZhciBlYXNlZCxob29rcz1Ud2Vlbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtpZih0aGlzLm9wdGlvbnMuZHVyYXRpb24pe3RoaXMucG9zPWVhc2VkPWpRdWVyeS5lYXNpbmdbdGhpcy5lYXNpbmddKHBlcmNlbnQsdGhpcy5vcHRpb25zLmR1cmF0aW9uKnBlcmNlbnQsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbil9ZWxzZXt0aGlzLnBvcz1lYXNlZD1wZXJjZW50fQp0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqZWFzZWQrdGhpcy5zdGFydDtpZih0aGlzLm9wdGlvbnMuc3RlcCl7dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyl9CmlmKGhvb2tzJiZob29rcy5zZXQpe2hvb2tzLnNldCh0aGlzKX1lbHNle1R3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyl9CnJldHVybiB0aGlzfX07VHdlZW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlPVR3ZWVuLnByb3RvdHlwZTtUd2Vlbi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24odHdlZW4pe3ZhciByZXN1bHQ7aWYodHdlZW4uZWxlbS5ub2RlVHlwZSE9PTF8fHR3ZWVuLmVsZW1bdHdlZW4ucHJvcF0hPW51bGwmJnR3ZWVuLmVsZW0uc3R5bGVbdHdlZW4ucHJvcF09PW51bGwpe3JldHVybiB0d2Vlbi5lbGVtW3R3ZWVuLnByb3BdfQpyZXN1bHQ9alF1ZXJ5LmNzcyh0d2Vlbi5lbGVtLHR3ZWVuLnByb3AsIiIpO3JldHVybiFyZXN1bHR8fHJlc3VsdD09PSJhdXRvIj8wOnJlc3VsdH0sc2V0OmZ1bmN0aW9uKHR3ZWVuKXtpZihqUXVlcnkuZnguc3RlcFt0d2Vlbi5wcm9wXSl7alF1ZXJ5LmZ4LnN0ZXBbdHdlZW4ucHJvcF0odHdlZW4pfWVsc2UgaWYodHdlZW4uZWxlbS5ub2RlVHlwZT09PTEmJihqUXVlcnkuY3NzSG9va3NbdHdlZW4ucHJvcF18fHR3ZWVuLmVsZW0uc3R5bGVbZmluYWxQcm9wTmFtZSh0d2Vlbi5wcm9wKV0hPW51bGwpKXtqUXVlcnkuc3R5bGUodHdlZW4uZWxlbSx0d2Vlbi5wcm9wLHR3ZWVuLm5vdyt0d2Vlbi51bml0KX1lbHNle3R3ZWVuLmVsZW1bdHdlZW4ucHJvcF09dHdlZW4ubm93fX19fTtUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wPVR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24odHdlZW4pe2lmKHR3ZWVuLmVsZW0ubm9kZVR5cGUmJnR3ZWVuLmVsZW0ucGFyZW50Tm9kZSl7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3d9fX07alF1ZXJ5LmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKHApe3JldHVybiBwfSxzd2luZzpmdW5jdGlvbihwKXtyZXR1cm4gMC41LU1hdGguY29zKHAqTWF0aC5QSSkvMn0sX2RlZmF1bHQ6InN3aW5nIn07alF1ZXJ5LmZ4PVR3ZWVuLnByb3RvdHlwZS5pbml0O2pRdWVyeS5meC5zdGVwPXt9O3ZhciBmeE5vdyxpblByb2dyZXNzLHJmeHR5cGVzPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxycnVuPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gc2NoZWR1bGUoKXtpZihpblByb2dyZXNzKXtpZihkb2N1bWVudC5oaWRkZW49PT0hMSYmd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSl7d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzY2hlZHVsZSl9ZWxzZXt3aW5kb3cuc2V0VGltZW91dChzY2hlZHVsZSxqUXVlcnkuZnguaW50ZXJ2YWwpfQpqUXVlcnkuZngudGljaygpfX0KZnVuY3Rpb24gY3JlYXRlRnhOb3coKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2Z4Tm93PXVuZGVmaW5lZH0pO3JldHVybihmeE5vdz1EYXRlLm5vdygpKX0KZnVuY3Rpb24gZ2VuRngodHlwZSxpbmNsdWRlV2lkdGgpe3ZhciB3aGljaCxpPTAsYXR0cnM9e2hlaWdodDp0eXBlfTtpbmNsdWRlV2lkdGg9aW5jbHVkZVdpZHRoPzE6MDtmb3IoO2k8NDtpKz0yLWluY2x1ZGVXaWR0aCl7d2hpY2g9Y3NzRXhwYW5kW2ldO2F0dHJzWyJtYXJnaW4iK3doaWNoXT1hdHRyc1sicGFkZGluZyIrd2hpY2hdPXR5cGV9CmlmKGluY2x1ZGVXaWR0aCl7YXR0cnMub3BhY2l0eT1hdHRycy53aWR0aD10eXBlfQpyZXR1cm4gYXR0cnN9CmZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKHZhbHVlLHByb3AsYW5pbWF0aW9uKXt2YXIgdHdlZW4sY29sbGVjdGlvbj0oQW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdfHxbXSkuY29uY2F0KEFuaW1hdGlvbi50d2VlbmVyc1siKiJdKSxpbmRleD0wLGxlbmd0aD1jb2xsZWN0aW9uLmxlbmd0aDtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtpZigodHdlZW49Y29sbGVjdGlvbltpbmRleF0uY2FsbChhbmltYXRpb24scHJvcCx2YWx1ZSkpKXtyZXR1cm4gdHdlZW59fX0KZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlcihlbGVtLHByb3BzLG9wdHMpe3ZhciBwcm9wLHZhbHVlLHRvZ2dsZSxob29rcyxvbGRmaXJlLHByb3BUd2VlbixyZXN0b3JlRGlzcGxheSxkaXNwbGF5LGlzQm94PSJ3aWR0aCJpbiBwcm9wc3x8ImhlaWdodCJpbiBwcm9wcyxhbmltPXRoaXMsb3JpZz17fSxzdHlsZT1lbGVtLnN0eWxlLGhpZGRlbj1lbGVtLm5vZGVUeXBlJiZpc0hpZGRlbldpdGhpblRyZWUoZWxlbSksZGF0YVNob3c9ZGF0YVByaXYuZ2V0KGVsZW0sImZ4c2hvdyIpO2lmKCFvcHRzLnF1ZXVlKXtob29rcz1qUXVlcnkuX3F1ZXVlSG9va3MoZWxlbSwiZngiKTtpZihob29rcy51bnF1ZXVlZD09bnVsbCl7aG9va3MudW5xdWV1ZWQ9MDtvbGRmaXJlPWhvb2tzLmVtcHR5LmZpcmU7aG9va3MuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2lmKCFob29rcy51bnF1ZXVlZCl7b2xkZmlyZSgpfX19Cmhvb2tzLnVucXVldWVkKys7YW5pbS5hbHdheXMoZnVuY3Rpb24oKXthbmltLmFsd2F5cyhmdW5jdGlvbigpe2hvb2tzLnVucXVldWVkLS07aWYoIWpRdWVyeS5xdWV1ZShlbGVtLCJmeCIpLmxlbmd0aCl7aG9va3MuZW1wdHkuZmlyZSgpfX0pfSl9CmZvcihwcm9wIGluIHByb3BzKXt2YWx1ZT1wcm9wc1twcm9wXTtpZihyZnh0eXBlcy50ZXN0KHZhbHVlKSl7ZGVsZXRlIHByb3BzW3Byb3BdO3RvZ2dsZT10b2dnbGV8fHZhbHVlPT09InRvZ2dsZSI7aWYodmFsdWU9PT0oaGlkZGVuPyJoaWRlIjoic2hvdyIpKXtpZih2YWx1ZT09PSJzaG93IiYmZGF0YVNob3cmJmRhdGFTaG93W3Byb3BdIT09dW5kZWZpbmVkKXtoaWRkZW49ITB9ZWxzZXtjb250aW51ZX19Cm9yaWdbcHJvcF09ZGF0YVNob3cmJmRhdGFTaG93W3Byb3BdfHxqUXVlcnkuc3R5bGUoZWxlbSxwcm9wKX19CnByb3BUd2Vlbj0halF1ZXJ5LmlzRW1wdHlPYmplY3QocHJvcHMpO2lmKCFwcm9wVHdlZW4mJmpRdWVyeS5pc0VtcHR5T2JqZWN0KG9yaWcpKXtyZXR1cm59CmlmKGlzQm94JiZlbGVtLm5vZGVUeXBlPT09MSl7b3B0cy5vdmVyZmxvdz1bc3R5bGUub3ZlcmZsb3csc3R5bGUub3ZlcmZsb3dYLHN0eWxlLm92ZXJmbG93WV07cmVzdG9yZURpc3BsYXk9ZGF0YVNob3cmJmRhdGFTaG93LmRpc3BsYXk7aWYocmVzdG9yZURpc3BsYXk9PW51bGwpe3Jlc3RvcmVEaXNwbGF5PWRhdGFQcml2LmdldChlbGVtLCJkaXNwbGF5Iil9CmRpc3BsYXk9alF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5Iik7aWYoZGlzcGxheT09PSJub25lIil7aWYocmVzdG9yZURpc3BsYXkpe2Rpc3BsYXk9cmVzdG9yZURpc3BsYXl9ZWxzZXtzaG93SGlkZShbZWxlbV0sITApO3Jlc3RvcmVEaXNwbGF5PWVsZW0uc3R5bGUuZGlzcGxheXx8cmVzdG9yZURpc3BsYXk7ZGlzcGxheT1qUXVlcnkuY3NzKGVsZW0sImRpc3BsYXkiKTtzaG93SGlkZShbZWxlbV0pfX0KaWYoZGlzcGxheT09PSJpbmxpbmUifHxkaXNwbGF5PT09ImlubGluZS1ibG9jayImJnJlc3RvcmVEaXNwbGF5IT1udWxsKXtpZihqUXVlcnkuY3NzKGVsZW0sImZsb2F0Iik9PT0ibm9uZSIpe2lmKCFwcm9wVHdlZW4pe2FuaW0uZG9uZShmdW5jdGlvbigpe3N0eWxlLmRpc3BsYXk9cmVzdG9yZURpc3BsYXl9KTtpZihyZXN0b3JlRGlzcGxheT09bnVsbCl7ZGlzcGxheT1zdHlsZS5kaXNwbGF5O3Jlc3RvcmVEaXNwbGF5PWRpc3BsYXk9PT0ibm9uZSI/IiI6ZGlzcGxheX19CnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayJ9fX0KaWYob3B0cy5vdmVyZmxvdyl7c3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7YW5pbS5hbHdheXMoZnVuY3Rpb24oKXtzdHlsZS5vdmVyZmxvdz1vcHRzLm92ZXJmbG93WzBdO3N0eWxlLm92ZXJmbG93WD1vcHRzLm92ZXJmbG93WzFdO3N0eWxlLm92ZXJmbG93WT1vcHRzLm92ZXJmbG93WzJdfSl9CnByb3BUd2Vlbj0hMTtmb3IocHJvcCBpbiBvcmlnKXtpZighcHJvcFR3ZWVuKXtpZihkYXRhU2hvdyl7aWYoImhpZGRlbiJpbiBkYXRhU2hvdyl7aGlkZGVuPWRhdGFTaG93LmhpZGRlbn19ZWxzZXtkYXRhU2hvdz1kYXRhUHJpdi5hY2Nlc3MoZWxlbSwiZnhzaG93Iix7ZGlzcGxheTpyZXN0b3JlRGlzcGxheX0pfQppZih0b2dnbGUpe2RhdGFTaG93LmhpZGRlbj0haGlkZGVufQppZihoaWRkZW4pe3Nob3dIaWRlKFtlbGVtXSwhMCl9CmFuaW0uZG9uZShmdW5jdGlvbigpe2lmKCFoaWRkZW4pe3Nob3dIaWRlKFtlbGVtXSl9CmRhdGFQcml2LnJlbW92ZShlbGVtLCJmeHNob3ciKTtmb3IocHJvcCBpbiBvcmlnKXtqUXVlcnkuc3R5bGUoZWxlbSxwcm9wLG9yaWdbcHJvcF0pfX0pfQpwcm9wVHdlZW49Y3JlYXRlVHdlZW4oaGlkZGVuP2RhdGFTaG93W3Byb3BdOjAscHJvcCxhbmltKTtpZighKHByb3AgaW4gZGF0YVNob3cpKXtkYXRhU2hvd1twcm9wXT1wcm9wVHdlZW4uc3RhcnQ7aWYoaGlkZGVuKXtwcm9wVHdlZW4uZW5kPXByb3BUd2Vlbi5zdGFydDtwcm9wVHdlZW4uc3RhcnQ9MH19fX0KZnVuY3Rpb24gcHJvcEZpbHRlcihwcm9wcyxzcGVjaWFsRWFzaW5nKXt2YXIgaW5kZXgsbmFtZSxlYXNpbmcsdmFsdWUsaG9va3M7Zm9yKGluZGV4IGluIHByb3BzKXtuYW1lPWNhbWVsQ2FzZShpbmRleCk7ZWFzaW5nPXNwZWNpYWxFYXNpbmdbbmFtZV07dmFsdWU9cHJvcHNbaW5kZXhdO2lmKEFycmF5LmlzQXJyYXkodmFsdWUpKXtlYXNpbmc9dmFsdWVbMV07dmFsdWU9cHJvcHNbaW5kZXhdPXZhbHVlWzBdfQppZihpbmRleCE9PW5hbWUpe3Byb3BzW25hbWVdPXZhbHVlO2RlbGV0ZSBwcm9wc1tpbmRleF19Cmhvb2tzPWpRdWVyeS5jc3NIb29rc1tuYW1lXTtpZihob29rcyYmImV4cGFuZCJpbiBob29rcyl7dmFsdWU9aG9va3MuZXhwYW5kKHZhbHVlKTtkZWxldGUgcHJvcHNbbmFtZV07Zm9yKGluZGV4IGluIHZhbHVlKXtpZighKGluZGV4IGluIHByb3BzKSl7cHJvcHNbaW5kZXhdPXZhbHVlW2luZGV4XTtzcGVjaWFsRWFzaW5nW2luZGV4XT1lYXNpbmd9fX1lbHNle3NwZWNpYWxFYXNpbmdbbmFtZV09ZWFzaW5nfX19CmZ1bmN0aW9uIEFuaW1hdGlvbihlbGVtLHByb3BlcnRpZXMsb3B0aW9ucyl7dmFyIHJlc3VsdCxzdG9wcGVkLGluZGV4PTAsbGVuZ3RoPUFuaW1hdGlvbi5wcmVmaWx0ZXJzLmxlbmd0aCxkZWZlcnJlZD1qUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgdGljay5lbGVtfSksdGljaz1mdW5jdGlvbigpe2lmKHN0b3BwZWQpe3JldHVybiExfQp2YXIgY3VycmVudFRpbWU9ZnhOb3d8fGNyZWF0ZUZ4Tm93KCkscmVtYWluaW5nPU1hdGgubWF4KDAsYW5pbWF0aW9uLnN0YXJ0VGltZSthbmltYXRpb24uZHVyYXRpb24tY3VycmVudFRpbWUpLHRlbXA9cmVtYWluaW5nL2FuaW1hdGlvbi5kdXJhdGlvbnx8MCxwZXJjZW50PTEtdGVtcCxpbmRleD0wLGxlbmd0aD1hbmltYXRpb24udHdlZW5zLmxlbmd0aDtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXthbmltYXRpb24udHdlZW5zW2luZGV4XS5ydW4ocGVyY2VudCl9CmRlZmVycmVkLm5vdGlmeVdpdGgoZWxlbSxbYW5pbWF0aW9uLHBlcmNlbnQscmVtYWluaW5nXSk7aWYocGVyY2VudDwxJiZsZW5ndGgpe3JldHVybiByZW1haW5pbmd9CmlmKCFsZW5ndGgpe2RlZmVycmVkLm5vdGlmeVdpdGgoZWxlbSxbYW5pbWF0aW9uLDEsMF0pfQpkZWZlcnJlZC5yZXNvbHZlV2l0aChlbGVtLFthbmltYXRpb25dKTtyZXR1cm4hMX0sYW5pbWF0aW9uPWRlZmVycmVkLnByb21pc2Uoe2VsZW06ZWxlbSxwcm9wczpqUXVlcnkuZXh0ZW5kKHt9LHByb3BlcnRpZXMpLG9wdHM6alF1ZXJ5LmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6alF1ZXJ5LmVhc2luZy5fZGVmYXVsdH0sb3B0aW9ucyksb3JpZ2luYWxQcm9wZXJ0aWVzOnByb3BlcnRpZXMsb3JpZ2luYWxPcHRpb25zOm9wdGlvbnMsc3RhcnRUaW1lOmZ4Tm93fHxjcmVhdGVGeE5vdygpLGR1cmF0aW9uOm9wdGlvbnMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHByb3AsZW5kKXt2YXIgdHdlZW49alF1ZXJ5LlR3ZWVuKGVsZW0sYW5pbWF0aW9uLm9wdHMscHJvcCxlbmQsYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1twcm9wXXx8YW5pbWF0aW9uLm9wdHMuZWFzaW5nKTthbmltYXRpb24udHdlZW5zLnB1c2godHdlZW4pO3JldHVybiB0d2Vlbn0sc3RvcDpmdW5jdGlvbihnb3RvRW5kKXt2YXIgaW5kZXg9MCxsZW5ndGg9Z290b0VuZD9hbmltYXRpb24udHdlZW5zLmxlbmd0aDowO2lmKHN0b3BwZWQpe3JldHVybiB0aGlzfQpzdG9wcGVkPSEwO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2FuaW1hdGlvbi50d2VlbnNbaW5kZXhdLnJ1bigxKX0KaWYoZ290b0VuZCl7ZGVmZXJyZWQubm90aWZ5V2l0aChlbGVtLFthbmltYXRpb24sMSwwXSk7ZGVmZXJyZWQucmVzb2x2ZVdpdGgoZWxlbSxbYW5pbWF0aW9uLGdvdG9FbmRdKX1lbHNle2RlZmVycmVkLnJlamVjdFdpdGgoZWxlbSxbYW5pbWF0aW9uLGdvdG9FbmRdKX0KcmV0dXJuIHRoaXN9fSkscHJvcHM9YW5pbWF0aW9uLnByb3BzO3Byb3BGaWx0ZXIocHJvcHMsYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyk7Zm9yKDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7cmVzdWx0PUFuaW1hdGlvbi5wcmVmaWx0ZXJzW2luZGV4XS5jYWxsKGFuaW1hdGlvbixlbGVtLHByb3BzLGFuaW1hdGlvbi5vcHRzKTtpZihyZXN1bHQpe2lmKGlzRnVuY3Rpb24ocmVzdWx0LnN0b3ApKXtqUXVlcnkuX3F1ZXVlSG9va3MoYW5pbWF0aW9uLmVsZW0sYW5pbWF0aW9uLm9wdHMucXVldWUpLnN0b3A9cmVzdWx0LnN0b3AuYmluZChyZXN1bHQpfQpyZXR1cm4gcmVzdWx0fX0KalF1ZXJ5Lm1hcChwcm9wcyxjcmVhdGVUd2VlbixhbmltYXRpb24pO2lmKGlzRnVuY3Rpb24oYW5pbWF0aW9uLm9wdHMuc3RhcnQpKXthbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKGVsZW0sYW5pbWF0aW9uKX0KYW5pbWF0aW9uLnByb2dyZXNzKGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzKS5kb25lKGFuaW1hdGlvbi5vcHRzLmRvbmUsYW5pbWF0aW9uLm9wdHMuY29tcGxldGUpLmZhaWwoYW5pbWF0aW9uLm9wdHMuZmFpbCkuYWx3YXlzKGFuaW1hdGlvbi5vcHRzLmFsd2F5cyk7alF1ZXJ5LmZ4LnRpbWVyKGpRdWVyeS5leHRlbmQodGljayx7ZWxlbTplbGVtLGFuaW06YW5pbWF0aW9uLHF1ZXVlOmFuaW1hdGlvbi5vcHRzLnF1ZXVlfSkpO3JldHVybiBhbmltYXRpb259CmpRdWVyeS5BbmltYXRpb249alF1ZXJ5LmV4dGVuZChBbmltYXRpb24se3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKHByb3AsdmFsdWUpe3ZhciB0d2Vlbj10aGlzLmNyZWF0ZVR3ZWVuKHByb3AsdmFsdWUpO2FkanVzdENTUyh0d2Vlbi5lbGVtLHByb3AscmNzc051bS5leGVjKHZhbHVlKSx0d2Vlbik7cmV0dXJuIHR3ZWVufV19LHR3ZWVuZXI6ZnVuY3Rpb24ocHJvcHMsY2FsbGJhY2spe2lmKGlzRnVuY3Rpb24ocHJvcHMpKXtjYWxsYmFjaz1wcm9wcztwcm9wcz1bIioiXX1lbHNle3Byb3BzPXByb3BzLm1hdGNoKHJub3RodG1sd2hpdGUpfQp2YXIgcHJvcCxpbmRleD0wLGxlbmd0aD1wcm9wcy5sZW5ndGg7Zm9yKDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7cHJvcD1wcm9wc1tpbmRleF07QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdPUFuaW1hdGlvbi50d2VlbmVyc1twcm9wXXx8W107QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdLnVuc2hpZnQoY2FsbGJhY2spfX0scHJlZmlsdGVyczpbZGVmYXVsdFByZWZpbHRlcl0scHJlZmlsdGVyOmZ1bmN0aW9uKGNhbGxiYWNrLHByZXBlbmQpe2lmKHByZXBlbmQpe0FuaW1hdGlvbi5wcmVmaWx0ZXJzLnVuc2hpZnQoY2FsbGJhY2spfWVsc2V7QW5pbWF0aW9uLnByZWZpbHRlcnMucHVzaChjYWxsYmFjayl9fX0pO2pRdWVyeS5zcGVlZD1mdW5jdGlvbihzcGVlZCxlYXNpbmcsZm4pe3ZhciBvcHQ9c3BlZWQmJnR5cGVvZiBzcGVlZD09PSJvYmplY3QiP2pRdWVyeS5leHRlbmQoe30sc3BlZWQpOntjb21wbGV0ZTpmbnx8IWZuJiZlYXNpbmd8fGlzRnVuY3Rpb24oc3BlZWQpJiZzcGVlZCxkdXJhdGlvbjpzcGVlZCxlYXNpbmc6Zm4mJmVhc2luZ3x8ZWFzaW5nJiYhaXNGdW5jdGlvbihlYXNpbmcpJiZlYXNpbmd9O2lmKGpRdWVyeS5meC5vZmYpe29wdC5kdXJhdGlvbj0wfWVsc2V7aWYodHlwZW9mIG9wdC5kdXJhdGlvbiE9PSJudW1iZXIiKXtpZihvcHQuZHVyYXRpb24gaW4galF1ZXJ5LmZ4LnNwZWVkcyl7b3B0LmR1cmF0aW9uPWpRdWVyeS5meC5zcGVlZHNbb3B0LmR1cmF0aW9uXX1lbHNle29wdC5kdXJhdGlvbj1qUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0fX19CmlmKG9wdC5xdWV1ZT09bnVsbHx8b3B0LnF1ZXVlPT09ITApe29wdC5xdWV1ZT0iZngifQpvcHQub2xkPW9wdC5jb21wbGV0ZTtvcHQuY29tcGxldGU9ZnVuY3Rpb24oKXtpZihpc0Z1bmN0aW9uKG9wdC5vbGQpKXtvcHQub2xkLmNhbGwodGhpcyl9CmlmKG9wdC5xdWV1ZSl7alF1ZXJ5LmRlcXVldWUodGhpcyxvcHQucXVldWUpfX07cmV0dXJuIG9wdH07alF1ZXJ5LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKHNwZWVkLHRvLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHRoaXMuZmlsdGVyKGlzSGlkZGVuV2l0aGluVHJlZSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0b30sc3BlZWQsZWFzaW5nLGNhbGxiYWNrKX0sYW5pbWF0ZTpmdW5jdGlvbihwcm9wLHNwZWVkLGVhc2luZyxjYWxsYmFjayl7dmFyIGVtcHR5PWpRdWVyeS5pc0VtcHR5T2JqZWN0KHByb3ApLG9wdGFsbD1qUXVlcnkuc3BlZWQoc3BlZWQsZWFzaW5nLGNhbGxiYWNrKSxkb0FuaW1hdGlvbj1mdW5jdGlvbigpe3ZhciBhbmltPUFuaW1hdGlvbih0aGlzLGpRdWVyeS5leHRlbmQoe30scHJvcCksb3B0YWxsKTtpZihlbXB0eXx8ZGF0YVByaXYuZ2V0KHRoaXMsImZpbmlzaCIpKXthbmltLnN0b3AoITApfX07ZG9BbmltYXRpb24uZmluaXNoPWRvQW5pbWF0aW9uO3JldHVybiBlbXB0eXx8b3B0YWxsLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGRvQW5pbWF0aW9uKTp0aGlzLnF1ZXVlKG9wdGFsbC5xdWV1ZSxkb0FuaW1hdGlvbil9LHN0b3A6ZnVuY3Rpb24odHlwZSxjbGVhclF1ZXVlLGdvdG9FbmQpe3ZhciBzdG9wUXVldWU9ZnVuY3Rpb24oaG9va3Mpe3ZhciBzdG9wPWhvb2tzLnN0b3A7ZGVsZXRlIGhvb2tzLnN0b3A7c3RvcChnb3RvRW5kKX07aWYodHlwZW9mIHR5cGUhPT0ic3RyaW5nIil7Z290b0VuZD1jbGVhclF1ZXVlO2NsZWFyUXVldWU9dHlwZTt0eXBlPXVuZGVmaW5lZH0KaWYoY2xlYXJRdWV1ZSl7dGhpcy5xdWV1ZSh0eXBlfHwiZngiLFtdKX0KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkZXF1ZXVlPSEwLGluZGV4PXR5cGUhPW51bGwmJnR5cGUrInF1ZXVlSG9va3MiLHRpbWVycz1qUXVlcnkudGltZXJzLGRhdGE9ZGF0YVByaXYuZ2V0KHRoaXMpO2lmKGluZGV4KXtpZihkYXRhW2luZGV4XSYmZGF0YVtpbmRleF0uc3RvcCl7c3RvcFF1ZXVlKGRhdGFbaW5kZXhdKX19ZWxzZXtmb3IoaW5kZXggaW4gZGF0YSl7aWYoZGF0YVtpbmRleF0mJmRhdGFbaW5kZXhdLnN0b3AmJnJydW4udGVzdChpbmRleCkpe3N0b3BRdWV1ZShkYXRhW2luZGV4XSl9fX0KZm9yKGluZGV4PXRpbWVycy5sZW5ndGg7aW5kZXgtLTspe2lmKHRpbWVyc1tpbmRleF0uZWxlbT09PXRoaXMmJih0eXBlPT1udWxsfHx0aW1lcnNbaW5kZXhdLnF1ZXVlPT09dHlwZSkpe3RpbWVyc1tpbmRleF0uYW5pbS5zdG9wKGdvdG9FbmQpO2RlcXVldWU9ITE7dGltZXJzLnNwbGljZShpbmRleCwxKX19CmlmKGRlcXVldWV8fCFnb3RvRW5kKXtqUXVlcnkuZGVxdWV1ZSh0aGlzLHR5cGUpfX0pfSxmaW5pc2g6ZnVuY3Rpb24odHlwZSl7aWYodHlwZSE9PSExKXt0eXBlPXR5cGV8fCJmeCJ9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaW5kZXgsZGF0YT1kYXRhUHJpdi5nZXQodGhpcykscXVldWU9ZGF0YVt0eXBlKyJxdWV1ZSJdLGhvb2tzPWRhdGFbdHlwZSsicXVldWVIb29rcyJdLHRpbWVycz1qUXVlcnkudGltZXJzLGxlbmd0aD1xdWV1ZT9xdWV1ZS5sZW5ndGg6MDtkYXRhLmZpbmlzaD0hMDtqUXVlcnkucXVldWUodGhpcyx0eXBlLFtdKTtpZihob29rcyYmaG9va3Muc3RvcCl7aG9va3Muc3RvcC5jYWxsKHRoaXMsITApfQpmb3IoaW5kZXg9dGltZXJzLmxlbmd0aDtpbmRleC0tOyl7aWYodGltZXJzW2luZGV4XS5lbGVtPT09dGhpcyYmdGltZXJzW2luZGV4XS5xdWV1ZT09PXR5cGUpe3RpbWVyc1tpbmRleF0uYW5pbS5zdG9wKCEwKTt0aW1lcnMuc3BsaWNlKGluZGV4LDEpfX0KZm9yKGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2lmKHF1ZXVlW2luZGV4XSYmcXVldWVbaW5kZXhdLmZpbmlzaCl7cXVldWVbaW5kZXhdLmZpbmlzaC5jYWxsKHRoaXMpfX0KZGVsZXRlIGRhdGEuZmluaXNofSl9fSk7alF1ZXJ5LmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKF9pLG5hbWUpe3ZhciBjc3NGbj1qUXVlcnkuZm5bbmFtZV07alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHNwZWVkLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHNwZWVkPT1udWxsfHx0eXBlb2Ygc3BlZWQ9PT0iYm9vbGVhbiI/Y3NzRm4uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShnZW5GeChuYW1lLCEwKSxzcGVlZCxlYXNpbmcsY2FsbGJhY2spfX0pO2pRdWVyeS5lYWNoKHtzbGlkZURvd246Z2VuRngoInNob3ciKSxzbGlkZVVwOmdlbkZ4KCJoaWRlIiksc2xpZGVUb2dnbGU6Z2VuRngoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24obmFtZSxwcm9wcyl7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHNwZWVkLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHRoaXMuYW5pbWF0ZShwcm9wcyxzcGVlZCxlYXNpbmcsY2FsbGJhY2spfX0pO2pRdWVyeS50aW1lcnM9W107alF1ZXJ5LmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgdGltZXIsaT0wLHRpbWVycz1qUXVlcnkudGltZXJzO2Z4Tm93PURhdGUubm93KCk7Zm9yKDtpPHRpbWVycy5sZW5ndGg7aSsrKXt0aW1lcj10aW1lcnNbaV07aWYoIXRpbWVyKCkmJnRpbWVyc1tpXT09PXRpbWVyKXt0aW1lcnMuc3BsaWNlKGktLSwxKX19CmlmKCF0aW1lcnMubGVuZ3RoKXtqUXVlcnkuZnguc3RvcCgpfQpmeE5vdz11bmRlZmluZWR9O2pRdWVyeS5meC50aW1lcj1mdW5jdGlvbih0aW1lcil7alF1ZXJ5LnRpbWVycy5wdXNoKHRpbWVyKTtqUXVlcnkuZnguc3RhcnQoKX07alF1ZXJ5LmZ4LmludGVydmFsPTEzO2pRdWVyeS5meC5zdGFydD1mdW5jdGlvbigpe2lmKGluUHJvZ3Jlc3Mpe3JldHVybn0KaW5Qcm9ncmVzcz0hMDtzY2hlZHVsZSgpfTtqUXVlcnkuZnguc3RvcD1mdW5jdGlvbigpe2luUHJvZ3Jlc3M9bnVsbH07alF1ZXJ5LmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfTtqUXVlcnkuZm4uZGVsYXk9ZnVuY3Rpb24odGltZSx0eXBlKXt0aW1lPWpRdWVyeS5meD9qUXVlcnkuZnguc3BlZWRzW3RpbWVdfHx0aW1lOnRpbWU7dHlwZT10eXBlfHwiZngiO3JldHVybiB0aGlzLnF1ZXVlKHR5cGUsZnVuY3Rpb24obmV4dCxob29rcyl7dmFyIHRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQobmV4dCx0aW1lKTtob29rcy5zdG9wPWZ1bmN0aW9uKCl7d2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0KX19KX07KGZ1bmN0aW9uKCl7dmFyIGlucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksc2VsZWN0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLG9wdD1zZWxlY3QuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2lucHV0LnR5cGU9ImNoZWNrYm94IjtzdXBwb3J0LmNoZWNrT249aW5wdXQudmFsdWUhPT0iIjtzdXBwb3J0Lm9wdFNlbGVjdGVkPW9wdC5zZWxlY3RlZDtpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnZhbHVlPSJ0IjtpbnB1dC50eXBlPSJyYWRpbyI7c3VwcG9ydC5yYWRpb1ZhbHVlPWlucHV0LnZhbHVlPT09InQifSkoKTt2YXIgYm9vbEhvb2ssYXR0ckhhbmRsZT1qUXVlcnkuZXhwci5hdHRySGFuZGxlO2pRdWVyeS5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGpRdWVyeS5hdHRyLG5hbWUsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihuYW1lKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LnJlbW92ZUF0dHIodGhpcyxuYW1lKX0pfX0pO2pRdWVyeS5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZWxlbSxuYW1lLHZhbHVlKXt2YXIgcmV0LGhvb2tzLG5UeXBlPWVsZW0ubm9kZVR5cGU7aWYoblR5cGU9PT0zfHxuVHlwZT09PTh8fG5UeXBlPT09Mil7cmV0dXJufQppZih0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGU9PT0idW5kZWZpbmVkIil7cmV0dXJuIGpRdWVyeS5wcm9wKGVsZW0sbmFtZSx2YWx1ZSl9CmlmKG5UeXBlIT09MXx8IWpRdWVyeS5pc1hNTERvYyhlbGVtKSl7aG9va3M9alF1ZXJ5LmF0dHJIb29rc1tuYW1lLnRvTG93ZXJDYXNlKCldfHwoalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KG5hbWUpP2Jvb2xIb29rOnVuZGVmaW5lZCl9CmlmKHZhbHVlIT09dW5kZWZpbmVkKXtpZih2YWx1ZT09PW51bGwpe2pRdWVyeS5yZW1vdmVBdHRyKGVsZW0sbmFtZSk7cmV0dXJufQppZihob29rcyYmInNldCJpbiBob29rcyYmKHJldD1ob29rcy5zZXQoZWxlbSx2YWx1ZSxuYW1lKSkhPT11bmRlZmluZWQpe3JldHVybiByZXR9CmVsZW0uc2V0QXR0cmlidXRlKG5hbWUsdmFsdWUrIiIpO3JldHVybiB2YWx1ZX0KaWYoaG9va3MmJiJnZXQiaW4gaG9va3MmJihyZXQ9aG9va3MuZ2V0KGVsZW0sbmFtZSkpIT09bnVsbCl7cmV0dXJuIHJldH0KcmV0PWpRdWVyeS5maW5kLmF0dHIoZWxlbSxuYW1lKTtyZXR1cm4gcmV0PT1udWxsP3VuZGVmaW5lZDpyZXR9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUpe2lmKCFzdXBwb3J0LnJhZGlvVmFsdWUmJnZhbHVlPT09InJhZGlvIiYmbm9kZU5hbWUoZWxlbSwiaW5wdXQiKSl7dmFyIHZhbD1lbGVtLnZhbHVlO2VsZW0uc2V0QXR0cmlidXRlKCJ0eXBlIix2YWx1ZSk7aWYodmFsKXtlbGVtLnZhbHVlPXZhbH0KcmV0dXJuIHZhbHVlfX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGVsZW0sdmFsdWUpe3ZhciBuYW1lLGk9MCxhdHRyTmFtZXM9dmFsdWUmJnZhbHVlLm1hdGNoKHJub3RodG1sd2hpdGUpO2lmKGF0dHJOYW1lcyYmZWxlbS5ub2RlVHlwZT09PTEpe3doaWxlKChuYW1lPWF0dHJOYW1lc1tpKytdKSl7ZWxlbS5yZW1vdmVBdHRyaWJ1dGUobmFtZSl9fX19KTtib29sSG9vaz17c2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUsbmFtZSl7aWYodmFsdWU9PT0hMSl7alF1ZXJ5LnJlbW92ZUF0dHIoZWxlbSxuYW1lKX1lbHNle2VsZW0uc2V0QXR0cmlidXRlKG5hbWUsbmFtZSl9CnJldHVybiBuYW1lfX07alF1ZXJ5LmVhY2goalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihfaSxuYW1lKXt2YXIgZ2V0dGVyPWF0dHJIYW5kbGVbbmFtZV18fGpRdWVyeS5maW5kLmF0dHI7YXR0ckhhbmRsZVtuYW1lXT1mdW5jdGlvbihlbGVtLG5hbWUsaXNYTUwpe3ZhciByZXQsaGFuZGxlLGxvd2VyY2FzZU5hbWU9bmFtZS50b0xvd2VyQ2FzZSgpO2lmKCFpc1hNTCl7aGFuZGxlPWF0dHJIYW5kbGVbbG93ZXJjYXNlTmFtZV07YXR0ckhhbmRsZVtsb3dlcmNhc2VOYW1lXT1yZXQ7cmV0PWdldHRlcihlbGVtLG5hbWUsaXNYTUwpIT1udWxsP2xvd2VyY2FzZU5hbWU6bnVsbDthdHRySGFuZGxlW2xvd2VyY2FzZU5hbWVdPWhhbmRsZX0KcmV0dXJuIHJldH19KTt2YXIgcmZvY3VzYWJsZT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLHJjbGlja2FibGU9L14oPzphfGFyZWEpJC9pO2pRdWVyeS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGpRdWVyeS5wcm9wLG5hbWUsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihuYW1lKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbalF1ZXJ5LnByb3BGaXhbbmFtZV18fG5hbWVdfSl9fSk7alF1ZXJ5LmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUpe3ZhciByZXQsaG9va3MsblR5cGU9ZWxlbS5ub2RlVHlwZTtpZihuVHlwZT09PTN8fG5UeXBlPT09OHx8blR5cGU9PT0yKXtyZXR1cm59CmlmKG5UeXBlIT09MXx8IWpRdWVyeS5pc1hNTERvYyhlbGVtKSl7bmFtZT1qUXVlcnkucHJvcEZpeFtuYW1lXXx8bmFtZTtob29rcz1qUXVlcnkucHJvcEhvb2tzW25hbWVdfQppZih2YWx1ZSE9PXVuZGVmaW5lZCl7aWYoaG9va3MmJiJzZXQiaW4gaG9va3MmJihyZXQ9aG9va3Muc2V0KGVsZW0sdmFsdWUsbmFtZSkpIT09dW5kZWZpbmVkKXtyZXR1cm4gcmV0fQpyZXR1cm4oZWxlbVtuYW1lXT12YWx1ZSl9CmlmKGhvb2tzJiYiZ2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLmdldChlbGVtLG5hbWUpKSE9PW51bGwpe3JldHVybiByZXR9CnJldHVybiBlbGVtW25hbWVdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHRhYmluZGV4PWpRdWVyeS5maW5kLmF0dHIoZWxlbSwidGFiaW5kZXgiKTtpZih0YWJpbmRleCl7cmV0dXJuIHBhcnNlSW50KHRhYmluZGV4LDEwKX0KaWYocmZvY3VzYWJsZS50ZXN0KGVsZW0ubm9kZU5hbWUpfHxyY2xpY2thYmxlLnRlc3QoZWxlbS5ub2RlTmFtZSkmJmVsZW0uaHJlZil7cmV0dXJuIDB9CnJldHVybi0xfX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pO2lmKCFzdXBwb3J0Lm9wdFNlbGVjdGVkKXtqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD1lbGVtLnBhcmVudE5vZGU7aWYocGFyZW50JiZwYXJlbnQucGFyZW50Tm9kZSl7cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleH0KcmV0dXJuIG51bGx9LHNldDpmdW5jdGlvbihlbGVtKXt2YXIgcGFyZW50PWVsZW0ucGFyZW50Tm9kZTtpZihwYXJlbnQpe3BhcmVudC5zZWxlY3RlZEluZGV4O2lmKHBhcmVudC5wYXJlbnROb2RlKXtwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4fX19fX0KalF1ZXJ5LmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe2pRdWVyeS5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO2Z1bmN0aW9uIHN0cmlwQW5kQ29sbGFwc2UodmFsdWUpe3ZhciB0b2tlbnM9dmFsdWUubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFtdO3JldHVybiB0b2tlbnMuam9pbigiICIpfQpmdW5jdGlvbiBnZXRDbGFzcyhlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUmJmVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIn0KZnVuY3Rpb24gY2xhc3Nlc1RvQXJyYXkodmFsdWUpe2lmKEFycmF5LmlzQXJyYXkodmFsdWUpKXtyZXR1cm4gdmFsdWV9CmlmKHR5cGVvZiB2YWx1ZT09PSJzdHJpbmciKXtyZXR1cm4gdmFsdWUubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFtdfQpyZXR1cm5bXX0KalF1ZXJ5LmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24odmFsdWUpe3ZhciBjbGFzc2VzLGVsZW0sY3VyLGN1clZhbHVlLGNsYXp6LGosZmluYWxWYWx1ZSxpPTA7aWYoaXNGdW5jdGlvbih2YWx1ZSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oail7alF1ZXJ5KHRoaXMpLmFkZENsYXNzKHZhbHVlLmNhbGwodGhpcyxqLGdldENsYXNzKHRoaXMpKSl9KX0KY2xhc3Nlcz1jbGFzc2VzVG9BcnJheSh2YWx1ZSk7aWYoY2xhc3Nlcy5sZW5ndGgpe3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2N1clZhbHVlPWdldENsYXNzKGVsZW0pO2N1cj1lbGVtLm5vZGVUeXBlPT09MSYmKCIgIitzdHJpcEFuZENvbGxhcHNlKGN1clZhbHVlKSsiICIpO2lmKGN1cil7aj0wO3doaWxlKChjbGF6ej1jbGFzc2VzW2orK10pKXtpZihjdXIuaW5kZXhPZigiICIrY2xhenorIiAiKTwwKXtjdXIrPWNsYXp6KyIgIn19CmZpbmFsVmFsdWU9c3RyaXBBbmRDb2xsYXBzZShjdXIpO2lmKGN1clZhbHVlIT09ZmluYWxWYWx1ZSl7ZWxlbS5zZXRBdHRyaWJ1dGUoImNsYXNzIixmaW5hbFZhbHVlKX19fX0KcmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5yZW1vdmVDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpfSl9CmlmKCFhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpfQpjbGFzc2VzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTtpZihjbGFzc2VzLmxlbmd0aCl7d2hpbGUoKGVsZW09dGhpc1tpKytdKSl7Y3VyVmFsdWU9Z2V0Q2xhc3MoZWxlbSk7Y3VyPWVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoY3VyVmFsdWUpKyIgIik7aWYoY3VyKXtqPTA7d2hpbGUoKGNsYXp6PWNsYXNzZXNbaisrXSkpe3doaWxlKGN1ci5pbmRleE9mKCIgIitjbGF6eisiICIpPi0xKXtjdXI9Y3VyLnJlcGxhY2UoIiAiK2NsYXp6KyIgIiwiICIpfX0KZmluYWxWYWx1ZT1zdHJpcEFuZENvbGxhcHNlKGN1cik7aWYoY3VyVmFsdWUhPT1maW5hbFZhbHVlKXtlbGVtLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGZpbmFsVmFsdWUpfX19fQpyZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24odmFsdWUsc3RhdGVWYWwpe3ZhciB0eXBlPXR5cGVvZiB2YWx1ZSxpc1ZhbGlkVmFsdWU9dHlwZT09PSJzdHJpbmcifHxBcnJheS5pc0FycmF5KHZhbHVlKTtpZih0eXBlb2Ygc3RhdGVWYWw9PT0iYm9vbGVhbiImJmlzVmFsaWRWYWx1ZSl7cmV0dXJuIHN0YXRlVmFsP3RoaXMuYWRkQ2xhc3ModmFsdWUpOnRoaXMucmVtb3ZlQ2xhc3ModmFsdWUpfQppZihpc0Z1bmN0aW9uKHZhbHVlKSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtqUXVlcnkodGhpcykudG9nZ2xlQ2xhc3ModmFsdWUuY2FsbCh0aGlzLGksZ2V0Q2xhc3ModGhpcyksc3RhdGVWYWwpLHN0YXRlVmFsKX0pfQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGNsYXNzTmFtZSxpLHNlbGYsY2xhc3NOYW1lcztpZihpc1ZhbGlkVmFsdWUpe2k9MDtzZWxmPWpRdWVyeSh0aGlzKTtjbGFzc05hbWVzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTt3aGlsZSgoY2xhc3NOYW1lPWNsYXNzTmFtZXNbaSsrXSkpe2lmKHNlbGYuaGFzQ2xhc3MoY2xhc3NOYW1lKSl7c2VsZi5yZW1vdmVDbGFzcyhjbGFzc05hbWUpfWVsc2V7c2VsZi5hZGRDbGFzcyhjbGFzc05hbWUpfX19ZWxzZSBpZih2YWx1ZT09PXVuZGVmaW5lZHx8dHlwZT09PSJib29sZWFuIil7Y2xhc3NOYW1lPWdldENsYXNzKHRoaXMpO2lmKGNsYXNzTmFtZSl7ZGF0YVByaXYuc2V0KHRoaXMsIl9fY2xhc3NOYW1lX18iLGNsYXNzTmFtZSl9CmlmKHRoaXMuc2V0QXR0cmlidXRlKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGNsYXNzTmFtZXx8dmFsdWU9PT0hMT8iIjpkYXRhUHJpdi5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIil9fX0pfSxoYXNDbGFzczpmdW5jdGlvbihzZWxlY3Rvcil7dmFyIGNsYXNzTmFtZSxlbGVtLGk9MDtjbGFzc05hbWU9IiAiK3NlbGVjdG9yKyIgIjt3aGlsZSgoZWxlbT10aGlzW2krK10pKXtpZihlbGVtLm5vZGVUeXBlPT09MSYmKCIgIitzdHJpcEFuZENvbGxhcHNlKGdldENsYXNzKGVsZW0pKSsiICIpLmluZGV4T2YoY2xhc3NOYW1lKT4tMSl7cmV0dXJuITB9fQpyZXR1cm4hMX19KTt2YXIgcnJldHVybj0vXHIvZztqUXVlcnkuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24odmFsdWUpe3ZhciBob29rcyxyZXQsdmFsdWVJc0Z1bmN0aW9uLGVsZW09dGhpc1swXTtpZighYXJndW1lbnRzLmxlbmd0aCl7aWYoZWxlbSl7aG9va3M9alF1ZXJ5LnZhbEhvb2tzW2VsZW0udHlwZV18fGpRdWVyeS52YWxIb29rc1tlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmKGhvb2tzJiYiZ2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLmdldChlbGVtLCJ2YWx1ZSIpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIHJldH0KcmV0PWVsZW0udmFsdWU7aWYodHlwZW9mIHJldD09PSJzdHJpbmciKXtyZXR1cm4gcmV0LnJlcGxhY2UocnJldHVybiwiIil9CnJldHVybiByZXQ9PW51bGw/IiI6cmV0fQpyZXR1cm59CnZhbHVlSXNGdW5jdGlvbj1pc0Z1bmN0aW9uKHZhbHVlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciB2YWw7aWYodGhpcy5ub2RlVHlwZSE9PTEpe3JldHVybn0KaWYodmFsdWVJc0Z1bmN0aW9uKXt2YWw9dmFsdWUuY2FsbCh0aGlzLGksalF1ZXJ5KHRoaXMpLnZhbCgpKX1lbHNle3ZhbD12YWx1ZX0KaWYodmFsPT1udWxsKXt2YWw9IiJ9ZWxzZSBpZih0eXBlb2YgdmFsPT09Im51bWJlciIpe3ZhbCs9IiJ9ZWxzZSBpZihBcnJheS5pc0FycmF5KHZhbCkpe3ZhbD1qUXVlcnkubWFwKHZhbCxmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlPT1udWxsPyIiOnZhbHVlKyIifSl9Cmhvb2tzPWpRdWVyeS52YWxIb29rc1t0aGlzLnR5cGVdfHxqUXVlcnkudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtpZighaG9va3N8fCEoInNldCJpbiBob29rcyl8fGhvb2tzLnNldCh0aGlzLHZhbCwidmFsdWUiKT09PXVuZGVmaW5lZCl7dGhpcy52YWx1ZT12YWx9fSl9fSk7alF1ZXJ5LmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWw9alF1ZXJ5LmZpbmQuYXR0cihlbGVtLCJ2YWx1ZSIpO3JldHVybiB2YWwhPW51bGw/dmFsOnN0cmlwQW5kQ29sbGFwc2UoalF1ZXJ5LnRleHQoZWxlbSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHZhbHVlLG9wdGlvbixpLG9wdGlvbnM9ZWxlbS5vcHRpb25zLGluZGV4PWVsZW0uc2VsZWN0ZWRJbmRleCxvbmU9ZWxlbS50eXBlPT09InNlbGVjdC1vbmUiLHZhbHVlcz1vbmU/bnVsbDpbXSxtYXg9b25lP2luZGV4KzE6b3B0aW9ucy5sZW5ndGg7aWYoaW5kZXg8MCl7aT1tYXh9ZWxzZXtpPW9uZT9pbmRleDowfQpmb3IoO2k8bWF4O2krKyl7b3B0aW9uPW9wdGlvbnNbaV07aWYoKG9wdGlvbi5zZWxlY3RlZHx8aT09PWluZGV4KSYmIW9wdGlvbi5kaXNhYmxlZCYmKCFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW5vZGVOYW1lKG9wdGlvbi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7dmFsdWU9alF1ZXJ5KG9wdGlvbikudmFsKCk7aWYob25lKXtyZXR1cm4gdmFsdWV9CnZhbHVlcy5wdXNoKHZhbHVlKX19CnJldHVybiB2YWx1ZXN9LHNldDpmdW5jdGlvbihlbGVtLHZhbHVlKXt2YXIgb3B0aW9uU2V0LG9wdGlvbixvcHRpb25zPWVsZW0ub3B0aW9ucyx2YWx1ZXM9alF1ZXJ5Lm1ha2VBcnJheSh2YWx1ZSksaT1vcHRpb25zLmxlbmd0aDt3aGlsZShpLS0pe29wdGlvbj1vcHRpb25zW2ldO2lmKG9wdGlvbi5zZWxlY3RlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldChvcHRpb24pLHZhbHVlcyk+LTEpe29wdGlvblNldD0hMH19CmlmKCFvcHRpb25TZXQpe2VsZW0uc2VsZWN0ZWRJbmRleD0tMX0KcmV0dXJuIHZhbHVlc319fX0pO2pRdWVyeS5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7alF1ZXJ5LnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oZWxlbSx2YWx1ZSl7aWYoQXJyYXkuaXNBcnJheSh2YWx1ZSkpe3JldHVybihlbGVtLmNoZWNrZWQ9alF1ZXJ5LmluQXJyYXkoalF1ZXJ5KGVsZW0pLnZhbCgpLHZhbHVlKT4tMSl9fX07aWYoIXN1cHBvcnQuY2hlY2tPbil7alF1ZXJ5LnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT1udWxsPyJvbiI6ZWxlbS52YWx1ZX19fSk7c3VwcG9ydC5mb2N1c2luPSJvbmZvY3VzaW4iaW4gd2luZG93O3ZhciByZm9jdXNNb3JwaD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2s9ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX07alF1ZXJ5LmV4dGVuZChqUXVlcnkuZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oZXZlbnQsZGF0YSxlbGVtLG9ubHlIYW5kbGVycyl7dmFyIGksY3VyLHRtcCxidWJibGVUeXBlLG9udHlwZSxoYW5kbGUsc3BlY2lhbCxsYXN0RWxlbWVudCxldmVudFBhdGg9W2VsZW18fGRvY3VtZW50XSx0eXBlPWhhc093bi5jYWxsKGV2ZW50LCJ0eXBlIik/ZXZlbnQudHlwZTpldmVudCxuYW1lc3BhY2VzPWhhc093bi5jYWxsKGV2ZW50LCJuYW1lc3BhY2UiKT9ldmVudC5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtjdXI9bGFzdEVsZW1lbnQ9dG1wPWVsZW09ZWxlbXx8ZG9jdW1lbnQ7aWYoZWxlbS5ub2RlVHlwZT09PTN8fGVsZW0ubm9kZVR5cGU9PT04KXtyZXR1cm59CmlmKHJmb2N1c01vcnBoLnRlc3QodHlwZStqUXVlcnkuZXZlbnQudHJpZ2dlcmVkKSl7cmV0dXJufQppZih0eXBlLmluZGV4T2YoIi4iKT4tMSl7bmFtZXNwYWNlcz10eXBlLnNwbGl0KCIuIik7dHlwZT1uYW1lc3BhY2VzLnNoaWZ0KCk7bmFtZXNwYWNlcy5zb3J0KCl9Cm9udHlwZT10eXBlLmluZGV4T2YoIjoiKTwwJiYib24iK3R5cGU7ZXZlbnQ9ZXZlbnRbalF1ZXJ5LmV4cGFuZG9dP2V2ZW50Om5ldyBqUXVlcnkuRXZlbnQodHlwZSx0eXBlb2YgZXZlbnQ9PT0ib2JqZWN0IiYmZXZlbnQpO2V2ZW50LmlzVHJpZ2dlcj1vbmx5SGFuZGxlcnM/MjozO2V2ZW50Lm5hbWVzcGFjZT1uYW1lc3BhY2VzLmpvaW4oIi4iKTtldmVudC5ybmFtZXNwYWNlPWV2ZW50Lm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIituYW1lc3BhY2VzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGw7ZXZlbnQucmVzdWx0PXVuZGVmaW5lZDtpZighZXZlbnQudGFyZ2V0KXtldmVudC50YXJnZXQ9ZWxlbX0KZGF0YT1kYXRhPT1udWxsP1tldmVudF06alF1ZXJ5Lm1ha2VBcnJheShkYXRhLFtldmVudF0pO3NwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbdHlwZV18fHt9O2lmKCFvbmx5SGFuZGxlcnMmJnNwZWNpYWwudHJpZ2dlciYmc3BlY2lhbC50cmlnZ2VyLmFwcGx5KGVsZW0sZGF0YSk9PT0hMSl7cmV0dXJufQppZighb25seUhhbmRsZXJzJiYhc3BlY2lhbC5ub0J1YmJsZSYmIWlzV2luZG93KGVsZW0pKXtidWJibGVUeXBlPXNwZWNpYWwuZGVsZWdhdGVUeXBlfHx0eXBlO2lmKCFyZm9jdXNNb3JwaC50ZXN0KGJ1YmJsZVR5cGUrdHlwZSkpe2N1cj1jdXIucGFyZW50Tm9kZX0KZm9yKDtjdXI7Y3VyPWN1ci5wYXJlbnROb2RlKXtldmVudFBhdGgucHVzaChjdXIpO3RtcD1jdXJ9CmlmKHRtcD09PShlbGVtLm93bmVyRG9jdW1lbnR8fGRvY3VtZW50KSl7ZXZlbnRQYXRoLnB1c2godG1wLmRlZmF1bHRWaWV3fHx0bXAucGFyZW50V2luZG93fHx3aW5kb3cpfX0KaT0wO3doaWxlKChjdXI9ZXZlbnRQYXRoW2krK10pJiYhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7bGFzdEVsZW1lbnQ9Y3VyO2V2ZW50LnR5cGU9aT4xP2J1YmJsZVR5cGU6c3BlY2lhbC5iaW5kVHlwZXx8dHlwZTtoYW5kbGU9KGRhdGFQcml2LmdldChjdXIsImV2ZW50cyIpfHxPYmplY3QuY3JlYXRlKG51bGwpKVtldmVudC50eXBlXSYmZGF0YVByaXYuZ2V0KGN1ciwiaGFuZGxlIik7aWYoaGFuZGxlKXtoYW5kbGUuYXBwbHkoY3VyLGRhdGEpfQpoYW5kbGU9b250eXBlJiZjdXJbb250eXBlXTtpZihoYW5kbGUmJmhhbmRsZS5hcHBseSYmYWNjZXB0RGF0YShjdXIpKXtldmVudC5yZXN1bHQ9aGFuZGxlLmFwcGx5KGN1cixkYXRhKTtpZihldmVudC5yZXN1bHQ9PT0hMSl7ZXZlbnQucHJldmVudERlZmF1bHQoKX19fQpldmVudC50eXBlPXR5cGU7aWYoIW9ubHlIYW5kbGVycyYmIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKXtpZigoIXNwZWNpYWwuX2RlZmF1bHR8fHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoZXZlbnRQYXRoLnBvcCgpLGRhdGEpPT09ITEpJiZhY2NlcHREYXRhKGVsZW0pKXtpZihvbnR5cGUmJmlzRnVuY3Rpb24oZWxlbVt0eXBlXSkmJiFpc1dpbmRvdyhlbGVtKSl7dG1wPWVsZW1bb250eXBlXTtpZih0bXApe2VsZW1bb250eXBlXT1udWxsfQpqUXVlcnkuZXZlbnQudHJpZ2dlcmVkPXR5cGU7aWYoZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7bGFzdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrKX0KZWxlbVt0eXBlXSgpO2lmKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2xhc3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxzdG9wUHJvcGFnYXRpb25DYWxsYmFjayl9CmpRdWVyeS5ldmVudC50cmlnZ2VyZWQ9dW5kZWZpbmVkO2lmKHRtcCl7ZWxlbVtvbnR5cGVdPXRtcH19fX0KcmV0dXJuIGV2ZW50LnJlc3VsdH0sc2ltdWxhdGU6ZnVuY3Rpb24odHlwZSxlbGVtLGV2ZW50KXt2YXIgZT1qUXVlcnkuZXh0ZW5kKG5ldyBqUXVlcnkuRXZlbnQoKSxldmVudCx7dHlwZTp0eXBlLGlzU2ltdWxhdGVkOiEwfSk7alF1ZXJ5LmV2ZW50LnRyaWdnZXIoZSxudWxsLGVsZW0pfX0pO2pRdWVyeS5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24odHlwZSxkYXRhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmV2ZW50LnRyaWdnZXIodHlwZSxkYXRhLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKHR5cGUsZGF0YSl7dmFyIGVsZW09dGhpc1swXTtpZihlbGVtKXtyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIodHlwZSxkYXRhLGVsZW0sITApfX19KTtpZighc3VwcG9ydC5mb2N1c2luKXtqUXVlcnkuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24ob3JpZyxmaXgpe3ZhciBoYW5kbGVyPWZ1bmN0aW9uKGV2ZW50KXtqUXVlcnkuZXZlbnQuc2ltdWxhdGUoZml4LGV2ZW50LnRhcmdldCxqUXVlcnkuZXZlbnQuZml4KGV2ZW50KSl9O2pRdWVyeS5ldmVudC5zcGVjaWFsW2ZpeF09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGRvYz10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMuZG9jdW1lbnR8fHRoaXMsYXR0YWNoZXM9ZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgpO2lmKCFhdHRhY2hlcyl7ZG9jLmFkZEV2ZW50TGlzdGVuZXIob3JpZyxoYW5kbGVyLCEwKX0KZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgsKGF0dGFjaGVzfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZG9jPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcy5kb2N1bWVudHx8dGhpcyxhdHRhY2hlcz1kYXRhUHJpdi5hY2Nlc3MoZG9jLGZpeCktMTtpZighYXR0YWNoZXMpe2RvYy5yZW1vdmVFdmVudExpc3RlbmVyKG9yaWcsaGFuZGxlciwhMCk7ZGF0YVByaXYucmVtb3ZlKGRvYyxmaXgpfWVsc2V7ZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgsYXR0YWNoZXMpfX19fSl9CnZhciBsb2NhdGlvbj13aW5kb3cubG9jYXRpb247dmFyIG5vbmNlPXtndWlkOkRhdGUubm93KCl9O3ZhciBycXVlcnk9KC9cPy8pO2pRdWVyeS5wYXJzZVhNTD1mdW5jdGlvbihkYXRhKXt2YXIgeG1sO2lmKCFkYXRhfHx0eXBlb2YgZGF0YSE9PSJzdHJpbmciKXtyZXR1cm4gbnVsbH0KdHJ5e3htbD0obmV3IHdpbmRvdy5ET01QYXJzZXIoKSkucGFyc2VGcm9tU3RyaW5nKGRhdGEsInRleHQveG1sIil9Y2F0Y2goZSl7eG1sPXVuZGVmaW5lZH0KaWYoIXhtbHx8eG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aCl7alF1ZXJ5LmVycm9yKCJJbnZhbGlkIFhNTDogIitkYXRhKX0KcmV0dXJuIHhtbH07dmFyIHJicmFja2V0PS9cW1xdJC8sckNSTEY9L1xyP1xuL2cscnN1Ym1pdHRlclR5cGVzPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxyc3VibWl0dGFibGU9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIGJ1aWxkUGFyYW1zKHByZWZpeCxvYmosdHJhZGl0aW9uYWwsYWRkKXt2YXIgbmFtZTtpZihBcnJheS5pc0FycmF5KG9iaikpe2pRdWVyeS5lYWNoKG9iaixmdW5jdGlvbihpLHYpe2lmKHRyYWRpdGlvbmFsfHxyYnJhY2tldC50ZXN0KHByZWZpeCkpe2FkZChwcmVmaXgsdil9ZWxzZXtidWlsZFBhcmFtcyhwcmVmaXgrIlsiKyh0eXBlb2Ygdj09PSJvYmplY3QiJiZ2IT1udWxsP2k6IiIpKyJdIix2LHRyYWRpdGlvbmFsLGFkZCl9fSl9ZWxzZSBpZighdHJhZGl0aW9uYWwmJnRvVHlwZShvYmopPT09Im9iamVjdCIpe2ZvcihuYW1lIGluIG9iail7YnVpbGRQYXJhbXMocHJlZml4KyJbIituYW1lKyJdIixvYmpbbmFtZV0sdHJhZGl0aW9uYWwsYWRkKX19ZWxzZXthZGQocHJlZml4LG9iail9fQpqUXVlcnkucGFyYW09ZnVuY3Rpb24oYSx0cmFkaXRpb25hbCl7dmFyIHByZWZpeCxzPVtdLGFkZD1mdW5jdGlvbihrZXksdmFsdWVPckZ1bmN0aW9uKXt2YXIgdmFsdWU9aXNGdW5jdGlvbih2YWx1ZU9yRnVuY3Rpb24pP3ZhbHVlT3JGdW5jdGlvbigpOnZhbHVlT3JGdW5jdGlvbjtzW3MubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoa2V5KSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlPT1udWxsPyIiOnZhbHVlKX07aWYoYT09bnVsbCl7cmV0dXJuIiJ9CmlmKEFycmF5LmlzQXJyYXkoYSl8fChhLmpxdWVyeSYmIWpRdWVyeS5pc1BsYWluT2JqZWN0KGEpKSl7alF1ZXJ5LmVhY2goYSxmdW5jdGlvbigpe2FkZCh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KX1lbHNle2ZvcihwcmVmaXggaW4gYSl7YnVpbGRQYXJhbXMocHJlZml4LGFbcHJlZml4XSx0cmFkaXRpb25hbCxhZGQpfX0KcmV0dXJuIHMuam9pbigiJiIpfTtqUXVlcnkuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4galF1ZXJ5LnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGVsZW1lbnRzPWpRdWVyeS5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGVsZW1lbnRzP2pRdWVyeS5tYWtlQXJyYXkoZWxlbWVudHMpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgdHlwZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIWpRdWVyeSh0aGlzKS5pcygiOmRpc2FibGVkIikmJnJzdWJtaXR0YWJsZS50ZXN0KHRoaXMubm9kZU5hbWUpJiYhcnN1Ym1pdHRlclR5cGVzLnRlc3QodHlwZSkmJih0aGlzLmNoZWNrZWR8fCFyY2hlY2thYmxlVHlwZS50ZXN0KHR5cGUpKX0pLm1hcChmdW5jdGlvbihfaSxlbGVtKXt2YXIgdmFsPWpRdWVyeSh0aGlzKS52YWwoKTtpZih2YWw9PW51bGwpe3JldHVybiBudWxsfQppZihBcnJheS5pc0FycmF5KHZhbCkpe3JldHVybiBqUXVlcnkubWFwKHZhbCxmdW5jdGlvbih2YWwpe3JldHVybntuYW1lOmVsZW0ubmFtZSx2YWx1ZTp2YWwucmVwbGFjZShyQ1JMRiwiXHJcbiIpfX0pfQpyZXR1cm57bmFtZTplbGVtLm5hbWUsdmFsdWU6dmFsLnJlcGxhY2UockNSTEYsIlxyXG4iKX19KS5nZXQoKX19KTt2YXIgcjIwPS8lMjAvZyxyaGFzaD0vIy4qJC8scmFudGlDYWNoZT0vKFs/Jl0pXz1bXiZdKi8scmhlYWRlcnM9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9tZyxybG9jYWxQcm90b2NvbD0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxybm9Db250ZW50PS9eKD86R0VUfEhFQUQpJC8scnByb3RvY29sPS9eXC9cLy8scHJlZmlsdGVycz17fSx0cmFuc3BvcnRzPXt9LGFsbFR5cGVzPSIqLyIuY29uY2F0KCIqIiksb3JpZ2luQW5jaG9yPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtvcmlnaW5BbmNob3IuaHJlZj1sb2NhdGlvbi5ocmVmO2Z1bmN0aW9uIGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyhzdHJ1Y3R1cmUpe3JldHVybiBmdW5jdGlvbihkYXRhVHlwZUV4cHJlc3Npb24sZnVuYyl7aWYodHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiE9PSJzdHJpbmciKXtmdW5jPWRhdGFUeXBlRXhwcmVzc2lvbjtkYXRhVHlwZUV4cHJlc3Npb249IioifQp2YXIgZGF0YVR5cGUsaT0wLGRhdGFUeXBlcz1kYXRhVHlwZUV4cHJlc3Npb24udG9Mb3dlckNhc2UoKS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107aWYoaXNGdW5jdGlvbihmdW5jKSl7d2hpbGUoKGRhdGFUeXBlPWRhdGFUeXBlc1tpKytdKSl7aWYoZGF0YVR5cGVbMF09PT0iKyIpe2RhdGFUeXBlPWRhdGFUeXBlLnNsaWNlKDEpfHwiKiI7KHN0cnVjdHVyZVtkYXRhVHlwZV09c3RydWN0dXJlW2RhdGFUeXBlXXx8W10pLnVuc2hpZnQoZnVuYyl9ZWxzZXsoc3RydWN0dXJlW2RhdGFUeXBlXT1zdHJ1Y3R1cmVbZGF0YVR5cGVdfHxbXSkucHVzaChmdW5jKX19fX19CmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHN0cnVjdHVyZSxvcHRpb25zLG9yaWdpbmFsT3B0aW9ucyxqcVhIUil7dmFyIGluc3BlY3RlZD17fSxzZWVraW5nVHJhbnNwb3J0PShzdHJ1Y3R1cmU9PT10cmFuc3BvcnRzKTtmdW5jdGlvbiBpbnNwZWN0KGRhdGFUeXBlKXt2YXIgc2VsZWN0ZWQ7aW5zcGVjdGVkW2RhdGFUeXBlXT0hMDtqUXVlcnkuZWFjaChzdHJ1Y3R1cmVbZGF0YVR5cGVdfHxbXSxmdW5jdGlvbihfLHByZWZpbHRlck9yRmFjdG9yeSl7dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQ9cHJlZmlsdGVyT3JGYWN0b3J5KG9wdGlvbnMsb3JpZ2luYWxPcHRpb25zLGpxWEhSKTtpZih0eXBlb2YgZGF0YVR5cGVPclRyYW5zcG9ydD09PSJzdHJpbmciJiYhc2Vla2luZ1RyYW5zcG9ydCYmIWluc3BlY3RlZFtkYXRhVHlwZU9yVHJhbnNwb3J0XSl7b3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdChkYXRhVHlwZU9yVHJhbnNwb3J0KTtpbnNwZWN0KGRhdGFUeXBlT3JUcmFuc3BvcnQpO3JldHVybiExfWVsc2UgaWYoc2Vla2luZ1RyYW5zcG9ydCl7cmV0dXJuIShzZWxlY3RlZD1kYXRhVHlwZU9yVHJhbnNwb3J0KX19KTtyZXR1cm4gc2VsZWN0ZWR9CnJldHVybiBpbnNwZWN0KG9wdGlvbnMuZGF0YVR5cGVzWzBdKXx8IWluc3BlY3RlZFsiKiJdJiZpbnNwZWN0KCIqIil9CmZ1bmN0aW9uIGFqYXhFeHRlbmQodGFyZ2V0LHNyYyl7dmFyIGtleSxkZWVwLGZsYXRPcHRpb25zPWpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihrZXkgaW4gc3JjKXtpZihzcmNba2V5XSE9PXVuZGVmaW5lZCl7KGZsYXRPcHRpb25zW2tleV0/dGFyZ2V0OihkZWVwfHwoZGVlcD17fSkpKVtrZXldPXNyY1trZXldfX0KaWYoZGVlcCl7alF1ZXJ5LmV4dGVuZCghMCx0YXJnZXQsZGVlcCl9CnJldHVybiB0YXJnZXR9CmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMocyxqcVhIUixyZXNwb25zZXMpe3ZhciBjdCx0eXBlLGZpbmFsRGF0YVR5cGUsZmlyc3REYXRhVHlwZSxjb250ZW50cz1zLmNvbnRlbnRzLGRhdGFUeXBlcz1zLmRhdGFUeXBlczt3aGlsZShkYXRhVHlwZXNbMF09PT0iKiIpe2RhdGFUeXBlcy5zaGlmdCgpO2lmKGN0PT09dW5kZWZpbmVkKXtjdD1zLm1pbWVUeXBlfHxqcVhIUi5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIil9fQppZihjdCl7Zm9yKHR5cGUgaW4gY29udGVudHMpe2lmKGNvbnRlbnRzW3R5cGVdJiZjb250ZW50c1t0eXBlXS50ZXN0KGN0KSl7ZGF0YVR5cGVzLnVuc2hpZnQodHlwZSk7YnJlYWt9fX0KaWYoZGF0YVR5cGVzWzBdaW4gcmVzcG9uc2VzKXtmaW5hbERhdGFUeXBlPWRhdGFUeXBlc1swXX1lbHNle2Zvcih0eXBlIGluIHJlc3BvbnNlcyl7aWYoIWRhdGFUeXBlc1swXXx8cy5jb252ZXJ0ZXJzW3R5cGUrIiAiK2RhdGFUeXBlc1swXV0pe2ZpbmFsRGF0YVR5cGU9dHlwZTticmVha30KaWYoIWZpcnN0RGF0YVR5cGUpe2ZpcnN0RGF0YVR5cGU9dHlwZX19CmZpbmFsRGF0YVR5cGU9ZmluYWxEYXRhVHlwZXx8Zmlyc3REYXRhVHlwZX0KaWYoZmluYWxEYXRhVHlwZSl7aWYoZmluYWxEYXRhVHlwZSE9PWRhdGFUeXBlc1swXSl7ZGF0YVR5cGVzLnVuc2hpZnQoZmluYWxEYXRhVHlwZSl9CnJldHVybiByZXNwb25zZXNbZmluYWxEYXRhVHlwZV19fQpmdW5jdGlvbiBhamF4Q29udmVydChzLHJlc3BvbnNlLGpxWEhSLGlzU3VjY2Vzcyl7dmFyIGNvbnYyLGN1cnJlbnQsY29udix0bXAscHJldixjb252ZXJ0ZXJzPXt9LGRhdGFUeXBlcz1zLmRhdGFUeXBlcy5zbGljZSgpO2lmKGRhdGFUeXBlc1sxXSl7Zm9yKGNvbnYgaW4gcy5jb252ZXJ0ZXJzKXtjb252ZXJ0ZXJzW2NvbnYudG9Mb3dlckNhc2UoKV09cy5jb252ZXJ0ZXJzW2NvbnZdfX0KY3VycmVudD1kYXRhVHlwZXMuc2hpZnQoKTt3aGlsZShjdXJyZW50KXtpZihzLnJlc3BvbnNlRmllbGRzW2N1cnJlbnRdKXtqcVhIUltzLnJlc3BvbnNlRmllbGRzW2N1cnJlbnRdXT1yZXNwb25zZX0KaWYoIXByZXYmJmlzU3VjY2VzcyYmcy5kYXRhRmlsdGVyKXtyZXNwb25zZT1zLmRhdGFGaWx0ZXIocmVzcG9uc2Uscy5kYXRhVHlwZSl9CnByZXY9Y3VycmVudDtjdXJyZW50PWRhdGFUeXBlcy5zaGlmdCgpO2lmKGN1cnJlbnQpe2lmKGN1cnJlbnQ9PT0iKiIpe2N1cnJlbnQ9cHJldn1lbHNlIGlmKHByZXYhPT0iKiImJnByZXYhPT1jdXJyZW50KXtjb252PWNvbnZlcnRlcnNbcHJldisiICIrY3VycmVudF18fGNvbnZlcnRlcnNbIiogIitjdXJyZW50XTtpZighY29udil7Zm9yKGNvbnYyIGluIGNvbnZlcnRlcnMpe3RtcD1jb252Mi5zcGxpdCgiICIpO2lmKHRtcFsxXT09PWN1cnJlbnQpe2NvbnY9Y29udmVydGVyc1twcmV2KyIgIit0bXBbMF1dfHxjb252ZXJ0ZXJzWyIqICIrdG1wWzBdXTtpZihjb252KXtpZihjb252PT09ITApe2NvbnY9Y29udmVydGVyc1tjb252Ml19ZWxzZSBpZihjb252ZXJ0ZXJzW2NvbnYyXSE9PSEwKXtjdXJyZW50PXRtcFswXTtkYXRhVHlwZXMudW5zaGlmdCh0bXBbMV0pfQpicmVha319fX0KaWYoY29udiE9PSEwKXtpZihjb252JiZzLnRocm93cyl7cmVzcG9uc2U9Y29udihyZXNwb25zZSl9ZWxzZXt0cnl7cmVzcG9uc2U9Y29udihyZXNwb25zZSl9Y2F0Y2goZSl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6Y29udj9lOiJObyBjb252ZXJzaW9uIGZyb20gIitwcmV2KyIgdG8gIitjdXJyZW50fX19fX19fQpyZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6cmVzcG9uc2V9fQpqUXVlcnkuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpsb2NhdGlvbi5ocmVmLHR5cGU6IkdFVCIsaXNMb2NhbDpybG9jYWxQcm90b2NvbC50ZXN0KGxvY2F0aW9uLnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOmFsbFR5cGVzLHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi9cYnhtbFxiLyxodG1sOi9cYmh0bWwvLGpzb246L1xianNvblxiL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjpqUXVlcnkucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbih0YXJnZXQsc2V0dGluZ3Mpe3JldHVybiBzZXR0aW5ncz9hamF4RXh0ZW5kKGFqYXhFeHRlbmQodGFyZ2V0LGpRdWVyeS5hamF4U2V0dGluZ3MpLHNldHRpbmdzKTphamF4RXh0ZW5kKGpRdWVyeS5hamF4U2V0dGluZ3MsdGFyZ2V0KX0sYWpheFByZWZpbHRlcjphZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMocHJlZmlsdGVycyksYWpheFRyYW5zcG9ydDphZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHModHJhbnNwb3J0cyksYWpheDpmdW5jdGlvbih1cmwsb3B0aW9ucyl7aWYodHlwZW9mIHVybD09PSJvYmplY3QiKXtvcHRpb25zPXVybDt1cmw9dW5kZWZpbmVkfQpvcHRpb25zPW9wdGlvbnN8fHt9O3ZhciB0cmFuc3BvcnQsY2FjaGVVUkwscmVzcG9uc2VIZWFkZXJzU3RyaW5nLHJlc3BvbnNlSGVhZGVycyx0aW1lb3V0VGltZXIsdXJsQW5jaG9yLGNvbXBsZXRlZCxmaXJlR2xvYmFscyxpLHVuY2FjaGVkLHM9alF1ZXJ5LmFqYXhTZXR1cCh7fSxvcHRpb25zKSxjYWxsYmFja0NvbnRleHQ9cy5jb250ZXh0fHxzLGdsb2JhbEV2ZW50Q29udGV4dD1zLmNvbnRleHQmJihjYWxsYmFja0NvbnRleHQubm9kZVR5cGV8fGNhbGxiYWNrQ29udGV4dC5qcXVlcnkpP2pRdWVyeShjYWxsYmFja0NvbnRleHQpOmpRdWVyeS5ldmVudCxkZWZlcnJlZD1qUXVlcnkuRGVmZXJyZWQoKSxjb21wbGV0ZURlZmVycmVkPWpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iiksc3RhdHVzQ29kZT1zLnN0YXR1c0NvZGV8fHt9LHJlcXVlc3RIZWFkZXJzPXt9LHJlcXVlc3RIZWFkZXJzTmFtZXM9e30sc3RyQWJvcnQ9ImNhbmNlbGVkIixqcVhIUj17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGtleSl7dmFyIG1hdGNoO2lmKGNvbXBsZXRlZCl7aWYoIXJlc3BvbnNlSGVhZGVycyl7cmVzcG9uc2VIZWFkZXJzPXt9O3doaWxlKChtYXRjaD1yaGVhZGVycy5leGVjKHJlc3BvbnNlSGVhZGVyc1N0cmluZykpKXtyZXNwb25zZUhlYWRlcnNbbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSsiICJdPShyZXNwb25zZUhlYWRlcnNbbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSsiICJdfHxbXSkuY29uY2F0KG1hdGNoWzJdKX19Cm1hdGNoPXJlc3BvbnNlSGVhZGVyc1trZXkudG9Mb3dlckNhc2UoKSsiICJdfQpyZXR1cm4gbWF0Y2g9PW51bGw/bnVsbDptYXRjaC5qb2luKCIsICIpfSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gY29tcGxldGVkP3Jlc3BvbnNlSGVhZGVyc1N0cmluZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKG5hbWUsdmFsdWUpe2lmKGNvbXBsZXRlZD09bnVsbCl7bmFtZT1yZXF1ZXN0SGVhZGVyc05hbWVzW25hbWUudG9Mb3dlckNhc2UoKV09cmVxdWVzdEhlYWRlcnNOYW1lc1tuYW1lLnRvTG93ZXJDYXNlKCldfHxuYW1lO3JlcXVlc3RIZWFkZXJzW25hbWVdPXZhbHVlfQpyZXR1cm4gdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbih0eXBlKXtpZihjb21wbGV0ZWQ9PW51bGwpe3MubWltZVR5cGU9dHlwZX0KcmV0dXJuIHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24obWFwKXt2YXIgY29kZTtpZihtYXApe2lmKGNvbXBsZXRlZCl7anFYSFIuYWx3YXlzKG1hcFtqcVhIUi5zdGF0dXNdKX1lbHNle2Zvcihjb2RlIGluIG1hcCl7c3RhdHVzQ29kZVtjb2RlXT1bc3RhdHVzQ29kZVtjb2RlXSxtYXBbY29kZV1dfX19CnJldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihzdGF0dXNUZXh0KXt2YXIgZmluYWxUZXh0PXN0YXR1c1RleHR8fHN0ckFib3J0O2lmKHRyYW5zcG9ydCl7dHJhbnNwb3J0LmFib3J0KGZpbmFsVGV4dCl9CmRvbmUoMCxmaW5hbFRleHQpO3JldHVybiB0aGlzfX07ZGVmZXJyZWQucHJvbWlzZShqcVhIUik7cy51cmw9KCh1cmx8fHMudXJsfHxsb2NhdGlvbi5ocmVmKSsiIikucmVwbGFjZShycHJvdG9jb2wsbG9jYXRpb24ucHJvdG9jb2wrIi8vIik7cy50eXBlPW9wdGlvbnMubWV0aG9kfHxvcHRpb25zLnR5cGV8fHMubWV0aG9kfHxzLnR5cGU7cy5kYXRhVHlwZXM9KHMuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChybm90aHRtbHdoaXRlKXx8WyIiXTtpZihzLmNyb3NzRG9tYWluPT1udWxsKXt1cmxBbmNob3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO3RyeXt1cmxBbmNob3IuaHJlZj1zLnVybDt1cmxBbmNob3IuaHJlZj11cmxBbmNob3IuaHJlZjtzLmNyb3NzRG9tYWluPW9yaWdpbkFuY2hvci5wcm90b2NvbCsiLy8iK29yaWdpbkFuY2hvci5ob3N0IT09dXJsQW5jaG9yLnByb3RvY29sKyIvLyIrdXJsQW5jaG9yLmhvc3R9Y2F0Y2goZSl7cy5jcm9zc0RvbWFpbj0hMH19CmlmKHMuZGF0YSYmcy5wcm9jZXNzRGF0YSYmdHlwZW9mIHMuZGF0YSE9PSJzdHJpbmciKXtzLmRhdGE9alF1ZXJ5LnBhcmFtKHMuZGF0YSxzLnRyYWRpdGlvbmFsKX0KaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMocHJlZmlsdGVycyxzLG9wdGlvbnMsanFYSFIpO2lmKGNvbXBsZXRlZCl7cmV0dXJuIGpxWEhSfQpmaXJlR2xvYmFscz1qUXVlcnkuZXZlbnQmJnMuZ2xvYmFsO2lmKGZpcmVHbG9iYWxzJiZqUXVlcnkuYWN0aXZlKys9PT0wKXtqUXVlcnkuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iil9CnMudHlwZT1zLnR5cGUudG9VcHBlckNhc2UoKTtzLmhhc0NvbnRlbnQ9IXJub0NvbnRlbnQudGVzdChzLnR5cGUpO2NhY2hlVVJMPXMudXJsLnJlcGxhY2Uocmhhc2gsIiIpO2lmKCFzLmhhc0NvbnRlbnQpe3VuY2FjaGVkPXMudXJsLnNsaWNlKGNhY2hlVVJMLmxlbmd0aCk7aWYocy5kYXRhJiYocy5wcm9jZXNzRGF0YXx8dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciKSl7Y2FjaGVVUkwrPShycXVlcnkudGVzdChjYWNoZVVSTCk/IiYiOiI/Iikrcy5kYXRhO2RlbGV0ZSBzLmRhdGF9CmlmKHMuY2FjaGU9PT0hMSl7Y2FjaGVVUkw9Y2FjaGVVUkwucmVwbGFjZShyYW50aUNhY2hlLCIkMSIpO3VuY2FjaGVkPShycXVlcnkudGVzdChjYWNoZVVSTCk/IiYiOiI/IikrIl89Iisobm9uY2UuZ3VpZCsrKSt1bmNhY2hlZH0Kcy51cmw9Y2FjaGVVUkwrdW5jYWNoZWR9ZWxzZSBpZihzLmRhdGEmJnMucHJvY2Vzc0RhdGEmJihzLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik9PT0wKXtzLmRhdGE9cy5kYXRhLnJlcGxhY2UocjIwLCIrIil9CmlmKHMuaWZNb2RpZmllZCl7aWYoalF1ZXJ5Lmxhc3RNb2RpZmllZFtjYWNoZVVSTF0pe2pxWEhSLnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixqUXVlcnkubGFzdE1vZGlmaWVkW2NhY2hlVVJMXSl9CmlmKGpRdWVyeS5ldGFnW2NhY2hlVVJMXSl7anFYSFIuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsalF1ZXJ5LmV0YWdbY2FjaGVVUkxdKX19CmlmKHMuZGF0YSYmcy5oYXNDb250ZW50JiZzLmNvbnRlbnRUeXBlIT09ITF8fG9wdGlvbnMuY29udGVudFR5cGUpe2pxWEhSLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIscy5jb250ZW50VHlwZSl9CmpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIscy5kYXRhVHlwZXNbMF0mJnMuYWNjZXB0c1tzLmRhdGFUeXBlc1swXV0/cy5hY2NlcHRzW3MuZGF0YVR5cGVzWzBdXSsocy5kYXRhVHlwZXNbMF0hPT0iKiI/IiwgIithbGxUeXBlcysiOyBxPTAuMDEiOiIiKTpzLmFjY2VwdHNbIioiXSk7Zm9yKGkgaW4gcy5oZWFkZXJzKXtqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKGkscy5oZWFkZXJzW2ldKX0KaWYocy5iZWZvcmVTZW5kJiYocy5iZWZvcmVTZW5kLmNhbGwoY2FsbGJhY2tDb250ZXh0LGpxWEhSLHMpPT09ITF8fGNvbXBsZXRlZCkpe3JldHVybiBqcVhIUi5hYm9ydCgpfQpzdHJBYm9ydD0iYWJvcnQiO2NvbXBsZXRlRGVmZXJyZWQuYWRkKHMuY29tcGxldGUpO2pxWEhSLmRvbmUocy5zdWNjZXNzKTtqcVhIUi5mYWlsKHMuZXJyb3IpO3RyYW5zcG9ydD1pbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyh0cmFuc3BvcnRzLHMsb3B0aW9ucyxqcVhIUik7aWYoIXRyYW5zcG9ydCl7ZG9uZSgtMSwiTm8gVHJhbnNwb3J0Iil9ZWxzZXtqcVhIUi5yZWFkeVN0YXRlPTE7aWYoZmlyZUdsb2JhbHMpe2dsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCJhamF4U2VuZCIsW2pxWEhSLHNdKX0KaWYoY29tcGxldGVkKXtyZXR1cm4ganFYSFJ9CmlmKHMuYXN5bmMmJnMudGltZW91dD4wKXt0aW1lb3V0VGltZXI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtqcVhIUi5hYm9ydCgidGltZW91dCIpfSxzLnRpbWVvdXQpfQp0cnl7Y29tcGxldGVkPSExO3RyYW5zcG9ydC5zZW5kKHJlcXVlc3RIZWFkZXJzLGRvbmUpfWNhdGNoKGUpe2lmKGNvbXBsZXRlZCl7dGhyb3cgZX0KZG9uZSgtMSxlKX19CmZ1bmN0aW9uIGRvbmUoc3RhdHVzLG5hdGl2ZVN0YXR1c1RleHQscmVzcG9uc2VzLGhlYWRlcnMpe3ZhciBpc1N1Y2Nlc3Msc3VjY2VzcyxlcnJvcixyZXNwb25zZSxtb2RpZmllZCxzdGF0dXNUZXh0PW5hdGl2ZVN0YXR1c1RleHQ7aWYoY29tcGxldGVkKXtyZXR1cm59CmNvbXBsZXRlZD0hMDtpZih0aW1lb3V0VGltZXIpe3dpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dFRpbWVyKX0KdHJhbnNwb3J0PXVuZGVmaW5lZDtyZXNwb25zZUhlYWRlcnNTdHJpbmc9aGVhZGVyc3x8IiI7anFYSFIucmVhZHlTdGF0ZT1zdGF0dXM+MD80OjA7aXNTdWNjZXNzPXN0YXR1cz49MjAwJiZzdGF0dXM8MzAwfHxzdGF0dXM9PT0zMDQ7aWYocmVzcG9uc2VzKXtyZXNwb25zZT1hamF4SGFuZGxlUmVzcG9uc2VzKHMsanFYSFIscmVzcG9uc2VzKX0KaWYoIWlzU3VjY2VzcyYmalF1ZXJ5LmluQXJyYXkoInNjcmlwdCIscy5kYXRhVHlwZXMpPi0xKXtzLmNvbnZlcnRlcnNbInRleHQgc2NyaXB0Il09ZnVuY3Rpb24oKXt9fQpyZXNwb25zZT1hamF4Q29udmVydChzLHJlc3BvbnNlLGpxWEhSLGlzU3VjY2Vzcyk7aWYoaXNTdWNjZXNzKXtpZihzLmlmTW9kaWZpZWQpe21vZGlmaWVkPWpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIik7aWYobW9kaWZpZWQpe2pRdWVyeS5sYXN0TW9kaWZpZWRbY2FjaGVVUkxdPW1vZGlmaWVkfQptb2RpZmllZD1qcVhIUi5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpO2lmKG1vZGlmaWVkKXtqUXVlcnkuZXRhZ1tjYWNoZVVSTF09bW9kaWZpZWR9fQppZihzdGF0dXM9PT0yMDR8fHMudHlwZT09PSJIRUFEIil7c3RhdHVzVGV4dD0ibm9jb250ZW50In1lbHNlIGlmKHN0YXR1cz09PTMwNCl7c3RhdHVzVGV4dD0ibm90bW9kaWZpZWQifWVsc2V7c3RhdHVzVGV4dD1yZXNwb25zZS5zdGF0ZTtzdWNjZXNzPXJlc3BvbnNlLmRhdGE7ZXJyb3I9cmVzcG9uc2UuZXJyb3I7aXNTdWNjZXNzPSFlcnJvcn19ZWxzZXtlcnJvcj1zdGF0dXNUZXh0O2lmKHN0YXR1c3x8IXN0YXR1c1RleHQpe3N0YXR1c1RleHQ9ImVycm9yIjtpZihzdGF0dXM8MCl7c3RhdHVzPTB9fX0KanFYSFIuc3RhdHVzPXN0YXR1cztqcVhIUi5zdGF0dXNUZXh0PShuYXRpdmVTdGF0dXNUZXh0fHxzdGF0dXNUZXh0KSsiIjtpZihpc1N1Y2Nlc3Mpe2RlZmVycmVkLnJlc29sdmVXaXRoKGNhbGxiYWNrQ29udGV4dCxbc3VjY2VzcyxzdGF0dXNUZXh0LGpxWEhSXSl9ZWxzZXtkZWZlcnJlZC5yZWplY3RXaXRoKGNhbGxiYWNrQ29udGV4dCxbanFYSFIsc3RhdHVzVGV4dCxlcnJvcl0pfQpqcVhIUi5zdGF0dXNDb2RlKHN0YXR1c0NvZGUpO3N0YXR1c0NvZGU9dW5kZWZpbmVkO2lmKGZpcmVHbG9iYWxzKXtnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlcihpc1N1Y2Nlc3M/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbanFYSFIscyxpc1N1Y2Nlc3M/c3VjY2VzczplcnJvcl0pfQpjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKGNhbGxiYWNrQ29udGV4dCxbanFYSFIsc3RhdHVzVGV4dF0pO2lmKGZpcmVHbG9iYWxzKXtnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlcigiYWpheENvbXBsZXRlIixbanFYSFIsc10pO2lmKCEoLS1qUXVlcnkuYWN0aXZlKSl7alF1ZXJ5LmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIil9fX0KcmV0dXJuIGpxWEhSfSxnZXRKU09OOmZ1bmN0aW9uKHVybCxkYXRhLGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmdldCh1cmwsZGF0YSxjYWxsYmFjaywianNvbiIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24odXJsLGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmdldCh1cmwsdW5kZWZpbmVkLGNhbGxiYWNrLCJzY3JpcHQiKX19KTtqUXVlcnkuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihfaSxtZXRob2Qpe2pRdWVyeVttZXRob2RdPWZ1bmN0aW9uKHVybCxkYXRhLGNhbGxiYWNrLHR5cGUpe2lmKGlzRnVuY3Rpb24oZGF0YSkpe3R5cGU9dHlwZXx8Y2FsbGJhY2s7Y2FsbGJhY2s9ZGF0YTtkYXRhPXVuZGVmaW5lZH0KcmV0dXJuIGpRdWVyeS5hamF4KGpRdWVyeS5leHRlbmQoe3VybDp1cmwsdHlwZTptZXRob2QsZGF0YVR5cGU6dHlwZSxkYXRhOmRhdGEsc3VjY2VzczpjYWxsYmFja30salF1ZXJ5LmlzUGxhaW5PYmplY3QodXJsKSYmdXJsKSl9fSk7alF1ZXJ5LmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24ocyl7dmFyIGk7Zm9yKGkgaW4gcy5oZWFkZXJzKXtpZihpLnRvTG93ZXJDYXNlKCk9PT0iY29udGVudC10eXBlIil7cy5jb250ZW50VHlwZT1zLmhlYWRlcnNbaV18fCIifX19KTtqUXVlcnkuX2V2YWxVcmw9ZnVuY3Rpb24odXJsLG9wdGlvbnMsZG9jKXtyZXR1cm4galF1ZXJ5LmFqYXgoe3VybDp1cmwsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0IixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbigpe319LGRhdGFGaWx0ZXI6ZnVuY3Rpb24ocmVzcG9uc2Upe2pRdWVyeS5nbG9iYWxFdmFsKHJlc3BvbnNlLG9wdGlvbnMsZG9jKX19KX07alF1ZXJ5LmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihodG1sKXt2YXIgd3JhcDtpZih0aGlzWzBdKXtpZihpc0Z1bmN0aW9uKGh0bWwpKXtodG1sPWh0bWwuY2FsbCh0aGlzWzBdKX0Kd3JhcD1qUXVlcnkoaHRtbCx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTtpZih0aGlzWzBdLnBhcmVudE5vZGUpe3dyYXAuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pfQp3cmFwLm1hcChmdW5jdGlvbigpe3ZhciBlbGVtPXRoaXM7d2hpbGUoZWxlbS5maXJzdEVsZW1lbnRDaGlsZCl7ZWxlbT1lbGVtLmZpcnN0RWxlbWVudENoaWxkfQpyZXR1cm4gZWxlbX0pLmFwcGVuZCh0aGlzKX0KcmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihodG1sKXtpZihpc0Z1bmN0aW9uKGh0bWwpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe2pRdWVyeSh0aGlzKS53cmFwSW5uZXIoaHRtbC5jYWxsKHRoaXMsaSkpfSl9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgc2VsZj1qUXVlcnkodGhpcyksY29udGVudHM9c2VsZi5jb250ZW50cygpO2lmKGNvbnRlbnRzLmxlbmd0aCl7Y29udGVudHMud3JhcEFsbChodG1sKX1lbHNle3NlbGYuYXBwZW5kKGh0bWwpfX0pfSx3cmFwOmZ1bmN0aW9uKGh0bWwpe3ZhciBodG1sSXNGdW5jdGlvbj1pc0Z1bmN0aW9uKGh0bWwpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7alF1ZXJ5KHRoaXMpLndyYXBBbGwoaHRtbElzRnVuY3Rpb24/aHRtbC5jYWxsKHRoaXMsaSk6aHRtbCl9KX0sdW53cmFwOmZ1bmN0aW9uKHNlbGVjdG9yKXt0aGlzLnBhcmVudChzZWxlY3Rvcikubm90KCJib2R5IikuZWFjaChmdW5jdGlvbigpe2pRdWVyeSh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSk7cmV0dXJuIHRoaXN9fSk7alF1ZXJ5LmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIWpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZShlbGVtKX07alF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlPWZ1bmN0aW9uKGVsZW0pe3JldHVybiEhKGVsZW0ub2Zmc2V0V2lkdGh8fGVsZW0ub2Zmc2V0SGVpZ2h0fHxlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKX07alF1ZXJ5LmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKX1jYXRjaChlKXt9fTt2YXIgeGhyU3VjY2Vzc1N0YXR1cz17MDoyMDAsMTIyMzoyMDR9LHhoclN1cHBvcnRlZD1qUXVlcnkuYWpheFNldHRpbmdzLnhocigpO3N1cHBvcnQuY29ycz0hIXhoclN1cHBvcnRlZCYmKCJ3aXRoQ3JlZGVudGlhbHMiaW4geGhyU3VwcG9ydGVkKTtzdXBwb3J0LmFqYXg9eGhyU3VwcG9ydGVkPSEheGhyU3VwcG9ydGVkO2pRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBjYWxsYmFjayxlcnJvckNhbGxiYWNrO2lmKHN1cHBvcnQuY29yc3x8eGhyU3VwcG9ydGVkJiYhb3B0aW9ucy5jcm9zc0RvbWFpbil7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaGVhZGVycyxjb21wbGV0ZSl7dmFyIGkseGhyPW9wdGlvbnMueGhyKCk7eGhyLm9wZW4ob3B0aW9ucy50eXBlLG9wdGlvbnMudXJsLG9wdGlvbnMuYXN5bmMsb3B0aW9ucy51c2VybmFtZSxvcHRpb25zLnBhc3N3b3JkKTtpZihvcHRpb25zLnhockZpZWxkcyl7Zm9yKGkgaW4gb3B0aW9ucy54aHJGaWVsZHMpe3hocltpXT1vcHRpb25zLnhockZpZWxkc1tpXX19CmlmKG9wdGlvbnMubWltZVR5cGUmJnhoci5vdmVycmlkZU1pbWVUeXBlKXt4aHIub3ZlcnJpZGVNaW1lVHlwZShvcHRpb25zLm1pbWVUeXBlKX0KaWYoIW9wdGlvbnMuY3Jvc3NEb21haW4mJiFoZWFkZXJzWyJYLVJlcXVlc3RlZC1XaXRoIl0pe2hlYWRlcnNbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QifQpmb3IoaSBpbiBoZWFkZXJzKXt4aHIuc2V0UmVxdWVzdEhlYWRlcihpLGhlYWRlcnNbaV0pfQpjYWxsYmFjaz1mdW5jdGlvbih0eXBlKXtyZXR1cm4gZnVuY3Rpb24oKXtpZihjYWxsYmFjayl7Y2FsbGJhY2s9ZXJyb3JDYWxsYmFjaz14aHIub25sb2FkPXhoci5vbmVycm9yPXhoci5vbmFib3J0PXhoci5vbnRpbWVvdXQ9eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO2lmKHR5cGU9PT0iYWJvcnQiKXt4aHIuYWJvcnQoKX1lbHNlIGlmKHR5cGU9PT0iZXJyb3IiKXtpZih0eXBlb2YgeGhyLnN0YXR1cyE9PSJudW1iZXIiKXtjb21wbGV0ZSgwLCJlcnJvciIpfWVsc2V7Y29tcGxldGUoeGhyLnN0YXR1cyx4aHIuc3RhdHVzVGV4dCl9fWVsc2V7Y29tcGxldGUoeGhyU3VjY2Vzc1N0YXR1c1t4aHIuc3RhdHVzXXx8eGhyLnN0YXR1cyx4aHIuc3RhdHVzVGV4dCwoeGhyLnJlc3BvbnNlVHlwZXx8InRleHQiKSE9PSJ0ZXh0Inx8dHlwZW9mIHhoci5yZXNwb25zZVRleHQhPT0ic3RyaW5nIj97YmluYXJ5Onhoci5yZXNwb25zZX06e3RleHQ6eGhyLnJlc3BvbnNlVGV4dH0seGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX19fX07eGhyLm9ubG9hZD1jYWxsYmFjaygpO2Vycm9yQ2FsbGJhY2s9eGhyLm9uZXJyb3I9eGhyLm9udGltZW91dD1jYWxsYmFjaygiZXJyb3IiKTtpZih4aHIub25hYm9ydCE9PXVuZGVmaW5lZCl7eGhyLm9uYWJvcnQ9ZXJyb3JDYWxsYmFja31lbHNle3hoci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZih4aHIucmVhZHlTdGF0ZT09PTQpe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2Vycm9yQ2FsbGJhY2soKX19KX19fQpjYWxsYmFjaz1jYWxsYmFjaygiYWJvcnQiKTt0cnl7eGhyLnNlbmQob3B0aW9ucy5oYXNDb250ZW50JiZvcHRpb25zLmRhdGF8fG51bGwpfWNhdGNoKGUpe2lmKGNhbGxiYWNrKXt0aHJvdyBlfX19LGFib3J0OmZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2NhbGxiYWNrKCl9fX19fSk7alF1ZXJ5LmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24ocyl7aWYocy5jcm9zc0RvbWFpbil7cy5jb250ZW50cy5zY3JpcHQ9ITF9fSk7alF1ZXJ5LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICIrImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xiKD86amF2YXxlY21hKXNjcmlwdFxiL30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbih0ZXh0KXtqUXVlcnkuZ2xvYmFsRXZhbCh0ZXh0KTtyZXR1cm4gdGV4dH19fSk7alF1ZXJ5LmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24ocyl7aWYocy5jYWNoZT09PXVuZGVmaW5lZCl7cy5jYWNoZT0hMX0KaWYocy5jcm9zc0RvbWFpbil7cy50eXBlPSJHRVQifX0pO2pRdWVyeS5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY3Jvc3NEb21haW58fHMuc2NyaXB0QXR0cnMpe3ZhciBzY3JpcHQsY2FsbGJhY2s7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oXyxjb21wbGV0ZSl7c2NyaXB0PWpRdWVyeSgiPHNjcmlwdD4iKS5hdHRyKHMuc2NyaXB0QXR0cnN8fHt9KS5wcm9wKHtjaGFyc2V0OnMuc2NyaXB0Q2hhcnNldCxzcmM6cy51cmx9KS5vbigibG9hZCBlcnJvciIsY2FsbGJhY2s9ZnVuY3Rpb24oZXZ0KXtzY3JpcHQucmVtb3ZlKCk7Y2FsbGJhY2s9bnVsbDtpZihldnQpe2NvbXBsZXRlKGV2dC50eXBlPT09ImVycm9yIj80MDQ6MjAwLGV2dC50eXBlKX19KTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdFswXSl9LGFib3J0OmZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2NhbGxiYWNrKCl9fX19fSk7dmFyIG9sZENhbGxiYWNrcz1bXSxyanNvbnA9Lyg9KVw/KD89JnwkKXxcP1w/LztqUXVlcnkuYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgY2FsbGJhY2s9b2xkQ2FsbGJhY2tzLnBvcCgpfHwoalF1ZXJ5LmV4cGFuZG8rIl8iKyhub25jZS5ndWlkKyspKTt0aGlzW2NhbGxiYWNrXT0hMDtyZXR1cm4gY2FsbGJhY2t9fSk7alF1ZXJ5LmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKHMsb3JpZ2luYWxTZXR0aW5ncyxqcVhIUil7dmFyIGNhbGxiYWNrTmFtZSxvdmVyd3JpdHRlbixyZXNwb25zZUNvbnRhaW5lcixqc29uUHJvcD1zLmpzb25wIT09ITEmJihyanNvbnAudGVzdChzLnVybCk/InVybCI6dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciJiYocy5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpPT09MCYmcmpzb25wLnRlc3Qocy5kYXRhKSYmImRhdGEiKTtpZihqc29uUHJvcHx8cy5kYXRhVHlwZXNbMF09PT0ianNvbnAiKXtjYWxsYmFja05hbWU9cy5qc29ucENhbGxiYWNrPWlzRnVuY3Rpb24ocy5qc29ucENhbGxiYWNrKT9zLmpzb25wQ2FsbGJhY2soKTpzLmpzb25wQ2FsbGJhY2s7aWYoanNvblByb3Ape3NbanNvblByb3BdPXNbanNvblByb3BdLnJlcGxhY2Uocmpzb25wLCIkMSIrY2FsbGJhY2tOYW1lKX1lbHNlIGlmKHMuanNvbnAhPT0hMSl7cy51cmwrPShycXVlcnkudGVzdChzLnVybCk/IiYiOiI/Iikrcy5qc29ucCsiPSIrY2FsbGJhY2tOYW1lfQpzLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtpZighcmVzcG9uc2VDb250YWluZXIpe2pRdWVyeS5lcnJvcihjYWxsYmFja05hbWUrIiB3YXMgbm90IGNhbGxlZCIpfQpyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbMF19O3MuZGF0YVR5cGVzWzBdPSJqc29uIjtvdmVyd3JpdHRlbj13aW5kb3dbY2FsbGJhY2tOYW1lXTt3aW5kb3dbY2FsbGJhY2tOYW1lXT1mdW5jdGlvbigpe3Jlc3BvbnNlQ29udGFpbmVyPWFyZ3VtZW50c307anFYSFIuYWx3YXlzKGZ1bmN0aW9uKCl7aWYob3ZlcndyaXR0ZW49PT11bmRlZmluZWQpe2pRdWVyeSh3aW5kb3cpLnJlbW92ZVByb3AoY2FsbGJhY2tOYW1lKX1lbHNle3dpbmRvd1tjYWxsYmFja05hbWVdPW92ZXJ3cml0dGVufQppZihzW2NhbGxiYWNrTmFtZV0pe3MuanNvbnBDYWxsYmFjaz1vcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7b2xkQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2tOYW1lKX0KaWYocmVzcG9uc2VDb250YWluZXImJmlzRnVuY3Rpb24ob3ZlcndyaXR0ZW4pKXtvdmVyd3JpdHRlbihyZXNwb25zZUNvbnRhaW5lclswXSl9CnJlc3BvbnNlQ29udGFpbmVyPW92ZXJ3cml0dGVuPXVuZGVmaW5lZH0pO3JldHVybiJzY3JpcHQifX0pO3N1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50PShmdW5jdGlvbigpe3ZhciBib2R5PWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keTtib2R5LmlubmVySFRNTD0iPGZvcm0+PC9mb3JtPjxmb3JtPjwvZm9ybT4iO3JldHVybiBib2R5LmNoaWxkTm9kZXMubGVuZ3RoPT09Mn0pKCk7alF1ZXJ5LnBhcnNlSFRNTD1mdW5jdGlvbihkYXRhLGNvbnRleHQsa2VlcFNjcmlwdHMpe2lmKHR5cGVvZiBkYXRhIT09InN0cmluZyIpe3JldHVybltdfQppZih0eXBlb2YgY29udGV4dD09PSJib29sZWFuIil7a2VlcFNjcmlwdHM9Y29udGV4dDtjb250ZXh0PSExfQp2YXIgYmFzZSxwYXJzZWQsc2NyaXB0cztpZighY29udGV4dCl7aWYoc3VwcG9ydC5jcmVhdGVIVE1MRG9jdW1lbnQpe2NvbnRleHQ9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiYXNlPWNvbnRleHQuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2Jhc2UuaHJlZj1kb2N1bWVudC5sb2NhdGlvbi5ocmVmO2NvbnRleHQuaGVhZC5hcHBlbmRDaGlsZChiYXNlKX1lbHNle2NvbnRleHQ9ZG9jdW1lbnR9fQpwYXJzZWQ9cnNpbmdsZVRhZy5leGVjKGRhdGEpO3NjcmlwdHM9IWtlZXBTY3JpcHRzJiZbXTtpZihwYXJzZWQpe3JldHVybltjb250ZXh0LmNyZWF0ZUVsZW1lbnQocGFyc2VkWzFdKV19CnBhcnNlZD1idWlsZEZyYWdtZW50KFtkYXRhXSxjb250ZXh0LHNjcmlwdHMpO2lmKHNjcmlwdHMmJnNjcmlwdHMubGVuZ3RoKXtqUXVlcnkoc2NyaXB0cykucmVtb3ZlKCl9CnJldHVybiBqUXVlcnkubWVyZ2UoW10scGFyc2VkLmNoaWxkTm9kZXMpfTtqUXVlcnkuZm4ubG9hZD1mdW5jdGlvbih1cmwscGFyYW1zLGNhbGxiYWNrKXt2YXIgc2VsZWN0b3IsdHlwZSxyZXNwb25zZSxzZWxmPXRoaXMsb2ZmPXVybC5pbmRleE9mKCIgIik7aWYob2ZmPi0xKXtzZWxlY3Rvcj1zdHJpcEFuZENvbGxhcHNlKHVybC5zbGljZShvZmYpKTt1cmw9dXJsLnNsaWNlKDAsb2ZmKX0KaWYoaXNGdW5jdGlvbihwYXJhbXMpKXtjYWxsYmFjaz1wYXJhbXM7cGFyYW1zPXVuZGVmaW5lZH1lbHNlIGlmKHBhcmFtcyYmdHlwZW9mIHBhcmFtcz09PSJvYmplY3QiKXt0eXBlPSJQT1NUIn0KaWYoc2VsZi5sZW5ndGg+MCl7alF1ZXJ5LmFqYXgoe3VybDp1cmwsdHlwZTp0eXBlfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTpwYXJhbXN9KS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlVGV4dCl7cmVzcG9uc2U9YXJndW1lbnRzO3NlbGYuaHRtbChzZWxlY3Rvcj9qUXVlcnkoIjxkaXY+IikuYXBwZW5kKGpRdWVyeS5wYXJzZUhUTUwocmVzcG9uc2VUZXh0KSkuZmluZChzZWxlY3Rvcik6cmVzcG9uc2VUZXh0KX0pLmFsd2F5cyhjYWxsYmFjayYmZnVuY3Rpb24oanFYSFIsc3RhdHVzKXtzZWxmLmVhY2goZnVuY3Rpb24oKXtjYWxsYmFjay5hcHBseSh0aGlzLHJlc3BvbnNlfHxbanFYSFIucmVzcG9uc2VUZXh0LHN0YXR1cyxqcVhIUl0pfSl9KX0KcmV0dXJuIHRoaXN9O2pRdWVyeS5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGpRdWVyeS5ncmVwKGpRdWVyeS50aW1lcnMsZnVuY3Rpb24oZm4pe3JldHVybiBlbGVtPT09Zm4uZWxlbX0pLmxlbmd0aH07alF1ZXJ5Lm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGVsZW0sb3B0aW9ucyxpKXt2YXIgY3VyUG9zaXRpb24sY3VyTGVmdCxjdXJDU1NUb3AsY3VyVG9wLGN1ck9mZnNldCxjdXJDU1NMZWZ0LGNhbGN1bGF0ZVBvc2l0aW9uLHBvc2l0aW9uPWpRdWVyeS5jc3MoZWxlbSwicG9zaXRpb24iKSxjdXJFbGVtPWpRdWVyeShlbGVtKSxwcm9wcz17fTtpZihwb3NpdGlvbj09PSJzdGF0aWMiKXtlbGVtLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSJ9CmN1ck9mZnNldD1jdXJFbGVtLm9mZnNldCgpO2N1ckNTU1RvcD1qUXVlcnkuY3NzKGVsZW0sInRvcCIpO2N1ckNTU0xlZnQ9alF1ZXJ5LmNzcyhlbGVtLCJsZWZ0Iik7Y2FsY3VsYXRlUG9zaXRpb249KHBvc2l0aW9uPT09ImFic29sdXRlInx8cG9zaXRpb249PT0iZml4ZWQiKSYmKGN1ckNTU1RvcCtjdXJDU1NMZWZ0KS5pbmRleE9mKCJhdXRvIik+LTE7aWYoY2FsY3VsYXRlUG9zaXRpb24pe2N1clBvc2l0aW9uPWN1ckVsZW0ucG9zaXRpb24oKTtjdXJUb3A9Y3VyUG9zaXRpb24udG9wO2N1ckxlZnQ9Y3VyUG9zaXRpb24ubGVmdH1lbHNle2N1clRvcD1wYXJzZUZsb2F0KGN1ckNTU1RvcCl8fDA7Y3VyTGVmdD1wYXJzZUZsb2F0KGN1ckNTU0xlZnQpfHwwfQppZihpc0Z1bmN0aW9uKG9wdGlvbnMpKXtvcHRpb25zPW9wdGlvbnMuY2FsbChlbGVtLGksalF1ZXJ5LmV4dGVuZCh7fSxjdXJPZmZzZXQpKX0KaWYob3B0aW9ucy50b3AhPW51bGwpe3Byb3BzLnRvcD0ob3B0aW9ucy50b3AtY3VyT2Zmc2V0LnRvcCkrY3VyVG9wfQppZihvcHRpb25zLmxlZnQhPW51bGwpe3Byb3BzLmxlZnQ9KG9wdGlvbnMubGVmdC1jdXJPZmZzZXQubGVmdCkrY3VyTGVmdH0KaWYoInVzaW5nImluIG9wdGlvbnMpe29wdGlvbnMudXNpbmcuY2FsbChlbGVtLHByb3BzKX1lbHNle2lmKHR5cGVvZiBwcm9wcy50b3A9PT0ibnVtYmVyIil7cHJvcHMudG9wKz0icHgifQppZih0eXBlb2YgcHJvcHMubGVmdD09PSJudW1iZXIiKXtwcm9wcy5sZWZ0Kz0icHgifQpjdXJFbGVtLmNzcyhwcm9wcyl9fX07alF1ZXJ5LmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKG9wdGlvbnMpe2lmKGFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiBvcHRpb25zPT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGkpe2pRdWVyeS5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsb3B0aW9ucyxpKX0pfQp2YXIgcmVjdCx3aW4sZWxlbT10aGlzWzBdO2lmKCFlbGVtKXtyZXR1cm59CmlmKCFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKXtyZXR1cm57dG9wOjAsbGVmdDowfX0KcmVjdD1lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3dpbj1lbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJue3RvcDpyZWN0LnRvcCt3aW4ucGFnZVlPZmZzZXQsbGVmdDpyZWN0LmxlZnQrd2luLnBhZ2VYT2Zmc2V0fX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSl7cmV0dXJufQp2YXIgb2Zmc2V0UGFyZW50LG9mZnNldCxkb2MsZWxlbT10aGlzWzBdLHBhcmVudE9mZnNldD17dG9wOjAsbGVmdDowfTtpZihqUXVlcnkuY3NzKGVsZW0sInBvc2l0aW9uIik9PT0iZml4ZWQiKXtvZmZzZXQ9ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1lbHNle29mZnNldD10aGlzLm9mZnNldCgpO2RvYz1lbGVtLm93bmVyRG9jdW1lbnQ7b2Zmc2V0UGFyZW50PWVsZW0ub2Zmc2V0UGFyZW50fHxkb2MuZG9jdW1lbnRFbGVtZW50O3doaWxlKG9mZnNldFBhcmVudCYmKG9mZnNldFBhcmVudD09PWRvYy5ib2R5fHxvZmZzZXRQYXJlbnQ9PT1kb2MuZG9jdW1lbnRFbGVtZW50KSYmalF1ZXJ5LmNzcyhvZmZzZXRQYXJlbnQsInBvc2l0aW9uIik9PT0ic3RhdGljIil7b2Zmc2V0UGFyZW50PW9mZnNldFBhcmVudC5wYXJlbnROb2RlfQppZihvZmZzZXRQYXJlbnQmJm9mZnNldFBhcmVudCE9PWVsZW0mJm9mZnNldFBhcmVudC5ub2RlVHlwZT09PTEpe3BhcmVudE9mZnNldD1qUXVlcnkob2Zmc2V0UGFyZW50KS5vZmZzZXQoKTtwYXJlbnRPZmZzZXQudG9wKz1qUXVlcnkuY3NzKG9mZnNldFBhcmVudCwiYm9yZGVyVG9wV2lkdGgiLCEwKTtwYXJlbnRPZmZzZXQubGVmdCs9alF1ZXJ5LmNzcyhvZmZzZXRQYXJlbnQsImJvcmRlckxlZnRXaWR0aCIsITApfX0KcmV0dXJue3RvcDpvZmZzZXQudG9wLXBhcmVudE9mZnNldC50b3AtalF1ZXJ5LmNzcyhlbGVtLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0Om9mZnNldC5sZWZ0LXBhcmVudE9mZnNldC5sZWZ0LWpRdWVyeS5jc3MoZWxlbSwibWFyZ2luTGVmdCIsITApfX0sb2Zmc2V0UGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIG9mZnNldFBhcmVudD10aGlzLm9mZnNldFBhcmVudDt3aGlsZShvZmZzZXRQYXJlbnQmJmpRdWVyeS5jc3Mob2Zmc2V0UGFyZW50LCJwb3NpdGlvbiIpPT09InN0YXRpYyIpe29mZnNldFBhcmVudD1vZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50fQpyZXR1cm4gb2Zmc2V0UGFyZW50fHxkb2N1bWVudEVsZW1lbnR9KX19KTtqUXVlcnkuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihtZXRob2QscHJvcCl7dmFyIHRvcD0icGFnZVlPZmZzZXQiPT09cHJvcDtqUXVlcnkuZm5bbWV0aG9kXT1mdW5jdGlvbih2YWwpe3JldHVybiBhY2Nlc3ModGhpcyxmdW5jdGlvbihlbGVtLG1ldGhvZCx2YWwpe3ZhciB3aW47aWYoaXNXaW5kb3coZWxlbSkpe3dpbj1lbGVtfWVsc2UgaWYoZWxlbS5ub2RlVHlwZT09PTkpe3dpbj1lbGVtLmRlZmF1bHRWaWV3fQppZih2YWw9PT11bmRlZmluZWQpe3JldHVybiB3aW4/d2luW3Byb3BdOmVsZW1bbWV0aG9kXX0KaWYod2luKXt3aW4uc2Nyb2xsVG8oIXRvcD92YWw6d2luLnBhZ2VYT2Zmc2V0LHRvcD92YWw6d2luLnBhZ2VZT2Zmc2V0KX1lbHNle2VsZW1bbWV0aG9kXT12YWx9fSxtZXRob2QsdmFsLGFyZ3VtZW50cy5sZW5ndGgpfX0pO2pRdWVyeS5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKF9pLHByb3Ape2pRdWVyeS5jc3NIb29rc1twcm9wXT1hZGRHZXRIb29rSWYoc3VwcG9ydC5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGVsZW0sY29tcHV0ZWQpe2lmKGNvbXB1dGVkKXtjb21wdXRlZD1jdXJDU1MoZWxlbSxwcm9wKTtyZXR1cm4gcm51bW5vbnB4LnRlc3QoY29tcHV0ZWQpP2pRdWVyeShlbGVtKS5wb3NpdGlvbigpW3Byb3BdKyJweCI6Y29tcHV0ZWR9fSl9KTtqUXVlcnkuZWFjaCh7SGVpZ2h0OiJoZWlnaHQiLFdpZHRoOiJ3aWR0aCJ9LGZ1bmN0aW9uKG5hbWUsdHlwZSl7alF1ZXJ5LmVhY2goe3BhZGRpbmc6ImlubmVyIituYW1lLGNvbnRlbnQ6dHlwZSwiIjoib3V0ZXIiK25hbWV9LGZ1bmN0aW9uKGRlZmF1bHRFeHRyYSxmdW5jTmFtZSl7alF1ZXJ5LmZuW2Z1bmNOYW1lXT1mdW5jdGlvbihtYXJnaW4sdmFsdWUpe3ZhciBjaGFpbmFibGU9YXJndW1lbnRzLmxlbmd0aCYmKGRlZmF1bHRFeHRyYXx8dHlwZW9mIG1hcmdpbiE9PSJib29sZWFuIiksZXh0cmE9ZGVmYXVsdEV4dHJhfHwobWFyZ2luPT09ITB8fHZhbHVlPT09ITA/Im1hcmdpbiI6ImJvcmRlciIpO3JldHVybiBhY2Nlc3ModGhpcyxmdW5jdGlvbihlbGVtLHR5cGUsdmFsdWUpe3ZhciBkb2M7aWYoaXNXaW5kb3coZWxlbSkpe3JldHVybiBmdW5jTmFtZS5pbmRleE9mKCJvdXRlciIpPT09MD9lbGVtWyJpbm5lciIrbmFtZV06ZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrbmFtZV19CmlmKGVsZW0ubm9kZVR5cGU9PT05KXtkb2M9ZWxlbS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIE1hdGgubWF4KGVsZW0uYm9keVsic2Nyb2xsIituYW1lXSxkb2NbInNjcm9sbCIrbmFtZV0sZWxlbS5ib2R5WyJvZmZzZXQiK25hbWVdLGRvY1sib2Zmc2V0IituYW1lXSxkb2NbImNsaWVudCIrbmFtZV0pfQpyZXR1cm4gdmFsdWU9PT11bmRlZmluZWQ/alF1ZXJ5LmNzcyhlbGVtLHR5cGUsZXh0cmEpOmpRdWVyeS5zdHlsZShlbGVtLHR5cGUsdmFsdWUsZXh0cmEpfSx0eXBlLGNoYWluYWJsZT9tYXJnaW46dW5kZWZpbmVkLGNoYWluYWJsZSl9fSl9KTtqUXVlcnkuZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKF9pLHR5cGUpe2pRdWVyeS5mblt0eXBlXT1mdW5jdGlvbihmbil7cmV0dXJuIHRoaXMub24odHlwZSxmbil9fSk7alF1ZXJ5LmZuLmV4dGVuZCh7YmluZDpmdW5jdGlvbih0eXBlcyxkYXRhLGZuKXtyZXR1cm4gdGhpcy5vbih0eXBlcyxudWxsLGRhdGEsZm4pfSx1bmJpbmQ6ZnVuY3Rpb24odHlwZXMsZm4pe3JldHVybiB0aGlzLm9mZih0eXBlcyxudWxsLGZuKX0sZGVsZWdhdGU6ZnVuY3Rpb24oc2VsZWN0b3IsdHlwZXMsZGF0YSxmbil7cmV0dXJuIHRoaXMub24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oc2VsZWN0b3IsdHlwZXMsZm4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPT09MT90aGlzLm9mZihzZWxlY3RvciwiKioiKTp0aGlzLm9mZih0eXBlcyxzZWxlY3Rvcnx8IioqIixmbil9LGhvdmVyOmZ1bmN0aW9uKGZuT3Zlcixmbk91dCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihmbk92ZXIpLm1vdXNlbGVhdmUoZm5PdXR8fGZuT3Zlcil9fSk7alF1ZXJ5LmVhY2goKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayAiKyJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSAiKyJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Iikuc3BsaXQoIiAiKSxmdW5jdGlvbihfaSxuYW1lKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oZGF0YSxmbil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKG5hbWUsbnVsbCxkYXRhLGZuKTp0aGlzLnRyaWdnZXIobmFtZSl9fSk7dmFyIHJ0cmltPS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZztqUXVlcnkucHJveHk9ZnVuY3Rpb24oZm4sY29udGV4dCl7dmFyIHRtcCxhcmdzLHByb3h5O2lmKHR5cGVvZiBjb250ZXh0PT09InN0cmluZyIpe3RtcD1mbltjb250ZXh0XTtjb250ZXh0PWZuO2ZuPXRtcH0KaWYoIWlzRnVuY3Rpb24oZm4pKXtyZXR1cm4gdW5kZWZpbmVkfQphcmdzPXNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3Byb3h5PWZ1bmN0aW9uKCl7cmV0dXJuIGZuLmFwcGx5KGNvbnRleHR8fHRoaXMsYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSl9O3Byb3h5Lmd1aWQ9Zm4uZ3VpZD1mbi5ndWlkfHxqUXVlcnkuZ3VpZCsrO3JldHVybiBwcm94eX07alF1ZXJ5LmhvbGRSZWFkeT1mdW5jdGlvbihob2xkKXtpZihob2xkKXtqUXVlcnkucmVhZHlXYWl0Kyt9ZWxzZXtqUXVlcnkucmVhZHkoITApfX07alF1ZXJ5LmlzQXJyYXk9QXJyYXkuaXNBcnJheTtqUXVlcnkucGFyc2VKU09OPUpTT04ucGFyc2U7alF1ZXJ5Lm5vZGVOYW1lPW5vZGVOYW1lO2pRdWVyeS5pc0Z1bmN0aW9uPWlzRnVuY3Rpb247alF1ZXJ5LmlzV2luZG93PWlzV2luZG93O2pRdWVyeS5jYW1lbENhc2U9Y2FtZWxDYXNlO2pRdWVyeS50eXBlPXRvVHlwZTtqUXVlcnkubm93PURhdGUubm93O2pRdWVyeS5pc051bWVyaWM9ZnVuY3Rpb24ob2JqKXt2YXIgdHlwZT1qUXVlcnkudHlwZShvYmopO3JldHVybih0eXBlPT09Im51bWJlciJ8fHR5cGU9PT0ic3RyaW5nIikmJiFpc05hTihvYmotcGFyc2VGbG9hdChvYmopKX07alF1ZXJ5LnRyaW09ZnVuY3Rpb24odGV4dCl7cmV0dXJuIHRleHQ9PW51bGw/IiI6KHRleHQrIiIpLnJlcGxhY2UocnRyaW0sIiIpfTtpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeX0pfQp2YXIgX2pRdWVyeT13aW5kb3cualF1ZXJ5LF8kPXdpbmRvdy4kO2pRdWVyeS5ub0NvbmZsaWN0PWZ1bmN0aW9uKGRlZXApe2lmKHdpbmRvdy4kPT09alF1ZXJ5KXt3aW5kb3cuJD1fJH0KaWYoZGVlcCYmd2luZG93LmpRdWVyeT09PWpRdWVyeSl7d2luZG93LmpRdWVyeT1falF1ZXJ5fQpyZXR1cm4galF1ZXJ5fTtpZih0eXBlb2Ygbm9HbG9iYWw9PT0idW5kZWZpbmVkIil7d2luZG93LmpRdWVyeT13aW5kb3cuJD1qUXVlcnl9CnJldHVybiBqUXVlcnl9KTtqUXVlcnkubm9Db25mbGljdCgpOwovKiEKICogalF1ZXJ5IE1pZ3JhdGUgLSB2My4zLjIgLSAyMDIwLTExLTE4VDA4OjI5WgogKiBDb3B5cmlnaHQgT3BlbkpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKi8KKGZ1bmN0aW9uKGZhY3RvcnkpeyJ1c2Ugc3RyaWN0IjtpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFsianF1ZXJ5Il0sZnVuY3Rpb24oalF1ZXJ5KXtyZXR1cm4gZmFjdG9yeShqUXVlcnksd2luZG93KX0pfWVsc2UgaWYodHlwZW9mIG1vZHVsZT09PSJvYmplY3QiJiZtb2R1bGUuZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZmFjdG9yeShyZXF1aXJlKCJqcXVlcnkiKSx3aW5kb3cpfWVsc2V7ZmFjdG9yeShqUXVlcnksd2luZG93KX19KShmdW5jdGlvbihqUXVlcnksd2luZG93KXsidXNlIHN0cmljdCI7alF1ZXJ5Lm1pZ3JhdGVWZXJzaW9uPSIzLjMuMiI7ZnVuY3Rpb24gY29tcGFyZVZlcnNpb25zKHYxLHYyKXt2YXIgaSxyVmVyc2lvblBhcnRzPS9eKFxkKylcLihcZCspXC4oXGQrKS8sdjFwPXJWZXJzaW9uUGFydHMuZXhlYyh2MSl8fFtdLHYycD1yVmVyc2lvblBhcnRzLmV4ZWModjIpfHxbXTtmb3IoaT0xO2k8PTM7aSsrKXtpZigrdjFwW2ldPit2MnBbaV0pe3JldHVybiAxfQppZigrdjFwW2ldPCt2MnBbaV0pe3JldHVybi0xfX0KcmV0dXJuIDB9CmZ1bmN0aW9uIGpRdWVyeVZlcnNpb25TaW5jZSh2ZXJzaW9uKXtyZXR1cm4gY29tcGFyZVZlcnNpb25zKGpRdWVyeS5mbi5qcXVlcnksdmVyc2lvbik+PTB9KGZ1bmN0aW9uKCl7aWYoIXdpbmRvdy5jb25zb2xlfHwhd2luZG93LmNvbnNvbGUubG9nKXtyZXR1cm59CmlmKCFqUXVlcnl8fCFqUXVlcnlWZXJzaW9uU2luY2UoIjMuMC4wIikpe3dpbmRvdy5jb25zb2xlLmxvZygiSlFNSUdSQVRFOiBqUXVlcnkgMy4wLjArIFJFUVVJUkVEIil9CmlmKGpRdWVyeS5taWdyYXRlV2FybmluZ3Mpe3dpbmRvdy5jb25zb2xlLmxvZygiSlFNSUdSQVRFOiBNaWdyYXRlIHBsdWdpbiBsb2FkZWQgbXVsdGlwbGUgdGltZXMiKX0Kd2luZG93LmNvbnNvbGUubG9nKCJKUU1JR1JBVEU6IE1pZ3JhdGUgaXMgaW5zdGFsbGVkIisoalF1ZXJ5Lm1pZ3JhdGVNdXRlPyIiOiIgd2l0aCBsb2dnaW5nIGFjdGl2ZSIpKyIsIHZlcnNpb24gIitqUXVlcnkubWlncmF0ZVZlcnNpb24pfSkoKTt2YXIgd2FybmVkQWJvdXQ9e307alF1ZXJ5Lm1pZ3JhdGVEZWR1cGxpY2F0ZVdhcm5pbmdzPSEwO2pRdWVyeS5taWdyYXRlV2FybmluZ3M9W107aWYoalF1ZXJ5Lm1pZ3JhdGVUcmFjZT09PXVuZGVmaW5lZCl7alF1ZXJ5Lm1pZ3JhdGVUcmFjZT0hMH0KalF1ZXJ5Lm1pZ3JhdGVSZXNldD1mdW5jdGlvbigpe3dhcm5lZEFib3V0PXt9O2pRdWVyeS5taWdyYXRlV2FybmluZ3MubGVuZ3RoPTB9O2Z1bmN0aW9uIG1pZ3JhdGVXYXJuKG1zZyl7dmFyIGNvbnNvbGU9d2luZG93LmNvbnNvbGU7aWYoIWpRdWVyeS5taWdyYXRlRGVkdXBsaWNhdGVXYXJuaW5nc3x8IXdhcm5lZEFib3V0W21zZ10pe3dhcm5lZEFib3V0W21zZ109ITA7alF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncy5wdXNoKG1zZyk7aWYoY29uc29sZSYmY29uc29sZS53YXJuJiYhalF1ZXJ5Lm1pZ3JhdGVNdXRlKXtjb25zb2xlLndhcm4oIkpRTUlHUkFURTogIittc2cpO2lmKGpRdWVyeS5taWdyYXRlVHJhY2UmJmNvbnNvbGUudHJhY2Upe2NvbnNvbGUudHJhY2UoKX19fX0KZnVuY3Rpb24gbWlncmF0ZVdhcm5Qcm9wKG9iaixwcm9wLHZhbHVlLG1zZyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaixwcm9wLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXttaWdyYXRlV2Fybihtc2cpO3JldHVybiB2YWx1ZX0sc2V0OmZ1bmN0aW9uKG5ld1ZhbHVlKXttaWdyYXRlV2Fybihtc2cpO3ZhbHVlPW5ld1ZhbHVlfX0pfQpmdW5jdGlvbiBtaWdyYXRlV2FybkZ1bmMob2JqLHByb3AsbmV3RnVuYyxtc2cpe29ialtwcm9wXT1mdW5jdGlvbigpe21pZ3JhdGVXYXJuKG1zZyk7cmV0dXJuIG5ld0Z1bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0KaWYod2luZG93LmRvY3VtZW50LmNvbXBhdE1vZGU9PT0iQmFja0NvbXBhdCIpe21pZ3JhdGVXYXJuKCJqUXVlcnkgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBRdWlya3MgTW9kZSIpfQp2YXIgZmluZFByb3AsY2xhc3MydHlwZT17fSxvbGRJbml0PWpRdWVyeS5mbi5pbml0LG9sZEZpbmQ9alF1ZXJ5LmZpbmQscmF0dHJIYXNoVGVzdD0vXFsoXHMqWy1cd10rXHMqKShbfnxeJCpdPz0pXHMqKFstXHcjXSo/I1stXHcjXSopXHMqXF0vLHJhdHRySGFzaEdsb2I9L1xbKFxzKlstXHddK1xzKikoW358XiQqXT89KVxzKihbLVx3I10qPyNbLVx3I10qKVxzKlxdL2cscnRyaW09L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nO2pRdWVyeS5mbi5pbml0PWZ1bmN0aW9uKGFyZzEpe3ZhciBhcmdzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7aWYodHlwZW9mIGFyZzE9PT0ic3RyaW5nIiYmYXJnMT09PSIjIil7bWlncmF0ZVdhcm4oImpRdWVyeSggJyMnICkgaXMgbm90IGEgdmFsaWQgc2VsZWN0b3IiKTthcmdzWzBdPVtdfQpyZXR1cm4gb2xkSW5pdC5hcHBseSh0aGlzLGFyZ3MpfTtqUXVlcnkuZm4uaW5pdC5wcm90b3R5cGU9alF1ZXJ5LmZuO2pRdWVyeS5maW5kPWZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2lmKHR5cGVvZiBzZWxlY3Rvcj09PSJzdHJpbmciJiZyYXR0ckhhc2hUZXN0LnRlc3Qoc2VsZWN0b3IpKXt0cnl7d2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpfWNhdGNoKGVycjEpe3NlbGVjdG9yPXNlbGVjdG9yLnJlcGxhY2UocmF0dHJIYXNoR2xvYixmdW5jdGlvbihfLGF0dHIsb3AsdmFsdWUpe3JldHVybiJbIithdHRyK29wKyJcIiIrdmFsdWUrIlwiXSJ9KTt0cnl7d2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO21pZ3JhdGVXYXJuKCJBdHRyaWJ1dGUgc2VsZWN0b3Igd2l0aCAnIycgbXVzdCBiZSBxdW90ZWQ6ICIrYXJnc1swXSk7YXJnc1swXT1zZWxlY3Rvcn1jYXRjaChlcnIyKXttaWdyYXRlV2FybigiQXR0cmlidXRlIHNlbGVjdG9yIHdpdGggJyMnIHdhcyBub3QgZml4ZWQ6ICIrYXJnc1swXSl9fX0KcmV0dXJuIG9sZEZpbmQuYXBwbHkodGhpcyxhcmdzKX07Zm9yKGZpbmRQcm9wIGluIG9sZEZpbmQpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvbGRGaW5kLGZpbmRQcm9wKSl7alF1ZXJ5LmZpbmRbZmluZFByb3BdPW9sZEZpbmRbZmluZFByb3BdfX0KbWlncmF0ZVdhcm5GdW5jKGpRdWVyeS5mbiwic2l6ZSIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LCJqUXVlcnkuZm4uc2l6ZSgpIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQ7IHVzZSB0aGUgLmxlbmd0aCBwcm9wZXJ0eSIpO21pZ3JhdGVXYXJuRnVuYyhqUXVlcnksInBhcnNlSlNPTiIsZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5wYXJzZS5hcHBseShudWxsLGFyZ3VtZW50cyl9LCJqUXVlcnkucGFyc2VKU09OIGlzIGRlcHJlY2F0ZWQ7IHVzZSBKU09OLnBhcnNlIik7bWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwiaG9sZFJlYWR5IixqUXVlcnkuaG9sZFJlYWR5LCJqUXVlcnkuaG9sZFJlYWR5IGlzIGRlcHJlY2F0ZWQiKTttaWdyYXRlV2FybkZ1bmMoalF1ZXJ5LCJ1bmlxdWUiLGpRdWVyeS51bmlxdWVTb3J0LCJqUXVlcnkudW5pcXVlIGlzIGRlcHJlY2F0ZWQ7IHVzZSBqUXVlcnkudW5pcXVlU29ydCIpO21pZ3JhdGVXYXJuUHJvcChqUXVlcnkuZXhwciwiZmlsdGVycyIsalF1ZXJ5LmV4cHIucHNldWRvcywialF1ZXJ5LmV4cHIuZmlsdGVycyBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LmV4cHIucHNldWRvcyIpO21pZ3JhdGVXYXJuUHJvcChqUXVlcnkuZXhwciwiOiIsalF1ZXJ5LmV4cHIucHNldWRvcywialF1ZXJ5LmV4cHJbJzonXSBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LmV4cHIucHNldWRvcyIpO2lmKGpRdWVyeVZlcnNpb25TaW5jZSgiMy4xLjEiKSl7bWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwidHJpbSIsZnVuY3Rpb24odGV4dCl7cmV0dXJuIHRleHQ9PW51bGw/IiI6KHRleHQrIiIpLnJlcGxhY2UocnRyaW0sIiIpfSwialF1ZXJ5LnRyaW0gaXMgZGVwcmVjYXRlZDsgdXNlIFN0cmluZy5wcm90b3R5cGUudHJpbSIpfQppZihqUXVlcnlWZXJzaW9uU2luY2UoIjMuMi4wIikpe21pZ3JhdGVXYXJuRnVuYyhqUXVlcnksIm5vZGVOYW1lIixmdW5jdGlvbihlbGVtLG5hbWUpe3JldHVybiBlbGVtLm5vZGVOYW1lJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1uYW1lLnRvTG93ZXJDYXNlKCl9LCJqUXVlcnkubm9kZU5hbWUgaXMgZGVwcmVjYXRlZCIpO21pZ3JhdGVXYXJuRnVuYyhqUXVlcnksImlzQXJyYXkiLEFycmF5LmlzQXJyYXksImpRdWVyeS5pc0FycmF5IGlzIGRlcHJlY2F0ZWQ7IHVzZSBBcnJheS5pc0FycmF5Iil9CmlmKGpRdWVyeVZlcnNpb25TaW5jZSgiMy4zLjAiKSl7bWlncmF0ZVdhcm5GdW5jKGpRdWVyeSwiaXNOdW1lcmljIixmdW5jdGlvbihvYmope3ZhciB0eXBlPXR5cGVvZiBvYmo7cmV0dXJuKHR5cGU9PT0ibnVtYmVyInx8dHlwZT09PSJzdHJpbmciKSYmIWlzTmFOKG9iai1wYXJzZUZsb2F0KG9iaikpfSwialF1ZXJ5LmlzTnVtZXJpYygpIGlzIGRlcHJlY2F0ZWQiKTtqUXVlcnkuZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2wiLnNwbGl0KCIgIiksZnVuY3Rpb24oXyxuYW1lKXtjbGFzczJ0eXBlWyJbb2JqZWN0ICIrbmFtZSsiXSJdPW5hbWUudG9Mb3dlckNhc2UoKX0pO21pZ3JhdGVXYXJuRnVuYyhqUXVlcnksInR5cGUiLGZ1bmN0aW9uKG9iail7aWYob2JqPT1udWxsKXtyZXR1cm4gb2JqKyIifQpyZXR1cm4gdHlwZW9mIG9iaj09PSJvYmplY3QifHx0eXBlb2Ygb2JqPT09ImZ1bmN0aW9uIj9jbGFzczJ0eXBlW09iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopXXx8Im9iamVjdCI6dHlwZW9mIG9ian0sImpRdWVyeS50eXBlIGlzIGRlcHJlY2F0ZWQiKTttaWdyYXRlV2FybkZ1bmMoalF1ZXJ5LCJpc0Z1bmN0aW9uIixmdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqPT09ImZ1bmN0aW9uIn0sImpRdWVyeS5pc0Z1bmN0aW9uKCkgaXMgZGVwcmVjYXRlZCIpO21pZ3JhdGVXYXJuRnVuYyhqUXVlcnksImlzV2luZG93IixmdW5jdGlvbihvYmope3JldHVybiBvYmohPW51bGwmJm9iaj09PW9iai53aW5kb3d9LCJqUXVlcnkuaXNXaW5kb3coKSBpcyBkZXByZWNhdGVkIil9CmlmKGpRdWVyeS5hamF4KXt2YXIgb2xkQWpheD1qUXVlcnkuYWpheCxyanNvbnA9Lyg9KVw/KD89JnwkKXxcP1w/LztqUXVlcnkuYWpheD1mdW5jdGlvbigpe3ZhciBqUVhIUj1vbGRBamF4LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihqUVhIUi5wcm9taXNlKXttaWdyYXRlV2FybkZ1bmMoalFYSFIsInN1Y2Nlc3MiLGpRWEhSLmRvbmUsImpRWEhSLnN1Y2Nlc3MgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZCIpO21pZ3JhdGVXYXJuRnVuYyhqUVhIUiwiZXJyb3IiLGpRWEhSLmZhaWwsImpRWEhSLmVycm9yIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQiKTttaWdyYXRlV2FybkZ1bmMoalFYSFIsImNvbXBsZXRlIixqUVhIUi5hbHdheXMsImpRWEhSLmNvbXBsZXRlIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQiKX0KcmV0dXJuIGpRWEhSfTtpZighalF1ZXJ5VmVyc2lvblNpbmNlKCI0LjAuMCIpKXtqUXVlcnkuYWpheFByZWZpbHRlcigiK2pzb24iLGZ1bmN0aW9uKHMpe2lmKHMuanNvbnAhPT0hMSYmKHJqc29ucC50ZXN0KHMudXJsKXx8dHlwZW9mIHMuZGF0YT09PSJzdHJpbmciJiYocy5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpPT09MCYmcmpzb25wLnRlc3Qocy5kYXRhKSkpe21pZ3JhdGVXYXJuKCJKU09OLXRvLUpTT05QIGF1dG8tcHJvbW90aW9uIGlzIGRlcHJlY2F0ZWQiKX19KX19CnZhciBvbGRSZW1vdmVBdHRyPWpRdWVyeS5mbi5yZW1vdmVBdHRyLG9sZFRvZ2dsZUNsYXNzPWpRdWVyeS5mbi50b2dnbGVDbGFzcyxybWF0Y2hOb25TcGFjZT0vXFMrL2c7alF1ZXJ5LmZuLnJlbW92ZUF0dHI9ZnVuY3Rpb24obmFtZSl7dmFyIHNlbGY9dGhpcztqUXVlcnkuZWFjaChuYW1lLm1hdGNoKHJtYXRjaE5vblNwYWNlKSxmdW5jdGlvbihfaSxhdHRyKXtpZihqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoYXR0cikpe21pZ3JhdGVXYXJuKCJqUXVlcnkuZm4ucmVtb3ZlQXR0ciBubyBsb25nZXIgc2V0cyBib29sZWFuIHByb3BlcnRpZXM6ICIrYXR0cik7c2VsZi5wcm9wKGF0dHIsITEpfX0pO3JldHVybiBvbGRSZW1vdmVBdHRyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07alF1ZXJ5LmZuLnRvZ2dsZUNsYXNzPWZ1bmN0aW9uKHN0YXRlKXtpZihzdGF0ZSE9PXVuZGVmaW5lZCYmdHlwZW9mIHN0YXRlIT09ImJvb2xlYW4iKXtyZXR1cm4gb2xkVG9nZ2xlQ2xhc3MuYXBwbHkodGhpcyxhcmd1bWVudHMpfQptaWdyYXRlV2FybigialF1ZXJ5LmZuLnRvZ2dsZUNsYXNzKCBib29sZWFuICkgaXMgZGVwcmVjYXRlZCIpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgY2xhc3NOYW1lPXRoaXMuZ2V0QXR0cmlidXRlJiZ0aGlzLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiI7aWYoY2xhc3NOYW1lKXtqUXVlcnkuZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIixjbGFzc05hbWUpfQppZih0aGlzLnNldEF0dHJpYnV0ZSl7dGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixjbGFzc05hbWV8fHN0YXRlPT09ITE/IiI6alF1ZXJ5LmRhdGEodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIil9fSl9O2Z1bmN0aW9uIGNhbWVsQ2FzZShzdHJpbmcpe3JldHVybiBzdHJpbmcucmVwbGFjZSgvLShbYS16XSkvZyxmdW5jdGlvbihfLGxldHRlcil7cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpfSl9CnZhciBvbGRGbkNzcyxpbnRlcm5hbFN3YXBDYWxsPSExLHJhbHBoYVN0YXJ0PS9eW2Etel0vLHJhdXRvUHg9L14oPzpCb3JkZXIoPzpUb3B8UmlnaHR8Qm90dG9tfExlZnQpPyg/OldpZHRofCl8KD86TWFyZ2lufFBhZGRpbmcpPyg/OlRvcHxSaWdodHxCb3R0b218TGVmdCk/fCg/Ok1pbnxNYXgpPyg/OldpZHRofEhlaWdodCkpJC87aWYoalF1ZXJ5LnN3YXApe2pRdWVyeS5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiLCJyZWxpYWJsZU1hcmdpblJpZ2h0Il0sZnVuY3Rpb24oXyxuYW1lKXt2YXIgb2xkSG9vaz1qUXVlcnkuY3NzSG9va3NbbmFtZV0mJmpRdWVyeS5jc3NIb29rc1tuYW1lXS5nZXQ7aWYob2xkSG9vayl7alF1ZXJ5LmNzc0hvb2tzW25hbWVdLmdldD1mdW5jdGlvbigpe3ZhciByZXQ7aW50ZXJuYWxTd2FwQ2FsbD0hMDtyZXQ9b2xkSG9vay5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aW50ZXJuYWxTd2FwQ2FsbD0hMTtyZXR1cm4gcmV0fX19KX0KalF1ZXJ5LnN3YXA9ZnVuY3Rpb24oZWxlbSxvcHRpb25zLGNhbGxiYWNrLGFyZ3Mpe3ZhciByZXQsbmFtZSxvbGQ9e307aWYoIWludGVybmFsU3dhcENhbGwpe21pZ3JhdGVXYXJuKCJqUXVlcnkuc3dhcCgpIGlzIHVuZG9jdW1lbnRlZCBhbmQgZGVwcmVjYXRlZCIpfQpmb3IobmFtZSBpbiBvcHRpb25zKXtvbGRbbmFtZV09ZWxlbS5zdHlsZVtuYW1lXTtlbGVtLnN0eWxlW25hbWVdPW9wdGlvbnNbbmFtZV19CnJldD1jYWxsYmFjay5hcHBseShlbGVtLGFyZ3N8fFtdKTtmb3IobmFtZSBpbiBvcHRpb25zKXtlbGVtLnN0eWxlW25hbWVdPW9sZFtuYW1lXX0KcmV0dXJuIHJldH07aWYoalF1ZXJ5VmVyc2lvblNpbmNlKCIzLjQuMCIpJiZ0eXBlb2YgUHJveHkhPT0idW5kZWZpbmVkIil7alF1ZXJ5LmNzc1Byb3BzPW5ldyBQcm94eShqUXVlcnkuY3NzUHJvcHN8fHt9LHtzZXQ6ZnVuY3Rpb24oKXttaWdyYXRlV2FybigiSlFNSUdSQVRFOiBqUXVlcnkuY3NzUHJvcHMgaXMgZGVwcmVjYXRlZCIpO3JldHVybiBSZWZsZWN0LnNldC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSl9CmlmKCFqUXVlcnkuY3NzTnVtYmVyKXtqUXVlcnkuY3NzTnVtYmVyPXt9fQpmdW5jdGlvbiBpc0F1dG9QeChwcm9wKXtyZXR1cm4gcmFscGhhU3RhcnQudGVzdChwcm9wKSYmcmF1dG9QeC50ZXN0KHByb3BbMF0udG9VcHBlckNhc2UoKStwcm9wLnNsaWNlKDEpKX0Kb2xkRm5Dc3M9alF1ZXJ5LmZuLmNzcztqUXVlcnkuZm4uY3NzPWZ1bmN0aW9uKG5hbWUsdmFsdWUpe3ZhciBjYW1lbE5hbWUsb3JpZ1RoaXM9dGhpcztpZihuYW1lJiZ0eXBlb2YgbmFtZT09PSJvYmplY3QiJiYhQXJyYXkuaXNBcnJheShuYW1lKSl7alF1ZXJ5LmVhY2gobmFtZSxmdW5jdGlvbihuLHYpe2pRdWVyeS5mbi5jc3MuY2FsbChvcmlnVGhpcyxuLHYpfSk7cmV0dXJuIHRoaXN9CmlmKHR5cGVvZiB2YWx1ZT09PSJudW1iZXIiKXtjYW1lbE5hbWU9Y2FtZWxDYXNlKG5hbWUpO2lmKCFpc0F1dG9QeChjYW1lbE5hbWUpJiYhalF1ZXJ5LmNzc051bWJlcltjYW1lbE5hbWVdKXttaWdyYXRlV2FybigiTnVtYmVyLXR5cGVkIHZhbHVlcyBhcmUgZGVwcmVjYXRlZCBmb3IgalF1ZXJ5LmZuLmNzcyggXCIiK25hbWUrIlwiLCB2YWx1ZSApIil9fQpyZXR1cm4gb2xkRm5Dc3MuYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgb2xkRGF0YT1qUXVlcnkuZGF0YTtqUXVlcnkuZGF0YT1mdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUpe3ZhciBjdXJEYXRhLHNhbWVLZXlzLGtleTtpZihuYW1lJiZ0eXBlb2YgbmFtZT09PSJvYmplY3QiJiZhcmd1bWVudHMubGVuZ3RoPT09Mil7Y3VyRGF0YT1qUXVlcnkuaGFzRGF0YShlbGVtKSYmb2xkRGF0YS5jYWxsKHRoaXMsZWxlbSk7c2FtZUtleXM9e307Zm9yKGtleSBpbiBuYW1lKXtpZihrZXkhPT1jYW1lbENhc2Uoa2V5KSl7bWlncmF0ZVdhcm4oImpRdWVyeS5kYXRhKCkgYWx3YXlzIHNldHMvZ2V0cyBjYW1lbENhc2VkIG5hbWVzOiAiK2tleSk7Y3VyRGF0YVtrZXldPW5hbWVba2V5XX1lbHNle3NhbWVLZXlzW2tleV09bmFtZVtrZXldfX0Kb2xkRGF0YS5jYWxsKHRoaXMsZWxlbSxzYW1lS2V5cyk7cmV0dXJuIG5hbWV9CmlmKG5hbWUmJnR5cGVvZiBuYW1lPT09InN0cmluZyImJm5hbWUhPT1jYW1lbENhc2UobmFtZSkpe2N1ckRhdGE9alF1ZXJ5Lmhhc0RhdGEoZWxlbSkmJm9sZERhdGEuY2FsbCh0aGlzLGVsZW0pO2lmKGN1ckRhdGEmJm5hbWUgaW4gY3VyRGF0YSl7bWlncmF0ZVdhcm4oImpRdWVyeS5kYXRhKCkgYWx3YXlzIHNldHMvZ2V0cyBjYW1lbENhc2VkIG5hbWVzOiAiK25hbWUpO2lmKGFyZ3VtZW50cy5sZW5ndGg+Mil7Y3VyRGF0YVtuYW1lXT12YWx1ZX0KcmV0dXJuIGN1ckRhdGFbbmFtZV19fQpyZXR1cm4gb2xkRGF0YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2lmKGpRdWVyeS5meCl7dmFyIGludGVydmFsVmFsdWUsaW50ZXJ2YWxNc2csb2xkVHdlZW5SdW49alF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW4sbGluZWFyRWFzaW5nPWZ1bmN0aW9uKHBjdCl7cmV0dXJuIHBjdH07alF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtpZihqUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXS5sZW5ndGg+MSl7bWlncmF0ZVdhcm4oIidqUXVlcnkuZWFzaW5nLiIrdGhpcy5lYXNpbmcudG9TdHJpbmcoKSsiJyBzaG91bGQgdXNlIG9ubHkgb25lIGFyZ3VtZW50Iik7alF1ZXJ5LmVhc2luZ1t0aGlzLmVhc2luZ109bGluZWFyRWFzaW5nfQpvbGRUd2VlblJ1bi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2ludGVydmFsVmFsdWU9alF1ZXJ5LmZ4LmludGVydmFsfHwxMztpbnRlcnZhbE1zZz0ialF1ZXJ5LmZ4LmludGVydmFsIGlzIGRlcHJlY2F0ZWQiO2lmKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShqUXVlcnkuZngsImludGVydmFsIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7aWYoIXdpbmRvdy5kb2N1bWVudC5oaWRkZW4pe21pZ3JhdGVXYXJuKGludGVydmFsTXNnKX0KcmV0dXJuIGludGVydmFsVmFsdWV9LHNldDpmdW5jdGlvbihuZXdWYWx1ZSl7bWlncmF0ZVdhcm4oaW50ZXJ2YWxNc2cpO2ludGVydmFsVmFsdWU9bmV3VmFsdWV9fSl9fQp2YXIgb2xkTG9hZD1qUXVlcnkuZm4ubG9hZCxvbGRFdmVudEFkZD1qUXVlcnkuZXZlbnQuYWRkLG9yaWdpbmFsRml4PWpRdWVyeS5ldmVudC5maXg7alF1ZXJ5LmV2ZW50LnByb3BzPVtdO2pRdWVyeS5ldmVudC5maXhIb29rcz17fTttaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV2ZW50LnByb3BzLCJjb25jYXQiLGpRdWVyeS5ldmVudC5wcm9wcy5jb25jYXQsImpRdWVyeS5ldmVudC5wcm9wcy5jb25jYXQoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkIik7alF1ZXJ5LmV2ZW50LmZpeD1mdW5jdGlvbihvcmlnaW5hbEV2ZW50KXt2YXIgZXZlbnQsdHlwZT1vcmlnaW5hbEV2ZW50LnR5cGUsZml4SG9vaz10aGlzLmZpeEhvb2tzW3R5cGVdLHByb3BzPWpRdWVyeS5ldmVudC5wcm9wcztpZihwcm9wcy5sZW5ndGgpe21pZ3JhdGVXYXJuKCJqUXVlcnkuZXZlbnQucHJvcHMgYXJlIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQ6ICIrcHJvcHMuam9pbigpKTt3aGlsZShwcm9wcy5sZW5ndGgpe2pRdWVyeS5ldmVudC5hZGRQcm9wKHByb3BzLnBvcCgpKX19CmlmKGZpeEhvb2smJiFmaXhIb29rLl9taWdyYXRlZF8pe2ZpeEhvb2suX21pZ3JhdGVkXz0hMDttaWdyYXRlV2FybigialF1ZXJ5LmV2ZW50LmZpeEhvb2tzIGFyZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkOiAiK3R5cGUpO2lmKChwcm9wcz1maXhIb29rLnByb3BzKSYmcHJvcHMubGVuZ3RoKXt3aGlsZShwcm9wcy5sZW5ndGgpe2pRdWVyeS5ldmVudC5hZGRQcm9wKHByb3BzLnBvcCgpKX19fQpldmVudD1vcmlnaW5hbEZpeC5jYWxsKHRoaXMsb3JpZ2luYWxFdmVudCk7cmV0dXJuIGZpeEhvb2smJmZpeEhvb2suZmlsdGVyP2ZpeEhvb2suZmlsdGVyKGV2ZW50LG9yaWdpbmFsRXZlbnQpOmV2ZW50fTtqUXVlcnkuZXZlbnQuYWRkPWZ1bmN0aW9uKGVsZW0sdHlwZXMpe2lmKGVsZW09PT13aW5kb3cmJnR5cGVzPT09ImxvYWQiJiZ3aW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpe21pZ3JhdGVXYXJuKCJqUXVlcnkod2luZG93KS5vbignbG9hZCcuLi4pIGNhbGxlZCBhZnRlciBsb2FkIGV2ZW50IG9jY3VycmVkIil9CnJldHVybiBvbGRFdmVudEFkZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2pRdWVyeS5lYWNoKFsibG9hZCIsInVubG9hZCIsImVycm9yIl0sZnVuY3Rpb24oXyxuYW1lKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oKXt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7aWYobmFtZT09PSJsb2FkIiYmdHlwZW9mIGFyZ3NbMF09PT0ic3RyaW5nIil7cmV0dXJuIG9sZExvYWQuYXBwbHkodGhpcyxhcmdzKX0KbWlncmF0ZVdhcm4oImpRdWVyeS5mbi4iK25hbWUrIigpIGlzIGRlcHJlY2F0ZWQiKTthcmdzLnNwbGljZSgwLDAsbmFtZSk7aWYoYXJndW1lbnRzLmxlbmd0aCl7cmV0dXJuIHRoaXMub24uYXBwbHkodGhpcyxhcmdzKX0KdGhpcy50cmlnZ2VySGFuZGxlci5hcHBseSh0aGlzLGFyZ3MpO3JldHVybiB0aGlzfX0pO2pRdWVyeS5lYWNoKCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgIisibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgIisiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudSIpLnNwbGl0KCIgIiksZnVuY3Rpb24oX2ksbmFtZSl7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKGRhdGEsZm4pe21pZ3JhdGVXYXJuKCJqUXVlcnkuZm4uIituYW1lKyIoKSBldmVudCBzaG9ydGhhbmQgaXMgZGVwcmVjYXRlZCIpO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihuYW1lLG51bGwsZGF0YSxmbik6dGhpcy50cmlnZ2VyKG5hbWUpfX0pO2pRdWVyeShmdW5jdGlvbigpe2pRdWVyeSh3aW5kb3cuZG9jdW1lbnQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpfSk7alF1ZXJ5LmV2ZW50LnNwZWNpYWwucmVhZHk9e3NldHVwOmZ1bmN0aW9uKCl7aWYodGhpcz09PXdpbmRvdy5kb2N1bWVudCl7bWlncmF0ZVdhcm4oIidyZWFkeScgZXZlbnQgaXMgZGVwcmVjYXRlZCIpfX19O2pRdWVyeS5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24odHlwZXMsZGF0YSxmbil7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi5iaW5kKCkgaXMgZGVwcmVjYXRlZCIpO3JldHVybiB0aGlzLm9uKHR5cGVzLG51bGwsZGF0YSxmbil9LHVuYmluZDpmdW5jdGlvbih0eXBlcyxmbil7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi51bmJpbmQoKSBpcyBkZXByZWNhdGVkIik7cmV0dXJuIHRoaXMub2ZmKHR5cGVzLG51bGwsZm4pfSxkZWxlZ2F0ZTpmdW5jdGlvbihzZWxlY3Rvcix0eXBlcyxkYXRhLGZuKXttaWdyYXRlV2FybigialF1ZXJ5LmZuLmRlbGVnYXRlKCkgaXMgZGVwcmVjYXRlZCIpO3JldHVybiB0aGlzLm9uKHR5cGVzLHNlbGVjdG9yLGRhdGEsZm4pfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKHNlbGVjdG9yLHR5cGVzLGZuKXttaWdyYXRlV2FybigialF1ZXJ5LmZuLnVuZGVsZWdhdGUoKSBpcyBkZXByZWNhdGVkIik7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg9PT0xP3RoaXMub2ZmKHNlbGVjdG9yLCIqKiIpOnRoaXMub2ZmKHR5cGVzLHNlbGVjdG9yfHwiKioiLGZuKX0saG92ZXI6ZnVuY3Rpb24oZm5PdmVyLGZuT3V0KXttaWdyYXRlV2FybigialF1ZXJ5LmZuLmhvdmVyKCkgaXMgZGVwcmVjYXRlZCIpO3JldHVybiB0aGlzLm9uKCJtb3VzZWVudGVyIixmbk92ZXIpLm9uKCJtb3VzZWxlYXZlIixmbk91dHx8Zm5PdmVyKX19KTt2YXIgcnhodG1sVGFnPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKVtePl0qKVwvPi9naSxvcmlnSHRtbFByZWZpbHRlcj1qUXVlcnkuaHRtbFByZWZpbHRlcixtYWtlTWFya3VwPWZ1bmN0aW9uKGh0bWwpe3ZhciBkb2M9d2luZG93LmRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7ZG9jLmJvZHkuaW5uZXJIVE1MPWh0bWw7cmV0dXJuIGRvYy5ib2R5JiZkb2MuYm9keS5pbm5lckhUTUx9LHdhcm5JZkNoYW5nZWQ9ZnVuY3Rpb24oaHRtbCl7dmFyIGNoYW5nZWQ9aHRtbC5yZXBsYWNlKHJ4aHRtbFRhZywiPCQxPjwvJDI+Iik7aWYoY2hhbmdlZCE9PWh0bWwmJm1ha2VNYXJrdXAoaHRtbCkhPT1tYWtlTWFya3VwKGNoYW5nZWQpKXttaWdyYXRlV2FybigiSFRNTCB0YWdzIG11c3QgYmUgcHJvcGVybHkgbmVzdGVkIGFuZCBjbG9zZWQ6ICIraHRtbCl9fTtqUXVlcnkuVU5TQUZFX3Jlc3RvcmVMZWdhY3lIdG1sUHJlZmlsdGVyPWZ1bmN0aW9uKCl7alF1ZXJ5Lmh0bWxQcmVmaWx0ZXI9ZnVuY3Rpb24oaHRtbCl7d2FybklmQ2hhbmdlZChodG1sKTtyZXR1cm4gaHRtbC5yZXBsYWNlKHJ4aHRtbFRhZywiPCQxPjwvJDI+Iil9fTtqUXVlcnkuaHRtbFByZWZpbHRlcj1mdW5jdGlvbihodG1sKXt3YXJuSWZDaGFuZ2VkKGh0bWwpO3JldHVybiBvcmlnSHRtbFByZWZpbHRlcihodG1sKX07dmFyIG9sZE9mZnNldD1qUXVlcnkuZm4ub2Zmc2V0O2pRdWVyeS5mbi5vZmZzZXQ9ZnVuY3Rpb24oKXt2YXIgZWxlbT10aGlzWzBdO2lmKGVsZW0mJighZWxlbS5ub2RlVHlwZXx8IWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSl7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi5vZmZzZXQoKSByZXF1aXJlcyBhIHZhbGlkIERPTSBlbGVtZW50Iik7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dGhpczp1bmRlZmluZWR9CnJldHVybiBvbGRPZmZzZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtpZihqUXVlcnkuYWpheCl7dmFyIG9sZFBhcmFtPWpRdWVyeS5wYXJhbTtqUXVlcnkucGFyYW09ZnVuY3Rpb24oZGF0YSx0cmFkaXRpb25hbCl7dmFyIGFqYXhUcmFkaXRpb25hbD1qUXVlcnkuYWpheFNldHRpbmdzJiZqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO2lmKHRyYWRpdGlvbmFsPT09dW5kZWZpbmVkJiZhamF4VHJhZGl0aW9uYWwpe21pZ3JhdGVXYXJuKCJqUXVlcnkucGFyYW0oKSBubyBsb25nZXIgdXNlcyBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsIik7dHJhZGl0aW9uYWw9YWpheFRyYWRpdGlvbmFsfQpyZXR1cm4gb2xkUGFyYW0uY2FsbCh0aGlzLGRhdGEsdHJhZGl0aW9uYWwpfX0KdmFyIG9sZFNlbGY9alF1ZXJ5LmZuLmFuZFNlbGZ8fGpRdWVyeS5mbi5hZGRCYWNrO2pRdWVyeS5mbi5hbmRTZWxmPWZ1bmN0aW9uKCl7bWlncmF0ZVdhcm4oImpRdWVyeS5mbi5hbmRTZWxmKCkgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZCwgdXNlIGpRdWVyeS5mbi5hZGRCYWNrKCkiKTtyZXR1cm4gb2xkU2VsZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2lmKGpRdWVyeS5EZWZlcnJlZCl7dmFyIG9sZERlZmVycmVkPWpRdWVyeS5EZWZlcnJlZCx0dXBsZXM9W1sicmVzb2x2ZSIsImRvbmUiLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksalF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksalF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIixqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSxqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKV1dO2pRdWVyeS5EZWZlcnJlZD1mdW5jdGlvbihmdW5jKXt2YXIgZGVmZXJyZWQ9b2xkRGVmZXJyZWQoKSxwcm9taXNlPWRlZmVycmVkLnByb21pc2UoKTtkZWZlcnJlZC5waXBlPXByb21pc2UucGlwZT1mdW5jdGlvbigpe3ZhciBmbnM9YXJndW1lbnRzO21pZ3JhdGVXYXJuKCJkZWZlcnJlZC5waXBlKCkgaXMgZGVwcmVjYXRlZCIpO3JldHVybiBqUXVlcnkuRGVmZXJyZWQoZnVuY3Rpb24obmV3RGVmZXIpe2pRdWVyeS5lYWNoKHR1cGxlcyxmdW5jdGlvbihpLHR1cGxlKXt2YXIgZm49dHlwZW9mIGZuc1tpXT09PSJmdW5jdGlvbiImJmZuc1tpXTtkZWZlcnJlZFt0dXBsZVsxXV0oZnVuY3Rpb24oKXt2YXIgcmV0dXJuZWQ9Zm4mJmZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihyZXR1cm5lZCYmdHlwZW9mIHJldHVybmVkLnByb21pc2U9PT0iZnVuY3Rpb24iKXtyZXR1cm5lZC5wcm9taXNlKCkuZG9uZShuZXdEZWZlci5yZXNvbHZlKS5mYWlsKG5ld0RlZmVyLnJlamVjdCkucHJvZ3Jlc3MobmV3RGVmZXIubm90aWZ5KX1lbHNle25ld0RlZmVyW3R1cGxlWzBdKyJXaXRoIl0odGhpcz09PXByb21pc2U/bmV3RGVmZXIucHJvbWlzZSgpOnRoaXMsZm4/W3JldHVybmVkXTphcmd1bWVudHMpfX0pfSk7Zm5zPW51bGx9KS5wcm9taXNlKCl9O2lmKGZ1bmMpe2Z1bmMuY2FsbChkZWZlcnJlZCxkZWZlcnJlZCl9CnJldHVybiBkZWZlcnJlZH07alF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2s9b2xkRGVmZXJyZWQuZXhjZXB0aW9uSG9va30KcmV0dXJuIGpRdWVyeX0pO3dpbmRvdy5hZGRDb21tZW50PShmdW5jdGlvbih3aW5kb3cpe3ZhciBkb2N1bWVudD13aW5kb3cuZG9jdW1lbnQ7dmFyIGNvbmZpZz17Y29tbWVudFJlcGx5Q2xhc3M6J2NvbW1lbnQtcmVwbHktbGluaycsY29tbWVudFJlcGx5VGl0bGVJZDoncmVwbHktdGl0bGUnLGNhbmNlbFJlcGx5SWQ6J2NhbmNlbC1jb21tZW50LXJlcGx5LWxpbmsnLGNvbW1lbnRGb3JtSWQ6J2NvbW1lbnRmb3JtJyx0ZW1wb3JhcnlGb3JtSWQ6J3dwLXRlbXAtZm9ybS1kaXYnLHBhcmVudElkRmllbGRJZDonY29tbWVudF9wYXJlbnQnLHBvc3RJZEZpZWxkSWQ6J2NvbW1lbnRfcG9zdF9JRCd9O3ZhciBNdXRhdGlvbk9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyfHx3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk1vek11dGF0aW9uT2JzZXJ2ZXI7dmFyIGN1dHNUaGVNdXN0YXJkPSdxdWVyeVNlbGVjdG9yJ2luIGRvY3VtZW50JiYnYWRkRXZlbnRMaXN0ZW5lcidpbiB3aW5kb3c7dmFyIHN1cHBvcnRzRGF0YXNldD0hIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kYXRhc2V0O3ZhciBjYW5jZWxFbGVtZW50O3ZhciBjb21tZW50Rm9ybUVsZW1lbnQ7dmFyIHJlc3BvbmRFbGVtZW50O3ZhciBvYnNlcnZlcjtpZihjdXRzVGhlTXVzdGFyZCYmZG9jdW1lbnQucmVhZHlTdGF0ZSE9PSdsb2FkaW5nJyl7cmVhZHkoKX1lbHNlIGlmKGN1dHNUaGVNdXN0YXJkKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcscmVhZHksITEpfQpmdW5jdGlvbiByZWFkeSgpe2luaXQoKTtvYnNlcnZlQ2hhbmdlcygpfQpmdW5jdGlvbiBpbml0KGNvbnRleHQpe2lmKCFjdXRzVGhlTXVzdGFyZCl7cmV0dXJufQpjYW5jZWxFbGVtZW50PWdldEVsZW1lbnRCeUlkKGNvbmZpZy5jYW5jZWxSZXBseUlkKTtjb21tZW50Rm9ybUVsZW1lbnQ9Z2V0RWxlbWVudEJ5SWQoY29uZmlnLmNvbW1lbnRGb3JtSWQpO2lmKCFjYW5jZWxFbGVtZW50KXtyZXR1cm59CmNhbmNlbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsY2FuY2VsRXZlbnQpO2NhbmNlbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNhbmNlbEV2ZW50KTt2YXIgc3VibWl0Rm9ybUhhbmRsZXI9ZnVuY3Rpb24oZSl7aWYoKGUubWV0YUtleXx8ZS5jdHJsS2V5KSYmZS5rZXlDb2RlPT09MTMpe2NvbW1lbnRGb3JtRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJyxzdWJtaXRGb3JtSGFuZGxlcik7ZS5wcmV2ZW50RGVmYXVsdCgpO2NvbW1lbnRGb3JtRWxlbWVudC5zdWJtaXQuY2xpY2soKTtyZXR1cm4hMX19O2lmKGNvbW1lbnRGb3JtRWxlbWVudCl7Y29tbWVudEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHN1Ym1pdEZvcm1IYW5kbGVyKX0KdmFyIGxpbmtzPXJlcGx5TGlua3MoY29udGV4dCk7dmFyIGVsZW1lbnQ7Zm9yKHZhciBpPTAsbD1saW5rcy5sZW5ndGg7aTxsO2krKyl7ZWxlbWVudD1saW5rc1tpXTtlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLGNsaWNrRXZlbnQpO2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNsaWNrRXZlbnQpfX0KZnVuY3Rpb24gcmVwbHlMaW5rcyhjb250ZXh0KXt2YXIgc2VsZWN0b3JDbGFzcz1jb25maWcuY29tbWVudFJlcGx5Q2xhc3M7dmFyIGFsbFJlcGx5TGlua3M7aWYoIWNvbnRleHR8fCFjb250ZXh0LmNoaWxkTm9kZXMpe2NvbnRleHQ9ZG9jdW1lbnR9CmlmKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe2FsbFJlcGx5TGlua3M9Y29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHNlbGVjdG9yQ2xhc3MpfWVsc2V7YWxsUmVwbHlMaW5rcz1jb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nK3NlbGVjdG9yQ2xhc3MpfQpyZXR1cm4gYWxsUmVwbHlMaW5rc30KZnVuY3Rpb24gY2FuY2VsRXZlbnQoZXZlbnQpe3ZhciBjYW5jZWxMaW5rPXRoaXM7dmFyIHRlbXBvcmFyeUZvcm1JZD1jb25maWcudGVtcG9yYXJ5Rm9ybUlkO3ZhciB0ZW1wb3JhcnlFbGVtZW50PWdldEVsZW1lbnRCeUlkKHRlbXBvcmFyeUZvcm1JZCk7aWYoIXRlbXBvcmFyeUVsZW1lbnR8fCFyZXNwb25kRWxlbWVudCl7cmV0dXJufQpnZXRFbGVtZW50QnlJZChjb25maWcucGFyZW50SWRGaWVsZElkKS52YWx1ZT0nMCc7dmFyIGhlYWRpbmdUZXh0PXRlbXBvcmFyeUVsZW1lbnQudGV4dENvbnRlbnQ7dGVtcG9yYXJ5RWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChyZXNwb25kRWxlbWVudCx0ZW1wb3JhcnlFbGVtZW50KTtjYW5jZWxMaW5rLnN0eWxlLmRpc3BsYXk9J25vbmUnO3ZhciByZXBseUhlYWRpbmdFbGVtZW50PWdldEVsZW1lbnRCeUlkKGNvbmZpZy5jb21tZW50UmVwbHlUaXRsZUlkKTt2YXIgcmVwbHlIZWFkaW5nVGV4dE5vZGU9cmVwbHlIZWFkaW5nRWxlbWVudCYmcmVwbHlIZWFkaW5nRWxlbWVudC5maXJzdENoaWxkO3ZhciByZXBseUxpbmtUb1BhcmVudD1yZXBseUhlYWRpbmdUZXh0Tm9kZSYmcmVwbHlIZWFkaW5nVGV4dE5vZGUubmV4dFNpYmxpbmc7aWYocmVwbHlIZWFkaW5nVGV4dE5vZGUmJnJlcGx5SGVhZGluZ1RleHROb2RlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUmJmhlYWRpbmdUZXh0KXtpZihyZXBseUxpbmtUb1BhcmVudCYmJ0EnPT09cmVwbHlMaW5rVG9QYXJlbnQubm9kZU5hbWUmJnJlcGx5TGlua1RvUGFyZW50LmlkIT09Y29uZmlnLmNhbmNlbFJlcGx5SWQpe3JlcGx5TGlua1RvUGFyZW50LnN0eWxlLmRpc3BsYXk9Jyd9CnJlcGx5SGVhZGluZ1RleHROb2RlLnRleHRDb250ZW50PWhlYWRpbmdUZXh0fQpldmVudC5wcmV2ZW50RGVmYXVsdCgpfQpmdW5jdGlvbiBjbGlja0V2ZW50KGV2ZW50KXt2YXIgcmVwbHlOb2RlPWdldEVsZW1lbnRCeUlkKGNvbmZpZy5jb21tZW50UmVwbHlUaXRsZUlkKTt2YXIgZGVmYXVsdFJlcGx5SGVhZGluZz1yZXBseU5vZGUmJnJlcGx5Tm9kZS5maXJzdENoaWxkLnRleHRDb250ZW50O3ZhciByZXBseUxpbms9dGhpcyxjb21tSWQ9Z2V0RGF0YUF0dHJpYnV0ZShyZXBseUxpbmssJ2JlbG93ZWxlbWVudCcpLHBhcmVudElkPWdldERhdGFBdHRyaWJ1dGUocmVwbHlMaW5rLCdjb21tZW50aWQnKSxyZXNwb25kSWQ9Z2V0RGF0YUF0dHJpYnV0ZShyZXBseUxpbmssJ3Jlc3BvbmRlbGVtZW50JykscG9zdElkPWdldERhdGFBdHRyaWJ1dGUocmVwbHlMaW5rLCdwb3N0aWQnKSxyZXBseVRvPWdldERhdGFBdHRyaWJ1dGUocmVwbHlMaW5rLCdyZXBseXRvJyl8fGRlZmF1bHRSZXBseUhlYWRpbmcsZm9sbG93O2lmKCFjb21tSWR8fCFwYXJlbnRJZHx8IXJlc3BvbmRJZHx8IXBvc3RJZCl7cmV0dXJufQpmb2xsb3c9d2luZG93LmFkZENvbW1lbnQubW92ZUZvcm0oY29tbUlkLHBhcmVudElkLHJlc3BvbmRJZCxwb3N0SWQscmVwbHlUbyk7aWYoITE9PT1mb2xsb3cpe2V2ZW50LnByZXZlbnREZWZhdWx0KCl9fQpmdW5jdGlvbiBvYnNlcnZlQ2hhbmdlcygpe2lmKCFNdXRhdGlvbk9ic2VydmVyKXtyZXR1cm59CnZhciBvYnNlcnZlck9wdGlvbnM9e2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfTtvYnNlcnZlcj1uZXcgTXV0YXRpb25PYnNlcnZlcihoYW5kbGVDaGFuZ2VzKTtvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksb2JzZXJ2ZXJPcHRpb25zKX0KZnVuY3Rpb24gaGFuZGxlQ2hhbmdlcyhtdXRhdGlvblJlY29yZHMpe3ZhciBpPW11dGF0aW9uUmVjb3Jkcy5sZW5ndGg7d2hpbGUoaS0tKXtpZihtdXRhdGlvblJlY29yZHNbaV0uYWRkZWROb2Rlcy5sZW5ndGgpe2luaXQoKTtyZXR1cm59fX0KZnVuY3Rpb24gZ2V0RGF0YUF0dHJpYnV0ZShlbGVtZW50LGF0dHJpYnV0ZSl7aWYoc3VwcG9ydHNEYXRhc2V0KXtyZXR1cm4gZWxlbWVudC5kYXRhc2V0W2F0dHJpYnV0ZV19ZWxzZXtyZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtJythdHRyaWJ1dGUpfX0KZnVuY3Rpb24gZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKXtyZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKX0KZnVuY3Rpb24gbW92ZUZvcm0oYWRkQmVsb3dJZCxjb21tZW50SWQscmVzcG9uZElkLHBvc3RJZCxyZXBseVRvKXt2YXIgYWRkQmVsb3dFbGVtZW50PWdldEVsZW1lbnRCeUlkKGFkZEJlbG93SWQpO3Jlc3BvbmRFbGVtZW50PWdldEVsZW1lbnRCeUlkKHJlc3BvbmRJZCk7dmFyIHBhcmVudElkRmllbGQ9Z2V0RWxlbWVudEJ5SWQoY29uZmlnLnBhcmVudElkRmllbGRJZCk7dmFyIHBvc3RJZEZpZWxkPWdldEVsZW1lbnRCeUlkKGNvbmZpZy5wb3N0SWRGaWVsZElkKTt2YXIgZWxlbWVudCxjc3NIaWRkZW4sc3R5bGU7dmFyIHJlcGx5SGVhZGluZz1nZXRFbGVtZW50QnlJZChjb25maWcuY29tbWVudFJlcGx5VGl0bGVJZCk7dmFyIHJlcGx5SGVhZGluZ1RleHROb2RlPXJlcGx5SGVhZGluZyYmcmVwbHlIZWFkaW5nLmZpcnN0Q2hpbGQ7dmFyIHJlcGx5TGlua1RvUGFyZW50PXJlcGx5SGVhZGluZ1RleHROb2RlJiZyZXBseUhlYWRpbmdUZXh0Tm9kZS5uZXh0U2libGluZztpZighYWRkQmVsb3dFbGVtZW50fHwhcmVzcG9uZEVsZW1lbnR8fCFwYXJlbnRJZEZpZWxkKXtyZXR1cm59CmlmKCd1bmRlZmluZWQnPT09dHlwZW9mIHJlcGx5VG8pe3JlcGx5VG89cmVwbHlIZWFkaW5nVGV4dE5vZGUmJnJlcGx5SGVhZGluZ1RleHROb2RlLnRleHRDb250ZW50fQphZGRQbGFjZUhvbGRlcihyZXNwb25kRWxlbWVudCk7aWYocG9zdElkJiZwb3N0SWRGaWVsZCl7cG9zdElkRmllbGQudmFsdWU9cG9zdElkfQpwYXJlbnRJZEZpZWxkLnZhbHVlPWNvbW1lbnRJZDtjYW5jZWxFbGVtZW50LnN0eWxlLmRpc3BsYXk9Jyc7YWRkQmVsb3dFbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHJlc3BvbmRFbGVtZW50LGFkZEJlbG93RWxlbWVudC5uZXh0U2libGluZyk7aWYocmVwbHlIZWFkaW5nVGV4dE5vZGUmJnJlcGx5SGVhZGluZ1RleHROb2RlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREUpe2lmKHJlcGx5TGlua1RvUGFyZW50JiYnQSc9PT1yZXBseUxpbmtUb1BhcmVudC5ub2RlTmFtZSYmcmVwbHlMaW5rVG9QYXJlbnQuaWQhPT1jb25maWcuY2FuY2VsUmVwbHlJZCl7cmVwbHlMaW5rVG9QYXJlbnQuc3R5bGUuZGlzcGxheT0nbm9uZSd9CnJlcGx5SGVhZGluZ1RleHROb2RlLnRleHRDb250ZW50PXJlcGx5VG99CmNhbmNlbEVsZW1lbnQub25jbGljaz1mdW5jdGlvbigpe3JldHVybiExfTt0cnl7Zm9yKHZhciBpPTA7aTxjb21tZW50Rm9ybUVsZW1lbnQuZWxlbWVudHMubGVuZ3RoO2krKyl7ZWxlbWVudD1jb21tZW50Rm9ybUVsZW1lbnQuZWxlbWVudHNbaV07Y3NzSGlkZGVuPSExO2lmKCdnZXRDb21wdXRlZFN0eWxlJ2luIHdpbmRvdyl7c3R5bGU9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCl9ZWxzZSBpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlKXtzdHlsZT1lbGVtZW50LmN1cnJlbnRTdHlsZX0KaWYoKGVsZW1lbnQub2Zmc2V0V2lkdGg8PTAmJmVsZW1lbnQub2Zmc2V0SGVpZ2h0PD0wKXx8c3R5bGUudmlzaWJpbGl0eT09PSdoaWRkZW4nKXtjc3NIaWRkZW49ITB9CmlmKCdoaWRkZW4nPT09ZWxlbWVudC50eXBlfHxlbGVtZW50LmRpc2FibGVkfHxjc3NIaWRkZW4pe2NvbnRpbnVlfQplbGVtZW50LmZvY3VzKCk7YnJlYWt9fWNhdGNoKGUpe30KcmV0dXJuITF9CmZ1bmN0aW9uIGFkZFBsYWNlSG9sZGVyKHJlc3BvbmRFbGVtZW50KXt2YXIgdGVtcG9yYXJ5Rm9ybUlkPWNvbmZpZy50ZW1wb3JhcnlGb3JtSWQ7dmFyIHRlbXBvcmFyeUVsZW1lbnQ9Z2V0RWxlbWVudEJ5SWQodGVtcG9yYXJ5Rm9ybUlkKTt2YXIgcmVwbHlFbGVtZW50PWdldEVsZW1lbnRCeUlkKGNvbmZpZy5jb21tZW50UmVwbHlUaXRsZUlkKTt2YXIgaW5pdGlhbEhlYWRpbmdUZXh0PXJlcGx5RWxlbWVudD9yZXBseUVsZW1lbnQuZmlyc3RDaGlsZC50ZXh0Q29udGVudDonJztpZih0ZW1wb3JhcnlFbGVtZW50KXtyZXR1cm59CnRlbXBvcmFyeUVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7dGVtcG9yYXJ5RWxlbWVudC5pZD10ZW1wb3JhcnlGb3JtSWQ7dGVtcG9yYXJ5RWxlbWVudC5zdHlsZS5kaXNwbGF5PSdub25lJzt0ZW1wb3JhcnlFbGVtZW50LnRleHRDb250ZW50PWluaXRpYWxIZWFkaW5nVGV4dDtyZXNwb25kRWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ZW1wb3JhcnlFbGVtZW50LHJlc3BvbmRFbGVtZW50KX0KcmV0dXJue2luaXQ6aW5pdCxtb3ZlRm9ybTptb3ZlRm9ybX19KSh3aW5kb3cp";s:12:"dependencies";a:0:{}}